\begin{lemma} \label{lemma-restrict-direct-image-open} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Given an \'etale morphism $V \to Y$, set $U = V \times_Y X$ and denote $g : U \to V$ the projection morphism. Then $(Rf_*E)|_V = Rg_*(E|_U)$ for $E$ in $D(\mathcal{O}_X)$. \end{lemma} 
\begin{definition} \label{definition-supported-on} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $E$ be an object of $D(\mathcal{O}_X)$. Let $T \subset |X|$ be a closed subset. We say $E$ is {\it supported on $T$} if the cohomology sheaves $H^i(E)$ are supported on $T$. \end{definition} 
\begin{lemma} \label{lemma-epsilon-flat} The morphism $\epsilon$ of (\ref{equation-epsilon}) is a flat morphism of ringed sites. In particular the functor $\epsilon^* : \textit{Mod}(\mathcal{O}_X) \to \textit{Mod}(\mathcal{O}_\etale)$ is exact. Moreover, if $\epsilon^*\mathcal{F} = 0$, then $\mathcal{F} = 0$. \end{lemma} 
\begin{lemma} \label{lemma-derived-quasi-coherent-small-etale-site} Let $X$ be a scheme. The functor $\epsilon^* : D_\QCoh(\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_\etale)$ defined above is an equivalence. \end{lemma} 
\begin{definition} \label{definition-derived-quasi-coherent} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. The {\it derived category of $\mathcal{O}_X$-modules with quasi-coherent cohomology sheaves} is denoted $D_\QCoh(\mathcal{O}_X)$. \end{definition} 
\begin{lemma} \label{lemma-check-quasi-coherence-on-covering} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $E$ be an object of $D(\mathcal{O}_X)$. The following are equivalent \begin{enumerate} \item $E$ is in $D_\QCoh(\mathcal{O}_X)$, \item for every \'etale morphism $\varphi : U \to X$ where $U$ is an affine scheme $\varphi^*E$ is an object of $D_\QCoh(\mathcal{O}_U)$, \item for every \'etale morphism $\varphi : U \to X$ where $U$ is a scheme $\varphi^*E$ is an object of $D_\QCoh(\mathcal{O}_U)$, \item there exists a surjective \'etale morphism $\varphi : U \to X$ where $U$ is a scheme such that $\varphi^*E$ is an object of $D_\QCoh(\mathcal{O}_U)$, and \item there exists a surjective \'etale morphism of algebraic spaces $f : Y \to X$ such that $Lf^*E$ is an object of $D_\QCoh(\mathcal{O}_Y)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherence-direct-sums} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Then $D_\QCoh(\mathcal{O}_X)$ has direct sums. \end{lemma} 
\begin{lemma} \label{lemma-Rlim-quasi-coherent} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $(K_n)$ be an inverse system of $D_\QCoh(\mathcal{O}_X)$ with derived limit $K = R\lim K_n$ in $D(\mathcal{O}_X)$. Assume $H^q(K_{n + 1}) \to H^q(K_n)$ is surjective for all $q \in \mathbf{Z}$ and $n \geq 1$. Then \begin{enumerate} \item $H^q(K) = \lim H^q(K_n)$, \item $R\lim H^q(K_n) = \lim H^q(K_n)$, and \item for every affine open $U \subset X$ we have $H^p(U, \lim H^q(K_n)) = 0$ for $p > 0$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherence-pullback} Let $S$ be a scheme. Let $f : Y \to X$ be a morphism of algebraic spaces over $S$. The functor $Lf^*$ sends $D_\QCoh(\mathcal{O}_X)$ into $D_\QCoh(\mathcal{O}_Y)$. \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherence-tensor-product} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. For objects $K, L$ of $D_\QCoh(\mathcal{O}_X)$ the derived tensor product $K \otimes^\mathbf{L} L$ is in $D_\QCoh(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-nice-K-injective} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $E$ be an object of $D_\QCoh(\mathcal{O}_X)$. Then the map $E \to R\lim \tau_{\geq -n}E$ of Derived Categories, Remark \ref{derived-remark-map-into-derived-limit-truncations} is an isomorphism\footnote{In particular, $E$ has a K-injective representative, see Derived Categories, Lemma \ref{derived-lemma-difficulty-K-injectives}.}. \end{lemma} 
\begin{lemma} \label{lemma-application-nice-K-injective} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $F : \textit{Mod}(\mathcal{O}_X) \to \textit{Ab}$ be a functor and $N \geq 0$ an integer. Assume that \begin{enumerate} \item $F$ is left exact, \item $F$ commutes with countable direct products, \item $R^pF(\mathcal{F}) = 0$ for all $p \geq N$ and $\mathcal{F}$ quasi-coherent. \end{enumerate} Then for $E \in D_\QCoh(\mathcal{O}_X)$ \begin{enumerate} \item $H^i(RF(\tau_{\leq a}E) \to H^i(RF(E))$ is an isomorphism for $i \leq a$, \item $H^i(RF(E)) \to H^i(RF(\tau_{\geq b - N + 1}E))$ is an isomorphism for $i \geq b$, \item if $H^i(E) = 0$ for $i \not \in [a, b]$ for some $-\infty \leq a \leq b \leq \infty$, then $H^i(RF(E)) = 0$ for $i \not \in [a, b + N - 1]$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherence-direct-image} Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-separated and quasi-compact morphism of algebraic spaces over $S$. \begin{enumerate} \item The functor $Rf_*$ sends $D_\QCoh(\mathcal{O}_X)$ into $D_\QCoh(\mathcal{O}_Y)$. \item If $Y$ is quasi-compact, there exists an integer $N = N(X, Y, f)$ such that for an object $E$ of $D_\QCoh(\mathcal{O}_X)$ with $H^m(E) = 0$ for $m > 0$ we have $H^m(Rf_*E) = 0$ for $m \geq N$. \item In fact, if $Y$ is quasi-compact we can find $N = N(X, Y, f)$ such that for every morphism of algebraic spaces $Y' \to Y$ the same conclusion holds for the functor $R(f')_*$ where $f' : X' \to Y'$ is the base change of $f$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherence-pushforward-direct-sums} Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-separated and quasi-compact morphism of algebraic spaces over $S$. Then $Rf_* : D_\QCoh(\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_Y)$ commutes with direct sums. \end{lemma} 
\begin{lemma} \label{lemma-affine-morphism} Let $S$ be a scheme. Let $f : X \to Y$ be an affine morphism of algebraic spaces over $S$. Then $Rf_* : D_\QCoh(\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_Y)$ reflects isomorphisms. \end{lemma} 
\begin{lemma} \label{lemma-affine-morphism-pull-push} Let $S$ be a scheme. Let $f : X \to Y$ be an affine morphism of algebraic spaces over $S$. For $E$ in $D_\QCoh(\mathcal{O}_Y)$ we have $Rf_* Lf^* E = E \otimes^\mathbf{L}_{\mathcal{O}_Y} f_*\mathcal{O}_X$. \end{lemma} 
\begin{lemma} \label{lemma-closed-proper-over-base} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$ which is locally of finite type. Let $T \subset |X|$ be a closed subset. The following are equivalent \begin{enumerate} \item the morphism $Z \to Y$ is proper if $Z$ is the reduced induced algebraic space structure on $T$ (Properties of Spaces, Definition \ref{spaces-properties-definition-reduced-induced-space}), \item for some closed subspace $Z \subset X$ with $|Z| = T$ the morphism $Z \to Y$ is proper, and \item for any closed subspace $Z \subset X$ with $|Z| = T$ the morphism $Z \to Y$ is proper. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-proper-over-base} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$ which is locally of finite type. Let $T \subset |X|$ be a closed subset. We say {\it $T$ is proper over $Y$} if the equivalent conditions of Lemma \ref{lemma-closed-proper-over-base} are satisfied. \end{definition} 
\begin{lemma} \label{lemma-closed-closed-proper-over-base} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$ which is locally of finite type. Let $T' \subset T \subset |X|$ be closed subsets. If $T$ is proper over $Y$, then the same is true for $T'$. \end{lemma} 
\begin{lemma} \label{lemma-base-change-closed-proper-over-base} Let $S$ be a scheme. Consider a cartesian diagram of algebraic spaces over $S$ $$ \xymatrix{ X' \ar[d]_{f'} \ar[r]_{g'} & X \ar[d]^f \\ Y' \ar[r]^g & Y } $$ with $f$ locally of finite type. If $T$ is a closed subset of $|X|$ proper over $Y$, then $|g'|^{-1}(T)$ is a closed subset of $|X'|$ proper over $Y'$. \end{lemma} 
\begin{lemma} \label{lemma-functoriality-closed-proper-over-base} Let $S$ be a scheme. Let $B$ be an algebraic space over $S$. Let $f : X \to Y$ be a morphism of algebraic spaces which are locally of finite type over $B$. \begin{enumerate} \item If $Y$ is separated over $B$ and $T \subset |X|$ is a closed subset proper over $B$, then $|f|(T)$ is a closed subset of $|Y|$ proper over $B$. \item If $f$ is universally closed and $T \subset |X|$ is a closed subset proper over $B$, then $|f|(T)$ is a closed subset of $Y$ proper over $B$. \item If $f$ is proper and $T \subset |Y|$ is a closed subset proper over $B$, then $|f|^{-1}(T)$ is a closed subset of $|X|$ proper over $B$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-union-closed-proper-over-base} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$ which is locally of finite type. Let $T_i \subset |X|$, $i = 1, \ldots, n$ be closed subsets. If $T_i$, $i = 1, \ldots, n$ are proper over $Y$, then the same is true for $T_1 \cup \ldots \cup T_n$. \end{lemma} 
\begin{lemma} \label{lemma-module-support-proper-over-base} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$ which is locally of finite type. Let $\mathcal{F}$ be a finite type, quasi-coherent $\mathcal{O}_X$-module. The following are equivalent \begin{enumerate} \item the support of $\mathcal{F}$ is proper over $Y$, \item the scheme theoretic support of $\mathcal{F}$ (Morphisms of Spaces, Definition \ref{spaces-morphisms-definition-scheme-theoretic-support}) is proper over $Y$, and \item there exists a closed subspace $Z \subset X$ and a finite type, quasi-coherent $\mathcal{O}_Z$-module $\mathcal{G}$ such that (a) $Z \to Y$ is proper, and (b) $(Z \to X)_*\mathcal{G} = \mathcal{F}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-base-change-module-support-proper-over-base} Let $S$ be a scheme. Consider a cartesian diagram of algebraic spaces over $S$ $$ \xymatrix{ X' \ar[d]_{f'} \ar[r]_{g'} & X \ar[d]^f \\ Y' \ar[r]^g & Y } $$ with $f$ locally of finite type. Let $\mathcal{F}$ be a finite type, quasi-coherent $\mathcal{O}_X$-module. If the support of $\mathcal{F}$ is proper over $Y$, then the support of $(g')^*\mathcal{F}$ is proper over $Y'$. \end{lemma} 
\begin{lemma} \label{lemma-cat-module-support-proper-over-base} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$ which is locally of finite type. Let $\mathcal{F}$, $\mathcal{G}$ be finite type, quasi-coherent $\mathcal{O}_X$-module. \begin{enumerate} \item If the supports of $\mathcal{F}$, $\mathcal{G}$ are proper over $Y$, then the same is true for $\mathcal{F} \oplus \mathcal{G}$, for any extension of $\mathcal{G}$ by $\mathcal{F}$, for $\Im(u)$ and $\Coker(u)$ given any $\mathcal{O}_X$-module map $u : \mathcal{F} \to \mathcal{G}$, and for any quasi-coherent quotient of $\mathcal{F}$ or $\mathcal{G}$. \item If $Y$ is locally Noetherian, then the category of coherent $\mathcal{O}_X$-modules with support proper over $Y$ is a Serre subcategory (Homology, Definition \ref{homology-definition-serre-subcategory}) of the abelian category of coherent $\mathcal{O}_X$-modules. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-support-proper-over-base-pushforward} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume $f$ is locally of finite type and $Y$ locally Noetherian. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module with support proper over $Y$. Then $R^pf_*\mathcal{F}$ is a coherent $\mathcal{O}_Y$-module for all $p \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-direct-image-coherent} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume $f$ is locally of finite type and $Y$ is Noetherian. Let $E$ be an object of $D^b_{\textit{Coh}}(\mathcal{O}_X)$ such that the support of $H^i(E)$ is proper over $Y$ for all $i$. Then $Rf_*E$ is an object of $D^b_{\textit{Coh}}(\mathcal{O}_Y)$. \end{lemma} 
\begin{lemma} \label{lemma-direct-image-coherent-bdd-below} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume $f$ is locally of finite type and $Y$ is Noetherian. Let $E$ be an object of $D^+_{\textit{Coh}}(\mathcal{O}_X)$ such that the support of $H^i(E)$ is proper over $S$ for all $i$. Then $Rf_*E$ is an object of $D^+_{\textit{Coh}}(\mathcal{O}_Y)$. \end{lemma} 
\begin{lemma} \label{lemma-coherent-internal-hom} Let $S$ be a scheme. Let $X$ be a locally Noetherian algebraic space over $S$. If $L$ is in $D^+_{\textit{Coh}}(\mathcal{O}_X)$ and $K$ in $D^-_{\textit{Coh}}(\mathcal{O}_X)$, then $R\SheafHom(K, L)$ is in $D^+_{\textit{Coh}}(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-ext-finite} Let $A$ be a Noetherian ring. Let $X$ be a proper algebraic space over $A$. For $L$ in $D^+_{\textit{Coh}}(\mathcal{O}_X)$ and $K$ in $D^-_{\textit{Coh}}(\mathcal{O}_X)$, the $A$-modules $\Ext_{\mathcal{O}_X}^n(K, L)$ are finite. \end{lemma} 
\begin{definition} \label{definition-elementary-distinguished-square} Let $S$ be a scheme. A commutative diagram $$ \xymatrix{ U \times_W V \ar[r] \ar[d] & V \ar[d]^f \\ U \ar[r]^j & W } $$ of algebraic spaces over $S$ is called an {\it elementary distinguished square} if \begin{enumerate} \item $U$ is an open subspace of $W$ and $j$ is the inclusion morphism, \item $f$ is \'etale, and \item setting $T = W \setminus U$ (with reduced induced subspace structure) the morphism $f^{-1}(T) \to T$ is an isomorphism. \end{enumerate} We will indicate this by saying: ``Let $(U \subset W, f : V \to W)$ be an elementary distinguished square.'' \end{definition} 
\begin{lemma} \label{lemma-make-more-elementary-distinguished-squares} Let $S$ be a scheme. Let $(U \subset W, f : V \to W)$ be an elementary distinguished square of algebraic spaces over $S$. \begin{enumerate} \item If $V' \subset V$ and $U \subset U' \subset W$ are open subspaces and $W' = U' \cup f(V')$ then $(U' \subset W', f|_{V'} : V' \to W')$ is an elementary distinguished square. \item If $p : W' \to W$ is a morphism of algebraic spaces, then $(p^{-1}(U) \subset W', V \times_W W' \to W')$ is an elementary distinguished square. \item If $S' \to S$ is a morphism of schemes, then $(S' \times_S U \subset S' \times_S W, S' \times_S V \to S' \times_S W)$ is an elementary distinguished square. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-induction-principle} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $P$ be a property of the quasi-compact and quasi-separated objects of $X_{spaces, \etale}$. Assume that \begin{enumerate} \item $P$ holds for every affine object of $X_{spaces, \etale}$, \item for every elementary distinguished square $(U \subset W, f : V \to W)$ such that \begin{enumerate} \item $W$ is a quasi-compact and quasi-separated object of $X_{spaces, \etale}$, \item $U$ is quasi-compact, \item $V$ is affine, and \item $P$ holds for $U$, $V$, and $U \times_W V$, \end{enumerate} then $P$ holds for $W$. \end{enumerate} Then $P$ holds for every quasi-compact and quasi-separated object of $X_{spaces, \etale}$ and in particular for $X$. \end{lemma} 
\begin{lemma} \label{lemma-induction-principle-separated} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $\mathcal{B} \subset \Ob(X_{spaces, \etale})$. Let $P$ be a property of the elements of $\mathcal{B}$. Assume that \begin{enumerate} \item every $W \in \mathcal{B}$ is quasi-compact and quasi-separated, \item if $W \in \mathcal{B}$ and $U \subset W$ is quasi-compact open, then $U \in \mathcal{B}$, \item if $V \in \Ob(X_{spaces, \etale})$ is affine, then (a) $V \in \mathcal{B}$ and (b) $P$ holds for $V$, \item for every elementary distinguished square $(U \subset W, f : V \to W)$ such that \begin{enumerate} \item $W \in \mathcal{B}$, \item $U$ is quasi-compact, \item $V$ is affine, and \item $P$ holds for $U$, $V$, and $U \times_W V$, \end{enumerate} then $P$ holds for $W$. \end{enumerate} Then $P$ holds for every $W \in \mathcal{B}$. \end{lemma} 
\begin{lemma} \label{lemma-induction-principle-enlarge} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $W \subset X$ be a quasi-compact open subspace. Let $P$ be a property of quasi-compact open subspaces of $X$. Assume that \begin{enumerate} \item $P$ holds for $W$, and \item for every elementary distinguished square $(W_1 \subset W_2, f : V \to W_2)$ where  such that \begin{enumerate} \item $W_1$, $W_2$ are quasi-compact open subspaces of $X$, \item $W \subset W_1$, \item $V$ is affine, and \item $P$ holds for $W_1$, \end{enumerate} then $P$ holds for $W_2$. \end{enumerate} Then $P$ holds for $X$. \end{lemma} 
\begin{lemma} \label{lemma-exact-sequence-lower-shriek} Let $S$ be a scheme. Let $(U \subset X, V \to X)$ be an elementary distinguished square of algebraic spaces over $S$. \begin{enumerate} \item For a sheaf of $\mathcal{O}_X$-modules $\mathcal{F}$ we have a short exact sequence $$ 0 \to j_{U \times_X V!}\mathcal{F}|_{U \times_X V} \to j_{U!}\mathcal{F}|_U \oplus j_{V!}\mathcal{F}|_V \to \mathcal{F} \to 0 $$ \item For an object $E$ of $D(\mathcal{O}_X)$ we have a distinguished triangle $$ j_{U \times_X V!}E|_{U \times_X V} \to j_{U!}E|_U \oplus j_{V!}E|_V \to E \to  j_{U \times_X V!}E|_{U \times_X V}[1] $$ in $D(\mathcal{O}_X)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-exact-sequence-j-star} Let $S$ be a scheme. Let $(U \subset X, V \to X)$ be an elementary distinguished square of algebraic spaces over $S$. \begin{enumerate} \item For every sheaf of $\mathcal{O}_X$-modules $\mathcal{F}$ we have a short exact sequence $$ 0 \to \mathcal{F} \to j_{U, *}\mathcal{F}|_U \oplus j_{V, *}\mathcal{F}|_V \to j_{U \times_X V, *}\mathcal{F}|_{U \times_X V} \to 0 $$ \item For any object $E$ of $D(\mathcal{O}_X)$ we have a distinguished triangle $$ E \to  Rj_{U, *}E|_U \oplus Rj_{V, *}E|_V \to Rj_{U \times_X V, *}E|_{U \times_X V} \to E[1] $$ in $D(\mathcal{O}_X)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-unbounded-relative-mayer-vietoris} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Let $(U \subset X, V \to X)$ be an elementary distinguished square. Denote $a = f|_U : U \to Y$, $b = f|_V : V \to Y$, and $c = f|_{U \times_X V} : U \times_X V \to Y$ the restrictions. For every object $E$ of $D(\mathcal{O}_X)$ there exists a distinguished triangle $$ Rf_*E \to Ra_*(E|_U) \oplus Rb_*(E|_V) \to Rc_*(E|_{U \times_X V}) \to Rf_*E[1] $$ in $D(\mathcal{O}_Y)$. This triangle is functorial in $E$. \end{lemma} 
\begin{lemma} \label{lemma-mayer-vietoris-hom} Let $S$ be a scheme. Let $(U \subset X, V \to X)$ be an elementary distinguished square of algebraic spaces over $S$. For objects $E$, $F$ of $D(\mathcal{O}_X)$ we have a Mayer-Vietoris sequence $$ \xymatrix{ & \ldots \ar[r] & \Ext^{-1}(E_{U \times_X V}, F_{U \times_X V}) \ar[lld] \\ \Hom(E, F) \ar[r] & \Hom(E_U, F_U) \oplus \Hom(E_V, F_V) \ar[r] & \Hom(E_{U \times_X V}, F_{U \times_X V}) } $$ where the subscripts denote restrictions to the relevant opens and the $\Hom$'s are taken in the relevant derived categories. \end{lemma} 
\begin{lemma} \label{lemma-unbounded-mayer-vietoris} Let $S$ be a scheme. Let $(U \subset X, V \to X)$ be an elementary distinguished square of algebraic spaces over $S$. For an object $E$ of $D(\mathcal{O}_X)$ we have a distinguished triangle $$ R\Gamma(X, E) \to R\Gamma(U, E) \oplus R\Gamma(V, E) \to R\Gamma(U \times_X V, E) \to R\Gamma(X, E)[1] $$ and in particular a long exact cohomology sequence $$ \ldots \to H^n(X, E) \to H^n(U, E) \oplus H^n(V, E) \to H^n(U \times_X V, E) \to H^{n + 1}(X, E) \to \ldots $$ The construction of the distinguished triangle and the long exact sequence is functorial in $E$. \end{lemma} 
\begin{lemma} \label{lemma-restrict-lower-shriek} Let $S$ be a scheme. Let $j : U \to X$ be a \'etale morphism of algebraic spaces over $S$. Given an \'etale morphism $V \to Y$, set $W = V \times_X U$ and denote $j_W : W \to V$ the projection morphism. Then $(j_!E)|_V = j_{W!}(E|_W)$ for $E$ in $D(\mathcal{O}_U)$. \end{lemma} 
\begin{lemma} \label{lemma-pushforward-with-support-in-open} Let $S$ be a scheme. Let $(U \subset X, j : V \to X)$ be an elementary distinguished square of algebraic spaces over $S$. Set $T = |X| \setminus |U|$. \begin{enumerate} \item If $E$ is an object of $D(\mathcal{O}_X)$ supported on $T$, then (a) $E \to Rj_*(E|_V)$ and (b) $j_!(E|_V) \to E$ are isomorphisms. \item If $F$ is an object of $D(\mathcal{O}_V)$ supported on $j^{-1}T$, then (a) $F \to (j_!F)|_V$, (b) $(Rj_*F)|_V \to F$, and (c) $j_!F \to Rj_*F$ are isomorphisms. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-glue} Let $S$ be a scheme. Let $(U \subset X, V \to X)$ be an elementary distinguished square of algebraic spaces over $S$. Suppose given \begin{enumerate} \item an object $A$ of $D(\mathcal{O}_U)$, \item an object $B$ of $D(\mathcal{O}_V)$, and \item an isomorphism $c : A|_{U \times_X V} \to B|_{U \times_X V}$. \end{enumerate} Then there exists an object $F$ of $D(\mathcal{O}_X)$ and isomorphisms $f : F|_U \to A$, $g : F|_V \to B$ such that $c = g|_{U \times_X V} \circ f^{-1}|_{U \times_X V}$. Moreover, given \begin{enumerate} \item an object $E$ of $D(\mathcal{O}_X)$, \item a morphism $a : A \to E|_U$ of $D(\mathcal{O}_U)$, \item a morphism $b : B \to E|_V$ of $D(\mathcal{O}_V)$, \end{enumerate} such that $$ a|_{U \times_X V}  = b|_{U \times_X V} \circ c. $$ Then there exists a morphism $F \to E$ in $D(\mathcal{O}_X)$ whose restriction to $U$ is $a \circ f$ and whose restriction to $V$ is $b \circ g$. \end{lemma} 
\begin{lemma} \label{lemma-affine-pushforward} Let $S$ be a scheme. Let $f : X \to Y$ be an affine morphism of algebraic spaces over $S$. Then $f_*$ defines a derived functor $f_* : D(\QCoh(\mathcal{O}_X)) \to D(\QCoh(\mathcal{O}_Y))$. This functor has the property that $$ \xymatrix{ D(\QCoh(\mathcal{O}_X)) \ar[d]_{f_*} \ar[r] & D_\QCoh(\mathcal{O}_X) \ar[d]^{Rf_*} \\ D(\QCoh(\mathcal{O}_Y)) \ar[r] & D_\QCoh(\mathcal{O}_Y) } $$ commutes. \end{lemma} 
\begin{lemma} \label{lemma-flat-pushforward-coherator} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume $f$ is quasi-compact, quasi-separated, and flat. Then, denoting $$ \Phi : D(\QCoh(\mathcal{O}_X)) \to D(\QCoh(\mathcal{O}_Y)) $$ the right derived functor of $f_* : \QCoh(\mathcal{O}_X) \to \QCoh(\mathcal{O}_Y)$ we have $RQ_Y \circ Rf_* = \Phi \circ RQ_X$. \end{lemma} 
\begin{lemma} \label{lemma-affine-coherator} Let $S$ be a scheme. Let $X$ be an affine algebraic space over $S$. Set $A = \Gamma(X, \mathcal{O}_X)$. Then \begin{enumerate} \item $Q_X : \textit{Mod}(\mathcal{O}_X) \to \QCoh(\mathcal{O}_X)$ is the functor which sends $\mathcal{F}$ to the quasi-coherent $\mathcal{O}_X$-module associated to the $A$-module $\Gamma(X, \mathcal{F})$, \item $RQ_X : D(\mathcal{O}_X) \to D(\QCoh(\mathcal{O}_X))$ is the functor which sends $E$ to the complex of quasi-coherent $\mathcal{O}_X$-modules associated to the object $R\Gamma(X, E)$ of $D(A)$, \item restricted to $D_\QCoh(\mathcal{O}_X)$ the functor $RQ_X$ defines a quasi-inverse to (\ref{equation-compare}). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-argument-proves} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Suppose that for every \'etale morphism $j : V \to W$ with $W \subset X$ quasi-compact open and $V$ affine the right derived functor $$ \Phi : D(\QCoh(\mathcal{O}_U)) \to D(\QCoh(\mathcal{O}_W)) $$ of the left exact functor $j_* : \QCoh(\mathcal{O}_V) \to \QCoh(\mathcal{O}_W)$ fits into a commutative diagram $$ \xymatrix{ D(\QCoh(\mathcal{O}_V)) \ar[d]_\Phi \ar[r]_{i_V} & D_\QCoh(\mathcal{O}_V) \ar[d]^{Rj_*} \\ D(\QCoh(\mathcal{O}_W)) \ar[r]^{i_W} & D_\QCoh(\mathcal{O}_W) } $$ Then the functor (\ref{equation-compare}) $$ D(\QCoh(\mathcal{O}_X)) \longrightarrow D_\QCoh(\mathcal{O}_X) $$ is an equivalence with quasi-inverse given by $RQ_X$. \end{lemma} 
\begin{proposition} \label{proposition-quasi-compact-affine-diagonal} Let $S$ be a scheme. Let $X$ be a quasi-compact algebraic space over $S$ with affine diagonal over $\mathbf{Z}$ (as in Properties of Spaces, Definition \ref{spaces-properties-definition-separated}). Then the functor (\ref{equation-compare}) $$ D(\QCoh(\mathcal{O}_X)) \longrightarrow D_\QCoh(\mathcal{O}_X) $$ is an equivalence with quasi-inverse given by $RQ_X$. \end{proposition} 
\begin{lemma} \label{lemma-direct-image-coherator} Let $S$ be a scheme and let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume $X$ and $Y$ are quasi-compact and have affine diagonal over $\mathbf{Z}$ (as in Properties of Spaces, Definition \ref{spaces-properties-definition-separated}). Then, denoting $$ \Phi : D(\QCoh(\mathcal{O}_X)) \to D(\QCoh(\mathcal{O}_Y)) $$ the right derived functor of $f_* : \QCoh(\mathcal{O}_X) \to \QCoh(\mathcal{O}_Y)$ the diagram $$ \xymatrix{ D(\QCoh(\mathcal{O}_X)) \ar[d]_\Phi \ar[r] & D_\QCoh(\mathcal{O}_X) \ar[d]^{Rf_*} \\ D(\QCoh(\mathcal{O}_Y)) \ar[r] & D_\QCoh(\mathcal{O}_Y) } $$ is commutative. \end{lemma} 
\begin{lemma} \label{lemma-affine-injective-colimit-direct-sum-pushforwards-artin} Let $S$ be a Noetherian affine scheme. Every injective object of $\QCoh(\mathcal{O}_S)$ is a filtered colimit $\colim_i \mathcal{F}_i$ of quasi-coherent sheaves of the form $$ \mathcal{F}_i = (Z_i \to S)_*\mathcal{G}_i $$ where $Z_i$ is the spectrum of an Artinian ring and $\mathcal{G}_i$ is a coherent module on $Z_i$. \end{lemma} 
\begin{lemma} \label{lemma-injective-colimit-direct-sum-pushforwards-artin} Let $S$ be an affine scheme. Let $X$ be a Noetherian algebraic space over $S$. Every injective object of $\QCoh(\mathcal{O}_X)$ is a direct summand of a filtered colimit $\colim_i \mathcal{F}_i$ of quasi-coherent sheaves of the form $$ \mathcal{F}_i = (Z_i \to X)_*\mathcal{G}_i $$ where $Z_i$ is the spectrum of an Artinian ring and $\mathcal{G}_i$ is a coherent module on $Z_i$. \end{lemma} 
\begin{lemma} \label{lemma-flat-pullback-injective-quasi-coherent} Let $S$ be a scheme. Let $f : X \to Y$ be a flat, quasi-compact, and quasi-separated morphism of algebraic spaces over $S$. If $\mathcal{J}$ is an injective object of $\QCoh(\mathcal{O}_X)$, then $f_*\mathcal{J}$ is an injective object of $\QCoh(\mathcal{O}_Y)$. \end{lemma} 
\begin{lemma} \label{lemma-injective-pushforward} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. If $\mathcal{J}$ is an injective object of $\QCoh(\mathcal{O}_X)$, then \begin{enumerate} \item $H^p(U, \mathcal{J}|_U) = 0$ for $p > 0$ and for every quasi-compact and quasi-separated algebraic space $U$ \'etale over $X$, \item for any morphism $f : X \to Y$ of algebraic spaces over $S$ with $Y$ quasi-separated we have $R^pf_*\mathcal{J} = 0$ for $p > 0$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-Noetherian-pushforward} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of Noetherian algebraic spaces over $S$. Then $f_*$ on quasi-coherent sheaves has a right derived extension $\Phi : D(\QCoh(\mathcal{O}_X)) \to D(\QCoh(\mathcal{O}_Y))$ such that the diagram $$ \xymatrix{ D(\QCoh(\mathcal{O}_X)) \ar[d]_{\Phi} \ar[r] & D_\QCoh(\mathcal{O}_X) \ar[d]^{Rf_*} \\ D(\QCoh(\mathcal{O}_Y)) \ar[r] & D_\QCoh(\mathcal{O}_Y) } $$ commutes. \end{lemma} 
\begin{proposition} \label{proposition-Noetherian} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Then the functor (\ref{equation-compare}) $$ D(\QCoh(\mathcal{O}_X)) \longrightarrow D_\QCoh(\mathcal{O}_X) $$ is an equivalence with quasi-inverse given by $RQ_X$. \end{proposition} 
\begin{lemma} \label{lemma-descend-finite-type} Let $X$ be a scheme. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module. The following are equivalent \begin{enumerate} \item $\mathcal{F}$ is of finite type as an $\mathcal{O}_X$-module, and \item $\epsilon^*\mathcal{F}$ is of finite type as an $\mathcal{O}_\etale$-module on the small \'etale site of $X$. \end{enumerate} Here $\epsilon$ is as in (\ref{equation-epsilon}). \end{lemma} 
\begin{lemma} \label{lemma-descend-pseudo-coherent} Let $X$ be a scheme. Let $E$ be an object of $D(\mathcal{O}_X)$. The following are equivalent \begin{enumerate} \item $E$ is $m$-pseudo-coherent, and \item $\epsilon^*E$ is $m$-pseudo-coherent on the small \'etale site of $X$. \end{enumerate} Here $\epsilon$ is as in (\ref{equation-epsilon}). \end{lemma} 
\begin{lemma} \label{lemma-descend-tor-amplitude} Let $X$ be a scheme. Let $E$ be an object of $D(\mathcal{O}_X)$. Then \begin{enumerate} \item $E$ has tor amplitude in $[a, b]$ if and only if $\epsilon^*E$ has tor amplitude in $[a, b]$. \item $E$ has finite tor dimension if and only if $\epsilon^*E$ has finite tor dimension. \end{enumerate} Here $\epsilon$ is as in (\ref{equation-epsilon}). \end{lemma} 
\begin{lemma} \label{lemma-tor-dimension-rel} Let $f : X \to Y$ be a morphism of schemes. Let $E$ be an object of $D(\mathcal{O}_X)$. Then \begin{enumerate} \item $E$ as an object of $D(f^{-1}\mathcal{O}_Y)$ has tor amplitude in $[a, b]$ if and only if $\epsilon^*E$ has tor amplitude in $[a, b]$ as an object of $D(f_{small}^{-1}\mathcal{O}_{Y_\etale})$. \item $E$ locally has finite tor dimension as an object of $D(f^{-1}\mathcal{O}_Y)$ if and only if $\epsilon^*E$ locally has finite tor dimension as an object of $D(f_{small}^{-1}\mathcal{O}_{Y_\etale})$. \end{enumerate} Here $\epsilon$ is as in (\ref{equation-epsilon}). \end{lemma} 
\begin{lemma} \label{lemma-descend-perfect} Let $X$ be a scheme. Let $E$ be an object of $D(\mathcal{O}_X)$. Then $E$ is a perfect object of $D(\mathcal{O}_X)$ if and only if $\epsilon^*E$ is a perfect object of $D(\mathcal{O}_\etale)$. Here $\epsilon$ is as in (\ref{equation-epsilon}). \end{lemma} 
\begin{lemma} \label{lemma-pseudo-coherent} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. If $E$ is an $m$-pseudo-coherent object of $D(\mathcal{O}_X)$, then $H^i(E)$ is a quasi-coherent $\mathcal{O}_X$-module for $i > m$. If $E$ is pseudo-coherent, then $E$ is an object of $D_\QCoh(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-identify-pseudo-coherent-noetherian} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Let $E$ be an object of $D_\QCoh(\mathcal{O}_X)$. For $m \in \mathbf{Z}$ the following are equivalent \begin{enumerate} \item $H^i(E)$ is coherent for $i \geq m$ and zero for $i \gg 0$, and \item $E$ is $m$-pseudo-coherent. \end{enumerate} In particular, $E$ is pseudo-coherent if and only if $E$ is an object of $D^-_{\textit{Coh}}(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-tor-qc-qs} Let $S$ be a scheme. Let $X$ be a quasi-separated algebraic space over $S$. Let $E$ be an object of $D_\QCoh(\mathcal{O}_X)$. Let $a \leq b$. The following are equivalent \begin{enumerate} \item $E$ has tor amplitude in $[a, b]$, and \item for all $\mathcal{F}$ in $\QCoh(\mathcal{O}_X)$ we have $H^i(E \otimes_{\mathcal{O}_X}^\mathbf{L} \mathcal{F}) = 0$ for $i \not \in [a, b]$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-descend-RHom} Let $X$ be a scheme. Let $E, F$ be objects of $D(\mathcal{O}_X)$. Assume either \begin{enumerate} \item $E$ is pseudo-coherent and $F$ lies in $D^+(\mathcal{O}_X)$, or \item $E$ is perfect and $F$ arbitrary, \end{enumerate} then there is a canonical isomorphism $$ \epsilon^*R\SheafHom(E, F) \longrightarrow R\SheafHom(\epsilon^*E, \epsilon^*F) $$ Here $\epsilon$ is as in (\ref{equation-epsilon}). \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherence-internal-hom} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $L, K$ be objects of $D(\mathcal{O}_X)$. If either \begin{enumerate} \item $L$ in $D^+_\QCoh(\mathcal{O}_X)$ and $K$ is pseudo-coherent, \item $L$ in $D_\QCoh(\mathcal{O}_X)$ and $K$ is perfect, \end{enumerate} then $R\SheafHom(K, L)$ is in $D_\QCoh(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-internal-hom-evaluate-tensor-isomorphism} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $K, L, M$ be objects of $D_\QCoh(\mathcal{O}_X)$. The map $$ K \otimes_{\mathcal{O}_X}^\mathbf{L} R\SheafHom(M, L) \longrightarrow R\SheafHom(M, K \otimes_{\mathcal{O}_X}^\mathbf{L} L) $$ of Cohomology on Sites, Lemma \ref{sites-cohomology-lemma-internal-hom-diagonal-better} is an isomorphism in the following cases \begin{enumerate} \item $M$ perfect, or \item $K$ is perfect, or \item $M$ is pseudo-coherent, $L \in D^+(\mathcal{O}_X)$, and $K$ has finite tor dimension. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-approximation-holds} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Consider triples $(T, E, m)$ where \begin{enumerate} \item $T \subset |X|$ is a closed subset, \item $E$ is an object of $D_\QCoh(\mathcal{O}_X)$, and \item $m \in \mathbf{Z}$. \end{enumerate} We say {\it approximation holds for the triple} $(T, E, m)$ if there exists a perfect object $P$ of $D(\mathcal{O}_X)$ supported on $T$ and a map $\alpha : P \to E$ which induces isomorphisms $H^i(P) \to H^i(E)$ for $i > m$ and a surjection $H^m(P) \to H^m(E)$. \end{definition} 
\begin{definition} \label{definition-approximation} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. We say {\it approximation by perfect complexes holds} on $X$ if for any closed subset $T \subset |X|$ such that the morphism $X \setminus T \to X$ is quasi-compact there exists an integer $r$ such that for every triple $(T, E, m)$ as in Definition \ref{definition-approximation-holds} with \begin{enumerate} \item $E$ is $(m - r)$-pseudo-coherent, and \item $H^i(E)$ is supported on $T$ for $i \geq m - r$ \end{enumerate} approximation holds. \end{definition} 
\begin{lemma} \label{lemma-pushforward-perfect} Let $S$ be a scheme. Let $(U \subset X, j : V \to X)$ be an elementary distinguished square of algebraic space over $S$. Let $E$ be a perfect object of $D(\mathcal{O}_V)$ supported on $j^{-1}(T)$ where $T = |X| \setminus |U|$. Then $Rj_*E$ is a perfect object of $D(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-open} Let $S$ be a scheme. Let $(U \subset X, j : V \to X)$ be an elementary distinguished square of algebraic spaces over $S$. Let $T$ be a closed subset of $|X| \setminus |U|$ and let $(T, E, m)$ be a triple as in Definition \ref{definition-approximation-holds}. If \begin{enumerate} \item approximation holds for $(j^{-1}T, E|_V, m)$, and \item the sheaves $H^i(E)$ for $i \geq m$ are supported on $T$, \end{enumerate} then approximation holds for $(T, E, m)$. \end{lemma} 
\begin{lemma} \label{lemma-approximation-affine} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$ which is representable by an affine scheme. Then approximation holds for every triple $(T, E, m)$ as in Definition \ref{definition-approximation-holds} such that there exists an integer $r \geq 0$ with \begin{enumerate} \item $E$ is $m$-pseudo-coherent, \item $H^i(E)$ is supported on $T$ for $i \geq m - r + 1$, \item $X \setminus T$ is the union of $r$ affine opens. \end{enumerate} In particular, approximation by perfect complexes holds for affine schemes. \end{lemma} 
\begin{lemma} \label{lemma-induction-step} Let $S$ be a scheme. Let $(U \subset X, j : V \to X)$ be an elementary distinguished square of algebraic spaces over $S$. Assume $U$ quasi-compact, $V$ affine, and $U \times_X V$ quasi-compact. If approximation by perfect complexes holds on $U$, then approximation by perfect complexes holds on $X$. \end{lemma} 
\begin{theorem} \label{theorem-approximation} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Then approximation by perfect complexes holds on $X$. \end{theorem} 
\begin{lemma} \label{lemma-lift-map-from-perfect-complex-with-support} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $W \subset X$ be a quasi-compact open. Let $T \subset |X|$ be a closed subset such that $X \setminus T \to X$ is a quasi-compact morphism. Let $E$ be an object of $D_\QCoh(\mathcal{O}_X)$. Let $\alpha : P \to E|_W$ be a map where $P$ is a perfect object of $D(\mathcal{O}_W)$ supported on $T \cap W$. Then there exists a map $\beta : R \to E$ where $R$ is a perfect object of $D(\mathcal{O}_X)$ supported on $T$ such that $P$ is a direct summand of $R|_W$ in $D(\mathcal{O}_W)$ compatible $\alpha$ and $\beta|_W$. \end{lemma} 
\begin{lemma} \label{lemma-direct-summand-of-a-restriction} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $W$ be a quasi-compact open subspace of $X$. Let $P$ be a perfect object of $D(\mathcal{O}_W)$. Then $P$ is a direct summand of the restriction of a perfect object of $D(\mathcal{O}_X)$. \end{lemma} 
\begin{theorem} \label{theorem-bondal-van-den-Bergh} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. The category $D_\QCoh(\mathcal{O}_X)$ can be generated by a single perfect object. More precisely, there exists a perfect object $P$ of $D(\mathcal{O}_X)$ such that for  $E \in D_\QCoh(\mathcal{O}_X)$ the following are equivalent \begin{enumerate} \item $E = 0$, and \item $\Hom_{D(\mathcal{O}_X)}(P[n], E) = 0$ for all $n \in \mathbf{Z}$. \end{enumerate} \end{theorem} 
\begin{lemma} \label{lemma-generator-with-support} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $T \subset |X|$ be a closed subset such that $|X| \setminus T$ is quasi-compact. With notation as above, the category $D_{\QCoh, T}(\mathcal{O}_X)$ is generated by a single perfect object. \end{lemma} 
\begin{proposition} \label{proposition-compact-is-perfect} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. An object of $D_\QCoh(\mathcal{O}_X)$ is compact if and only if it is perfect. \end{proposition} 
\begin{lemma} \label{lemma-compact-is-perfect-with-support} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $T \subset |X|$ be a closed subset such that $|X| \setminus T$ is quasi-compact. An object of $D_{\QCoh, T}(\mathcal{O}_X)$ is compact if and only if it is perfect as an object of $D(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-map-from-pseudo-coherent-to-complex-with-support} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $T \subset |X|$ be a closed subset such that the complement $U \subset X$ is quasi-compact. Let $\alpha : P \to E$ be a morphism of $D_\QCoh(\mathcal{O}_X)$ with either \begin{enumerate} \item $P$ is perfect and $E$ supported on $T$, or \item $P$ pseudo-coherent, $E$ supported on $T$, and $E$ bounded below. \end{enumerate} Then there exists a perfect complex of $\mathcal{O}_X$-modules $I$ and a map $I \to \mathcal{O}_X[0]$ such that $I \otimes^\mathbf{L} P \to E$ is zero and such that $I|_U \to \mathcal{O}_U[0]$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-tensor-with-QCoh-complex} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $K^\bullet$ be a complex of $\mathcal{O}_X$-modules whose cohomology sheaves are quasi-coherent. Let $(E, d) = \Hom_{\text{Comp}^{dg}(\mathcal{O}_X)}(K^\bullet, K^\bullet)$ be the endomorphism differential graded algebra. Then the functor $$ - \otimes_E^\mathbf{L} K^\bullet : D(E, \text{d}) \longrightarrow D(\mathcal{O}_X) $$ of Differential Graded Algebra, Lemma \ref{dga-lemma-tensor-with-complex-derived} has image contained in $D_\QCoh(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-ext-from-perfect-into-bounded-QCoh} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $K$ be a perfect object of $D(\mathcal{O}_X)$. Then \begin{enumerate} \item there exist integers $a \leq b$ such that $\Hom_{D(\mathcal{O}_X)}(K, L) = 0$ for $L \in D_\QCoh(\mathcal{O}_X)$ with $H^i(L) = 0$ for $i \in [a, b]$, and \item if $L$ is bounded, then $\Ext^n_{D(\mathcal{O}_X)}(K, L)$ is zero for all but finitely many $n$. \end{enumerate} \end{lemma} 
\begin{theorem} \label{theorem-DQCoh-is-Ddga} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Then there exist a differential graded algebra $(E, \text{d})$ with only a finite number of nonzero cohomology groups $H^i(E)$ such that $D_\QCoh(\mathcal{O}_X)$ is equivalent to $D(E, \text{d})$. \end{theorem} 
\begin{lemma} \label{lemma-pseudo-coherent-hocolim} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $K \in D(\mathcal{O}_X)$. The following are equivalent \begin{enumerate} \item $K$ is pseudo-coherent, and \item $K = \text{hocolim} K_n$ where $K_n$ is perfect and $\tau_{\geq -n}K_n \to \tau_{\geq -n}K$ is an isomorphism for all $n$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-pseudo-coherent-hocolim-with-support} Let $X$ be a quasi-compact and quasi-separated scheme. Let $T \subset X$ be a closed subset such that $X \setminus T$ is quasi-compact. Let $K \in D(\mathcal{O}_X)$ supported on $T$. The following are equivalent \begin{enumerate} \item $K$ is pseudo-coherent, and \item $K = \text{hocolim} K_n$ where $K_n$ is perfect, supported on $T$, and $\tau_{\geq -n}K_n \to \tau_{\geq -n}K$ is an isomorphism for all $n$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-better-coherator} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. The inclusion functor $D_\QCoh(\mathcal{O}_X) \to D(\mathcal{O}_X)$ has a right adjoint. \end{lemma} 
\begin{lemma} \label{lemma-pushforward-better-coherator} Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-compact and quasi-separated morphism of algebraic spaces over $S$. If the right adjoints $DQ_X$ and $DQ_Y$ of the inclusion functors $D_\QCoh \to D$ exist for $X$ and $Y$, then $$ Rf_* \circ DQ_X = DQ_Y \circ Rf_* $$ \end{lemma} 
\begin{lemma} \label{lemma-boundedness-better-coherator} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. The functor $DQ_X$ of Lemma \ref{lemma-better-coherator} has the following boundedness property: there exists an integer $N = N(X)$ such that, if $K$ in $D(\mathcal{O}_X)$ with $H^i(U, K) = 0$ for $U$ affine \'etale over $X$ and $i \not \in [a, b]$, then the cohomology sheaves $H^i(DQ_X(K))$ are zero for $i \not \in [a, b + N]$. \end{lemma} 
\begin{lemma} \label{lemma-cohomology-base-change} Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-compact and quasi-separated morphism of algebraic spaces over $S$. For $E$ in $D_\QCoh(\mathcal{O}_X)$ and $K$ in $D_\QCoh(\mathcal{O}_Y)$ we have $$ Rf_*(E) \otimes_{\mathcal{O}_Y}^\mathbf{L} K = Rf_*(E \otimes_{\mathcal{O}_X}^\mathbf{L} Lf^*K) $$ \end{lemma} 
\begin{definition} \label{definition-tor-independent} Let $S$ be a scheme. Let $B$ be an algebraic space over $S$. Let $X$, $Y$ be algebraic spaces over $B$. We say $X$ and $Y$ are {\it Tor independent over $B$} if and only if for every commutative diagram $$ \xymatrix{ \Spec(k) \ar[d]_{\overline{y}} \ar[dr]_{\overline{b}} \ar[r]_-{\overline{x}} & X \ar[d] \\ Y \ar[r] & B } $$ of geometric points the rings $\mathcal{O}_{X, \overline{x}}$ and $\mathcal{O}_{Y, \overline{y}}$ are Tor independent over $\mathcal{O}_{B, \overline{b}}$ (see More on Algebra, Definition \ref{more-algebra-definition-tor-independent}). \end{definition} 
\begin{lemma} \label{lemma-tor-independent} Let $S$ be a scheme. Let $B$ be an algebraic space over $S$. Let $X$, $Y$ be algebraic spaces over $B$. The following are equivalent \begin{enumerate} \item $X$ and $Y$ are Tor independent over $B$, \item for every commutative diagram $$ \xymatrix{ U \ar[d] \ar[r] & W \ar[d] & V \ar[d] \ar[l] \\ X \ar[r] & B & Y \ar[l] } $$ with \'etale vertical arrows $U$ and $V$ are Tor independent over $W$, \item for some commutative diagram as in (2) with (a) $W \to B$ \'etale surjective, (b) $U \to X \times_B W$ \'etale surjective, (c) $V \to Y \times_B W$ \'etale surjective, the spaces $U$ and $V$ are Tor independent over $W$, and \item for some commutative diagram as in (3) with $U$, $V$, $W$ schemes, the schemes $U$ and $V$ are Tor independent over $W$ in the sense of Derived Categories of Schemes, Definition \ref{perfect-definition-tor-independent}. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-compare-base-change} Let $S$ be a scheme. Let $g : Y' \to Y$ be a morphism of algebraic spaces over $S$. Let $f : X \to Y$ be a quasi-compact and quasi-separated morphism of algebraic spaces over $S$. Consider the base change diagram $$ \xymatrix{ X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\ Y' \ar[r]^g & Y } $$ If $X$ and $Y'$ are Tor independent over $Y$, then for all $E \in D_\QCoh(\mathcal{O}_X)$ we have $Rf'_*L(g')^*E = Lg^*Rf_*E$. \end{lemma} 
\begin{lemma} \label{lemma-affine-morphism-and-hom-out-of-perfect} Let $g : S' \to S$ be a morphism of affine schemes. Consider a cartesian square $$ \xymatrix{ X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\ S' \ar[r]^g & S } $$ of quasi-compact and quasi-separated algebraic spaces. Assume $g$ and $f$ Tor independent. Write $S = \Spec(R)$ and $S' = \Spec(R')$. For $M, K \in D(\mathcal{O}_X)$ the canonical map $$ R\Hom_X(M, K) \otimes^\mathbf{L}_R R' \longrightarrow R\Hom_{X'}(L(g')^*M, L(g')^*K) $$ in $D(R')$ is an isomorphism in the following two cases \begin{enumerate} \item $M \in D(\mathcal{O}_X)$ is perfect and $K \in D_\QCoh(X)$, or \item $M \in D(\mathcal{O}_X)$ is pseudo-coherent, $K \in D_\QCoh^+(X)$, and $R'$ has finite tor dimension over $R$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-tor-independence-and-tor-amplitude} Let $S$ be a scheme. Consider a cartesian square of algebraic spaces $$ \xymatrix{ X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\ Y' \ar[r]^g & Y } $$ over $S$. Assume $g$ and $f$ Tor independent. \begin{enumerate} \item If $E \in D(\mathcal{O}_X)$ has tor amplitude in $[a, b]$ as a complex of $f^{-1}\mathcal{O}_Y$-modules, then $L(g')^*E$ has tor amplitude in $[a, b]$ as a complex of $f^{-1}\mathcal{O}_{Y'}$-modules. \item If $\mathcal{G}$ is an $\mathcal{O}_X$-module flat over $Y$, then $L(g')^*\mathcal{G} = (g')^*\mathcal{G}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-single-complex-base-change-condition} Let $S$ be a scheme. Let $$ \xymatrix{ X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\ Y' \ar[r]^g & Y } $$ be a cartesian diagram of algebraic spaces over $S$. Let $K \in D_\QCoh(\mathcal{O}_X)$ and let $L(g')^*K \to K'$ be a map in $D_\QCoh(\mathcal{O}_{X'})$. The following are equivalent \begin{enumerate} \item for any $x' \in X'$ and $i \in \mathbf{Z}$ the map (\ref{equation-bc}) is an isomorphism, \item for any commutative diagram $$ \xymatrix{ & U \ar[d] \ar[rd]^a \\ V' \ar[r] \ar[rd]^c & V \ar[rd]^b & X \ar[d]^f \\ & Y' \ar[r]^g & Y } $$ with $a, b, c$ \'etale, $U, V, V'$ schemes, and with $U' = V' \times_V U$ the equivalent conditions of Derived Categories of Schemes, Lemma \ref{perfect-lemma-single-complex-base-change-condition} hold for $(U \to X)^*K$ and $(U' \to X')^*K'$, and \item there is some diagram as in (2) with $U' \to X'$ surjective. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-single-complex-base-change} Let $S$ be a scheme. Let $$ \xymatrix{ X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\ Y' \ar[r]^g & Y } $$ be a cartesian diagram of algebraic spaces over $S$. Let $K \in D_\QCoh(\mathcal{O}_X)$ and let $L(g')^*K \to K'$ be a map in $D_\QCoh(\mathcal{O}_{X'})$. If \begin{enumerate} \item the equivalent conditions of Lemma \ref{lemma-single-complex-base-change-condition} hold, and \item $f$ is quasi-compact and quasi-separated, \end{enumerate} then the composition $Lg^*Rf_*K \to Rf'_*L(g')^*K \to Rf'_*K'$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-single-complex-base-change-condition-inherited} Let $S$ be a scheme. Let $$ \xymatrix{ X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\ S' \ar[r]^g & S } $$ be a cartesian diagram of algebraic spaces over $S$. Let $K \in D_\QCoh(\mathcal{O}_X)$ and let $L(g')^*K \to K'$ be a map in $D_\QCoh(\mathcal{O}_{X'})$. If the equivalent conditions of Lemma \ref{lemma-single-complex-base-change-condition} hold, then \begin{enumerate} \item for $E \in D_\QCoh(\mathcal{O}_X)$ the equivalent conditions of Lemma \ref{lemma-single-complex-base-change-condition} hold for $L(g')^*(E \otimes^\mathbf{L} K) \to L(g')^*E \otimes^\mathbf{L} K'$, \item if $E$ in $D(\mathcal{O}_X)$ is perfect the equivalent conditions of Lemma \ref{lemma-single-complex-base-change-condition} hold for $L(g')^*R\SheafHom(E, K) \to R\SheafHom(L(g')^*E, K')$, and \item if $K$ is bounded below and $E$ in $D(\mathcal{O}_X)$ pseudo-coherent the equivalent conditions of Lemma \ref{lemma-single-complex-base-change-condition} hold for $L(g')^*R\SheafHom(E, K) \to R\SheafHom(L(g')^*E, K')$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-base-change-tensor} Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-compact and quasi-separated morphism of algebraic spaces over $S$. Let $E \in D_\QCoh(\mathcal{O}_X)$. Let $\mathcal{G}^\bullet$ be a bounded above complex of quasi-coherent $\mathcal{O}_X$-modules flat over $Y$. Then formation of $$ Rf_*(E \otimes^\mathbf{L}_{\mathcal{O}_X} \mathcal{G}^\bullet) $$ commutes with arbitrary base change (see proof for precise statement). \end{lemma} 
\begin{lemma} \label{lemma-base-change-RHom} Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-compact and quasi-separated morphism of algebraic spaces over $S$. Let $E$ be an object of $D(\mathcal{O}_X)$. Let $\mathcal{G}^\bullet$ be a complex of quasi-coherent $\mathcal{O}_X$-modules. If \begin{enumerate} \item $E$ is perfect, $\mathcal{G}^\bullet$ is a bounded above, and $\mathcal{G}^n$ is flat over $Y$, or \item $E$ is pseudo-coherent, $\mathcal{G}^\bullet$ is bounded, and $\mathcal{G}^n$ is flat over $Y$, \end{enumerate} then formation of $$ Rf_*R\SheafHom(E, \mathcal{G}^\bullet) $$ commutes with arbitrary base change (see proof for precise statement). \end{lemma} 
\begin{lemma} \label{lemma-perfect-direct-image} Let $S$ be a scheme. Let $Y$ be a Noetherian algebraic space over $S$. Let $f : X \to Y$ be a morphism of algebraic spaces which is locally of finite type and quasi-separated. Let $E \in D(\mathcal{O}_X)$ such that \begin{enumerate} \item $E \in D^b_{\textit{Coh}}(\mathcal{O}_X)$, \item the support of $H^i(E)$ is proper over $Y$ for all $i$, \item $E$ has finite tor dimension as an object of $D(f^{-1}\mathcal{O}_Y)$. \end{enumerate} Then $Rf_*E$ is a perfect object of $D(\mathcal{O}_Y)$. \end{lemma} 
\begin{lemma} \label{lemma-tensor-perfect} Let $S$ be a scheme. Let $B$ be a Noetherian algebraic space over $S$. Let $f : X \to B$ be a morphism of algebraic spaces which is locally of finite type and quasi-separated. Let $E \in D(\mathcal{O}_X)$ be perfect. Let $\mathcal{G}^\bullet$ be a bounded complex of coherent $\mathcal{O}_X$-modules flat over $B$ with support proper over $B$. Then $K = Rf_*(E \otimes^\mathbf{L}_{\mathcal{O}_X} \mathcal{G}^\bullet)$ is a perfect object of $D(\mathcal{O}_B)$. \end{lemma} 
\begin{lemma} \label{lemma-ext-perfect} Let $S$ be a scheme. Let $B$ be a Noetherian algebraic space over $S$. Let $f : X \to B$ be a morphism of algebraic spaces which is locally of finite type and quasi-separated. Let $E \in D(\mathcal{O}_X)$ be perfect. Let $\mathcal{G}^\bullet$ be a bounded complex of coherent $\mathcal{O}_X$-modules flat over $B$ with support proper over $B$. Then $K = Rf_*R\SheafHom(E, \mathcal{G})$ is a perfect object of $D(\mathcal{O}_B)$. \end{lemma} 
\begin{lemma} \label{lemma-compute-tensor-perfect} Assumptions and notation as in Lemma \ref{lemma-tensor-perfect}. Then there are functorial isomorphisms $$ H^i(B, K \otimes^\mathbf{L}_{\mathcal{O}_B} \mathcal{F}) \longrightarrow H^i(X, E \otimes^\mathbf{L}_{\mathcal{O}_X} (\mathcal{G}^\bullet \otimes_{\mathcal{O}_X} f^*\mathcal{F})) $$ for $\mathcal{F}$ quasi-coherent on $B$ compatible with boundary maps (see proof). \end{lemma} 
\begin{lemma} \label{lemma-compute-ext-perfect} Assumption and notation as in Lemma \ref{lemma-ext-perfect}. Then there are functorial isomorphisms $$ H^i(B, K \otimes^\mathbf{L}_{\mathcal{O}_B} \mathcal{F}) \longrightarrow \Ext^i_{\mathcal{O}_X}(E, \mathcal{G}^\bullet \otimes_{\mathcal{O}_X} f^*\mathcal{F}) $$ for $\mathcal{F}$ quasi-coherent on $B$ compatible with boundary maps (see proof). \end{lemma} 
\begin{lemma} \label{lemma-compute-ext} Let $S$ be a scheme. Let $f : X \to B$ be a morphism of algebraic spaces over $S$, $E \in D(\mathcal{O}_X)$, and $\mathcal{F}^\bullet$ a complex of $\mathcal{O}_X$-modules. Assume \begin{enumerate} \item $B$ is Noetherian, \item $f$ is locally of finite type and quasi-separated, \item $E \in D^-_{\textit{Coh}}(\mathcal{O}_X)$, \item $\mathcal{G}^\bullet$ is a bounded complex of coherent $\mathcal{O}_X$-module flat over $B$ with support proper over $B$. \end{enumerate} Then the following two statements are true \begin{enumerate} \item[(A)] for every $m \in \mathbf{Z}$ there exists a perfect object $K$ of $D(\mathcal{O}_B)$ and functorial maps $$ \alpha^i_\mathcal{F} : \Ext^i_{\mathcal{O}_X}(E, \mathcal{G}^\bullet \otimes_{\mathcal{O}_X} f^*\mathcal{F}) \longrightarrow H^i(B, K \otimes^\mathbf{L}_{\mathcal{O}_B} \mathcal{F}) $$ for $\mathcal{F}$ quasi-coherent on $B$ compatible with boundary maps (see proof) such that $\alpha^i_\mathcal{F}$ is an isomorphism for $i \leq m$, and \item[(B)] there exists a pseudo-coherent $L \in D(\mathcal{O}_B)$ and functorial isomorphisms $$ \Ext^i_{\mathcal{O}_B}(L, \mathcal{F}) \longrightarrow \Ext^i_{\mathcal{O}_X}(E, \mathcal{G}^\bullet \otimes_{\mathcal{O}_X} f^*\mathcal{F}) $$ for $\mathcal{F}$ quasi-coherent on $B$ compatible with boundary maps. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-descend-homomorphisms} In Situation \ref{situation-descent}. Let $E_0$ and $K_0$ be objects of $D(\mathcal{O}_{X_0})$. Set $E_i = Lf_{i0}^*E_0$ and $K_i = Lf_{i0}^*K_0$ for $i \geq 0$ and set $E = Lf_0^*E_0$ and $K = Lf_0^*K_0$. Then the map $$ \colim_{i \geq 0} \Hom_{D(\mathcal{O}_{X_i})}(E_i, K_i) \longrightarrow \Hom_{D(\mathcal{O}_X)}(E, K) $$ is an isomorphism if either \begin{enumerate} \item $E_0$ is perfect and $K_0 \in D_\QCoh(\mathcal{O}_{X_0})$, or \item $E_0$ is pseudo-coherent and $K_0 \in D_\QCoh(\mathcal{O}_{X_0})$ has finite tor dimension. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-perfect-on-limit} In Situation \ref{situation-descent} the category of perfect objects of $D(\mathcal{O}_X)$ is the colimit of the categories of perfect objects of $D(\mathcal{O}_{X_i})$. \end{lemma} 
\begin{lemma} \label{lemma-base-change-tensor-perfect} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of finite presentation between algebraic spaces over $S$. Let $E \in D(\mathcal{O}_X)$ be a perfect object. Let $\mathcal{G}^\bullet$ be a bounded complex of finitely presented $\mathcal{O}_X$-modules, flat over $Y$, with support proper over $Y$. Then $$ K = Rf_*(E \otimes_{\mathcal{O}_X}^\mathbf{L} \mathcal{G}^\bullet) $$ is a perfect object of $D(\mathcal{O}_Y)$ and its formation commutes with arbitrary base change. \end{lemma} 
\begin{lemma} \label{lemma-base-change-tensor-pseudo-coherent} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of finite presentation between algebraic spaces over $S$. Let $E \in D(\mathcal{O}_X)$ be a pseudo-coherent object. Let $\mathcal{G}^\bullet$ be a bounded above complex of finitely presented $\mathcal{O}_X$-modules, flat over $Y$, with support proper over $Y$. Then $$ K = Rf_*(E \otimes_{\mathcal{O}_X}^\mathbf{L} \mathcal{G}^\bullet) $$ is a pseudo-coherent object of $D(\mathcal{O}_Y)$ and its formation commutes with arbitrary base change. \end{lemma} 
\begin{lemma} \label{lemma-flat-proper-perfect-direct-image-general} Let $S$ be a scheme. Let $f : X \to Y$ be a proper morphism of finite presentation of algebraic spaces over $S$. \begin{enumerate} \item Let $E \in D(\mathcal{O}_X)$ be perfect and $f$ flat. Then $Rf_*E$ is a perfect object of $D(\mathcal{O}_Y)$ and its formation commutes with arbitrary base change. \item Let $\mathcal{G}$ be an $\mathcal{O}_X$-module of finite presentation, flat over $S$. Then $Rf_*\mathcal{G}$ is a perfect object of $D(\mathcal{O}_Y)$ and its formation commutes with arbitrary base change. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-flat-proper-pseudo-coherent-direct-image-general} Let $S$ be a scheme. Let $f : X \to Y$ be a flat proper morphism of finite presentation of algebraic spaces over $S$. Let $E \in D(\mathcal{O}_X)$ be pseudo-coherent. Then $Rf_*E$ is a pseudo-coherent object of $D(\mathcal{O}_Y)$ and its formation commutes with arbitrary base change. \end{lemma} 
\begin{lemma} \label{lemma-pullback-and-limits} Let $R$ be a ring. Let $X$ be an algebraic space and let $f : X \to \Spec(R)$ be proper, flat, and of finite presentation. Let $(M_n)$ be an inverse system of $R$-modules with surjective transition maps. Then the canonical map $$ \mathcal{O}_X \otimes_R (\lim M_n) \longrightarrow \lim \mathcal{O}_X \otimes_R M_n $$ induces an isomorphism from the source to $DQ_X$ applied to the target. \end{lemma} 
\begin{lemma} \label{lemma-perfect-enough} Let $A$ be a ring. Let $X$ be an algebraic space over $A$ which is quasi-compact and quasi-separated. Let $K \in D^-_\QCoh(\mathcal{O}_X)$. If $R\Gamma(X, E \otimes^\mathbf{L} K)$ is pseudo-coherent in $D(A)$ for every perfect $E$ in $D(\mathcal{O}_X)$, then $R\Gamma(X, E \otimes^\mathbf{L} K)$ is pseudo-coherent in $D(A)$ for every pseudo-coherent $E$ in $D(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-base-change-RHom-perfect} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of finite presentation between algebraic spaces over $S$. Let $E \in D(\mathcal{O}_X)$ be a perfect object. Let $\mathcal{G}^\bullet$ be a bounded complex of finitely presented $\mathcal{O}_X$-modules, flat over $Y$, with support proper over $Y$. Then $$ K = Rf_*R\SheafHom(E, \mathcal{G}^\bullet) $$ is a perfect object of $D(\mathcal{O}_Y)$ and its formation commutes with arbitrary base change. \end{lemma} 
\begin{lemma} \label{lemma-jump-loci} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $E \in D(\mathcal{O}_X)$ be pseudo-coherent (for example perfect). For any $i \in \mathbf{Z}$ consider the function $$ \beta_i : |X| \longrightarrow \{0, 1, 2, \ldots\} $$ defined above. Then we have \begin{enumerate} \item formation of $\beta_i$ commutes with arbitrary base change, \item the functions $\beta_i$ are upper semi-continuous, and \item the level sets of $\beta_i$ are \'etale locally constructible. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-jump-loci-geometric} Let $Y$ be a scheme and let $X$ be an algebraic space over $Y$ such that the structure morphism $f : X \to Y$ is flat, proper, and of finite presentation. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module of finite presentation, flat over $Y$. For fixed $i \in \mathbf{Z}$ consider the function $$ \beta_i : |Y| \to \{0, 1, 2, \ldots\},\quad y \longmapsto \dim_{\kappa(y)} H^i(X_y, \mathcal{F}_y) $$ Then we have \begin{enumerate} \item formation of $\beta_i$ commutes with arbitrary base change, \item the functions $\beta_i$ are upper semi-continuous, and \item the level sets of $\beta_i$ are locally constructible in $Y$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-chi-locally-constant} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $E \in D(\mathcal{O}_X)$ be perfect. The function $$ \chi_E : |X| \longrightarrow \mathbf{Z},\quad x \longmapsto \sum (-1)^i \beta_i(x) $$ is locally constant on $X$. \end{lemma} 
\begin{lemma} \label{lemma-open-where-cohomology-in-degree-i-rank-r} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $E \in D(\mathcal{O}_X)$ be perfect. Given $i, r \in \mathbf{Z}$, there exists an open subspace $U \subset X$ characterized by the following \begin{enumerate} \item $E|_U \cong H^i(E|_U)[-i]$ and $H^i(E|_U)$ is a locally free $\mathcal{O}_U$-module of rank $r$, \item a morphism $f : Y \to X$ factors through $U$ if and only if $Lf^*E$ is isomorphic to a locally free module of rank $r$ placed in degree $i$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-open-where-cohomology-in-degree-i-rank-r-geometric} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$ which is proper, flat, and of finite presentation. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module of finite presentation, flat over $Y$. Fix $i, r \in \mathbf{Z}$. Then there exists an open subspace $V \subset Y$ with the following property: A morphism $T \to Y$ factors through $V$ if and only if $Rf_{T, *}\mathcal{F}_T$ is isomorphic to a finite locally free module of rank $r$ placed in degree $i$. \end{lemma} 
\begin{lemma} \label{lemma-locally-closed-where-H0-locally-free} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $E \in D(\mathcal{O}_X)$ be perfect of tor-amplitude in $[a, b]$ for some $a, b \in \mathbf{Z}$. Let $r \geq 0$. Then there exists a locally closed subspace $j : Z \to X$ characterized by the following \begin{enumerate} \item $H^a(Lj^*E)$ is a locally free $\mathcal{O}_Z$-module of rank $r$, and \item a morphism $f : Y \to X$ factors through $Z$ if and only if for all morphisms $g : Y' \to Y$ the $\mathcal{O}_{Y'}$-module $H^a(L(f \circ g)^*E)$ is locally free of rank $r$. \end{enumerate} Moreover, $j : Z \to X$ is of finite presentation and we have \begin{enumerate} \item[(3)] if $f : Y \to X$ factors as $Y \xrightarrow{g} Z \to X$, then $H^a(Lf^*E) = g^*H^a(Lj^*E)$, \item[(4)] if $\beta_a(x) \leq r$ for all $x \in |X|$, then $j$ is a closed immersion and given $f : Y \to X$ the following are equivalent \begin{enumerate} \item $f : Y \to X$ factors through $Z$, \item $H^0(Lf^*E)$ is a locally free $\mathcal{O}_Y$-module of rank $r$, \end{enumerate} and if $r = 1$ these are also equivalent to \begin{enumerate} \item[(c)] $\mathcal{O}_Y \to \SheafHom_{\mathcal{O}_Y}(H^0(Lf^*E), H^0(Lf^*E))$ is injective. \end{enumerate} \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-proper-flat-h0} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume \begin{enumerate} \item $f$ is proper, flat, and of finite presentation, and \item for a morphism $\Spec(k) \to Y$ where $k$ is a field, we have $k = H^0(X_k, \mathcal{O}_{X_k})$. \end{enumerate} Then we have \begin{enumerate} \item[(a)] $f_*\mathcal{O}_X = \mathcal{O}_Y$ and this holds after any base change, \item[(b)] \'etale locally on $Y$ we have $$ Rf_*\mathcal{O}_X = \mathcal{O}_Y \oplus P $$ in $D(\mathcal{O}_Y)$ where $P$ is perfect of tor amplitude in $[1, \infty)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-proper-flat-geom-red-connected} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume \begin{enumerate} \item $f$ is proper, flat, and of finite presentation, and \item the geometric fibres of $f$ are reduced and connected. \end{enumerate} Then $f_*\mathcal{O}_X = \mathcal{O}_Y$ and this holds after any base change. \end{lemma} 
\begin{lemma} \label{lemma-countable-cohomology} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $K$ be an object of $D_\QCoh(\mathcal{O}_X)$ such that the cohomology sheaves $H^i(K)$ have countable sets of sections over affine schemes \'etale over $X$. Then for any quasi-compact and quasi-separated \'etale morphism $U \to X$ and any perfect object $E$ in $D(\mathcal{O}_X)$ the sets $$ H^i(U, K \otimes^\mathbf{L} E),\quad \Ext^i(E|_U, K|_U) $$ are countable. \end{lemma} 
\begin{lemma} \label{lemma-countable} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Assume the sets of sections of $\mathcal{O}_X$ over affines \'etale over $X$ are countable. Let $K$ be an object of $D_\QCoh(\mathcal{O}_X)$. The following are equivalent \begin{enumerate} \item $K = \text{hocolim} E_n$ with $E_n$ a perfect object of $D(\mathcal{O}_X)$, and \item the cohomology sheaves $H^i(K)$ have countable sets of sections over affines \'etale over $X$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-computing-sections-as-colim} Let $A$ be a ring. Let $f : U \to X$ be a flat morphism of algebraic spaces of finite presentation over $A$. Then \begin{enumerate} \item there exists an inverse system of perfect objects $L_n$ of $D(\mathcal{O}_X)$ such that $$ R\Gamma(U, Lf^*K) = \text{hocolim}\ R\Hom_X(L_n, K) $$ in $D(A)$ functorially in $K$ in $D_\QCoh(\mathcal{O}_X)$, and \item there exists a system of perfect objects $E_n$ of $D(\mathcal{O}_X)$ such that $$ R\Gamma(U, Lf^*K) = \text{hocolim}\ R\Gamma(X, E_n \otimes^\mathbf{L} K) $$ in $D(A)$ functorially in $K$ in $D_\QCoh(\mathcal{O}_X)$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-resolution-property} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. We say $X$ has the {\it resolution property} if every quasi-coherent $\mathcal{O}_X$-module of finite type is the quotient of a finite locally free $\mathcal{O}_X$-module. \end{definition} 
\begin{lemma} \label{lemma-resolution-property-ample-relative} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume \begin{enumerate} \item $Y$ is quasi-compact and quasi-separated and has the resolution property, \item there exists an $f$-ample invertible module on $X$ (Divisors on Spaces, Definition \ref{spaces-divisors-definition-relatively-ample}). \end{enumerate} Then $X$ has the resolution property. \end{lemma} 
\begin{lemma} \label{lemma-resolution-property-goes-up-affine} Let $S$ be a scheme. Let $f : X \to Y$ be an affine or quasi-affine morphism of algebraic spaces over $S$ with $Y$ quasi-compact and quasi-separated. If $Y$ has the resolution property, so does $X$. \end{lemma} 
\begin{lemma} \label{lemma-resolution-property-goes-down-finite-flat} Let $S$ be a scheme. Let $f : X \to Y$ be a surjective finite locally free morphism of algebraic spaces over $S$. If $X$ has the resolution property, so does $Y$. \end{lemma} 
\begin{lemma} \label{lemma-bounded-truncation} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $P \in D_{perf}(\mathcal{O}_X)$ and $E \in D_{\QCoh}(\mathcal{O}_X)$. Let $a \in \mathbf{Z}$. The following are equivalent \begin{enumerate} \item $\Hom_{D(\mathcal{O}_X)}(P[-i], E) = 0$ for $i \gg 0$, and \item $\Hom_{D(\mathcal{O}_X)}(P[-i], \tau_{\geq a} E) = 0$ for $i \gg 0$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-bounded-below-truncation} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $P \in D_{perf}(\mathcal{O}_X)$ and $E \in D_{\QCoh}(\mathcal{O}_X)$. Let $a \in \mathbf{Z}$. The following are equivalent \begin{enumerate} \item $\Hom_{D(\mathcal{O}_X)}(P[-i], E) = 0$ for $i \ll 0$, and \item $\Hom_{D(\mathcal{O}_X)}(P[-i], \tau_{\leq a} E) = 0$ for $i \ll 0$. \end{enumerate} \end{lemma} 
\begin{proposition} \label{proposition-detecting-bounded-above} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $G \in D_{perf}(\mathcal{O}_X)$ be a perfect complex which generates $D_\QCoh (\mathcal{O}_X)$. Let $E \in D_\QCoh (\mathcal{O}_X)$. The following are equivalent \begin{enumerate} \item $E \in D^-_\QCoh (\mathcal{O}_X)$, \item $\Hom_{D(\mathcal{O}_X)}(G[-i], E) = 0$ for $i \gg 0$, \item $\Ext^i_X(G, E) = 0$ for $i \gg 0$, \item $R\Hom_X(G, E)$ is in $D^-(\mathbf{Z})$, \item $H^i(X, G^\vee \otimes_{\mathcal{O}_X}^\mathbf{L} E) = 0$ for $i \gg 0$, \item $R\Gamma(X, G^\vee \otimes_{\mathcal{O}_X}^\mathbf{L} E)$ is in $D^-(\mathbf{Z})$, \item for every perfect object $P$ of $D(\mathcal{O}_X)$ \begin{enumerate} \item the assertions (2), (3), (4) hold with $G$ replaced by $P$, and \item $H^i(X, P \otimes_{\mathcal{O}_X}^\mathbf{L} E) = 0$ for $i \gg 0$, \item $R\Gamma(X, P \otimes_{\mathcal{O}_X}^\mathbf{L} E)$ is in $D^-(\mathbf{Z})$. \end{enumerate} \end{enumerate} \end{proposition} 
\begin{proposition} \label{proposition-detecting-bounded-below} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $G \in D_{perf}(\mathcal{O}_X)$ be a perfect complex which generates $D_\QCoh (\mathcal{O}_X)$. Let $E \in D_\QCoh (\mathcal{O}_X)$. The following are equivalent \begin{enumerate} \item $E \in D^+_\QCoh (\mathcal{O}_X)$, \item $\Hom_{D(\mathcal{O}_X)}(G[-i], E) = 0$ for $i \ll 0$, \item $\Ext^i_X(G, E) = 0$ for $i \ll 0$, \item $R\Hom_X(G, E)$ is in $D^+(\mathbf{Z})$, \item $H^i(X, G^\vee \otimes_{\mathcal{O}_X}^\mathbf{L} E) = 0$ for $i \ll 0$, \item $R\Gamma(X, G^\vee \otimes_{\mathcal{O}_X}^\mathbf{L} E)$ is in $D^+(\mathbf{Z})$, \item for every perfect object $P$ of $D(\mathcal{O}_X)$ \begin{enumerate} \item the assertions (2), (3), (4) hold with $G$ replaced by $P$, and \item $H^i(X, P \otimes_{\mathcal{O}_X}^\mathbf{L} E) = 0$ for $i \ll 0$, \item $R\Gamma(X, P \otimes_{\mathcal{O}_X}^\mathbf{L} E)$ is in $D^+(\mathbf{Z})$. \end{enumerate} \end{enumerate} \end{proposition} 
\begin{lemma} \label{lemma-DQCoh-alternative-small} In the situation above there are canonical exact equivalences between the following triangulated categories \begin{enumerate} \item $D_\QCoh(\mathcal{O}_X)$, \item $D_\QCoh(X_{affine, \etale}, \mathcal{O}_X)$, \item $D_\QCoh(X_{affine}, \mathcal{O}_X)$, and \item $\mathit{QC}(X_{affine}, \mathcal{O}_X)$. \end{enumerate} \end{lemma} 
