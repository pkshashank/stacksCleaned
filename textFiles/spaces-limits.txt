\begin{definition} \label{definition-locally-finite-presentation} Let $S$ be a scheme. \begin{enumerate} \item A functor $F : (\Sch/S)_{fppf}^{opp} \to \textit{Sets}$ is said to be {\it limit preserving} or {\it locally of finite presentation} if for every affine scheme $T$ over $S$ which is a limit $T = \lim T_i$ of a directed inverse system of affine schemes $T_i$ over $S$, we have $$ F(T) = \colim F(T_i). $$ We sometimes say that $F$ is {\it locally of finite presentation over $S$}. \item Let $F, G : (\Sch/S)_{fppf}^{opp} \to \textit{Sets}$. A transformation of functors $a : F \to G$ is {\it limit preserving} or {\it locally of finite presentation} if for every scheme $T$ over $S$ and every $y \in G(T)$ the functor $$ F_y : (\Sch/T)_{fppf}^{opp} \longrightarrow \textit{Sets}, \quad T'/T \longmapsto \{x \in F(T') \mid a(x) = y|_{T'}\} $$ is locally of finite presentation over $T$\footnote{The characterization (2) in Lemma \ref{lemma-characterize-relative-limit-preserving} may be easier to parse.}. We sometimes say that $F$ is {\it relatively limit preserving} over $G$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-characterize-relative-limit-preserving} Let $S$ be a scheme. Let $a : F \to G$ be a transformation of functors $(\Sch/S)_{fppf}^{opp} \to \textit{Sets}$. The following are equivalent \begin{enumerate} \item $a : F \to G$ is limit preserving, and \item for every affine scheme $T$ over $S$ which is a limit $T = \lim T_i$ of a directed inverse system of affine schemes $T_i$ over $S$ the diagram of sets $$ \xymatrix{ \colim_i F(T_i) \ar[r] \ar[d]_a & F(T) \ar[d]^a \\ \colim_i G(T_i) \ar[r] & G(T) } $$ is a fibre product diagram. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-composition-locally-finite-presentation} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $F, G, H : (\Sch/S)_{fppf}^{opp} \to \textit{Sets}$. Let $a : F \to G$, $b : G \to H$ be transformations of functors. If $a$ and $b$ are limit preserving, then $$ b \circ a : F \longrightarrow H $$ is limit preserving. \end{lemma} 
\begin{lemma} \label{lemma-locally-finite-presentation-permanence} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $F, G, H : (\Sch/S)_{fppf}^{opp} \to \textit{Sets}$. Let $a : F \to G$, $b : G \to H$ be transformations of functors. If $b \circ a$ and $b$ are limit preserving, then $a$ is limit preserving. \end{lemma} 
\begin{lemma} \label{lemma-base-change-locally-finite-presentation} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $F, G, H : (\Sch/S)_{fppf}^{opp} \to \textit{Sets}$. Let $a : F \to G$, $b : H \to G$ be transformations of functors. Consider the fibre product diagram $$ \xymatrix{ H \times_{b, G, a} F \ar[r]_-{b'} \ar[d]_{a'} & F \ar[d]^a \\ H \ar[r]^b & G } $$ If $a$ is limit preserving, then the base change $a'$ is limit preserving. \end{lemma} 
\begin{lemma} \label{lemma-fibre-product-locally-finite-presentation} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $E, F, G, H : (\Sch/S)_{fppf}^{opp} \to \textit{Sets}$. Let $a : F \to G$, $b : H \to G$, and $c : G \to E$ be transformations of functors. If $c$, $c \circ a$, and $c \circ b$ are limit preserving, then $F \times_G H \to E$ is too. \end{lemma} 
\begin{lemma} \label{lemma-sheafify-finite-presentation} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $F : (\Sch/S)_{fppf}^{opp} \to \textit{Sets}$ be a functor. If $F$ is limit preserving then its sheafification $F^\#$ is limit preserving. \end{lemma} 
\begin{lemma} \label{lemma-sheaf-finite-presentation} Let $S$ be a scheme. Let $F : (\Sch/S)_{fppf}^{opp} \to \textit{Sets}$ be a functor. Assume that \begin{enumerate} \item $F$ is a sheaf, and \item there exists an fppf covering $\{U_j \to S\}_{j \in J}$ such that $F|_{(\Sch/U_j)_{fppf}}$ is limit preserving. \end{enumerate} Then $F$ is limit preserving. \end{lemma} 
\begin{lemma} \label{lemma-sheafify-finite-presentation-map} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $F, G : (\Sch/S)_{fppf}^{opp} \to \textit{Sets}$ be functors. If $a : F \to G$ is a transformation which is limit preserving, then the induced transformation of sheaves $F^\# \to G^\#$ is limit preserving. \end{lemma} 
\begin{proposition} \label{proposition-characterize-locally-finite-presentation} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. The following are equivalent: \begin{enumerate} \item The morphism $f$ is a morphism of algebraic spaces which is locally of finite presentation, see Morphisms of Spaces, Definition \ref{spaces-morphisms-definition-locally-finite-presentation}. \item The morphism $f : X \to Y$ is limit preserving as a transformation of functors, see Definition \ref{definition-locally-finite-presentation}. \end{enumerate} \end{proposition} 
\begin{lemma} \label{lemma-surjection-is-enough} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. If for every directed limit $T = \lim_{i \in I} T_i$ of affine schemes over $S$ the map $$ \colim X(T_i) \longrightarrow X(T) \times_{Y(T)} \colim Y(T_i) $$ is surjective, then $f$ is locally of finite presentation. In other words, in Proposition \ref{proposition-characterize-locally-finite-presentation} part (2) it suffices to check surjectivity in the criterion of Lemma \ref{lemma-characterize-relative-limit-preserving}. \end{lemma} 
\begin{lemma} \label{lemma-directed-inverse-system-has-limit} Let $S$ be a scheme. Let $I$ be a directed set. Let $(X_i, f_{ii'})$ be an inverse system over $I$ in the category of algebraic spaces over $S$. If the morphisms $f_{ii'} : X_i \to X_{i'}$ are affine, then the limit $X = \lim_i X_i$ (as an fppf sheaf) is an algebraic space. Moreover, \begin{enumerate} \item each of the morphisms $f_i : X \to X_i$ is affine, \item for any $i \in I$ and any morphism of algebraic spaces $T \to X_i$ we have $$ X \times_{X_i} T = \lim_{i' \geq i} X_{i'} \times_{X_i} T. $$ as algebraic spaces over $S$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-space-over-limit} Let $S$ be a scheme. Let $I$ be a directed set. Let $(X_i, f_{ii'})$ be an inverse system over $I$ of algebraic spaces over $S$ with affine transition maps. Let $X = \lim_i X_i$. Let $0 \in I$. Suppose that $T \to X_0$ is a morphism of algebraic spaces. Then $$ T \times_{X_0} X = \lim_{i \geq 0} T \times_{X_0} X_i $$ as algebraic spaces over $S$. \end{lemma} 
\begin{lemma} \label{lemma-directed-inverse-system-closed-immersions} Let $S$ be a scheme. Let $I$ be a directed set. Let $(X_i, f_{i'i}) \to (Y_i, g_{i'i})$ be a morphism of inverse systems over $I$ of algebraic spaces over $S$. Assume \begin{enumerate} \item the morphisms $f_{i'i} : X_{i'} \to X_i$ are affine, \item the morphisms $g_{i'i} : Y_{i'} \to Y_i$ are affine, \item the morphisms $X_i \to Y_i$ are closed immersions. \end{enumerate} Then $\lim X_i \to \lim Y_i$ is a closed immersion. \end{lemma} 
\begin{lemma} \label{lemma-directed-inverse-system-reduced} Let $S$ be a scheme. Let $I$ be a directed set. Let $(X_i, f_{i'i})$ be an inverse systems over $I$ of algebraic spaces over $S$. If $X_i$ is reduced for all $i$, then $X$ is reduced. \end{lemma} 
\begin{lemma} \label{lemma-better-characterize-relative-limit-preserving} Let $S$ be a scheme. Let $X \to Y$ be a morphism of algebraic spaces over $S$. The equivalent conditions (1) and (2) of Proposition \ref{proposition-characterize-locally-finite-presentation} are also equivalent to \begin{enumerate} \item[(3)] for every directed limit $T = \lim T_i$ of quasi-compact and quasi-separated algebraic spaces $T_i$ over $S$ with affine transition morphisms the diagram of sets $$ \xymatrix{ \colim_i \Mor(T_i, X) \ar[r] \ar[d] & \Mor(T, X) \ar[d] \\ \colim_i \Mor(T_i, Y) \ar[r] & \Mor(T, Y) } $$ is a fibre product diagram. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-inverse-limit-sets} Let $S$ be a scheme. Let $X = \lim_{i \in I} X_i$ be the limit of a directed inverse system of algebraic spaces over $S$ with affine transition morphisms (Lemma \ref{lemma-directed-inverse-system-has-limit}). If each $X_i$ is decent (for example quasi-separated or locally separated) then $|X| = \lim_i |X_i|$ as sets. \end{lemma} 
\begin{lemma} \label{lemma-topology-limit} With same notation and assumptions as in Lemma \ref{lemma-inverse-limit-sets} we have $|X| = \lim_i |X_i|$ as topological spaces. \end{lemma} 
\begin{lemma} \label{lemma-limit-nonempty} Let $S$ be a scheme. Let $X = \lim_{i \in I} X_i$ be the limit of a directed inverse system of algebraic spaces over $S$ with affine transition morphisms (Lemma \ref{lemma-directed-inverse-system-has-limit}). If each $X_i$ is quasi-compact and nonempty, then $|X|$ is nonempty. \end{lemma} 
\begin{lemma} \label{lemma-inverse-limit-irreducibles} Let $S$ be a scheme. Let $X = \lim_{i \in I} X_i$ be the limit of a directed inverse system of algebraic spaces over $S$ with affine transition morphisms (Lemma \ref{lemma-directed-inverse-system-has-limit}). Let $x \in |X|$ with images $x_i \in |X_i|$. If each $X_i$ is decent, then $\overline{\{x\}} = \lim_i \overline{\{x_i\}}$ as sets and as algebraic spaces if endowed with reduced induced scheme structure. \end{lemma} 
\begin{lemma} \label{lemma-descend-section} Notation and assumptions as in Situation \ref{situation-descent}. Suppose that $\mathcal{F}_0$ is a quasi-coherent sheaf on $X_0$. Set $\mathcal{F}_i = f_{0i}^*\mathcal{F}_0$ for $i \geq 0$ and set $\mathcal{F} = f_0^*\mathcal{F}_0$. Then $$ \Gamma(X, \mathcal{F}) = \colim_{i \geq 0} \Gamma(X_i, \mathcal{F}_i) $$ \end{lemma} 
\begin{lemma} \label{lemma-descend-opens} Notation and assumptions as in Situation \ref{situation-descent}. For any quasi-compact open subspace $U \subset X$ there exists an $i$ and a quasi-compact open $U_i \subset X_i$ whose inverse image in $X$ is $U$. \end{lemma} 
\begin{lemma} \label{lemma-descend-equality} Notation and assumptions as in Situation \ref{situation-descent}. Let $f_0 : Y_0 \to Z_0$ be a morphism of algebraic spaces over $X_0$. Assume (a) $Y_0 \to X_0$ and $Z_0 \to X_0$ are representable, (b) $Y_0$, $Z_0$ quasi-compact and quasi-separated, (c) $f_0$ locally of finite presentation, and (d) $Y_0 \times_{X_0} X \to Z_0 \times_{X_0} X$ an isomorphism. Then there exists an $i \geq 0$ such that $Y_0 \times_{X_0} X_i \to Z_0 \times_{X_0} X_i$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-descend-separated} Notation and assumptions as in Situation \ref{situation-descent}. If $X$ is separated, then $X_i$ is separated for some $i \in I$. \end{lemma} 
\begin{lemma} \label{lemma-limit-is-affine} Notation and assumptions as in Situation \ref{situation-descent}. If $X$ is affine, then there exists an $i$ such that $X_i$ is affine. \end{lemma} 
\begin{lemma} \label{lemma-limit-is-scheme} Notation and assumptions as in Situation \ref{situation-descent}. If $X$ is a scheme, then there exists an $i$ such that $X_i$ is a scheme. \end{lemma} 
\begin{lemma} \label{lemma-finite-type-eventually-closed} Let $S$ be a scheme. Let $B$ be an algebraic space over $S$. Let $X = \lim X_i$ be a directed limit of algebraic spaces over $B$ with affine transition morphisms. Let $Y \to X$ be a morphism of algebraic spaces over $B$. \begin{enumerate} \item If $Y \to X$ is a closed immersion, $X_i$ quasi-compact, and $Y \to B$ locally of finite type, then $Y \to X_i$ is a closed immersion for $i$ large enough. \item If $Y \to X$ is an immersion, $X_i$ quasi-separated, $Y \to B$ locally of finite type, and $Y$ quasi-compact, then $Y \to X_i$ is an immersion for $i$ large enough. \item If $Y \to X$ is an isomorphism, $X_i$ quasi-compact, $X_i \to B$ locally of finite type, the transition morphisms $X_{i'} \to X_i$ are closed immersions, and $Y \to B$ is locally of finite presentation, then $Y \to X_i$ is an isomorphism for $i$ large enough. \item If $Y \to X$ is a monomorphism, $X_i$ quasi-separated, $Y \to B$ locally of finite type, and $Y$ quasi-compact, then $Y \to X_i$ is a monomorphism for $i$ large enough. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-eventually-separated} Let $S$ be a scheme. Let $Y$ be an algebraic space over $S$. Let $X = \lim X_i$ be a directed limit of algebraic spaces over $Y$ with affine transition morphisms. Assume \begin{enumerate} \item $Y$ is quasi-separated, \item $X_i$ is quasi-compact and quasi-separated, \item the morphism $X \to Y$ is separated. \end{enumerate} Then $X_i \to Y$ is separated for all $i$ large enough. \end{lemma} 
\begin{lemma} \label{lemma-eventually-affine} Let $S$ be a scheme. Let $Y$ be an algebraic space over $S$. Let $X = \lim X_i$ be a directed limit of algebraic spaces over $Y$ with affine transition morphisms. Assume \begin{enumerate} \item $Y$ quasi-compact and quasi-separated, \item $X_i$ quasi-compact and quasi-separated, \item $X \to Y$ affine. \end{enumerate} Then $X_i \to Y$ is affine for $i$ large enough. \end{lemma} 
\begin{lemma} \label{lemma-eventually-finite} Let $S$ be a scheme. Let $Y$ be an algebraic space over $S$. Let $X = \lim X_i$ be a directed limit of algebraic spaces over $Y$ with affine transition morphisms. Assume \begin{enumerate} \item $Y$ quasi-compact and quasi-separated, \item $X_i$ quasi-compact and quasi-separated, \item the transition morphisms $X_{i'} \to X_i$ are finite, \item $X_i \to Y$ locally of finite type \item $X \to Y$ integral. \end{enumerate} Then $X_i \to Y$ is finite for $i$ large enough. \end{lemma} 
\begin{lemma} \label{lemma-eventually-closed-immersion} Let $S$ be a scheme. Let $Y$ be an algebraic space over $S$. Let $X = \lim X_i$ be a directed limit of algebraic spaces over $Y$ with affine transition morphisms. Assume \begin{enumerate} \item $Y$ quasi-compact and quasi-separated, \item $X_i$ quasi-compact and quasi-separated, \item the transition morphisms $X_{i'} \to X_i$ are closed immersions, \item $X_i \to Y$ locally of finite type \item $X \to Y$ is a closed immersion. \end{enumerate} Then $X_i \to Y$ is a closed immersion for $i$ large enough. \end{lemma} 
\begin{lemma} \label{lemma-descend-etale} With notation and assumptions as in Situation \ref{situation-descent-property}. If \begin{enumerate} \item $f$ is \'etale, \item $f_0$ is locally of finite presentation, \end{enumerate} then $f_i$ is \'etale for some $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-descend-smooth} With notation and assumptions as in Situation \ref{situation-descent-property}. If \begin{enumerate} \item $f$ is smooth, \item $f_0$ is locally of finite presentation, \end{enumerate} then $f_i$ is smooth for some $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-descend-surjective} With notation and assumptions as in Situation \ref{situation-descent-property}. If \begin{enumerate} \item $f$ is surjective, \item $f_0$ is locally of finite presentation, \end{enumerate} then $f_i$ is surjective for some $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-descend-universally-injective} Notation and assumptions as in Situation \ref{situation-descent-property}. If \begin{enumerate} \item $f$ is universally injective, \item $f_0$ is locally of finite type, \end{enumerate} then $f_i$ is universally injective for some $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-descend-affine} Notation and assumptions as in Situation \ref{situation-descent-property}. If $f$ is affine, then $f_i$ is affine for some $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-descend-finite} Notation and assumptions as in Situation \ref{situation-descent-property}. If \begin{enumerate} \item $f$ is finite, \item $f_0$ is locally of finite type, \end{enumerate} then $f_i$ is finite for some $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-descend-closed-immersion} Notation and assumptions as in Situation \ref{situation-descent-property}. If \begin{enumerate} \item $f$ is a closed immersion, \item $f_0$ is locally of finite type, \end{enumerate} then $f_i$ is a closed immersion for some $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-descend-separated-morphism} Notation and assumptions as in Situation \ref{situation-descent-property}. If $f$ is separated, then $f_i$ is separated for some $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-descend-isomorphism} Notation and assumptions as in Situation \ref{situation-descent-property}. If \begin{enumerate} \item $f$ is a isomorphism, \item $f_0$ is locally of finite presentation, \end{enumerate} then $f_i$ is a isomorphism for some $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-descend-monomorphism} Notation and assumptions as in Situation \ref{situation-descent-property}. If \begin{enumerate} \item $f$ is a monomorphism, \item $f_0$ is locally of finite type, \end{enumerate} then $f_i$ is a monomorphism for some $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-descend-flat} Notation and assumptions as in Situation \ref{situation-descent-property}. Let $\mathcal{F}_0$ be a quasi-coherent $\mathcal{O}_{X_0}$-module and denote $\mathcal{F}_i$ the pullback to $X_i$ and $\mathcal{F}$ the pullback to $X$. If \begin{enumerate} \item $\mathcal{F}$ is flat over $Y$, \item $\mathcal{F}_0$ is of finite presentation, and \item $f_0$ is locally of finite presentation, \end{enumerate} then $\mathcal{F}_i$ is flat over $Y_i$ for some $i \geq 0$. In particular, if $f_0$ is locally of finite presentation and $f$ is flat, then $f_i$ is flat for some $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-eventually-proper} Assumptions and notation as in Situation \ref{situation-descent-property}. If \begin{enumerate} \item $f$ is proper, and \item $f_0$ is locally of finite type, \end{enumerate} then there exists an $i$ such that $f_i$ is proper. \end{lemma} 
\begin{lemma} \label{lemma-eventually-relative-dimension} Assumptions and notation as in Situation \ref{situation-descent-property}. Let $d \geq 0$. If \begin{enumerate} \item $f$ has relative dimension $\leq d$ (Morphisms of Spaces, Definition \ref{spaces-morphisms-definition-relative-dimension}), and \item $f_0$ is locally of finite type, \end{enumerate} then there exists an $i$ such that $f_i$ has relative dimension $\leq d$. \end{lemma} 
\begin{lemma} \label{lemma-descend-finite-presentation} Let $S$ be a scheme. Let $I$ be a directed set. Let $(X_i, f_{ii'})$ be an inverse system over $I$ of algebraic spaces over $S$. Assume \begin{enumerate} \item the morphisms $f_{ii'} : X_i \to X_{i'}$ are affine, \item the spaces $X_i$ are quasi-compact and quasi-separated. \end{enumerate} Let $X = \lim_i X_i$. Then the category of algebraic spaces of finite presentation over $X$ is the colimit over $I$ of the categories of algebraic spaces of finite presentation over $X_i$. \end{lemma} 
\begin{lemma} \label{lemma-descend-modules-finite-presentation} With notation and assumptions as in Lemma \ref{lemma-descend-finite-presentation}. The category of $\mathcal{O}_X$-modules of finite presentation is the colimit over $I$ of the categories $\mathcal{O}_{X_i}$-modules of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-descend-invertible-modules} With notation and assumptions as in Lemma \ref{lemma-descend-finite-presentation}. Then \begin{enumerate} \item any finite locally free $\mathcal{O}_X$-module is the pullback of a finite locally free $\mathcal{O}_{X_i}$-module for some $i$, \item any invertible $\mathcal{O}_X$-module is the pullback of an invertible $\mathcal{O}_{X_i}$-module for some $i$. \end{enumerate} \end{lemma} 
\begin{proposition} \label{proposition-approximate} \begin{reference} Our proof follows closely the proof given in \cite[Theorem 1.2.2]{CLO}. \end{reference} Let $X$ be a quasi-compact and quasi-separated algebraic space over $\Spec(\mathbf{Z})$. There exist a directed set $I$ and an inverse system of algebraic spaces $(X_i, f_{ii'})$ over $I$ such that \begin{enumerate} \item the transition morphisms $f_{ii'}$ are affine \item each $X_i$ is quasi-separated and of finite type over $\mathbf{Z}$, and \item $X = \lim X_i$. \end{enumerate} \end{proposition} 
\begin{lemma} \label{lemma-colimit-finitely-presented} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Every quasi-coherent $\mathcal{O}_X$-module is a filtered colimit of finitely presented $\mathcal{O}_X$-modules. \end{lemma} 
\begin{lemma} \label{lemma-directed-colimit-finite-type} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Then $\mathcal{F}$ is the directed colimit of its finite type quasi-coherent submodules. \end{lemma} 
\begin{lemma} \label{lemma-finite-directed-colimit-surjective-maps} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $\mathcal{F}$ be a finite type quasi-coherent $\mathcal{O}_X$-module. Then we can write $\mathcal{F} = \lim \mathcal{F}_i$ where each $\mathcal{F}_i$ is an $\mathcal{O}_X$-module of finite presentation and all transition maps $\mathcal{F}_i \to \mathcal{F}_{i'}$ surjective. \end{lemma} 
\begin{lemma} \label{lemma-algebra-directed-colimit-finite-presentation} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $\mathcal{A}$ be a quasi-coherent $\mathcal{O}_X$-algebra. Then $\mathcal{A}$ is a directed colimit of finitely presented quasi-coherent $\mathcal{O}_X$-algebras. \end{lemma} 
\begin{lemma} \label{lemma-algebra-directed-colimit-finite-type} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $\mathcal{A}$ be a quasi-coherent $\mathcal{O}_X$-algebra. Then $\mathcal{A}$ is the directed colimit of its finite type quasi-coherent $\mathcal{O}_X$-subalgebras. \end{lemma} 
\begin{lemma} \label{lemma-finite-algebra-directed-colimit-finite-finitely-presented} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $\mathcal{A}$ be a finite quasi-coherent $\mathcal{O}_X$-algebra. Then $\mathcal{A} = \colim \mathcal{A}_i$ is a directed colimit of finite and finitely presented quasi-coherent $\mathcal{O}_X$-algebras with surjective transition maps. \end{lemma} 
\begin{lemma} \label{lemma-integral-algebra-directed-colimit-finite} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $\mathcal{A}$ be an integral quasi-coherent $\mathcal{O}_X$-algebra. Then \begin{enumerate} \item $\mathcal{A}$ is the directed colimit of its finite quasi-coherent $\mathcal{O}_X$-subalgebras, and \item $\mathcal{A}$ is a directed colimit of finite and finitely presented $\mathcal{O}_X$-algebras. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-extend} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $U \subset X$ be a quasi-compact open. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Let $\mathcal{G} \subset \mathcal{F}|_U$ be a quasi-coherent $\mathcal{O}_U$-submodule which is of finite type. Then there exists a quasi-coherent submodule $\mathcal{G}' \subset \mathcal{F}$ which is of finite type such that $\mathcal{G}'|_U = \mathcal{G}$. \end{lemma} 
\begin{lemma} \label{lemma-approximate-morphism} Let $f : X \to Y$ be a morphism of quasi-compact and quasi-separated algebraic spaces over $\mathbf{Z}$. Then there exists a direct set $I$ and an inverse system $(f_i : X_i \to Y_i)$ of morphisms algebraic spaces over $I$, such that the transition morphisms $X_i \to X_{i'}$ and $Y_i \to Y_{i'}$ are affine, such that $X_i$ and $Y_i$ are quasi-separated and of finite type over $\mathbf{Z}$, and such that $(X \to Y) = \lim (X_i \to Y_i)$. \end{lemma} 
\begin{lemma} \label{lemma-relative-approximation} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume that \begin{enumerate} \item $X$ is quasi-compact and quasi-separated, and \item $Y$ is quasi-separated. \end{enumerate} Then $X = \lim X_i$ is a limit of a directed inverse system of algebraic spaces $X_i$ of finite presentation over $Y$ with affine transition morphisms over $Y$. \end{lemma} 
\begin{lemma} \label{lemma-affine-morphism-is-limit} Let $S$ be a scheme. Let $f : X \to Y$ be an affine morphism of algebraic spaces over $S$. If $Y$ quasi-compact and quasi-separated, then $X$ is a directed limit $X = \lim X_i$ with each $X_i$ affine and of finite presentation over $Y$. \end{lemma} 
\begin{lemma} \label{lemma-integral-limit-finite-and-finite-presentation} Let $S$ be a scheme. Let $f : X \to Y$ be an integral morphism of algebraic spaces over $S$. Assume $Y$ quasi-compact and quasi-separated. Then $X$ can be written as a directed limit $X = \lim X_i$ where $X_i$ are finite and of finite presentation over $Y$. \end{lemma} 
\begin{lemma} \label{lemma-finite-in-finite-and-finite-presentation} Let $S$ be a scheme. Let $f : X \to Y$ be a finite morphism of algebraic spaces over $S$. Assume $Y$ quasi-compact and quasi-separated. Then $X$ can be written as a directed limit $X = \lim X_i$ where the transition maps are closed immersions and the objects $X_i$ are finite and of finite presentation over $Y$. \end{lemma} 
\begin{lemma} \label{lemma-closed-is-limit-closed-and-finite-presentation} \begin{slogan} Closed immersions of qcqs algebraic spaces can be approximated by finitely presented closed immersions. \end{slogan} Let $S$ be a scheme. Let $f : X \to Y$ be a closed immersion of algebraic spaces over $S$. Assume $Y$ quasi-compact and quasi-separated. Then $X$ can be written as a directed limit $X = \lim X_i$ where the transition maps are closed immersions and the morphisms $X_i \to Y$ are closed immersions of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-quasi-affine-closed-in-finite-presentation} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume \begin{enumerate} \item $f$ is locally of finite type and quasi-affine, and \item $Y$ is quasi-compact and quasi-separated. \end{enumerate} Then there exists a morphism of finite presentation $f' : X' \to Y$ and a closed immersion $X \to X'$ over $Y$. \end{lemma} 
\begin{lemma} \label{lemma-finite-type-closed-in-finite-presentation} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume: \begin{enumerate} \item $f$ is of locally of finite type. \item $X$ is quasi-compact and quasi-separated, and \item $Y$ is quasi-compact and quasi-separated. \end{enumerate} Then there exists a morphism of finite presentation $f' : X' \to Y$ and a closed immersion $X \to X'$ of algebraic spaces over $Y$. \end{lemma} 
\begin{proposition} \label{proposition-separated-closed-in-finite-presentation} Let $S$ be a scheme. $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume \begin{enumerate} \item $f$ is of finite type and separated, and \item $Y$ is quasi-compact and quasi-separated. \end{enumerate} Then there exists a separated morphism of finite presentation $f' : X' \to Y$ and a closed immersion $X \to X'$ over $Y$. \end{proposition} 
\begin{lemma} \label{lemma-proper-limit-of-proper-finite-presentation} Let $S$ be a scheme. Let $f : X \to Y$ be a proper morphism of algebraic spaces over $S$ with $Y$ quasi-compact and quasi-separated. Then $X = \lim X_i$ is a directed limit of algebraic spaces $X_i$ proper and of finite presentation over $Y$ and with transition morphisms and morphisms $X \to X_i$ closed immersions. \end{lemma} 
\begin{lemma} \label{lemma-proper-limit-of-proper-finite-presentation-noetherian} Let $f : X \to Y$ be a proper morphism of algebraic spaces over $\mathbf{Z}$ with $Y$ quasi-compact and quasi-separated. Then there exists a directed set $I$, an inverse system $(f_i : X_i \to Y_i)$ of morphisms of algebraic spaces over $I$, such that the transition morphisms $X_i \to X_{i'}$ and $Y_i \to Y_{i'}$ are affine, such that $f_i$ is proper and of finite presentation, such that $Y_i$ is of finite presentation over $\mathbf{Z}$, and such that $(X \to Y) = \lim (X_i \to Y_i)$. \end{lemma} 
\begin{lemma} \label{lemma-eventually-proper-support} Assumptions and notation as in Situation \ref{situation-descent-property}. Let $\mathcal{F}_0$ be a quasi-coherent $\mathcal{O}_{X_0}$-module. Denote $\mathcal{F}$ and $\mathcal{F}_i$ the pullbacks of $\mathcal{F}_0$ to $X$ and $X_i$. Assume \begin{enumerate} \item $f_0$ is locally of finite type, \item $\mathcal{F}_0$ is of finite type, \item the scheme theoretic support of $\mathcal{F}$ is proper over $Y$. \end{enumerate} Then the scheme theoretic support of $\mathcal{F}_i$ is proper over $Y_i$ for some $i$. \end{lemma} 
\begin{lemma} \label{lemma-embedding-into-affine-over-ls-qs} Let $S$ be a scheme. Let $f : U \to X$ be a morphism of algebraic spaces over $S$. Assume $U$ is an affine scheme, $f$ is locally of finite type, and $X$ quasi-separated and locally separated. Then there exists an immersion $U \to \mathbf{A}^n_X$ over $X$. \end{lemma} 
\begin{lemma} \label{lemma-embedding-into-affine-over-qs} Let $S$ be a scheme. Let $f : Y \to X$ be a morphism of algebraic spaces over $S$. Assume $X$ Noetherian and $f$ of finite presentation. Then there exists a dense open $V \subset Y$ and an immersion $V \to \mathbf{A}^n_X$. \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherent-finite-type-ideals} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space. Let $U \subset X$ be an open subspace. The following are equivalent: \begin{enumerate} \item $U \to X$ is quasi-compact, \item $U$ is quasi-compact, and \item there exists a finite type quasi-coherent sheaf of ideals $\mathcal{I} \subset \mathcal{O}_X$ such that $|X| \setminus |U| = |V(\mathcal{I})|$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-sections-annihilated-by-ideal} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $\mathcal{I} \subset \mathcal{O}_X$ be a quasi-coherent sheaf of ideals. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Consider the sheaf of $\mathcal{O}_X$-modules $\mathcal{F}'$ which associates to every object $U$ of $X_\etale$ the module $$ \mathcal{F}'(U) = \{s \in \mathcal{F}(U) \mid \mathcal{I}s = 0\} $$ Assume $\mathcal{I}$ is of finite type. Then \begin{enumerate} \item $\mathcal{F}'$ is a quasi-coherent sheaf of $\mathcal{O}_X$-modules, \item for affine $U$ in $X_\etale$ we have $\mathcal{F}'(U) = \{s \in \mathcal{F}(U) \mid \mathcal{I}(U)s = 0\}$, and \item $\mathcal{F}'_x = \{s \in \mathcal{F}_x \mid \mathcal{I}_x s = 0\}$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-subsheaf-sections-annihilated-by-ideal} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $\mathcal{I} \subset \mathcal{O}_X$ be a quasi-coherent sheaf of ideals of finite type. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. The subsheaf $\mathcal{F}' \subset \mathcal{F}$ defined in Lemma \ref{lemma-sections-annihilated-by-ideal} above is called the {\it subsheaf of sections annihilated by $\mathcal{I}$}. \end{definition} 
\begin{lemma} \label{lemma-push-sections-annihilated-by-ideal} Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-compact and quasi-separated morphism of algebraic spaces over $S$. Let $\mathcal{I} \subset \mathcal{O}_Y$ be a quasi-coherent sheaf of ideals of finite type. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Let $\mathcal{F}' \subset \mathcal{F}$ be the subsheaf of sections annihilated by $f^{-1}\mathcal{I}\mathcal{O}_X$. Then $f_*\mathcal{F}' \subset f_*\mathcal{F}$ is the subsheaf of sections annihilated by $\mathcal{I}$. \end{lemma} 
\begin{lemma} \label{lemma-sections-supported-on-closed-subset} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $T \subset |X|$ be a closed subset and let $U \subset X$ be the open subspace such that $T \amalg |U| = |X|$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Consider the sheaf of $\mathcal{O}_X$-modules $\mathcal{F}'$ which associates to every object $\varphi : W \to X$ of $X_\etale$ the module $$ \mathcal{F}'(W) = \{s \in \mathcal{F}(W) \mid \text{the support of }s\text{ is contained in }|\varphi|^{-1}(T)\} $$ If $U \to X$ is quasi-compact, then \begin{enumerate} \item for $W$ affine there exist a finitely generated ideal $I \subset \mathcal{O}_X(W)$ such that $|\varphi|^{-1}(T) = V(I)$, \item for $W$ and $I$ as in (1) we have $\mathcal{F}'(W) = \{x \in \mathcal{F}(W) \mid I^nx = 0 \text{ for some } n\}$, \item $\mathcal{F}'$ is a quasi-coherent sheaf of $\mathcal{O}_X$-modules. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-subsheaf-sections-supported-on-closed} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $T \subset |X|$ be a closed subset whose complement corresponds to an open subspace $U \subset X$ with quasi-compact inclusion morphism $U \to X$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. The quasi-coherent subsheaf $\mathcal{F}' \subset \mathcal{F}$ defined in Lemma \ref{lemma-sections-supported-on-closed-subset} above is called the {\it subsheaf of sections supported on $T$}. \end{definition} 
\begin{lemma} \label{lemma-push-sections-supported-on-closed-subset} Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-compact and quasi-separated morphism of algebraic spaces over $S$. Let $T \subset |Y|$ be a closed subset. Assume $|Y| \setminus T$ corresponds to an open subspace $V \subset Y$ such that $V \to Y$ is quasi-compact. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Let $\mathcal{F}' \subset \mathcal{F}$ be the subsheaf of sections supported on $|f|^{-1}T$. Then $f_*\mathcal{F}' \subset f_*\mathcal{F}$ is the subsheaf of sections supported on $T$. \end{lemma} 
\begin{lemma} \label{lemma-affine} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume that $f$ is surjective and finite, and assume that $X$ is affine. Then $Y$ is affine. \end{lemma} 
\begin{proposition} \label{proposition-affine} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume that $X$ is affine and $f$ is surjective and universally closed\footnote{An integral morphism is universally closed, see Morphisms of Spaces, Lemma \ref{spaces-morphisms-lemma-integral-universally-closed}.}. Then $Y$ is affine. \end{proposition} 
\begin{lemma} \label{lemma-reduction-scheme} \begin{reference} \cite[3.1.12]{CLO} \end{reference} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. If $X_{red}$ is a scheme, then $X$ is a scheme. \end{lemma} 
\begin{lemma} \label{lemma-integral-universally-bijective-scheme} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume $f$ is integral and induces a bijection $|X| \to |Y|$. Then $X$ is a scheme if and only if $Y$ is a scheme. \end{lemma} 
\begin{lemma} \label{lemma-check-closed-infinitesimally} Let $S$ be a scheme. Let $f : X \to B$ and $B' \to B$ be morphisms of algebraic spaces over $S$. Assume \begin{enumerate} \item $B' \to B$ is a closed immersion, \item $|B'| \to |B|$ is bijective, \item $X \times_B B' \to B'$ is a closed immersion, and \item $X \to B$ is of finite type or $B' \to B$ is of finite presentation. \end{enumerate} Then $f : X \to B$ is a closed immersion. \end{lemma} 
\begin{proposition} \label{proposition-there-is-a-scheme-finite-over} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. \begin{enumerate} \item There exists a surjective finite morphism $Y \to X$ of finite presentation where $Y$ is a scheme, \item given a surjective \'etale morphism $U \to X$ we may choose $Y \to X$ such that for every $y \in Y$ there is an open neighbourhood $V \subset Y$ such that $V \to X$ factors through $U$. \end{enumerate} \end{proposition} 
\begin{lemma} \label{lemma-integral-limit-finite-and-finite-presentation-refined} Let $S$ be a scheme. Let $f : X \to Y$ be an integral morphism of algebraic spaces over $S$. Assume $Y$ quasi-compact and quasi-separated. Let $V \subset Y$ be a quasi-compact open subspace such that $f^{-1}(V) \to V$ is finite and of finite presentation. Then $X$ can be written as a directed limit $X = \lim X_i$ where $f_i : X_i \to Y$ are finite and of finite presentation such that $f^{-1}(V) \to f_i^{-1}(V)$ is an isomorphism for all $i$. \end{lemma} 
\begin{lemma} \label{lemma-there-is-a-scheme-finite-over-refined} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$ such that $|X|$ has finitely many irreducible components. \begin{enumerate} \item There exists a surjective finite morphism $f : Y \to X$ of finite presentation where $Y$ is a scheme such that $f$ is finite \'etale over a quasi-compact dense open $U \subset X$, \item given a surjective \'etale morphism $V \to X$ we may choose $Y \to X$ such that for every $y \in Y$ there is an open neighbourhood $W \subset Y$ such that $W \to X$ factors through $V$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-there-is-a-scheme-finite-over-filtered} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. There exists a $t \geq 0$ and closed subspaces $$ X \supset Z_0 \supset Z_1 \supset \ldots \supset Z_t = \emptyset $$ such that $Z_i \to X$ is of finite presentation, $Z_0 \subset X$ is a thickening, and for each $i = 0, \ldots t - 1$ there exists a scheme $Y_i$, a surjective, finite, and finitely presented morphism $Y_i \to Z_i$ which is finite \'etale over $Z_i \setminus Z_{i + 1}$. \end{lemma} 
\begin{lemma} \label{lemma-minimal-closed-subspace} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. If $X$ is not a scheme, then there exists a closed subspace $Z \subset X$ such that $Z$ is not a scheme, but every proper closed subspace $Z' \subset Z$ is a scheme. \end{lemma} 
\begin{lemma} \label{lemma-minimal-nonscheme} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Assume that every proper closed subspace $Z \subset X$ is a scheme, but $X$ is not a scheme. Then $X$ is reduced and irreducible. \end{lemma} 
\begin{lemma} \label{lemma-enough-local} Let $f: X \to S$ be a quasi-compact and quasi-separated morphism from an algebraic space to a scheme $S$. If for every $x \in |X|$ with image $s = f(x) \in S$ the algebraic space $X \times_S \Spec(\mathcal{O}_{S,s})$ is a scheme, then $X$ is a scheme. \end{lemma} 
\begin{lemma} \label{lemma-maximal-ideal} Let $\varphi : X \to \Spec(A)$ be a quasi-compact and quasi-separated morphism from an algebraic space to an affine scheme. If $X$ is not a scheme, then there exists an ideal $I \subset A$ such that the base change $X_{A/I}$ is not a scheme, but for every $I \subset I'$, $I \not = I'$ the base change $X_{A/I'}$ is a scheme. \end{lemma} 
\begin{lemma} \label{lemma-relative-glueing} Let $S = U \cup W$ be an open covering of a scheme. Then the functor $$ FP_S \longrightarrow FP_U \times_{FP_{U \cap W}} FP_W $$ given by base change is an equivalence where $FP_T$ is the category of algebraic spaces of finite presentation over the scheme $T$. \end{lemma} 
\begin{lemma} \label{lemma-glueing-near-closed-point} Let $S$ be a scheme. Let $s \in S$ be a closed point such that $U = S \setminus \{s\} \to S$ is quasi-compact. With $V = \Spec(\mathcal{O}_{S, s}) \setminus \{s\}$ there is an equivalence of categories $$ FP_S \longrightarrow FP_U \times_{FP_V} FP_{\Spec(\mathcal{O}_{S, s})} $$ where $FP_T$ is the category of algebraic spaces of finite presentation over $T$. \end{lemma} 
\begin{lemma} \label{lemma-glueing-near-point} Let $S$ be a scheme. Let $U \subset S$ be a retrocompact open. Let $s \in S$ be a point in the complement of $U$. With $V = \Spec(\mathcal{O}_{S, s}) \cap U$ there is an equivalence of categories $$ \colim_{s \in U' \supset U\text{ open}} FP_{U'} \longrightarrow FP_U \times_{FP_V} FP_{\Spec(\mathcal{O}_{S, s})} $$ where $FP_T$  is the category of algebraic spaces of finite presentation over $T$. \end{lemma} 
\begin{lemma} \label{lemma-glueing-near-multiple-closed-points} Let $S$ be a scheme. Let $s_1, \ldots, s_n \in S$ be pairwise distinct closed points such that $U = S \setminus \{s_1, \ldots, s_n\} \to S$ is quasi-compact. With $S_i = \Spec(\mathcal{O}_{S, s_i})$ and $U_i = S_i \setminus \{s_i\}$ there is an equivalence of categories $$ FP_S \longrightarrow FP_U \times_{(FP_{U_1} \times \ldots \times FP_{U_n})} (FP_{S_1} \times \ldots \times FP_{S_n}) $$ where $FP_T$ is the category of algebraic spaces of finite presentation over $T$. \end{lemma} 
\begin{lemma} \label{lemma-excision-modifications} Let $S$ be a scheme. Consider a separated \'etale morphism $f : V \to W$ of algebraic spaces over $S$. Assume there exists a closed subspace $T \subset W$ such that $f^{-1}T \to T$ is an isomorphism. Then, with $W^0 = W \setminus T$ and $V^0 = f^{-1}W^0$ the base change functor $$ \left\{ \begin{matrix} g : X \to W\text{ morphism of algebraic spaces} \\ g^{-1}(W^0) \to W^0\text{ is an isomorphism} \end{matrix} \right\} \longrightarrow \left\{ \begin{matrix} h : Y \to V\text{ morphism of algebraic spaces} \\ h^{-1}(V^0) \to V^0\text{ is an isomorphism} \end{matrix} \right\} $$ is an equivalence of categories. \end{lemma} 
\begin{lemma} \label{lemma-excision-modifications-properties} Notation and assumptions as in Lemma \ref{lemma-excision-modifications}. Let $g : X \to W$ correspond to $h : Y \to V$ via the equivalence. Then $g$ is quasi-compact, quasi-separated, separated, locally of finite presentation, of finite presentation, locally of finite type, of finite type, proper, integral, finite, and add more here if and only if $h$ is so. \end{lemma} 
\begin{lemma} \label{lemma-modifications} Let $S$ be a scheme. Let $X$ be a decent algebraic space over $S$. Let $x \in |X|$ be a closed point such that $U = X \setminus \{x\} \to X$ is quasi-compact. With $V = \Spec(\mathcal{O}_{X, x}^h) \setminus \{\mathfrak m_x^h\}$ the base change functor $$ \left\{ \begin{matrix} f : Y \to X\text{ of finite presentation} \\ f^{-1}(U) \to U\text{ is an isomorphism} \end{matrix} \right\} \longrightarrow \left\{ \begin{matrix} g : Y \to \Spec(\mathcal{O}_{X, x}^h)\text{ of finite presentation} \\ g^{-1}(V) \to V\text{ is an isomorphism} \end{matrix} \right\} $$ is an equivalence of categories. \end{lemma} 
\begin{lemma} \label{lemma-separate} Let $S$ be a scheme. Let $f : X \to Y$ and $g : Z \to Y$ be morphisms of algebraic spaces over $S$. Let $z \in |Z|$ and let $T \subset |X \times_Y Z|$ be a closed subset with $z \not \in \Im(T \to |Z|)$. If $f$ is quasi-compact, then there exists an \'etale neighbourhood $(V, v) \to (Z, z)$, a commutative diagram $$ \xymatrix{ V \ar[d] \ar[r]_a & Z' \ar[d]^b \\ Z \ar[r]^g & Y, } $$ and a closed subset $T' \subset |X \times_Y Z'|$ such that \begin{enumerate} \item the morphism $b : Z' \to Y$ is locally of finite presentation, \item with $z' = a(v)$ we have $z' \not \in \Im(T' \to |Z'|)$, and \item the inverse image of $T$ in $|X \times_Y V|$ maps into $T'$ via $|X \times_Y V| \to |X \times_Y Z'|$. \end{enumerate} Moreover, we may assume $V$ and $Z'$ are affine schemes and if $Z$ is a scheme we may assume $V$ is an affine open neighbourhood of $z$. \end{lemma} 
\begin{lemma} \label{lemma-test-universally-closed} Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-compact morphism of algebraic spaces over $S$. The following are equivalent \begin{enumerate} \item $f$ is universally closed, \item for every morphism $Z \to Y$ which is locally of finite presentation the map $|X \times_Y Z| \to |Z|$ is closed, and \item there exists a scheme $V$ and a surjective \'etale morphism $V \to Y$ such that $|\mathbf{A}^n \times (X \times_Y V)| \to |\mathbf{A}^n \times V|$ is closed for all $n \geq 0$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-limited-base-change} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume $f$ separated and of finite type. The following are equivalent \begin{enumerate} \item The morphism $f$ is proper. \item For any morphism $Y \to Z$ which is locally of finite presentation the map $|X \times_Y Z| \to |Z|$ is closed, and \item there exists a scheme $V$ and a surjective \'etale morphism $V \to Y$ such that $|\mathbf{A}^n \times (X \times_Y V)| \to |\mathbf{A}^n \times V|$ is closed for all $n \geq 0$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-reach-point-closure-Noetherian} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume $f$ finite type and $Y$ locally Noetherian. Let $y \in |Y|$ be a point in the closure of the image of $|f|$. Then there exists a commutative diagram $$ \xymatrix{ \Spec(K) \ar[r] \ar[d] & X \ar[d]^f \\ \Spec(A) \ar[r] & Y } $$ where $A$ is a discrete valuation ring and $K$ is its field of fractions mapping the closed point of $\Spec(A)$ to $y$. Moreover, we can assume that the point $x \in |X|$ corresponding to $\Spec(K) \to X$ is a codimension $0$ point\footnote{See discussion in Properties of Spaces, Section \ref{spaces-properties-section-generic-points}.} and that $K$ is the residue field of a point on a scheme \'etale over $X$. \end{lemma} 
\begin{lemma} \label{lemma-Noetherian-dvr-valuative-separation} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume $f$ is quasi-separated and locally of finite type and $Y$ is locally Noetherian. The following are equivalent: \begin{enumerate} \item The morphism $f$ is separated. \item For any diagram (\ref{equation-valuative}) there is at most one dotted arrow. \item For all diagrams (\ref{equation-valuative}) with $A$ a discrete valuation ring there is at most one dotted arrow. \item For all diagrams (\ref{equation-valuative}) where $A$ is a discrete valuation ring and where the image of $\Spec(K) \to X$ is a point of codimension $0$ on $X$ there is at most one dotted arrow. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-Noetherian-dvr-valuative-proper} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume $f$ is quasi-separated and of finite type and $Y$ is locally Noetherian. The following are equivalent: \begin{enumerate} \item $f$ is proper, \item $f$ satisfies the valuative criterion, see Morphisms of Spaces, Definition \ref{spaces-morphisms-definition-valuative-criterion}, \item for any diagram (\ref{equation-valuative}) there exists exactly one dotted arrow, \item for all diagrams (\ref{equation-valuative}) with $A$ a discrete valuation ring there exists exactly one dotted arrow, and \item for all diagrams (\ref{equation-valuative}) where $A$ is a discrete valuation ring and where the image of $\Spec(K) \to X$ is a point of codimension $0$ on $X$ there exists exactly one dotted arrow\footnote{There is a sharper formulation where in the existence part one only requires the dotted arrow exists after an extension of discrete valuation rings.}. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-check-universally-closed-Noetherian} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume $Y$ is locally Noetherian and $f$ is of finite type. Then the following are equivalent \begin{enumerate} \item $f$ is universally closed, \item $f$ satisfies the existence part of the valuative criterion, \item there exists a scheme $V$ and a surjective \'etale morphism $V \to Y$ such that $|\mathbf{A}^n \times X \times_Y V| \to |\mathbf{A}^n \times V|$ is closed for all $n \geq 0$, \item for all diagrams (\ref{equation-valuative}) with $A$ a discrete valuation ring there there exists a finite separable extension $K'/K$ of fields, a discrete valuation ring $A' \subset K'$ dominating $A$, and a morphism $\Spec(A') \to X$ such that the following diagram commutes $$ \xymatrix{ \Spec(K') \ar[r] \ar[d] & \Spec(K) \ar[r] & X \ar[d] \\ \Spec(A') \ar[r] \ar[rru] & \Spec(A) \ar[r] & Y } $$ \item for all diagrams (\ref{equation-valuative}) with $A$ a discrete valuation ring there there exists a field extension $K'/K$, a valuation ring $A' \subset K'$ dominating $A$, and a morphism $\Spec(A') \to X$ such that the following diagram commutes $$ \xymatrix{ \Spec(K') \ar[r] \ar[d] & \Spec(K) \ar[r] & X \ar[d] \\ \Spec(A') \ar[r] \ar[rru] & \Spec(A) \ar[r] & Y } $$ \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-refined-valuative-criterion-proper} Let $S$ be a scheme. Let $f : X \to Y$ and $h : U \to X$ be morphisms of algebraic spaces over $S$. Assume that $Y$ is locally Noetherian, that $f$ and $h$ are of finite type, that $f$ is separated, and that the image of $|h| : |U| \to |X|$ is dense in $|X|$. If given any commutative solid diagram $$ \xymatrix{ \Spec(K) \ar[r] \ar[d] & U \ar[r]^h & X \ar[d]^f \\ \Spec(A) \ar[rr] \ar@{-->}[rru] & & Y } $$ where $A$ is a discrete valuation ring with field of fractions $K$, there exists a dotted arrow making the diagram commute, then $f$ is proper. \end{lemma} 
\begin{lemma} \label{lemma-refined-valuative-criterion-separated} Let $S$ be a scheme. Let $f : X \to Y$ and $h : U \to X$ be morphisms of algebraic spaces over $S$. Assume that $Y$ is locally Noetherian, that $f$ is locally of finite type and quasi-separated, that $h$ is of finite type, and that the image of $|h| : |U| \to |X|$ is dense in $|X|$. If given any commutative solid diagram $$ \xymatrix{ \Spec(K) \ar[r] \ar[d] & U \ar[r]^h & X \ar[d]^f \\ \Spec(A) \ar[rr] \ar@{-->}[rru] & & Y } $$ where $A$ is a discrete valuation ring with field of fractions $K$, there exists at most one dotted arrow making the diagram commute, then $f$ is separated. \end{lemma} 
\begin{lemma} \label{lemma-refined-valuative-criterion-universally-closed} Let $S$ be a scheme. Let $f : X \to Y$ and $h : U \to X$ be morphisms of algebraic spaces over $S$. Assume that $Y$ is locally Noetherian, that $f$ and $h$ are of finite type, that $f$ is quasi-separated, and that $h(U)$ is dense in $X$. If given any commutative solid diagram $$ \xymatrix{ \Spec(K) \ar[r] \ar[d] & U \ar[r]^h & X \ar[d]^f \\ \Spec(A) \ar[rr] \ar@{-->}[rru] & & Y } $$ where $A$ is a discrete valuation ring with field of fractions $K$, there exists a unique dotted arrow making the diagram commute, then $f$ is proper. \end{lemma} 
\begin{lemma} \label{lemma-good-diagram} In Situation \ref{situation-limit-noetherian}. Let $X \to B$ be a quasi-separated and finite type morphism of algebraic spaces. Then there exists an $i \in I$ and a diagram \begin{equation} \label{equation-good-diagram} \vcenter{ \xymatrix{ X \ar[r] \ar[d] & W \ar[d] \\ B \ar[r] & B_i } } \end{equation} such that $W \to B_i$ is of finite type and such that the induced morphism $X \to B \times_{B_i} W$ is a closed immersion. \end{lemma} 
\begin{lemma} \label{lemma-limit-from-good-diagram} In Situation \ref{situation-limit-noetherian}. Let $X \to B$ be a quasi-separated and finite type morphism of algebraic spaces. Given $i \in I$ and a diagram $$ \vcenter{ \xymatrix{ X \ar[r] \ar[d] & W \ar[d] \\ B \ar[r] & B_i } } $$ as in (\ref{equation-good-diagram}) for $i' \geq i$ let $X_{i'}$ be the scheme theoretic image of $X \to B_{i'} \times_{B_i} W$. Then $X = \lim_{i' \geq i} X_{i'}$. \end{lemma} 
\begin{lemma} \label{lemma-morphism-good-diagram} In Situation \ref{situation-limit-noetherian}. Let $f : X \to Y$ be a morphism of algebraic spaces quasi-separated and of finite type over $B$. Let $$ \vcenter{ \xymatrix{ X \ar[r] \ar[d] & W \ar[d] \\ B \ar[r] & B_{i_1} } } \quad\text{and}\quad \vcenter{ \xymatrix{ Y \ar[r] \ar[d] & V \ar[d] \\ B \ar[r] & B_{i_2} } } $$ be diagrams as in (\ref{equation-good-diagram}). Let $X = \lim_{i \geq i_1} X_i$ and $Y = \lim_{i \geq i_2} Y_i$ be the corresponding limit descriptions as in Lemma \ref{lemma-limit-from-good-diagram}. Then there exists an $i_0 \geq \max(i_1, i_2)$ and a morphism $$ (f_i)_{i \geq i_0} : (X_i)_{i \geq i_0} \to (Y_i)_{i \geq i_0} $$ of inverse systems over $(B_i)_{i \geq i_0}$ such that such that $f = \lim_{i \geq i_0} f_i$. If $(g_i)_{i \geq i_0} : (X_i)_{i \geq i_0} \to (Y_i)_{i \geq i_0}$ is a second morphism of inverse systems over $(B_i)_{i \geq i_0}$ such that such that $f = \lim_{i \geq i_0} g_i$ then $f_i = g_i$ for all $i \gg i_0$. \end{lemma} 
\begin{lemma} \label{lemma-morphism-good-diagram-flat} Notation and assumptions as in Lemma \ref{lemma-morphism-good-diagram}. If $f$ is flat and of finite presentation, then there exists an $i_3 > i_0$ such that for $i \geq i_3$ we have $f_i$ is flat, $X_i = Y_i \times_{Y_{i_3}} X_{i_3}$, and $X = Y \times_{Y_{i_3}} X_{i_3}$. \end{lemma} 
\begin{lemma} \label{lemma-morphism-good-diagram-smooth} Notation and assumptions as in Lemma \ref{lemma-morphism-good-diagram}. If $f$ is smooth, then there exists an $i_3 > i_0$ such that for $i \geq i_3$ we have $f_i$ is smooth. \end{lemma} 
\begin{lemma} \label{lemma-morphism-good-diagram-proper} Notation and assumptions as in Lemma \ref{lemma-morphism-good-diagram}. If $f$ is proper, then there exists an $i_3 \geq i_0$ such that for $i \geq i_3$ we have $f_i$ is proper. \end{lemma} 
\begin{lemma} \label{lemma-good-diagram-fibre-product} In Situation \ref{situation-limit-noetherian} suppose that we have a cartesian diagram $$ \xymatrix{ X^1 \ar[r]_p \ar[d]_q & X^3 \ar[d]^a \\ X^2 \ar[r]^b & X^4 } $$ of algebraic spaces quasi-separated and of finite type over $B$. For each $j = 1, 2, 3, 4$ choose $i_j \in I$ and a diagram $$ \xymatrix{ X^j \ar[r] \ar[d] & W^j \ar[d] \\ B \ar[r] & B_{i_j} } $$ as in (\ref{equation-good-diagram}). Let $X^j = \lim_{i \geq i_j} X^j_i$ be the corresponding limit descriptions as in Lemma \ref{lemma-morphism-good-diagram}. Let $(a_i)_{i \geq i_5}$, $(b_i)_{i \geq i_6}$, $(p_i)_{i \geq i_7}$, and $(q_i)_{i \geq i_8}$ be the corresponding morphisms of inverse systems constructed in Lemma \ref{lemma-morphism-good-diagram}. Then there exists an $i_9 \geq \max(i_5, i_6, i_7, i_8)$ such that for $i \geq i_9$ we have $a_i \circ p_i = b_i \circ q_i$ and such that $$ (q_i, p_i) : X^1_i \longrightarrow X^2_i \times_{b_i, X^4_i, a_i} X^3_i $$ is a closed immersion. If $a$ and $b$ are flat and of finite presentation, then there exists an $i_{10} \geq \max(i_5, i_6, i_7, i_8, i_9)$ such that for $i \geq i_{10}$ the last displayed morphism is an isomorphism. \end{lemma} 
