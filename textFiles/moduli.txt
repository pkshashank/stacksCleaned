\begin{lemma} \label{lemma-coherent-diagonal-affine-fp} The diagonal of $\Cohstack_{X/B}$ over $B$ is affine and of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-coherent-qs-lfp} The morphism $\Cohstack_{X/B} \to B$ is quasi-separated and locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-coherent-existence-part} Assume $X \to B$ is proper as well as of finite presentation. Then $\Cohstack_{X/B} \to B$ satisfies the existence part of the valuative criterion (Morphisms of Stacks, Definition \ref{stacks-morphisms-definition-existence}). \end{lemma} 
\begin{lemma} \label{lemma-coherent-functorial} Let $B$ be an algebraic space. Let $\pi : X \to Y$ be a quasi-finite morphism of algebraic spaces which are separated and of finite presentation over $B$. Then $\pi_*$ induces a morphism $\Cohstack_{X/B} \to \Cohstack_{Y/B}$. \end{lemma} 
\begin{lemma} \label{lemma-coherent-open} Let $B$ be an algebraic space. Let $\pi : X \to Y$ be an open immersion of algebraic spaces which are separated and of finite presentation over $B$. Then the morphism $\Cohstack_{X/B} \to \Cohstack_{Y/B}$ of Lemma \ref{lemma-coherent-functorial} is an open immersion. \end{lemma} 
\begin{lemma} \label{lemma-coherent-closed} Let $B$ be an algebraic space. Let $\pi : X \to Y$ be a closed immersion of algebraic spaces which are separated and of finite presentation over $B$. Then the morphism $\Cohstack_{X/B} \to \Cohstack_{Y/B}$ of Lemma \ref{lemma-coherent-functorial} is a closed immersion. \end{lemma} 
\begin{lemma} \label{lemma-open-P} In Situation \ref{situation-numerical} the stack $\Cohstack^P_{X/B}$ is algebraic and $$ \Cohstack^P_{X/B} \longrightarrow \Cohstack_{X/B} $$ is a flat closed immersion. If $I$ is finite or $B$ is locally Noetherian, then $\Cohstack^P_{X/B}$ is an open and closed substack of $\Cohstack_{X/B}$. \end{lemma} 
\begin{lemma} \label{lemma-finite-list-perfect-objects} Let $f : X \to B$ be as in the introduction to this section. Let $E_1, \ldots, E_r \in D(\mathcal{O}_X)$ be perfect. Let $I = \mathbf{Z}^{\oplus r}$ and consider the map $$ I \longrightarrow D(\mathcal{O}_X),\quad (n_1, \ldots, n_r) \longmapsto E_1^{\otimes n_1} \otimes \ldots \otimes E_r^{\otimes n_r} $$ Let $P : I \to \mathbf{Z}$ be a map. Then $\Cohstack^P_{X/B} \subset \Cohstack_{X/B}$ as defined in Situation \ref{situation-numerical} is an open and closed substack. \end{lemma} 
\begin{lemma} \label{lemma-quot-diagonal-closed} The diagonal of $\Quotfunctor_{\mathcal{F}/X/B} \to B$ is a closed immersion. If $\mathcal{F}$ is of finite type, then the diagonal is a closed immersion of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-quot-s-lfp} The morphism $\Quotfunctor_{\mathcal{F}/X/B} \to B$ is separated. If $\mathcal{F}$ is of finite presentation, then it is also locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-quot-existence-part} Assume $X \to B$ is proper as well as of finite presentation and $\mathcal{F}$ quasi-coherent of finite type. Then $\Quotfunctor_{\mathcal{F}/X/B} \to B$ satisfies the existence part of the valuative criterion (Morphisms of Spaces, Definition \ref{spaces-morphisms-definition-valuative-criterion}). \end{lemma} 
\begin{lemma} \label{lemma-quot-functorial} Let $B$ be an algebraic space. Let $\pi : X \to Y$ be an affine quasi-finite morphism of algebraic spaces which are separated and of finite presentation over $B$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Then $\pi_*$ induces a morphism $\Quotfunctor_{\mathcal{F}/X/B} \to \Quotfunctor_{\pi_*\mathcal{F}/Y/B}$. \end{lemma} 
\begin{lemma} \label{lemma-quot-open} Let $B$ be an algebraic space. Let $\pi : X \to Y$ be an affine open immersion of algebraic spaces which are separated and of finite presentation over $B$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Then the morphism $\Quotfunctor_{\mathcal{F}/X/B} \to \Quotfunctor_{\pi_*\mathcal{F}/Y/B}$ of Lemma \ref{lemma-quot-functorial} is an open immersion. \end{lemma} 
\begin{lemma} \label{lemma-quot-better-open} Let $B$ be an algebraic space. Let $j : X \to Y$ be an open immersion of algebraic spaces which are separated and of finite presentation over $B$. Let $\mathcal{G}$ be a quasi-coherent $\mathcal{O}_Y$-module and set $\mathcal{F} = j^*\mathcal{G}$. Then there is an open immersion $$ \Quotfunctor_{\mathcal{F}/X/B} \longrightarrow \Quotfunctor_{\mathcal{G}/Y/B} $$ of algebraic spaces over $B$. \end{lemma} 
\begin{lemma} \label{lemma-quot-closed} Let $B$ be an algebraic space. Let $\pi : X \to Y$ be a closed immersion of algebraic spaces which are separated and of finite presentation over $B$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Then the morphism $\Quotfunctor_{\mathcal{F}/X/B} \to \Quotfunctor_{\pi_*\mathcal{F}/Y/B}$ of Lemma \ref{lemma-quot-functorial} is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-quot-quotient} Let $X \to B$ be as in the introduction to this section. Let $\mathcal{F} \to \mathcal{G}$ be a surjection of quasi-coherent $\mathcal{O}_X$-modules. Then there is a canonical closed immersion $\Quotfunctor_{\mathcal{G}/X/B} \to \Quotfunctor_{\mathcal{F}/X/B}$. \end{lemma} 
\begin{lemma} \label{lemma-quot-tensor-invertible} Let $f : X \to B$ and $\mathcal{F}$ be as in the introduction to this section. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Then tensoring with $\mathcal{L}$ defines an isomorphism $$ \Quotfunctor_{\mathcal{F}/X/B} \longrightarrow \Quotfunctor_{\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}/X/B} $$ Given a numerical polynomial $P(t)$, then setting $P'(t) = P(t + 1)$ this map induces an isomorphism $\Quotfunctor^P_{\mathcal{F}/X/B} \longrightarrow \Quotfunctor^{P'}_{\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}/X/B}$ of open and closed substacks. \end{lemma} 
\begin{lemma} \label{lemma-quot-power-invertible} Let $f : X \to B$ and $\mathcal{F}$ be as in the introduction to this section. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Then $$ \Quotfunctor^{P, \mathcal{L}}_{\mathcal{F}/X/B} = \Quotfunctor^{P', \mathcal{L}^{\otimes n}}_{\mathcal{F}/X/B} $$ where $P'(t) = P(nt)$. \end{lemma} 
\begin{lemma} \label{lemma-quot-Pn} Let $n \geq 0$, $r \geq 1$, $P \in \mathbf{Q}[t]$. The algebraic space $$ X = \Quotfunctor^P_{\mathcal{O}^{\oplus r}_{\mathbf{P}^n_\mathbf{Z}}/ \mathbf{P}^n_\mathbf{Z}/\mathbf{Z}} $$ parametrizing quotients of $\mathcal{O}_{\mathbf{P}^n_\mathbf{Z}}^{\oplus r}$ with Hilbert polynomial $P$ is proper over $\Spec(\mathbf{Z})$. \end{lemma} 
\begin{lemma} \label{lemma-quot-Pn-over-base} Let $B$ be an algebraic space. Let $X = B \times \mathbf{P}^n_\mathbf{Z}$. Let $\mathcal{L}$ be the pullback of $\mathcal{O}_{\mathbf{P}^n}(1)$ to $X$. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module of finite presentation. The algebraic space $\Quotfunctor^P_{\mathcal{F}/X/B}$ parametrizing quotients of $\mathcal{F}$ having Hilbert polynomial $P$ with respect to $\mathcal{L}$ is proper over $B$. \end{lemma} 
\begin{lemma} \label{lemma-quot-proper-over-base} Let $f : X \to B$ be a proper morphism of finite presentation of algebraic spaces. Let $\mathcal{F}$ be a finitely presented $\mathcal{O}_X$-module. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module ample on $X/B$, see Divisors on Spaces, Definition \ref{spaces-divisors-definition-relatively-ample}. The algebraic space $\Quotfunctor^P_{\mathcal{F}/X/B}$ parametrizing quotients of $\mathcal{F}$ having Hilbert polynomial $P$ with respect to $\mathcal{L}$ is proper over $B$. \end{lemma} 
\begin{lemma} \label{lemma-quot-qc-over-base} Let $f : X \to B$ be a separated morphism of finite presentation of algebraic spaces. Let $\mathcal{F}$ be a finitely presented $\mathcal{O}_X$-module. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module ample on $X/B$, see Divisors on Spaces, Definition \ref{spaces-divisors-definition-relatively-ample}. The algebraic space $\Quotfunctor^P_{\mathcal{F}/X/B}$ parametrizing quotients of $\mathcal{F}$ having Hilbert polynomial $P$ with respect to $\mathcal{L}$ is separated of finite presentation over $B$. \end{lemma} 
\begin{lemma} \label{lemma-hilb-diagonal-closed} The diagonal of $\Hilbfunctor_{X/B} \to B$ is a closed immersion of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-hilb-s-lfp} The morphism $\Hilbfunctor_{X/B} \to B$ is separated and locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-hilb-existence-part} Assume $X \to B$ is proper as well as of finite presentation. Then $\Hilbfunctor_{X/B} \to B$ satisfies the existence part of the valuative criterion (Morphisms of Spaces, Definition \ref{spaces-morphisms-definition-valuative-criterion}). \end{lemma} 
\begin{lemma} \label{lemma-hilb-open} Let $B$ be an algebraic space. Let $\pi : X \to Y$ be an open immersion of algebraic spaces which are separated and of finite presentation over $B$. Then $\pi$ induces an open immersion $\Hilbfunctor_{X/B} \to \Hilbfunctor_{Y/B}$. \end{lemma} 
\begin{lemma} \label{lemma-hilb-closed} Let $B$ be an algebraic space. Let $\pi : X \to Y$ be a closed immersion of algebraic spaces which are separated and of finite presentation over $B$. Then $\pi$ induces a closed immersion $\Hilbfunctor_{X/B} \to \Hilbfunctor_{Y/B}$. \end{lemma} 
\begin{lemma} \label{lemma-hilb-proper-over-base} Let $f : X \to B$ be a proper morphism of finite presentation of algebraic spaces. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module ample on $X/B$, see Divisors on Spaces, Definition \ref{spaces-divisors-definition-relatively-ample}. The algebraic space $\Hilbfunctor^P_{X/B}$ parametrizing closed subschemes having Hilbert polynomial $P$ with respect to $\mathcal{L}$ is proper over $B$. \end{lemma} 
\begin{lemma} \label{lemma-hilb-qc-over-base} Let $f : X \to B$ be a separated morphism of finite presentation of algebraic spaces. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module ample on $X/B$, see Divisors on Spaces, Definition \ref{spaces-divisors-definition-relatively-ample}. The algebraic space $\Hilbfunctor^P_{X/B}$ parametrizing closed subschemes having Hilbert polynomial $P$ with respect to $\mathcal{L}$ is separated of finite presentation over $B$. \end{lemma} 
\begin{lemma} \label{lemma-pic-diagonal-affine-fp} The diagonal of $\Picardstack_{X/B}$ over $B$ is affine and of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-pic-qs-lfp} The morphism $\Picardstack_{X/B} \to B$ is quasi-separated and locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-pic-existence-part} Assume $X \to B$ is smooth in addition to being proper. Then $\Picardstack_{X/B} \to B$ satisfies the existence part of the valuative criterion (Morphisms of Stacks, Definition \ref{stacks-morphisms-definition-existence}). \end{lemma} 
\begin{lemma} \label{lemma-pic-inertia} Assume $f_{T, *}\mathcal{O}_{X_T} \cong \mathcal{O}_T$ for all schemes $T$ over $B$. Then the inertia stack of $\Picardstack_{X/B}$ is equal to $\mathbf{G}_m \times \Picardstack_{X/B}$. \end{lemma} 
\begin{lemma} \label{lemma-pic-curves-smooth} Assume $f : X \to B$ has relative dimension $\leq 1$ in addition to the other assumptions in this section. Then $\Picardstack_{X/B} \to B$ is smooth. \end{lemma} 
\begin{lemma} \label{lemma-pic-gerbe-over-pic-functor} The morphism $\Picardstack_{X/B} \to \Picardfunctor_{X/B}$ turns the Picard stack into a gerbe over the Picard functor. \end{lemma} 
\begin{lemma} \label{lemma-pic-functor-diagonal-qc-immersion} The diagonal of $\Picardfunctor_{X/B}$ over $B$ is a quasi-compact immersion. \end{lemma} 
\begin{lemma} \label{lemma-pic-functor-qs-lfp} The morphism $\Picardfunctor_{X/B} \to B$ is quasi-separated and locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-pic-functor-uniqueness-part} Assume the geometric fibres of $X \to B$ are integral in addition to the other assumptions in this section. Then $\Picardfunctor_{X/B} \to B$ is separated. \end{lemma} 
\begin{lemma} \label{lemma-pic-functor-curves-smooth} Assume $f : X \to B$ has relative dimension $\leq 1$ in addition to the other assumptions in this section. Then $\Picardfunctor_{X/B} \to B$ is smooth. \end{lemma} 
\begin{lemma} \label{lemma-Mor-diagonal-closed} The diagonal of $\mathit{Mor}_B(Y, X) \to B$ is a closed immersion of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-Mor-s-lfp} The morphism $\mathit{Mor}_B(Y, X) \to B$ is separated and locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-Isom-in-Mor} With $B, X, Y$ as in the introduction of this section, in addition assume $X \to B$ is proper. Then the subfunctor $\mathit{Isom}_B(Y, X) \subset \mathit{Mor}_B(Y, X)$ of isomorphisms is an open subspace. \end{lemma} 
\begin{lemma} \label{lemma-Mor-qc-over-base} With $B, X, Y$ as in the introduction of this section, let $\mathcal{L}$ be ample on $X/B$ and let $\mathcal{N}$ be ample on $Y/B$. See Divisors on Spaces, Definition \ref{spaces-divisors-definition-relatively-ample}. Let $P$ be a numerical polynomial. Then $$ \mathit{Mor}^{P, \mathcal{M}}_B(Y, X) \longrightarrow B $$ is separated and of finite presentation where $\mathcal{M} = \text{pr}_1^*\mathcal{N} \otimes_{\mathcal{O}_{Y \times_B X}} \text{pr}_2^*\mathcal{L}$. \end{lemma} 
\begin{lemma} \label{lemma-polarized-diagonal-separated-fp} The diagonal of $\Polarizedstack$ is separated and of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-polarized-qs-lfp} The morphism $\Polarizedstack \to \Spec(\mathbf{Z})$ is quasi-separated and locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-bounded-polarized} Let $n \geq 1$ be an integer and let $P$ be a numerical polynomial. Let $$ T \subset |\Polarizedstack| $$ be a subset with the following property: for every $\xi \in T$ there exists a field $k$ and an object $(X, \mathcal{L})$ of $\Polarizedstack$ over $k$ representing $\xi$ such that \begin{enumerate} \item the Hilbert polynomial of $\mathcal{L}$ on $X$ is $P$, and \item there exists a closed immersion $i : X \to \mathbf{P}^n_k$ such that $i^*\mathcal{O}_{\mathbf{P}^n}(1) \cong \mathcal{L}$. \end{enumerate} Then $T$ is a Noetherian topological space, in particular quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-complexes-diagonal-affine-fp} The diagonal of $\Complexesstack_{X/B}$ over $B$ is affine and of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-complexes-qs-lfp} The morphism $\Complexesstack_{X/B} \to B$ is quasi-separated and locally of finite presentation. \end{lemma} 
