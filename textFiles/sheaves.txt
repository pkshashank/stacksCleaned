\begin{definition} \label{definition-presheaf} Let $X$ be a topological space. \begin{enumerate} \item A {\it presheaf $\mathcal{F}$ of sets on $X$} is a rule which assigns to each open $U \subset X$ a set $\mathcal{F}(U)$ and to each inclusion $V \subset U$ a map $\rho^U_V : \mathcal{F}(U) \to \mathcal{F}(V)$ such that $\rho^U_U = \text{id}_{\mathcal{F}(U)}$ and whenever $W \subset V \subset U$ we have $\rho^U_W = \rho^V_W \circ \rho ^U_V$. \item A {\it morphism $\varphi : \mathcal{F} \to \mathcal{G}$ of presheaves of sets on $X$} is a rule which assigns to each open $U \subset X$ a map of sets $\varphi : \mathcal{F}(U) \to \mathcal{G}(U)$ compatible with restriction maps, i.e., whenever $V \subset U \subset X$ are open the diagram $$ \xymatrix{ \mathcal{F}(U) \ar[r]^\varphi \ar[d]^{\rho^U_V} & \mathcal{G}(U) \ar[d]^{\rho^U_V} \\ \mathcal{F}(V) \ar[r]^\varphi & \mathcal{G}(V) } $$ commutes. \item The category of presheaves of sets on $X$ will be denoted $\textit{PSh}(X)$. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-constant-presheaf} Let $X$ be a topological space. Let $A$ be a set. The {\it constant presheaf with value $A$} is the presheaf that assigns the set $A$ to every open $U \subset X$, and such that all restriction mappings are $\text{id}_A$. \end{definition} 
\begin{lemma} \label{lemma-product-presheaves} Let $X$ be a topological space. The category of presheaves of sets on $X$ has products (see Categories, Definition \ref{categories-definition-product}). Moreover, the set of sections of the product $\mathcal{F} \times \mathcal{G}$ over an open $U$ is the product of the sets of sections of $\mathcal{F}$ and $\mathcal{G}$ over $U$. \end{lemma} 
\begin{lemma} \label{lemma-abelian-presheaves} Let $X$ be a topological space. Let $\mathcal{F}$ be a presheaf of sets. Consider the following types of structure on $\mathcal{F}$: \begin{enumerate} \item For every open $U$ the structure of an abelian group on $\mathcal{F}(U)$ such that all restriction maps are abelian group homomorphisms. \item A map of presheaves $+ : \mathcal{F} \times \mathcal{F} \to \mathcal{F}$, a map of presheaves $- : \mathcal{F} \to \mathcal{F}$ and a map $0 : * \to \mathcal{F}$ (see Example \ref{example-singleton-presheaf}) satisfying all the axioms of $+, -, 0$ in a usual abelian group. \item A map of presheaves $+ : \mathcal{F} \times \mathcal{F} \to \mathcal{F}$, a map of presheaves $- : \mathcal{F} \to \mathcal{F}$ and a map $0 : * \to \mathcal{F}$ such that for each open $U \subset X$ the quadruple $(\mathcal{F}(U), +, -, 0)$ is an abelian group, \item A map of presheaves $+ : \mathcal{F} \times \mathcal{F} \to \mathcal{F}$ such that for every open $U \subset X$ the map $+ : \mathcal{F}(U) \times \mathcal{F}(U) \to \mathcal{F}(U)$ defines the structure of an abelian group. \end{enumerate} There are natural bijections between the collections of types of data (1) - (4) above. \end{lemma} 
\begin{definition} \label{definition-abelian-presheaves} Let $X$ be a topological space. \begin{enumerate} \item A {\it presheaf of abelian groups on $X$} or an {\it abelian presheaf over $X$} is a presheaf of sets $\mathcal{F}$ such that for each open $U \subset X$ the set $\mathcal{F}(U)$ is endowed with the structure of an abelian group, and such that all restriction maps $\rho^U_V$ are homomorphisms of abelian groups, see Lemma \ref{lemma-abelian-presheaves} above. \item A {\it morphism of abelian presheaves over $X$} $\varphi : \mathcal{F} \to \mathcal{G}$ is a morphism of presheaves of sets which induces a homomorphism of abelian groups $\mathcal{F}(U) \to \mathcal{G}(U)$ for every open $U \subset X$. \item The category of presheaves of abelian groups on $X$ is denoted $\textit{PAb}(X)$. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-presheaf-values-in-category} Let $X$ be a topological space. Let $\mathcal{C}$ be a category. \begin{enumerate} \item A {\it presheaf $\mathcal{F}$ on $X$ with values in $\mathcal{C}$} is given by a rule which assigns to every open $U \subset X$ an object $\mathcal{F}(U)$ of $\mathcal{C}$ and to each inclusion $V \subset U$ a morphism $\rho_V^U : \mathcal{F}(U) \to \mathcal{F}(V)$ in $\mathcal{C}$ such that whenever $W \subset V \subset U$ we have $\rho_W^U = \rho_W^V \circ \rho_V^U$. \item A {\it morphism $\varphi : \mathcal{F} \to \mathcal{G}$ of presheaves with value in $\mathcal{C}$} is given by a morphism $\varphi : \mathcal{F}(U) \to \mathcal{G}(U)$ in $\mathcal{C}$ compatible with restriction morphisms. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-underlying-presheaf-sets} Let $X$ be a topological space. Let $\mathcal{C}$ be a category. Let $F : \mathcal{C} \to \textit{Sets}$ be a faithful functor. Let $\mathcal{F}$ be a presheaf on $X$ with values in $\mathcal{C}$. The presheaf of sets $U \mapsto F(\mathcal{F}(U))$ is called the {\it underlying presheaf of sets of $\mathcal{F}$}. \end{definition} 
\begin{definition} \label{definition-presheaf-modules} Let $X$ be a topological space, and let $\mathcal{O}$ be a presheaf of rings on $X$. \begin{enumerate} \item A {\it presheaf of $\mathcal{O}$-modules} is given by an abelian presheaf $\mathcal{F}$ together with a map of presheaves of sets $$ \mathcal{O} \times \mathcal{F} \longrightarrow \mathcal{F} $$ such that for every open $U \subset X$ the map $\mathcal{O}(U) \times \mathcal{F}(U) \to \mathcal{F}(U)$ defines the structure of an $\mathcal{O}(U)$-module structure on the abelian group $\mathcal{F}(U)$. \item A {\it morphism $\varphi : \mathcal{F} \to \mathcal{G}$ of presheaves of $\mathcal{O}$-modules} is a morphism of abelian presheaves $\varphi : \mathcal{F} \to \mathcal{G}$ such that the diagram $$ \xymatrix{ \mathcal{O} \times \mathcal{F} \ar[r] \ar[d]_{\text{id} \times \varphi} & \mathcal{F} \ar[d]^{\varphi} \\ \mathcal{O} \times \mathcal{G} \ar[r] & \mathcal{G} } $$ commutes. \item The set of $\mathcal{O}$-module morphisms as above is denoted $\Hom_\mathcal{O}(\mathcal{F}, \mathcal{G})$. \item The category of presheaves of $\mathcal{O}$-modules is denoted $\textit{PMod}(\mathcal{O})$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-adjointness-tensor-restrict-presheaves} With $X$, $\mathcal{O}_1$, $\mathcal{O}_2$, $\mathcal{F}$ and $\mathcal{G}$ as above there exists a canonical bijection $$ \Hom_{\mathcal{O}_1}(\mathcal{G}, \mathcal{F}_{\mathcal{O}_1}) = \Hom_{\mathcal{O}_2}( \mathcal{O}_2 \otimes_{p, \mathcal{O}_1} \mathcal{G}, \mathcal{F} ) $$ In other words, the restriction and change of rings functors are adjoint to each other. \end{lemma} 
\begin{definition} \label{definition-sheaf} Let $X$ be a topological space. \begin{enumerate} \item A {\it sheaf $\mathcal{F}$ of sets on $X$} is a presheaf of sets which satisfies the following additional property: Given any open covering $U = \bigcup_{i \in I} U_i$ and any collection of sections $s_i \in \mathcal{F}(U_i)$, $i \in I$ such that $\forall i, j\in I$ $$ s_i|_{U_i \cap U_j} = s_j|_{U_i \cap U_j} $$ there exists a unique section $s \in \mathcal{F}(U)$ such that $s_i = s|_{U_i}$ for all $i \in I$. \item A {\it morphism of sheaves of sets} is simply a morphism of presheaves of sets. \item The category of sheaves of sets on $X$ is denoted $\Sh(X)$. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-constant-sheaf} Let $X$ be a topological space. Let $A$ be a set. The {\it constant sheaf with value $A$} denoted $\underline{A}$, or $\underline{A}_X$ is the sheaf that assigns to an open $U \subset X$ the set of all locally constant maps $U \to A$ with restriction mappings given by restrictions of functions. \end{definition} 
\begin{definition} \label{definition-abelian-sheaf} Let $X$ be a topological space. \begin{enumerate} \item An {\it abelian sheaf on $X$} or {\it sheaf of abelian groups on $X$} is an abelian presheaf on $X$ such that the underlying presheaf of sets is a sheaf. \item The category of sheaves of abelian groups is denoted $\textit{Ab}(X)$. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-sheaf-values-in-category} Let $X$ be a topological space. Let $\mathcal{C}$ be a category with products. A presheaf $\mathcal{F}$ with values in $\mathcal{C}$ on $X$ is a {\it sheaf} if for every open covering the diagram $$ \xymatrix{ \mathcal{F}(U) \ar[r] & \prod\nolimits_{i\in I} \mathcal{F}(U_i) \ar@<1ex>[r] \ar@<-1ex>[r] & \prod\nolimits_{(i_0, i_1) \in I \times I} \mathcal{F}(U_{i_0} \cap U_{i_1}) } $$ is an equalizer diagram in the category $\mathcal{C}$. \end{definition} 
\begin{lemma} \label{lemma-sheaves-structure} Suppose the category $\mathcal{C}$ and the functor $F : \mathcal{C} \to \textit{Sets}$ have the following properties: \begin{enumerate} \item $F$ is faithful, \item $\mathcal{C}$ has limits and $F$ commutes with them, and \item the functor $F$ reflects isomorphisms. \end{enumerate} Let $X$ be a topological space. Let $\mathcal{F}$ be a presheaf with values in $\mathcal{C}$. Then $\mathcal{F}$ is a sheaf if and only if the underlying presheaf of sets is a sheaf. \end{lemma} 
\begin{definition} \label{definition-sheaf-modules} Let $X$ be a topological space. Let $\mathcal{O}$ be a sheaf of rings on $X$. \begin{enumerate} \item A {\it sheaf of $\mathcal{O}$-modules} is a presheaf of $\mathcal{O}$-modules $\mathcal{F}$, see Definition \ref{definition-presheaf-modules}, such that the underlying presheaf of abelian groups $\mathcal{F}$ is a sheaf. \item A {\it morphism of sheaves of $\mathcal{O}$-modules} is a morphism of presheaves of $\mathcal{O}$-modules. \item Given sheaves of $\mathcal{O}$-modules $\mathcal{F}$ and $\mathcal{G}$ we denote $\Hom_\mathcal{O}(\mathcal{F}, \mathcal{G})$ the set of morphism of sheaves of $\mathcal{O}$-modules. \item The category of sheaves of $\mathcal{O}$-modules is denoted $\textit{Mod}(\mathcal{O})$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-sheaf-subset-stalks} Let $\mathcal{F}$ be a sheaf of sets on the topological space $X$. For every open $U \subset X$ the map $$ \mathcal{F}(U) \longrightarrow \prod\nolimits_{x \in U} \mathcal{F}_x $$ is injective. \end{lemma} 
\begin{definition} \label{definition-separated} Let $X$ be a topological space. A presheaf of sets $\mathcal{F}$ on $X$ is {\it separated} if for every open $U \subset X$ the map $\mathcal{F}(U) \to \prod_{x \in U} \mathcal{F}_x$ is injective. \end{definition} 
\begin{lemma} \label{lemma-stalk-abelian-presheaf} Let $X$ be a topological space. Let $\mathcal{F}$ be a presheaf of abelian groups on $X$. There exists a unique structure of an abelian group on $\mathcal{F}_x$ such that for every $U \subset X$ open, $x\in U$ the map $\mathcal{F}(U) \to \mathcal{F}_x$ is a group homomorphism. Moreover, $$ \mathcal{F}_x = \colim_{x\in U} \mathcal{F}(U) $$ holds in the category of abelian groups. \end{lemma} 
\begin{lemma} \label{lemma-stalk-presheaf-values-in-category} Let $\mathcal{C}$ be a category. Let $F : \mathcal{C} \to \textit{Sets}$ be a functor. Assume that \begin{enumerate} \item $F$ is faithful, and \item directed colimits exist in $\mathcal{C}$ and $F$ commutes with them. \end{enumerate} Let $X$ be a topological space. Let $x \in X$. Let $\mathcal{F}$ be a presheaf with values in $\mathcal{C}$. Then $$ \mathcal{F}_x = \colim_{x\in U} \mathcal{F}(U) $$ exists in $\mathcal{C}$. Its underlying set is equal to the stalk of the underlying presheaf of sets of $\mathcal{F}$. Furthermore, the construction $\mathcal{F} \mapsto \mathcal{F}_x$ is a functor from the category of presheaves with values in $\mathcal{C}$ to $\mathcal{C}$. \end{lemma} 
\begin{lemma} \label{lemma-stalk-module} Let $X$ be a topological space. Let $\mathcal{O}$ be a presheaf of rings on $X$. Let $\mathcal{F}$ be a presheaf of $\mathcal{O}$-modules. Let $x \in X$. The canonical map $\mathcal{O}_x \times \mathcal{F}_x \to \mathcal{F}_x$ coming from the multiplication map $\mathcal{O} \times \mathcal{F} \to \mathcal{F}$ defines a $\mathcal{O}_x$-module structure on the abelian group $\mathcal{F}_x$. \end{lemma} 
\begin{lemma} \label{lemma-stalk-tensor-presheaf-modules} Let $X$ be a topological space. Let $\mathcal{O} \to \mathcal{O}'$ be a morphism of presheaves of rings on $X$. Let $\mathcal{F}$ be a presheaf of $\mathcal{O}$-modules. Let $x \in X$. We have $$ \mathcal{F}_x \otimes_{\mathcal{O}_x} \mathcal{O}'_x = (\mathcal{F} \otimes_{p, \mathcal{O}} \mathcal{O}')_x $$ as $\mathcal{O}'_x$-modules. \end{lemma} 
\begin{definition} \label{definition-algebraic-structure} A {\it type of algebraic structure} is given by a category $\mathcal{C}$ and a functor $F : \mathcal{C} \to \textit{Sets}$ with the following properties \begin{enumerate} \item $F$ is faithful, \item $\mathcal{C}$ has limits and $F$ commutes with limits, \item $\mathcal{C}$ has filtered colimits and $F$ commutes with them, and \item $F$ reflects isomorphisms. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-list-algebraic-structures} The following categories, endowed with the obvious forgetful functor, define types of algebraic structures: \begin{enumerate} \item The category of pointed sets. \item The category of abelian groups. \item The category of groups. \item The category of monoids. \item The category of rings. \item The category of $R$-modules for a fixed ring $R$. \item The category of Lie algebras over a fixed field. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-properties-algebraic-structures} Let $(\mathcal{C}, F)$ be a type of algebraic structure. \begin{enumerate} \item $\mathcal{C}$ has a final object $0$ and $F(0) = \{ * \}$. \item $\mathcal{C}$ has products and $F(\prod A_i) = \prod F(A_i)$. \item $\mathcal{C}$ has fibre products and $F(A \times_B C) = F(A)\times_{F(B)}F(C)$. \item $\mathcal{C}$ has equalizers, and if $E \to A$ is the equalizer of $a, b : A \to B$, then $F(E) \to F(A)$ is the equalizer of $F(a), F(b) : F(A) \to F(B)$. \item $A \to B$ is a monomorphism if and only if $F(A) \to F(B)$ is injective. \item if $F(a) : F(A) \to F(B)$ is surjective, then $a$ is an epimorphism. \item given $A_1 \to A_2 \to A_3 \to \ldots$, then $\colim A_i$ exists and $F(\colim A_i) = \colim F(A_i)$, and more generally for any filtered colimit. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-image-contained-in} Let $(\mathcal{C}, F)$ be a type of algebraic structure. Suppose that $A, B, C \in \Ob(\mathcal{C})$. Let $f : A \to B$ and $g : C \to B$ be morphisms of $\mathcal{C}$. If $F(g)$ is injective, and $\Im(F(f)) \subset \Im(F(g))$, then $f$ factors as $f = g \circ t$ for some morphism $t : A \to C$. \end{lemma} 
\begin{lemma} \label{lemma-points-exactness} Let $X$ be a topological space. Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a morphism of sheaves of sets on $X$. \begin{enumerate} \item The map $\varphi$ is a monomorphism in the category of sheaves if and only if for all $x \in X$ the map $\varphi_x : \mathcal{F}_x \to \mathcal{G}_x$ is injective. \item The map $\varphi$ is an epimorphism in the category of sheaves if and only if for all $x \in X$ the map $\varphi_x : \mathcal{F}_x \to \mathcal{G}_x$ is surjective. \item The map $\varphi$ is an isomorphism in the category of sheaves if and only if for all $x \in X$ the map $\varphi_x : \mathcal{F}_x \to \mathcal{G}_x$ is bijective. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-injective-surjective} Let $X$ be a topological space. \begin{enumerate} \item A presheaf $\mathcal{F}$ is called a {\it subpresheaf} of a presheaf $\mathcal{G}$ if $\mathcal{F}(U) \subset \mathcal{G}(U)$ for all open $U \subset X$ such that the restriction maps of $\mathcal{G}$ induce the restriction maps of $\mathcal{F}$. If $\mathcal{F}$ and $\mathcal{G}$ are sheaves, then $\mathcal{F}$ is called a {\it subsheaf} of $\mathcal{G}$. We sometimes indicate this by the notation $\mathcal{F} \subset \mathcal{G}$. \item A morphism of presheaves of sets $\varphi : \mathcal{F} \to \mathcal{G}$ on $X$ is called {\it injective} if and only if $\mathcal{F}(U) \to \mathcal{G}(U)$ is injective for all $U$ open in $X$. \item A morphism of presheaves of sets $\varphi : \mathcal{F} \to \mathcal{G}$ on $X$ is called {\it surjective} if and only if $\mathcal{F}(U) \to \mathcal{G}(U)$ is surjective for all $U$ open in $X$. \item A morphism of sheaves of sets $\varphi : \mathcal{F} \to \mathcal{G}$ on $X$ is called {\it injective} if and only if $\mathcal{F}(U) \to \mathcal{G}(U)$ is injective for all $U$ open in $X$. \item A morphism of sheaves of sets $\varphi : \mathcal{F} \to \mathcal{G}$ on $X$ is called {\it surjective} if and only if for every open $U$ of $X$ and every section $s$ of $\mathcal{G}(U)$ there exists an open covering $U = \bigcup U_i$ such that $s|_{U_i}$ is in the image of $\mathcal{F}(U_i) \to \mathcal{G}(U_i)$ for all $i$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-characterize-epi-mono} Let $X$ be a topological space. \begin{enumerate} \item Epimorphisms (resp.\ monomorphisms) in the category of presheaves are exactly the surjective (resp.\ injective) maps of presheaves. \item Epimorphisms (resp.\ monomorphisms) in the category of sheaves are exactly the surjective (resp.\ injective) maps of sheaves, and are exactly those maps which are surjective (resp.\ injective) on all the stalks. \item The sheafification of a surjective (resp.\ injective) morphism of presheaves of sets is surjective (resp.\ injective). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-check-homomorphism-stalks} let $X$ be a topological space. Let $(\mathcal{C}, F)$ be a type of algebraic structure. Suppose that $\mathcal{F}$, $\mathcal{G}$ are sheaves on $X$ with values in $\mathcal{C}$. Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a map of the underlying sheaves of sets. If for all points $x \in X$ the map $\mathcal{F}_x \to \mathcal{G}_x$ is a morphism of algebraic structures, then $\varphi$ is a morphism of sheaves of algebraic structures. \end{lemma} 
\begin{lemma} \label{lemma-sheafification-sheaf} The presheaf $\mathcal{F}^{\#}$ is a sheaf. \end{lemma} 
\begin{lemma} \label{lemma-stalk-sheafification} Let $X$ be a topological space. Let $\mathcal{F}$ be a presheaf of sets on $X$. Let $x \in X$. Then $\mathcal{F}_x = \mathcal{F}^\#_x$. \end{lemma} 
\begin{lemma} \label{lemma-sheafify-universal} Let $\mathcal{F}$ be a presheaf of sets on $X$. Any map $\mathcal{F} \to \mathcal{G}$ into a sheaf of sets factors uniquely as $\mathcal{F} \to \mathcal{F}^\# \to \mathcal{G}$. \end{lemma} 
\begin{lemma} \label{lemma-separated-presheaf-into-sheaf} Let $X$ be a topological space. A presheaf $\mathcal{F}$ is separated (see Definition \ref{definition-separated}) if and only if the canonical map $\mathcal{F} \to \mathcal{F}^\#$ is injective. \end{lemma} 
\begin{lemma} \label{lemma-diagram-fibre-product} Let $X$ be a topological space. Let $\mathcal{F}$ be a presheaf of sets on $X$. Let $U \subset X$ be open. There is a canonical fibre product diagram $$ \xymatrix{ \mathcal{F}^\#(U) \ar[d] \ar[r] & \Pi(\mathcal{F})(U) \ar[d] \\ \prod_{x \in U} \mathcal{F}_x \ar[r] & \prod_{x \in U} \Pi(\mathcal{F})_x } $$ where the maps are the following: \begin{enumerate} \item The left vertical map has components $\mathcal{F}^\#(U) \to \mathcal{F}^\#_x = \mathcal{F}_x$ where the equality is Lemma \ref{lemma-stalk-sheafification}. \item The top horizontal map comes from the map of presheaves $\mathcal{F} \to \Pi(\mathcal{F})$ described in Section \ref{section-sheafification}. \item The right vertical map has obvious component maps $\Pi(\mathcal{F})(U) \to \Pi(\mathcal{F})_x$. \item The bottom horizontal map has components $\mathcal{F}_x \to \Pi(\mathcal{F})_x$ which come from the map of presheaves $\mathcal{F} \to \Pi(\mathcal{F})$ described in Section \ref{section-sheafification}. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-sheafify-abelian-presheaf} Let $X$ be a topological space. Let $\mathcal{F}$ be an abelian presheaf on $X$. Then there exists a unique structure of abelian sheaf on $\mathcal{F}^\#$ such that $\mathcal{F} \to \mathcal{F}^\#$ is a morphism of abelian presheaves. Moreover, the following adjointness property holds $$ \Mor_{\textit{PAb}(X)}(\mathcal{F}, i(\mathcal{G})) = \Mor_{\textit{Ab}(X)}(\mathcal{F}^\#, \mathcal{G}). $$ \end{lemma} 
\begin{lemma} \label{lemma-sheafify-presheaf-structures} Let $X$ be a topological space. Let $(\mathcal{C}, F)$ be a type of algebraic structure. Let $\mathcal{F}$ be a presheaf with values in $\mathcal{C}$ on $X$. Then there exists a sheaf $\mathcal{F}^\#$ with values in $\mathcal{C}$ and a morphism $\mathcal{F} \to \mathcal{F}^\#$ of presheaves with values in $\mathcal{C}$ with the following properties: \begin{enumerate} \item The map $\mathcal{F} \to \mathcal{F}^\#$ identifies the underlying sheaf of sets of $\mathcal{F}^\#$ with the sheafification of the underlying presheaf of sets of $\mathcal{F}$. \item For any morphism $\mathcal{F} \to \mathcal{G}$, where $\mathcal{G}$ is a sheaf with values in $\mathcal{C}$ there exists a unique factorization $\mathcal{F} \to \mathcal{F}^\# \to \mathcal{G}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-sheafification-presheaf-modules} Let $X$ be a topological space. Let $\mathcal{O}$ be a presheaf of rings on $X$. Let $\mathcal{F}$ be a presheaf $\mathcal{O}$-modules. Let $\mathcal{O}^\#$ be the sheafification of $\mathcal{O}$. Let $\mathcal{F}^\#$ be the sheafification of $\mathcal{F}$ as a presheaf of abelian groups. There exists a map of sheaves of sets $$ \mathcal{O}^\# \times \mathcal{F}^\# \longrightarrow \mathcal{F}^\# $$ which makes the diagram $$ \xymatrix{ \mathcal{O} \times \mathcal{F} \ar[r] \ar[d] & \mathcal{F} \ar[d] \\ \mathcal{O}^\# \times \mathcal{F}^\# \ar[r] & \mathcal{F}^\# } $$ commute and which makes $\mathcal{F}^\#$ into a sheaf of $\mathcal{O}^\#$-modules. In addition, if $\mathcal{G}$ is a sheaf of $\mathcal{O}^\#$-modules, then any morphism of presheaves of $\mathcal{O}$-modules $\mathcal{F} \to \mathcal{G}$ (into the restriction of $\mathcal{G}$ to a $\mathcal{O}$-module) factors uniquely as $\mathcal{F} \to \mathcal{F}^\# \to \mathcal{G}$ where $\mathcal{F}^\# \to \mathcal{G}$ is a morphism of $\mathcal{O}^\#$-modules. \end{lemma} 
\begin{lemma} \label{lemma-adjointness-tensor-restrict} With $X$, $\mathcal{O}_1$, $\mathcal{O}_2$, $\mathcal{F}$ and $\mathcal{G}$ as above there exists a canonical bijection $$ \Hom_{\mathcal{O}_1}(\mathcal{G}, \mathcal{F}_{\mathcal{O}_1}) = \Hom_{\mathcal{O}_2}( \mathcal{O}_2 \otimes_{\mathcal{O}_1} \mathcal{G}, \mathcal{F} ) $$ In other words, the restriction and change of rings functors are adjoint to each other. \end{lemma} 
\begin{lemma} \label{lemma-stalk-tensor-sheaf-modules} Let $X$ be a topological space. Let $\mathcal{O} \to \mathcal{O}'$ be a morphism of sheaves of rings on $X$. Let $\mathcal{F}$ be a sheaf $\mathcal{O}$-modules. Let $x \in X$. We have $$ \mathcal{F}_x \otimes_{\mathcal{O}_x} \mathcal{O}'_x = (\mathcal{F} \otimes_\mathcal{O} \mathcal{O}')_x $$ as $\mathcal{O}'_x$-modules. \end{lemma} 
\begin{lemma} \label{lemma-pushforward-sheaf} Let $f : X \to Y$ be a continuous map. Let $\mathcal{F}$ be a sheaf of sets on $X$. Then $f_*\mathcal{F}$ is a sheaf on $Y$. \end{lemma} 
\begin{lemma} \label{lemma-pushforward-composition} Let $f : X \to Y$ and $g : Y \to Z$ be continuous maps of topological spaces. The functors $(g \circ f)_*$ and $g_* \circ f_*$ are equal (on both presheaves and sheaves of sets). \end{lemma} 
\begin{lemma} \label{lemma-pullback-presheaves} Let $f : X \to Y$ be a continuous map. There exists a functor $f_p : \textit{PSh}(Y) \to \textit{PSh}(X)$ which is left adjoint to $f_*$. For a presheaf $\mathcal{G}$ it is determined by the rule $$ f_p\mathcal{G}(U) = \colim_{f(U) \subset V} \mathcal{G}(V) $$ where the colimit is over the collection of open neighbourhoods $V$ of $f(U)$ in $Y$. The colimits are over directed partially ordered sets. (The restriction mappings of $f_p\mathcal{G}$ are explained in the proof.) \end{lemma} 
\begin{lemma} \label{lemma-stalk-pullback-presheaf} Let $f : X \to Y$ be a continuous map. Let $x \in X$. Let $\mathcal{G}$ be a presheaf of sets on $Y$. There is a canonical bijection of stalks $(f_p\mathcal{G})_x = \mathcal{G}_{f(x)}$. \end{lemma} 
\begin{lemma} \label{lemma-stalk-pullback} Let $x \in X$. Let $\mathcal{G}$ be a sheaf of sets on $Y$. There is a canonical bijection of stalks $(f^{-1}\mathcal{G})_x = \mathcal{G}_{f(x)}$. \end{lemma} 
\begin{lemma} \label{lemma-pullback-composition} Let $f : X \to Y$ and $g : Y \to Z$ be continuous maps of topological spaces. The functors $(g \circ f)^{-1}$ and $f^{-1} \circ g^{-1}$ are canonically isomorphic. Similarly $(g \circ f)_p \cong f_p \circ g_p$ on presheaves. \end{lemma} 
\begin{definition} \label{definition-f-map} Let $f : X \to Y$ be a continuous map. Let $\mathcal{F}$ be a sheaf of sets on $X$ and let $\mathcal{G}$ be a sheaf of sets on $Y$. An {\it $f$-map $\xi : \mathcal{G} \to \mathcal{F}$} is a collection of maps $\xi_V : \mathcal{G}(V) \to \mathcal{F}(f^{-1}(V))$ indexed by open subsets $V \subset Y$ such that $$ \xymatrix{ \mathcal{G}(V) \ar[r]_{\xi_V} \ar[d]_{\text{restriction of }\mathcal{G}} & \mathcal{F}(f^{-1}V) \ar[d]^{\text{restriction of }\mathcal{F}} \\ \mathcal{G}(V') \ar[r]^{\xi_{V'}} & \mathcal{F}(f^{-1}V') } $$ commutes for all $V' \subset V \subset Y$ open. \end{definition} 
\begin{lemma} \label{lemma-f-map} Let $f : X \to Y$ be a continuous map. There are bijections between the following four sets \begin{enumerate} \item the set of maps $\mathcal{G} \to f_*\mathcal{F}$, \item the set of maps $f^{-1}\mathcal{G} \to \mathcal{F}$, \item the set of $f$-maps $\xi : \mathcal{G} \to \mathcal{F}$, and \item the set of all collections of maps $\xi_{U, V} : \mathcal{G}(V) \to \mathcal{F}(U)$ for all $U \subset X$ and $V \subset Y$ open such that $f(U) \subset V$ compatible with all restriction maps, \end{enumerate} functorially in $\mathcal{F} \in \Sh(X)$ and $\mathcal{G} \in \Sh(Y)$. \end{lemma} 
\begin{definition} \label{definition-composition-f-maps} Suppose that $f : X \to Y$ and $g : Y \to Z$ are continuous maps of topological spaces. Suppose that $\mathcal{F}$ is a sheaf on $X$, $\mathcal{G}$ is a sheaf on $Y$, and $\mathcal{H}$ is a sheaf on $Z$. Let $\varphi : \mathcal{G} \to \mathcal{F}$ be an $f$-map. Let $\psi : \mathcal{H} \to \mathcal{G}$ be an $g$-map. The {\it composition of $\varphi$ and $\psi$} is the $(g \circ f)$-map $\varphi \circ \psi$ defined by the commutativity of the diagrams $$ \xymatrix{ \mathcal{H}(W) \ar[rr]_{(\varphi \circ \psi)_W} \ar[rd]_{\psi_W} & & \mathcal{F}(f^{-1}g^{-1}W) \\ & \mathcal{G}(g^{-1}W) \ar[ru]_{\varphi_{g^{-1}W}} } $$ \end{definition} 
\begin{lemma} \label{lemma-compose-f-maps-stalks} Suppose that $f : X \to Y$ and $g : Y \to Z$ are continuous maps of topological spaces. Suppose that $\mathcal{F}$ is a sheaf on $X$, $\mathcal{G}$ is a sheaf on $Y$, and $\mathcal{H}$ is a sheaf on $Z$. Let $\varphi : \mathcal{G} \to \mathcal{F}$ be an $f$-map. Let $\psi : \mathcal{H} \to \mathcal{G}$ be an $g$-map. Let $x \in X$ be a point. The map on stalks $(\varphi \circ \psi)_x : \mathcal{H}_{g(f(x))} \to \mathcal{F}_x$ is the composition $$ \mathcal{H}_{g(f(x))} \xrightarrow{\psi_{f(x)}} \mathcal{G}_{f(x)} \xrightarrow{\varphi_x} \mathcal{F}_x $$ \end{lemma} 
\begin{lemma} \label{lemma-pullback-abelian-stalk} Let $f : X \to Y$ be a continuous map. \begin{enumerate} \item Let $\mathcal{G}$ be an abelian presheaf on $Y$. Let $x \in X$. The bijection $\mathcal{G}_{f(x)} \to (f_p\mathcal{G})_x$ of Lemma \ref{lemma-stalk-pullback-presheaf} is an isomorphism of abelian groups. \item Let $\mathcal{G}$ be an abelian sheaf on $Y$. Let $x \in X$. The bijection $\mathcal{G}_{f(x)} \to (f^{-1}\mathcal{G})_x$ of Lemma \ref{lemma-stalk-pullback} is an isomorphism of abelian groups. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-f-map-sets-algebraic-structures} Let $f : X \to Y$ be a continuous map of topological spaces. Suppose given sheaves of algebraic structures $\mathcal{F}$ on $X$, $\mathcal{G}$ on $Y$. Let $\varphi : \mathcal{G} \to \mathcal{F}$ be an $f$-map of underlying sheaves of sets. If for every $V \subset Y$ open the map of sets $\varphi_V : \mathcal{G}(V) \to \mathcal{F}(f^{-1}V)$ is the effect of a morphism in $\mathcal{C}$ on underlying sets, then $\varphi$ comes from a unique $f$-morphism between sheaves of algebraic structures. \end{lemma} 
\begin{lemma} \label{lemma-pushforward-presheaf-module} Let $f : X \to Y$ be a continuous map of topological spaces. Let $\mathcal{O}$ be a presheaf of rings on $X$. Let $\mathcal{F}$ be a presheaf of $\mathcal{O}$-modules. There is a natural map of underlying presheaves of sets $$ f_*\mathcal{O} \times f_*\mathcal{F} \longrightarrow f_*\mathcal{F} $$ which turns $f_*\mathcal{F}$ into a presheaf of $f_*\mathcal{O}$-modules. This construction is functorial in $\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-pullback-presheaf-module} Let $f : X \to Y$ be a continuous map of topological spaces. Let $\mathcal{O}$ be a presheaf of rings on $Y$. Let $\mathcal{G}$ be a presheaf of $\mathcal{O}$-modules. There is a natural map of underlying presheaves of sets $$ f_p\mathcal{O} \times f_p\mathcal{G} \longrightarrow f_p\mathcal{G} $$ which turns $f_p\mathcal{G}$ into a presheaf of $f_p\mathcal{O}$-modules. This construction is functorial in $\mathcal{G}$. \end{lemma} 
\begin{lemma} \label{lemma-adjoint-push-pull-presheaves-modules} Let $f : X \to Y$ be a continuous map of topological spaces. Let $\mathcal{O}$ be a presheaf of rings on $Y$. Let $\mathcal{G}$ be a presheaf of $\mathcal{O}$-modules. Let $\mathcal{F}$ be a presheaf of $f_p\mathcal{O}$-modules. Then $$ \Mor_{\textit{PMod}(f_p\mathcal{O})}(f_p\mathcal{G}, \mathcal{F}) = \Mor_{\textit{PMod}(\mathcal{O})}(\mathcal{G}, f_*\mathcal{F}). $$ Here we use Lemmas \ref{lemma-pullback-presheaf-module} and \ref{lemma-pushforward-presheaf-module}, and we think of $f_*\mathcal{F}$ as an $\mathcal{O}$-module via the map $i_\mathcal{O} : \mathcal{O} \to f_*f_p\mathcal{O}$ (defined first in the proof of Lemma \ref{lemma-pullback-presheaves}). \end{lemma} 
\begin{lemma} \label{lemma-adjoint-pull-push-presheaves-modules} Let $f : X \to Y$ be a continuous map of topological spaces. Let $\mathcal{O}$ be a presheaf of rings on $X$. Let $\mathcal{F}$ be a presheaf of $\mathcal{O}$-modules. Let $\mathcal{G}$ be a presheaf of $f_*\mathcal{O}$-modules. Then $$ \Mor_{\textit{PMod}(\mathcal{O})}( \mathcal{O} \otimes_{p, f_pf_*\mathcal{O}} f_p\mathcal{G}, \mathcal{F}) = \Mor_{\textit{PMod}(f_*\mathcal{O})}(\mathcal{G}, f_*\mathcal{F}). $$ Here we use Lemmas \ref{lemma-pullback-presheaf-module} and \ref{lemma-pushforward-presheaf-module}, and we use the map $c_\mathcal{O} : f_pf_*\mathcal{O} \to \mathcal{O}$ in the definition of the tensor product. \end{lemma} 
\begin{lemma} \label{lemma-pushforward-module} Let $f : X \to Y$ be a continuous map of topological spaces. Let $\mathcal{O}$ be a sheaf of rings on $X$. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}$-modules. The pushforward $f_*\mathcal{F}$, as defined in Lemma \ref{lemma-pushforward-presheaf-module} is a sheaf of $f_*\mathcal{O}$-modules. \end{lemma} 
\begin{lemma} \label{lemma-pullback-module} Let $f : X \to Y$ be a continuous map of topological spaces. Let $\mathcal{O}$ be a sheaf of rings on $Y$. Let $\mathcal{G}$ be a sheaf of $\mathcal{O}$-modules. There is a natural map of underlying presheaves of sets $$ f^{-1}\mathcal{O} \times f^{-1}\mathcal{G} \longrightarrow f^{-1}\mathcal{G} $$ which turns $f^{-1}\mathcal{G}$ into a sheaf of $f^{-1}\mathcal{O}$-modules. \end{lemma} 
\begin{lemma} \label{lemma-adjoint-push-pull-modules} Let $f : X \to Y$ be a continuous map of topological spaces. Let $\mathcal{O}$ be a sheaf of rings on $Y$. Let $\mathcal{G}$ be a sheaf of $\mathcal{O}$-modules. Let $\mathcal{F}$ be a sheaf of $f^{-1}\mathcal{O}$-modules. Then $$ \Mor_{\textit{Mod}(f^{-1}\mathcal{O})}(f^{-1}\mathcal{G}, \mathcal{F}) = \Mor_{\textit{Mod}(\mathcal{O})}(\mathcal{G}, f_*\mathcal{F}). $$ Here we use Lemmas \ref{lemma-pullback-module} and \ref{lemma-pushforward-module}, and we think of $f_*\mathcal{F}$ as an $\mathcal{O}$-module by restriction via $\mathcal{O} \to f_*f^{-1}\mathcal{O}$. \end{lemma} 
\begin{lemma} \label{lemma-adjoint-pull-push-modules} Let $f : X \to Y$ be a continuous map of topological spaces. Let $\mathcal{O}$ be a sheaf of rings on $X$. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}$-modules. Let $\mathcal{G}$ be a sheaf of $f_*\mathcal{O}$-modules. Then $$ \Mor_{\textit{Mod}(\mathcal{O})}( \mathcal{O} \otimes_{f^{-1}f_*\mathcal{O}} f^{-1}\mathcal{G}, \mathcal{F}) = \Mor_{\textit{Mod}(f_*\mathcal{O})}(\mathcal{G}, f_*\mathcal{F}). $$ Here we use Lemmas \ref{lemma-pullback-module} and \ref{lemma-pushforward-module}, and we use the canonical map $f^{-1}f_*\mathcal{O} \to \mathcal{O}$ in the definition of the tensor product. \end{lemma} 
\begin{definition} \label{definition-ringed-space} A {\it ringed space} is a pair $(X, \mathcal{O}_X)$ consisting of a topological space $X$ and a sheaf of rings $\mathcal{O}_X$ on $X$. A {\it morphism of ringed spaces} $(X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ is a pair consisting of a continuous map $f : X \to Y$ and an $f$-map of sheaves of rings $f^\sharp : \mathcal{O}_Y \to \mathcal{O}_X$. \end{definition} 
\begin{definition} \label{definition-composition-maps-ringed-spaces} Let $(f, f^\sharp) : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ and $(g, g^\sharp) : (Y, \mathcal{O}_Y) \to (Z, \mathcal{O}_Z)$ be morphisms of ringed spaces. Then we define the {\it composition of morphisms of ringed spaces} by the rule $$ (g, g^\sharp) \circ (f, f^\sharp) = (g \circ f, f^\sharp \circ g^\sharp). $$ Here we use composition of $f$-maps defined in Definition \ref{definition-composition-f-maps}. \end{definition} 
\begin{definition} \label{definition-pushforward} Let $(f, f^\sharp) : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. \begin{enumerate} \item Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. We define the {\it pushforward} of $\mathcal{F}$ as the sheaf of $\mathcal{O}_Y$-modules which as a sheaf of abelian groups equals $f_*\mathcal{F}$ and with module structure given by the restriction via $f^\sharp : \mathcal{O}_Y \to f_*\mathcal{O}_X$ of the module structure given in Lemma \ref{lemma-pushforward-module}. \item Let $\mathcal{G}$ be a sheaf of $\mathcal{O}_Y$-modules. We define the {\it pullback} $f^*\mathcal{G}$ to be the sheaf of $\mathcal{O}_X$-modules defined by the formula $$ f^*\mathcal{G} = \mathcal{O}_X \otimes_{f^{-1}\mathcal{O}_Y} f^{-1}\mathcal{G} $$ where the ring map $f^{-1}\mathcal{O}_Y \to \mathcal{O}_X$ is the map corresponding to $f^\sharp$, and where the  module structure is given by Lemma \ref{lemma-pullback-module}. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-adjoint-pullback-pushforward-modules} Let $(f, f^\sharp) : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. Let $\mathcal{G}$ be a sheaf of $\mathcal{O}_Y$-modules. There is a canonical bijection $$ \Hom_{\mathcal{O}_X}(f^*\mathcal{G}, \mathcal{F}) = \Hom_{\mathcal{O}_Y}(\mathcal{G}, f_*\mathcal{F}). $$ In other words: the functor $f^*$ is the left adjoint to $f_*$. \end{lemma} 
\begin{lemma} \label{lemma-push-pull-composition-modules} Let $f : X \to Y$ and $g : Y \to Z$ be morphisms of ringed spaces. The functors $(g \circ f)_*$ and $g_* \circ f_*$ are equal. There is a canonical isomorphism of functors $(g \circ f)^* \cong f^* \circ g^*$. \end{lemma} 
\begin{lemma} \label{lemma-stalk-pullback-modules} Let $(f, f^\sharp) : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. Let $\mathcal{G}$ be a sheaf of $\mathcal{O}_Y$-modules. Let $x \in X$. Then $$ (f^*\mathcal{G})_x = \mathcal{G}_{f(x)} \otimes_{\mathcal{O}_{Y, f(x)}} \mathcal{O}_{X, x} $$ as $\mathcal{O}_{X, x}$-modules where the tensor product on the right uses $f^\sharp_x : \mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$. \end{lemma} 
\begin{definition} \label{definition-skyscraper-sheaf} Let $X$ be a topological space. \begin{enumerate} \item Let $x \in X$ be a point. Denote $i_x : \{x\} \to X$ the inclusion map. Let $A$ be a set and think of $A$ as a sheaf on the one point space $\{x\}$. We call $i_{x, *}A$ the {\it skyscraper sheaf at $x$ with value $A$}. \item If in (1) above $A$ is an abelian group then we think of $i_{x, *}A$ as a sheaf of abelian groups on $X$. \item If in (1) above $A$ is an algebraic structure then we think of $i_{x, *}A$ as a sheaf of algebraic structures. \item If $(X, \mathcal{O}_X)$ is a ringed space, then we think of $i_x : \{x\} \to X$ as a morphism of ringed spaces $(\{x\}, \mathcal{O}_{X, x}) \to (X, \mathcal{O}_X)$ and if $A$ is a $\mathcal{O}_{X, x}$-module, then we think of $i_{x, *}A$ as a sheaf of $\mathcal{O}_X$-modules. \item We say a sheaf of sets $\mathcal{F}$ is a {\it skyscraper sheaf} if there exists a point $x$ of $X$ and a set $A$ such that $\mathcal{F} \cong i_{x, *}A$. \item We say a sheaf of abelian groups $\mathcal{F}$ is a {\it skyscraper sheaf} if there exists a point $x$ of $X$ and an abelian group $A$ such that $\mathcal{F} \cong i_{x, *}A$ as sheaves of abelian groups. \item We say a sheaf of algebraic structures $\mathcal{F}$ is a {\it skyscraper sheaf} if there exists a point $x$ of $X$ and an algebraic structure $A$ such that $\mathcal{F} \cong i_{x, *}A$ as sheaves of algebraic structures. \item If $(X, \mathcal{O}_X)$ is a ringed space and $\mathcal{F}$ is a sheaf of $\mathcal{O}_X$-modules, then we say $\mathcal{F}$ is a {\it skyscraper sheaf} if there exists a point $x \in X$ and a $\mathcal{O}_{X, x}$-module $A$ such that $\mathcal{F} \cong i_{x, *}A$ as sheaves of $\mathcal{O}_X$-modules. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-skyscraper-stalks} Let $X$ be a topological space, $x \in X$ a point, and $A$ a set. For any point $x' \in X$ the stalk of the skyscraper sheaf at $x$ with value $A$ at $x'$ is $$ (i_{x, *}A)_{x'} = \left\{ \begin{matrix} A & \text{if} & x' \in \overline{\{x\}} \\ \{*\} & \text{if} & x' \not\in \overline{\{x\}} \end{matrix} \right. $$ A similar description holds for the case of abelian groups, algebraic structures and sheaves of modules. \end{lemma} 
\begin{lemma} \label{lemma-stalk-skyscraper-adjoint} Let $X$ be a topological space, and let $x \in X$ a point. The functors $\mathcal{F} \mapsto \mathcal{F}_x$ and $A \mapsto i_{x, *}A$ are adjoint. In a formula $$ \Mor_{\textit{Sets}}(\mathcal{F}_x, A) = \Mor_{\Sh(X)}(\mathcal{F}, i_{x, *}A). $$ A similar statement holds for the case of abelian groups, algebraic structures. In the case of sheaves of modules we have $$ \Hom_{\mathcal{O}_{X, x}}(\mathcal{F}_x, A) = \Hom_{\mathcal{O}_X}(\mathcal{F}, i_{x, *}A). $$ \end{lemma} 
\begin{lemma} \label{lemma-directed-colimits-sections} Let $X$ be a topological space. Let $I$ be a directed set. Let $(\mathcal{F}_i, \varphi_{ii'})$ be a system of sheaves of sets over $I$, see Categories, Section \ref{categories-section-posets-limits}. Let $U \subset X$ be an open subset. Consider the canonical map $$ \Psi : \colim_i \mathcal{F}_i(U) \longrightarrow \left(\colim_i \mathcal{F}_i\right)(U) $$ \begin{enumerate} \item If all the transition maps are injective then $\Psi$ is injective for any open $U$. \item If $U$ is quasi-compact, then $\Psi$ is injective. \item If $U$ is quasi-compact and all the transition maps are injective then $\Psi$ is an isomorphism. \item If $U$ has a cofinal system of open coverings $\mathcal{U} : U = \bigcup_{j\in J} U_j$ with $J$ finite and $U_j \cap U_{j'}$ quasi-compact for all $j, j' \in J$, then $\Psi$ is bijective. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-compute-pullback-to-limit} In the situation described above, let $i \in \Ob(\mathcal{I})$ and let $\mathcal{G}$ be a sheaf on $X_i$. For $U_i \subset X_i$ quasi-compact open we have $$ p_i^{-1}\mathcal{G}(p_i^{-1}(U_i)) = \colim_{a : j \to i} f_a^{-1}\mathcal{G}(f_a^{-1}(U_i)) $$ \end{lemma} 
\begin{lemma} \label{lemma-descend-opens} In the situation described above, let $i \in \Ob(\mathcal{I})$ and let $U_i \subset X_i$ be a quasi-compact open. Then $$ \colim_{a : j \to i} \mathcal{F}_j(f_a^{-1}(U_i)) = \mathcal{F}(p_i^{-1}(U_i)) $$ \end{lemma} 
\begin{definition} \label{definition-presheaf-basis} Let $X$ be a topological space. Let $\mathcal{B}$ be a basis for the topology on $X$. \begin{enumerate} \item A {\it presheaf $\mathcal{F}$ of sets on $\mathcal{B}$} is a rule which assigns to each $U \in \mathcal{B}$ a set $\mathcal{F}(U)$ and to each inclusion $V \subset U$ of elements of $\mathcal{B}$ a map $\rho^U_V : \mathcal{F}(U) \to \mathcal{F}(V)$ such that $\rho^U_U = \text{id}_{\mathcal{F}(U)}$ for all $U \in \mathcal{B}$ whenever $W \subset V \subset U$ in $\mathcal{B}$ we have $\rho^U_W = \rho^V_W \circ \rho ^U_V$. \item A {\it morphism $\varphi : \mathcal{F} \to \mathcal{G}$ of presheaves of sets on $\mathcal{B}$} is a rule which assigns to each element $U \in \mathcal{B}$ a map of sets $\varphi : \mathcal{F}(U) \to \mathcal{G}(U)$ compatible with restriction maps. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-sheaf-basis} Let $X$ be a topological space. Let $\mathcal{B}$ be a basis for the topology on $X$. \begin{enumerate} \item A {\it sheaf $\mathcal{F}$ of sets on $\mathcal{B}$} is a presheaf of sets on $\mathcal{B}$ which satisfies the following additional property: Given any $U \in \mathcal{B}$, and any covering $U = \bigcup_{i \in I} U_i$ with $U_i \in \mathcal{B}$, and any coverings $U_i \cap U_j = \bigcup_{k \in I_{ij}} U_{ijk}$ with $U_{ijk} \in \mathcal{B}$ the sheaf condition holds: \begin{itemize} \item[(**)] For any collection of sections $s_i \in \mathcal{F}(U_i)$, $i \in I$ such that $\forall i, j\in I$, $\forall k\in I_{ij}$ $$ s_i|_{U_{ijk}} = s_j|_{U_{ijk}} $$ there exists a unique section $s \in \mathcal{F}(U)$ such that $s_i = s|_{U_i}$ for all $i \in I$. \end{itemize} \item A {\it morphism of sheaves of sets on $\mathcal{B}$} is simply a morphism of presheaves of sets. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-cofinal-systems-coverings} With notation as above. For each $U \in \mathcal{B}$, let $C(U) \subset \text{Cov}_\mathcal{B}(U)$ be a cofinal system. For each $U \in \mathcal{B}$, and each $\mathcal{U} : U = \bigcup U_i$ in $C(U)$, let coverings $\mathcal{U}_{ij} : U_i \cap U_j = \bigcup U_{ijk}$, $U_{ijk} \in \mathcal{B}$ be given. Let $\mathcal{F}$ be a presheaf of sets on $\mathcal{B}$. The following are equivalent \begin{enumerate} \item The presheaf $\mathcal{F}$ is a sheaf on $\mathcal{B}$. \item For every $U \in \mathcal{B}$ and every covering $\mathcal{U} : U = \bigcup U_i$ in $C(U)$ the sheaf condition $(**)$ holds (for the given coverings $\mathcal{U}_{ij}$). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-cofinal-systems-coverings-standard-case} Let $X$ be a topological space. Let $\mathcal{B}$ be a basis for the topology on $X$. Assume that for every triple $U, U', U'' \in \mathcal{B}$ with $U' \subset U$ and $U'' \subset U$ we have $U' \cap U'' \in \mathcal{B}$. For each $U \in \mathcal{B}$, let $C(U) \subset \text{Cov}_\mathcal{B}(U)$ be a cofinal system. Let $\mathcal{F}$ be a presheaf of sets on $\mathcal{B}$. The following are equivalent \begin{enumerate} \item The presheaf $\mathcal{F}$ is a sheaf on $\mathcal{B}$. \item For every $U \in \mathcal{B}$ and every covering $\mathcal{U} : U = \bigcup U_i$ in $C(U)$ and for every family of sections $s_i \in \mathcal{F}(U_i)$ such that $s_i|_{U_i \cap U_j} = s_j|_{U_i \cap U_j}$ there exists a unique section $s \in \mathcal{F}(U)$ which restricts to $s_i$ on $U_i$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-condition-star-sections} Let $X$ be a topological space. Let $\mathcal{B}$ be a basis for the topology on $X$. Let $U \in \mathcal{B}$. Let $\mathcal{F}$ be a sheaf of sets on $\mathcal{B}$. The map $$ \mathcal{F}(U) \to \prod\nolimits_{x \in U} \mathcal{F}_x $$ identifies $\mathcal{F}(U)$ with the elements $(s_x)_{x\in U}$ with the property \begin{itemize} \item[(*)] For any $x \in U$ there exists a $V \in \mathcal{B}$, with $x \in V \subset U$ and a section $\sigma \in \mathcal{F}(V)$ such that for all $y \in V$ we have $s_y = (V, \sigma)$ in $\mathcal{F}_y$. \end{itemize} \end{lemma} 
\begin{lemma} \label{lemma-extend-off-basis} Let $X$ be a topological space. Let $\mathcal{B}$ be a basis for the topology on $X$. Let $\mathcal{F}$ be a sheaf of sets on $\mathcal{B}$. There exists a unique sheaf of sets $\mathcal{F}^{ext}$ on $X$ such that $\mathcal{F}^{ext}(U) = \mathcal{F}(U)$ for all $U \in \mathcal{B}$ compatibly with the restriction mappings. \end{lemma} 
\begin{lemma} \label{lemma-restrict-basis-equivalence} Let $X$ be a topological space. Let $\mathcal{B}$ be a basis for the topology on $X$. Denote $\Sh(\mathcal{B})$ the category of sheaves on $\mathcal{B}$. There is an equivalence of categories $$ \Sh(X) \longrightarrow \Sh(\mathcal{B}) $$ which assigns to a sheaf on $X$ its restriction to the members of $\mathcal{B}$. \end{lemma} 
\begin{definition} \label{definition-sheaf-structures-basis} Let $X$ be a topological space. Let $\mathcal{B}$ be a basis for the topology on $X$. Let $(\mathcal{C}, F)$ be a type of algebraic structure. \begin{enumerate} \item A {\it presheaf $\mathcal{F}$ with values in $\mathcal{C}$ on $\mathcal{B}$} is a rule which assigns to each $U \in \mathcal{B}$ an object $\mathcal{F}(U)$ of $\mathcal{C}$ and to each inclusion $V \subset U$ of elements of $\mathcal{B}$ a morphism $\rho^U_V : \mathcal{F}(U) \to \mathcal{F}(V)$ in $\mathcal{C}$ such that $\rho^U_U = \text{id}_{\mathcal{F}(U)}$ for all $U \in \mathcal{B}$ and whenever $W \subset V \subset U$ in $\mathcal{B}$ we have $\rho^U_W = \rho^V_W \circ \rho ^U_V$. \item A {\it morphism $\varphi : \mathcal{F} \to \mathcal{G}$ of presheaves with values in $\mathcal{C}$ on $\mathcal{B}$} is a rule which assigns to each element $U \in \mathcal{B}$ a morphism of algebraic structures $\varphi : \mathcal{F}(U) \to \mathcal{G}(U)$ compatible with restriction maps. \item Given a presheaf $\mathcal{F}$ with values in $\mathcal{C}$ on $\mathcal{B}$ we say that $U \mapsto F(\mathcal{F}(U))$ is the underlying presheaf of sets. \item A {\it sheaf $\mathcal{F}$ with values in $\mathcal{C}$ on $\mathcal{B}$} is a presheaf with values in $\mathcal{C}$ on $\mathcal{B}$ whose underlying presheaf of sets is a sheaf. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-extend-off-basis-structures} Let $X$ be a topological space. Let $(\mathcal{C}, F)$ be a type of algebraic structure. Let $\mathcal{B}$ be a basis for the topology on $X$. Let $\mathcal{F}$ be a sheaf with values in $\mathcal{C}$ on $\mathcal{B}$. There exists a unique sheaf $\mathcal{F}^{ext}$ with values in $\mathcal{C}$ on $X$ such that $\mathcal{F}^{ext}(U) = \mathcal{F}(U)$ for all $U \in \mathcal{B}$ compatibly with the restriction mappings. \end{lemma} 
\begin{lemma} \label{lemma-restrict-basis-equivalence-structures} Let $X$ be a topological space. Let $\mathcal{B}$ be a basis for the topology on $X$. Let $(\mathcal{C}, F)$ be a type of algebraic structure. Denote $\Sh(\mathcal{B}, \mathcal{C})$ the category of sheaves with values in $\mathcal{C}$ on $\mathcal{B}$. There is an equivalence of categories $$ \Sh(X, \mathcal{C}) \longrightarrow \Sh(\mathcal{B}, \mathcal{C}) $$ which assigns to a sheaf on $X$ its restriction to the members of $\mathcal{B}$. \end{lemma} 
\begin{definition} \label{definition-sheaf-modules-basis} Let $X$ be a topological space. Let $\mathcal{B}$ be a basis for the topology on $X$. Let $\mathcal{O}$ be a presheaf of rings on $\mathcal{B}$. \begin{enumerate} \item A {\it presheaf of $\mathcal{O}$-modules $\mathcal{F}$ on $\mathcal{B}$} is a presheaf of abelian groups on $\mathcal{B}$ together with a morphism of presheaves of sets $\mathcal{O} \times \mathcal{F} \to \mathcal{F}$ such that for all $U \in \mathcal{B}$ the map $\mathcal{O}(U) \times \mathcal{F}(U) \to \mathcal{F}(U)$ turns the group $\mathcal{F}(U)$ into an $\mathcal{O}(U)$-module. \item A {\it morphism $\varphi : \mathcal{F} \to \mathcal{G}$ of presheaves of $\mathcal{O}$-modules on $\mathcal{B}$} is a morphism of abelian presheaves on $\mathcal{B}$ which induces an $\mathcal{O}(U)$-module homomorphism $\mathcal{F}(U) \to \mathcal{G}(U)$ for every $U \in \mathcal{B}$. \item Suppose that $\mathcal{O}$ is a sheaf of rings on $\mathcal{B}$. A {\it sheaf $\mathcal{F}$ of $\mathcal{O}$-modules on $\mathcal{B}$} is a presheaf of $\mathcal{O}$-modules on $\mathcal{B}$ whose underlying presheaf of abelian groups is a sheaf. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-extend-off-basis-module} Let $X$ be a topological space. Let $\mathcal{B}$ be a basis for the topology on $X$. Let $\mathcal{O}$ be a sheaf of rings on $\mathcal{B}$. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}$-modules on $\mathcal{B}$. Let $\mathcal{O}^{ext}$ be the sheaf of rings on $X$ extending $\mathcal{O}$ and let $\mathcal{F}^{ext}$ be the abelian sheaf on $X$ extending $\mathcal{F}$, see Lemma \ref{lemma-extend-off-basis-structures}. There exists a canonical map $$ \mathcal{O}^{ext} \times \mathcal{F}^{ext} \longrightarrow \mathcal{F}^{ext} $$ which agrees with the given map over elements of $\mathcal{B}$ and which endows $\mathcal{F}^{ext}$ with the structure of an $\mathcal{O}^{ext}$-module. \end{lemma} 
\begin{lemma} \label{lemma-restrict-basis-equivalence-modules} Let $X$ be a topological space. Let $\mathcal{B}$ be a basis for the topology on $X$. Let $\mathcal{O}$ be a sheaf of rings on $X$. Denote $\textit{Mod}(\mathcal{O}|_\mathcal{B})$ the category of sheaves of $\mathcal{O}|_\mathcal{B}$-modules on $\mathcal{B}$. There is an equivalence of categories $$ \textit{Mod}(\mathcal{O}) \longrightarrow \textit{Mod}(\mathcal{O}|_\mathcal{B}) $$ which assigns to a sheaf of $\mathcal{O}$-modules on $X$ its restriction to the members of $\mathcal{B}$. \end{lemma} 
\begin{lemma} \label{lemma-f-map-basis-below-structures} Let $f : X \to Y$ be a continuous map of topological spaces. Let $(\mathcal{C}, F)$ be a type of algebraic structures. Let $\mathcal{F}$ be a sheaf with values in $\mathcal{C}$ on $X$. Let $\mathcal{G}$ be a sheaf with values in $\mathcal{C}$ on $Y$. Let $\mathcal{B}$ be a basis for the topology on $Y$. Suppose given for every $V \in \mathcal{B}$ a morphism $$ \varphi_V : \mathcal{G}(V) \longrightarrow \mathcal{F}(f^{-1}V) $$ of $\mathcal{C}$ compatible with restriction mappings. Then there is a unique $f$-map (see Definition \ref{definition-f-map} and discussion of $f$-maps in Section \ref{section-presheaves-structures-functorial}) $\varphi : \mathcal{G} \to \mathcal{F}$ recovering $\varphi_V$ for $V \in \mathcal{B}$. \end{lemma} 
\begin{lemma} \label{lemma-f-map-basis-below-modules} Let $(f, f^\sharp) : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. Let $\mathcal{G}$ be a sheaf of $\mathcal{O}_Y$-modules. Let $\mathcal{B}$ be a basis for the topology on $Y$. Suppose given for every $V \in \mathcal{B}$ a $\mathcal{O}_Y(V)$-module map $$ \varphi_V : \mathcal{G}(V) \longrightarrow \mathcal{F}(f^{-1}V) $$ (where $\mathcal{F}(f^{-1}V)$ has a module structure using $f^\sharp_V : \mathcal{O}_Y(V) \to \mathcal{O}_X(f^{-1}V)$) compatible with restriction mappings. Then there is a unique $f$-map (see discussion of $f$-maps in Section \ref{section-ringed-spaces-functoriality-modules}) $\varphi : \mathcal{G} \to \mathcal{F}$ recovering $\varphi_V$ for $V \in \mathcal{B}$. \end{lemma} 
\begin{lemma} \label{lemma-f-map-basis-above-and-below-structures} Let $f : X \to Y$ be a continuous map of topological spaces. Let $(\mathcal{C}, F)$ be a type of algebraic structures. Let $\mathcal{F}$ be a sheaf with values in $\mathcal{C}$ on $X$. Let $\mathcal{G}$ be a sheaf with values in $\mathcal{C}$ on $Y$. Let $\mathcal{B}_Y$ be a basis for the topology on $Y$. Let $\mathcal{B}_X$ be a basis for the topology on $X$. Suppose given for every $V \in \mathcal{B}_Y$, and $U \in \mathcal{B}_X$ such that $f(U) \subset V$ a morphism $$ \varphi_V^U : \mathcal{G}(V) \longrightarrow \mathcal{F}(U) $$ of $\mathcal{C}$ compatible with restriction mappings. Then there is a unique $f$-map (see Definition \ref{definition-f-map} and the discussion of $f$-maps in Section \ref{section-presheaves-structures-functorial}) $\varphi : \mathcal{G} \to \mathcal{F}$ recovering $\varphi_V^U$ as the composition $$ \mathcal{G}(V) \xrightarrow{\varphi_V} \mathcal{F}(f^{-1}(V)) \xrightarrow{\text{restr.}} \mathcal{F}(U) $$ for every pair $(U, V)$ as above. \end{lemma} 
\begin{lemma} \label{lemma-f-map-basis-above-and-below-modules} Let $(f, f^\sharp) : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. Let $\mathcal{G}$ be a sheaf of $\mathcal{O}_Y$-modules. Let $\mathcal{B}_Y$ be a basis for the topology on $Y$. Let $\mathcal{B}_X$ be a basis for the topology on $X$. Suppose given for every $V \in \mathcal{B}_Y$, and $U \in \mathcal{B}_X$ such that $f(U) \subset V$ a $\mathcal{O}_Y(V)$-module map $$ \varphi_V^U : \mathcal{G}(V) \longrightarrow \mathcal{F}(U) $$ compatible with restriction mappings. Here the $\mathcal{O}_Y(V)$-module structure on $\mathcal{F}(U)$ comes from the $\mathcal{O}_X(U)$-module structure via the map $f^\sharp_V : \mathcal{O}_Y(V) \to \mathcal{O}_X(f^{-1}V) \to \mathcal{O}_X(U)$. Then there is a unique $f$-map of sheaves of modules (see Definition \ref{definition-f-map} and the discussion of $f$-maps in Section \ref{section-ringed-spaces-functoriality-modules}) $\varphi : \mathcal{G} \to \mathcal{F}$ recovering $\varphi_V^U$ as the composition $$ \mathcal{G}(V) \xrightarrow{\varphi_V} \mathcal{F}(f^{-1}(V)) \xrightarrow{\text{restr.}} \mathcal{F}(U) $$ for every pair $(U, V)$ as above. \end{lemma} 
\begin{lemma} \label{lemma-j-pullback} Let $X$ be a topological space. Let $j : U \to X$ be the inclusion of an open subset $U$ into $X$. \begin{enumerate} \item Let $\mathcal{G}$ be a presheaf of sets on $X$. The presheaf $j_p\mathcal{G}$ (see Section \ref{section-presheaves-functorial}) is given by the rule $V \mapsto \mathcal{G}(V)$ for $V \subset U$ open. \item Let $\mathcal{G}$ be a sheaf of sets on $X$. The sheaf $j^{-1}\mathcal{G}$ is given by the rule $V \mapsto \mathcal{G}(V)$ for $V \subset U$ open. \item For any point $u \in U$ and any sheaf $\mathcal{G}$ on $X$ we have a canonical identification of stalks $$ j^{-1}\mathcal{G}_u = (\mathcal{G}|_U)_u = \mathcal{G}_u. $$ \item On the category of presheaves of $U$ we have $j_pj_* = \text{id}$. \item On the category of sheaves of $U$ we have $j^{-1}j_* = \text{id}$. \end{enumerate} The same description holds for (pre)sheaves of abelian groups, (pre)sheaves of algebraic structures, and (pre)sheaves of modules. \end{lemma} 
\begin{definition} \label{definition-restriction} Let $X$ be a topological space. Let $j : U \to X$ be the inclusion of an open subset. \begin{enumerate} \item Let $\mathcal{G}$ be a presheaf of sets, abelian groups or algebraic structures on $X$. The presheaf $j_p\mathcal{G}$ described in Lemma \ref{lemma-j-pullback} is called the {\it restriction of $\mathcal{G}$ to $U$} and denoted $\mathcal{G}|_U$. \item Let $\mathcal{G}$ be a sheaf of sets on $X$, abelian groups or algebraic structures on $X$. The sheaf $j^{-1}\mathcal{G}$ is called the {\it restriction of $\mathcal{G}$ to $U$} and denoted $\mathcal{G}|_U$. \item If $(X, \mathcal{O})$ is a ringed space, then the pair $(U, \mathcal{O}|_U)$ is called the {\it open subspace of $(X, \mathcal{O})$ associated to $U$}. \item If $\mathcal{G}$ is a presheaf of $\mathcal{O}$-modules then $\mathcal{G}|_U$ together with the multiplication map $\mathcal{O}|_U \times \mathcal{G}|_U \to \mathcal{G}|_U$ (see Lemma \ref{lemma-pullback-module}) is called the {\it restriction of $\mathcal{G}$ to $U$}. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-j-shriek} Let $X$ be a topological space. Let $j : U \to X$ be the inclusion of an open subset. \begin{enumerate} \item Let $\mathcal{F}$ be a presheaf of sets on $U$. We define the {\it extension of $\mathcal{F}$ by the empty set $j_{p!}\mathcal{F}$} to be the presheaf of sets on $X$ defined by the rule $$ j_{p!}\mathcal{F}(V) = \left\{ \begin{matrix} \emptyset & \text{if} & V \not \subset U \\ \mathcal{F}(V) & \text{if} & V \subset U \end{matrix} \right. $$ with obvious restriction mappings. \item Let $\mathcal{F}$ be a sheaf of sets on $U$. We define the {\it extension of $\mathcal{F}$ by the empty set $j_!\mathcal{F}$} to be the sheafification of the presheaf $j_{p!}\mathcal{F}$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-j-shriek} Let $X$ be a topological space. Let $j : U \to X$ be the inclusion of an open subset. \begin{enumerate} \item The functor $j_{p!}$ is a left adjoint to the restriction functor $j_p$ (see Lemma \ref{lemma-j-pullback}). \item The functor $j_!$ is a left adjoint to restriction, in a formula $$ \Mor_{\Sh(X)}(j_!\mathcal{F}, \mathcal{G}) = \Mor_{\Sh(U)}(\mathcal{F}, j^{-1}\mathcal{G}) = \Mor_{\Sh(U)}(\mathcal{F}, \mathcal{G}|_U) $$ bifunctorially in $\mathcal{F}$ and $\mathcal{G}$. \item Let $\mathcal{F}$ be a sheaf of sets on $U$. The stalks of the sheaf $j_!\mathcal{F}$ are described as follows $$ j_{!}\mathcal{F}_x = \left\{ \begin{matrix} \emptyset & \text{if} & x \not \in U \\ \mathcal{F}_x & \text{if} & x \in U \end{matrix} \right. $$ \item On the category of presheaves of $U$ we have $j_pj_{p!} = \text{id}$. \item On the category of sheaves of $U$ we have $j^{-1}j_! = \text{id}$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-j-shriek-structures} Let $X$ be a topological space. Let $j : U \to X$ be the inclusion of an open subset. \begin{enumerate} \item Let $\mathcal{F}$ be an abelian presheaf on $U$. We define the {\it extension $j_{p!}\mathcal{F}$ of $\mathcal{F}$ by $0$} to be the abelian presheaf on $X$ defined by the rule $$ j_{p!}\mathcal{F}(V) = \left\{ \begin{matrix} 0 & \text{if} & V \not \subset U \\ \mathcal{F}(V) & \text{if} & V \subset U \end{matrix} \right. $$ with obvious restriction mappings. \item Let $\mathcal{F}$ be an abelian sheaf on $U$. We define the {\it extension $j_!\mathcal{F}$ of $\mathcal{F}$ by $0$} to be the sheafification of the abelian presheaf $j_{p!}\mathcal{F}$. \item Let $\mathcal{C}$ be a category having an initial object $e$. Let $\mathcal{F}$ be a presheaf on $U$ with values in $\mathcal{C}$. We define the {\it extension $j_{p!}\mathcal{F}$ of $\mathcal{F}$ by $e$} to be the presheaf on $X$ with values in $\mathcal{C}$ defined by the rule $$ j_{p!}\mathcal{F}(V) = \left\{ \begin{matrix} e & \text{if} & V \not \subset U \\ \mathcal{F}(V) & \text{if} & V \subset U \end{matrix} \right. $$ with obvious restriction mappings. \item Let $(\mathcal{C}, F)$ be a type of algebraic structure such that $\mathcal{C}$ has an initial object $e$. Let $\mathcal{F}$ be a sheaf of algebraic structures on $U$ (of the give type). We define the {\it extension $j_!\mathcal{F}$ of $\mathcal{F}$ by $e$} to be the sheafification of the presheaf $j_{p!}\mathcal{F}$ defined above. \item Let $\mathcal{O}$ be a presheaf of rings on $X$. Let $\mathcal{F}$ be a presheaf of $\mathcal{O}|_U$-modules. In this case we define the {\it extension by $0$} to be the presheaf of $\mathcal{O}$-modules which is equal to $j_{p!}\mathcal{F}$ as an abelian presheaf endowed with the multiplication map $\mathcal{O} \times j_{p!}\mathcal{F} \to j_{p!}\mathcal{F}$. \item Let $\mathcal{O}$ be a sheaf of rings on $X$. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}|_U$-modules. In this case we define the {\it extension by $0$} to be the $\mathcal{O}$-module which is equal to $j_!\mathcal{F}$ as an abelian sheaf endowed with the multiplication map $\mathcal{O} \times j_!\mathcal{F} \to j_!\mathcal{F}$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-j-shriek-abelian} Let $X$ be a topological space. Let $j : U \to X$ be the inclusion of an open subset. Consider the functors of restriction and extension by $0$ for abelian (pre)sheaves. \begin{enumerate} \item The functor $j_{p!}$ is a left adjoint to the restriction functor $j_p$ (see Lemma \ref{lemma-j-pullback}). \item The functor $j_!$ is a left adjoint to restriction, in a formula $$ \Mor_{\textit{Ab}(X)}(j_!\mathcal{F}, \mathcal{G}) = \Mor_{\textit{Ab}(U)}(\mathcal{F}, j^{-1}\mathcal{G}) = \Mor_{\textit{Ab}(U)}(\mathcal{F}, \mathcal{G}|_U) $$ bifunctorially in $\mathcal{F}$ and $\mathcal{G}$. \item Let $\mathcal{F}$ be an abelian sheaf on $U$. The stalks of the sheaf $j_!\mathcal{F}$ are described as follows $$ j_{!}\mathcal{F}_x = \left\{ \begin{matrix} 0 & \text{if} & x \not \in U \\ \mathcal{F}_x & \text{if} & x \in U \end{matrix} \right. $$ \item On the category of abelian presheaves of $U$ we have $j_pj_{p!} = \text{id}$. \item On the category of abelian sheaves of $U$ we have $j^{-1}j_! = \text{id}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-j-shriek-structures} Let $X$ be a topological space. Let $j : U \to X$ be the inclusion of an open subset. Let $(\mathcal{C}, F)$ be a type of algebraic structure such that $\mathcal{C}$ has an initial object $e$. Consider the functors of restriction and extension by $e$ for (pre)sheaves of algebraic structure defined above. \begin{enumerate} \item The functor $j_{p!}$ is a left adjoint to the restriction functor $j_p$ (see Lemma \ref{lemma-j-pullback}). \item The functor $j_!$ is a left adjoint to restriction, in a formula $$ \Mor_{\Sh(X, \mathcal{C})}(j_!\mathcal{F}, \mathcal{G}) = \Mor_{\Sh(U, \mathcal{C})}(\mathcal{F}, j^{-1}\mathcal{G}) = \Mor_{\Sh(U, \mathcal{C})}(\mathcal{F}, \mathcal{G}|_U) $$ bifunctorially in $\mathcal{F}$ and $\mathcal{G}$. \item Let $\mathcal{F}$ be a sheaf on $U$. The stalks of the sheaf $j_!\mathcal{F}$ are described as follows $$ j_{!}\mathcal{F}_x = \left\{ \begin{matrix} e & \text{if} & x \not \in U \\ \mathcal{F}_x & \text{if} & x \in U \end{matrix} \right. $$ \item On the category of presheaves of algebraic structures on $U$ we have $j_pj_{p!} = \text{id}$. \item On the category of sheaves of algebraic structures on $U$ we have $j^{-1}j_! = \text{id}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-j-shriek-modules} Let $(X, \mathcal{O})$ be a ringed space. Let $j : (U, \mathcal{O}|_U) \to (X, \mathcal{O})$ be an open subspace. Consider the functors of restriction and extension by $0$ for (pre)sheaves of modules defined above. \begin{enumerate} \item The functor $j_{p!}$ is a left adjoint to restriction, in a formula $$ \Mor_{\textit{PMod}(\mathcal{O})}(j_{p!}\mathcal{F}, \mathcal{G}) = \Mor_{\textit{PMod}(\mathcal{O}|_U)}(\mathcal{F}, \mathcal{G}|_U) $$ bifunctorially in $\mathcal{F}$ and $\mathcal{G}$. \item The functor $j_!$ is a left adjoint to restriction, in a formula $$ \Mor_{\textit{Mod}(\mathcal{O})}(j_!\mathcal{F}, \mathcal{G}) = \Mor_{\textit{Mod}(\mathcal{O}|_U)}(\mathcal{F}, \mathcal{G}|_U) $$ bifunctorially in $\mathcal{F}$ and $\mathcal{G}$. \item Let $\mathcal{F}$ be a sheaf of $\mathcal{O}$-modules on $U$. The stalks of the sheaf $j_!\mathcal{F}$ are described as follows $$ j_{!}\mathcal{F}_x = \left\{ \begin{matrix} 0 & \text{if} & x \not \in U \\ \mathcal{F}_x & \text{if} & x \in U \end{matrix} \right. $$ \item On the category of sheaves of $\mathcal{O}|_U$-modules on $U$ we have $j^{-1}j_! = \text{id}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-equivalence-categories-open} Let $X$ be a topological space. Let $j : U \to X$ be the inclusion of an open subset. The functor $$ j_! : \Sh(U) \longrightarrow \Sh(X) $$ is fully faithful. Its essential image consists exactly of those sheaves $\mathcal{G}$ such that $\mathcal{G}_x = \emptyset$ for all $x \in X \setminus U$. \end{lemma} 
\begin{lemma} \label{lemma-equivalence-categories-open-abelian} Let $X$ be a topological space. Let $j : U \to X$ be the inclusion of an open subset. The functor $$ j_! : \textit{Ab}(U) \longrightarrow \textit{Ab}(X) $$ is fully faithful. Its essential image consists exactly of those sheaves $\mathcal{G}$ such that $\mathcal{G}_x = 0$ for all $x \in X \setminus U$. \end{lemma} 
\begin{lemma} \label{lemma-equivalence-categories-open-structures} Let $X$ be a topological space. Let $j : U \to X$ be the inclusion of an open subset. Let $(\mathcal{C}, F)$ be a type of algebraic structure such that $\mathcal{C}$ has an initial object $e$. The functor $$ j_! : \Sh(U, \mathcal{C}) \longrightarrow \Sh(X, \mathcal{C}) $$ is fully faithful. Its essential image consists exactly of those sheaves $\mathcal{G}$ such that $\mathcal{G}_x = e$ for all $x \in X \setminus U$. \end{lemma} 
\begin{lemma} \label{lemma-equivalence-categories-open-modules} Let $(X, \mathcal{O})$ be a ringed space. Let $j : (U, \mathcal{O}|_U) \to (X, \mathcal{O})$ be an open subspace. The functor $$ j_! : \textit{Mod}(\mathcal{O}|_U) \longrightarrow \textit{Mod}(\mathcal{O}) $$ is fully faithful. Its essential image consists exactly of those sheaves $\mathcal{G}$ such that $\mathcal{G}_x = 0$ for all $x \in X \setminus U$. \end{lemma} 
\begin{lemma} \label{lemma-stalks-closed-pushforward} Let $X$ be a topological space. Let $i : Z \to X$ be the inclusion of a closed subset $Z$ into $X$. Let $\mathcal{F}$ be a sheaf of sets on $Z$. The stalks of $i_*\mathcal{F}$ are described as follows $$ i_*\mathcal{F}_x = \left\{ \begin{matrix} \{*\} & \text{if} & x \not \in Z \\ \mathcal{F}_x & \text{if} & x \in Z \end{matrix} \right. $$ where $\{*\}$ denotes a singleton set. Moreover, $i^{-1}i_* = \text{id}$ on the category of sheaves of sets on $Z$. Moreover, the same holds for abelian sheaves on $Z$, resp.\ sheaves of algebraic structures on $Z$ where $\{*\}$ has to be replaced by $0$, resp.\ a final object of the category of algebraic structures. \end{lemma} 
\begin{lemma} \label{lemma-equivalence-categories-closed} Let $X$ be a topological space. Let $i : Z \to X$ be the inclusion of a closed subset. The functor $$ i_* : \Sh(Z) \longrightarrow \Sh(X) $$ is fully faithful. Its essential image consists exactly of those sheaves $\mathcal{G}$ such that $\mathcal{G}_x = \{*\}$ for all $x \in X \setminus Z$. \end{lemma} 
\begin{lemma} \label{lemma-equivalence-categories-closed-abelian} Let $X$ be a topological space. Let $i : Z \to X$ be the inclusion of a closed subset. The functor $$ i_* : \textit{Ab}(Z) \longrightarrow \textit{Ab}(X) $$ is fully faithful. Its essential image consists exactly of those sheaves $\mathcal{G}$ such that $\mathcal{G}_x = 0$ for all $x \in X \setminus Z$. \end{lemma} 
\begin{lemma} \label{lemma-equivalence-categories-closed-structures} Let $X$ be a topological space. Let $i : Z \to X$ be the inclusion of a closed subset. Let $(\mathcal{C}, F)$ be a type of algebraic structure with final object $0$. The functor $$ i_* : \Sh(Z, \mathcal{C}) \longrightarrow \Sh(X, \mathcal{C}) $$ is fully faithful. Its essential image consists exactly of those sheaves $\mathcal{G}$ such that $\mathcal{G}_x = 0$ for all $x \in X \setminus Z$. \end{lemma} 
\begin{lemma} \label{lemma-glue-maps} Let $X$ be a topological space. Let $X = \bigcup U_i$ be an open covering. Let $\mathcal{F}$, $\mathcal{G}$ be sheaves of sets on $X$. Given a collection $$ \varphi_i : \mathcal{F}|_{U_i} \longrightarrow \mathcal{G}|_{U_i} $$ of maps of sheaves such that for all $i, j \in I$ the maps $\varphi_i, \varphi_j$ restrict to the same map $\mathcal{F}|_{U_i \cap U_j} \to \mathcal{G}|_{U_i \cap U_j}$ then there exists a unique map of sheaves $$ \varphi : \mathcal{F} \longrightarrow \mathcal{G} $$ whose restriction to each $U_i$ agrees with $\varphi_i$. \end{lemma} 
\begin{lemma} \label{lemma-glue-sheaves} Let $X$ be a topological space. Let $X = \bigcup_{i\in I} U_i$ be an open covering. Given any glueing data $(\mathcal{F}_i, \varphi_{ij})$ for sheaves of sets with respect to the covering $X = \bigcup U_i$ there exists a sheaf of sets $\mathcal{F}$ on $X$ together with isomorphisms $$ \varphi_i : \mathcal{F}|_{U_i} \to \mathcal{F}_i $$ such that the diagrams $$ \xymatrix{ \mathcal{F}|_{U_i \cap U_j} \ar[r]_{\varphi_i} \ar[d]_{\text{id}} & \mathcal{F}_i|_{U_i \cap U_j} \ar[d]^{\varphi_{ij}} \\ \mathcal{F}|_{U_i \cap U_j} \ar[r]^{\varphi_j} & \mathcal{F}_j|_{U_i \cap U_j} } $$ are commutative. \end{lemma} 
\begin{lemma} \label{lemma-glue-sheaves-structures} Let $X$ be a topological space. Let $X = \bigcup U_i$ be an open covering. Let $(\mathcal{F}_i, \varphi_{ij})$ be a glueing data of sheaves of abelian groups, resp.\ sheaves of algebraic structures, resp.\ sheaves of $\mathcal{O}$-modules for some sheaf of rings $\mathcal{O}$ on $X$. Then the construction in the proof of Lemma \ref{lemma-glue-sheaves} above leads to a sheaf of abelian groups, resp.\ sheaf of algebraic structures, resp.\ sheaf of $\mathcal{O}$-modules. \end{lemma} 
\begin{lemma} \label{lemma-mapping-property-glue} Let $X$ be a topological space. Let $X = \bigcup_{i\in I} U_i$ be an open covering. The functor which associates to a sheaf of sets $\mathcal{F}$ the following collection of glueing data $$ (\mathcal{F}|_{U_i}, (\mathcal{F}|_{U_i})|_{U_i \cap U_j} \to (\mathcal{F}|_{U_j})|_{U_i \cap U_j} ) $$ with respect to the covering $X = \bigcup U_i$ defines an equivalence of categories between $\Sh(X)$ and the category of glueing data. A similar statement holds for abelian sheaves, resp.\ sheaves of algebraic structures, resp.\ sheaves of $\mathcal{O}$-modules. \end{lemma} 
