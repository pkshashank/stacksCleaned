\begin{definition} \label{definition-variety} Let $k$ be a field. A {\it variety} is a scheme $X$ over $k$ such that $X$ is integral and the structure morphism $X \to \Spec(k)$ is separated and of finite type. \end{definition} 
\begin{lemma} \label{lemma-product-varieties} \begin{slogan} Products of varieties are varieties over algebraically closed fields. \end{slogan} Let $k$ be an algebraically closed field. Let $X$, $Y$ be varieties over $k$. Then $X \times_{\Spec(k)} Y$ is a variety over $k$. \end{lemma} 
\begin{theorem} \label{theorem-varieties-rational-maps} Let $k$ be a field. The category of varieties and dominant rational maps is equivalent to the category of finitely generated field extensions $K/k$. \end{theorem} 
\begin{lemma} \label{lemma-birational-varieties} Let $X$ and $Y$ be varieties over a field $k$. The following are equivalent \begin{enumerate} \item $X$ and $Y$ are birational varieties, \item the function fields $k(X)$ and $k(Y)$ are isomorphic, \item there exist nonempty opens of $X$ and $Y$ which are isomorphic as varieties, \item there exists an open $U \subset X$ and a birational morphism $U \to Y$ of varieties. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-change-fields-flat} Let $K/k$ be an extension of fields. Let $X$ be scheme over $k$ and set $Y = X_K$. If $y \in Y$ with image $x \in X$, then \begin{enumerate} \item $\mathcal{O}_{X, x} \to \mathcal{O}_{Y, y}$ is a faithfully flat local ring homomorphism, \item with $\mathfrak p_0 = \Ker(\kappa(x) \otimes_k K \to \kappa(y))$ we have $\kappa(y) = \kappa(\mathfrak p_0)$, \item $\mathcal{O}_{Y, y} = (\mathcal{O}_{X, x} \otimes_k K)_\mathfrak p$ where $\mathfrak p \subset \mathcal{O}_{X, x} \otimes_k K$ is the inverse image of $\mathfrak p_0$. \item we have $\mathcal{O}_{Y, y}/\mathfrak m_x\mathcal{O}_{Y, y} = (\kappa(x) \otimes_k K)_{\mathfrak p_0}$ \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-change-fields-algebraic-dim} Notation as in Lemma \ref{lemma-change-fields-flat}. Assume $X$ is locally of finite type over $k$. Then $$ \dim(\mathcal{O}_{Y, y}/\mathfrak m_x\mathcal{O}_{Y, y}) = \text{trdeg}_k(\kappa(x)) - \text{trdeg}_K(\kappa(y)) = \dim(\mathcal{O}_{Y, y}) - \dim(\mathcal{O}_{X, x}) $$ \end{lemma} 
\begin{lemma} \label{lemma-change-fields-algebraic-unramified} Notation as in Lemma \ref{lemma-change-fields-flat}. Assume $X$ is locally of finite type over $k$, that $\dim(\mathcal{O}_{X, x}) = \dim(\mathcal{O}_{Y, y})$ and that $\kappa(x) \otimes_k K$ is reduced (for example if $\kappa(x)/k$ is separable or $K/k$ is separable). Then $\mathfrak m_x \mathcal{O}_{Y, y} = \mathfrak m_y$. \end{lemma} 
\begin{definition} \label{definition-geometrically-reduced} Let $k$ be a field. Let $X$ be a scheme over $k$. \begin{enumerate} \item Let $x \in X$ be a point. We say $X$ is {\it geometrically reduced at $x$} if for any field extension $k'/k$ and any point $x' \in X_{k'}$ lying over $x$ the local ring $\mathcal{O}_{X_{k'}, x'}$ is reduced. \item We say $X$ is {\it geometrically reduced} over $k$ if $X$ is geometrically reduced at every point of $X$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-geometrically-reduced-at-point} \begin{slogan} Geometric reducedness can be checked on local rings. \end{slogan} Let $k$ be a field. Let $X$ be a scheme over $k$. Let $x \in X$. The following are equivalent \begin{enumerate} \item $X$ is geometrically reduced at $x$, and \item the ring $\mathcal{O}_{X, x}$ is geometrically reduced over $k$ (see Algebra, Definition \ref{algebra-definition-geometrically-reduced}). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-perfect-reduced} Let $X$ be a scheme over a perfect field $k$ (e.g.\ $k$ has characteristic zero). Let $x \in X$. If $\mathcal{O}_{X, x}$ is reduced, then $X$ is geometrically reduced at $x$. If $X$ is reduced, then $X$ is geometrically reduced over $k$. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-reduced} Let $k$ be a field of characteristic $p > 0$. Let $X$ be a scheme over $k$. The following are equivalent \begin{enumerate} \item $X$ is geometrically reduced, \item $X_{k'}$ is reduced for every field extension $k'/k$, \item $X_{k'}$ is reduced for every finite purely inseparable field extension $k'/k$, \item $X_{k^{1/p}}$ is reduced, \item $X_{k^{perf}}$ is reduced, \item $X_{\bar k}$ is reduced, \item for every affine open $U \subset X$ the ring $\mathcal{O}_X(U)$ is geometrically reduced (see Algebra, Definition \ref{algebra-definition-geometrically-reduced}). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-check-only-finite-inseparable-extensions} Let $k$ be a field of characteristic $p > 0$. Let $X$ be a scheme over $k$. Let $x \in X$. The following are equivalent \begin{enumerate} \item $X$ is geometrically reduced at $x$, \item $\mathcal{O}_{X_{k'}, x'}$ is reduced for every finite purely inseparable field extension $k'$ of $k$ and $x' \in X_{k'}$ the unique point lying over $x$, \item $\mathcal{O}_{X_{k^{1/p}}, x'}$ is reduced for $x' \in X_{k^{1/p}}$ the unique point lying over $x$, and \item $\mathcal{O}_{X_{k^{perf}}, x'}$ is reduced for $x' \in X_{k^{perf}}$ the unique point lying over $x$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-geometrically-reduced-upstairs} Let $k$ be a field. Let $X$ be a scheme over $k$. Let $k'/k$ be a field extension. Let $x \in X$ be a point, and let $x' \in X_{k'}$ be a point lying over $x$. The following are equivalent \begin{enumerate} \item $X$ is geometrically reduced at $x$, \item $X_{k'}$ is geometrically reduced at $x'$. \end{enumerate} In particular, $X$ is geometrically reduced over $k$ if and only if $X_{k'}$ is geometrically reduced over $k'$. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-reduced-any-base-change} Let $k$ be a field. Let $X$, $Y$ be schemes over $k$. \begin{enumerate} \item If $X$ is geometrically reduced at $x$, and $Y$ reduced, then $X \times_k Y$ is reduced at every point lying over $x$. \item If $X$ geometrically reduced over $k$ and $Y$ reduced, then $X \times_k Y$ is reduced. \item If $X$ and $Y$ are geometrically reduced over $k$, then $X \times_k Y$ is geometrically reduced. \item If $k$ is perfect and $X$ and $Y$ are reduced, then $X \times_k Y$ is reduced. \item Add more here. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-generic-points-geometrically-reduced} Let $k$ be a field. Let $X$ be a scheme over $k$. \begin{enumerate} \item If $x' \leadsto x$ is a specialization and $X$ is geometrically reduced at $x$, then $X$ is geometrically reduced at $x'$. \item If $x \in X$ such that (a) $\mathcal{O}_{X, x}$ is reduced, and (b) for each specialization $x' \leadsto x$ where $x'$ is a generic point of an irreducible component of $X$ the scheme $X$ is geometrically reduced at $x'$, then $X$ is geometrically reduced at $x$. \item If $X$ is reduced and geometrically reduced at all generic points of irreducible components of $X$, then $X$ is geometrically reduced. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-Noetherian-geometrically-reduced-at-point} Let $k$ be a field. Let $X$ be a scheme over $k$. Let $x \in X$. Assume $X$ locally Noetherian and geometrically reduced at $x$. Then there exists an open neighbourhood $U \subset X$ of $x$ which is geometrically reduced over $k$. \end{lemma} 
\begin{lemma} \label{lemma-finite-extension-geometrically-reduced} Let $k$ be a field. Let $X \to \Spec(k)$ be locally of finite type. Assume $X$ has finitely many irreducible components. Then there exists a finite purely inseparable extension $k'/k$ such that $(X_{k'})_{red}$ is geometrically reduced over $k'$. \end{lemma} 
\begin{definition} \label{definition-geometrically-connected} Let $X$ be a scheme over the field $k$. We say $X$ is {\it geometrically connected} over $k$ if the scheme $X_{k'}$ is connected for every field extension $k'$ of $k$. \end{definition} 
\begin{lemma} \label{lemma-geometrically-connected-check-after-extension} Let $X$ be a scheme over the field $k$. Let $k'/k$ be a field extension. Then $X$ is geometrically connected over $k$ if and only if $X_{k'}$ is geometrically connected over $k'$. \end{lemma} 
\begin{lemma} \label{lemma-bijection-connected-components} Let $k$ be a field. Let $X$, $Y$ be schemes over $k$. Assume $X$ is geometrically connected over $k$. Then the projection morphism $$ p : X \times_k Y \longrightarrow Y $$ induces a bijection between connected components. \end{lemma} 
\begin{lemma} \label{lemma-affine-geometrically-connected} Let $k$ be a field. Let $A$ be a $k$-algebra. Then $X = \Spec(A)$ is geometrically connected over $k$ if and only if $A$ is geometrically connected over $k$ (see Algebra, Definition \ref{algebra-definition-geometrically-connected}). \end{lemma} 
\begin{lemma} \label{lemma-separably-closed-field-connected-components} Let $k'/k$ be an extension of fields. Let $X$ be a scheme over $k$. Assume $k$ separably algebraically closed. Then the morphism $X_{k'} \to X$ induces a bijection of connected components. In particular, $X$ is geometrically connected over $k$ if and only if $X$ is connected. \end{lemma} 
\begin{lemma} \label{lemma-characterize-geometrically-connected} Let $k$ be a field. Let $X$ be a scheme over $k$. Let $\overline{k}$ be a separable algebraic closure of $k$. Then $X$ is geometrically connected if and only if the base change $X_{\overline{k}}$ is connected. \end{lemma} 
\begin{lemma} \label{lemma-descend-open} Let $k$ be a field. Let $X$ be a scheme over $k$. Let $A$ be a $k$-algebra. Let $V \subset X_A$ be a quasi-compact open. Then there exists a finitely generated $k$-subalgebra $A' \subset A$ and a quasi-compact open $V' \subset X_{A'}$ such that $V = V'_A$. \end{lemma} 
\begin{lemma} \label{lemma-Galois-action-quasi-compact-open} Let $k$ be a field. Let $X$ be a scheme over $k$. Let $\overline{k}$ be a (possibly infinite) Galois extension of $k$. Let $V \subset X_{\overline{k}}$ be a quasi-compact open. Then \begin{enumerate} \item there exists a finite subextension $\overline{k}/k'/k$ and a quasi-compact open $V' \subset X_{k'}$ such that $V = (V')_{\overline{k}}$, \item there exists an open subgroup $H \subset \text{Gal}(\overline{k}/k)$ such that $\sigma(V) = V$ for all $\sigma \in H$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-closed-fixed-by-Galois} Let $k$ be a field. Let $\overline{k}/k$ be a (possibly infinite) Galois extension. Let $X$ be a scheme over $k$. Let $\overline{T} \subset X_{\overline{k}}$ have the following properties \begin{enumerate} \item $\overline{T}$ is a closed subset of $X_{\overline{k}}$, \item for every $\sigma \in \text{Gal}(\overline{k}/k)$ we have $\sigma(\overline{T}) = \overline{T}$. \end{enumerate} Then there exists a closed subset $T \subset X$ whose inverse image in $X_{\overline{k}}$ is $\overline{T}$. \end{lemma} 
\begin{lemma} \label{lemma-characterize-geometrically-disconnected} Let $k$ be a field. Let $X$ be a scheme over $k$. The following are equivalent \begin{enumerate} \item $X$ is geometrically connected, \item for every finite separable field extension $k'/k$ the scheme $X_{k'}$ is connected. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-tricky} Let $k$ be a field. Let $\overline{k}/k$ be a (possibly infinite) Galois extension. Let $f : T \to X$ be a morphism of schemes over $k$. Assume $T_{\overline{k}}$ connected and $X_{\overline{k}}$ disconnected. Then $X$ is disconnected. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-connected-criterion} \begin{reference} \cite[IV Corollary 4.5.13.1(i)]{EGA} \end{reference} Let $k$ be a field. Let $T \to X$ be a morphism of schemes over $k$. Assume $T$ is geometrically connected and $X$ connected. Then $X$ is geometrically connected. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-connected-if-connected-and-point} Let $k$ be a field. Let $X$ be a scheme over $k$. Assume $X$ is connected and has a point $x$ such that $k$ is algebraically closed in $\kappa(x)$. Then $X$ is geometrically connected. In particular, if $X$ has a $k$-rational point and $X$ is connected, then $X$ is geometrically connected. \end{lemma} 
\begin{lemma} \label{lemma-inverse-image-connected-component} Let $K/k$ be an extension of fields. Let $X$ be a scheme over $k$. For every connected component $T$ of $X$ the inverse image $T_K \subset X_K$ is a union of connected components of $X_K$. \end{lemma} 
\begin{lemma} \label{lemma-image-connected-component-finite-extension} Let $K/k$ be a finite extension of fields and let $X$ be a scheme over  $k$. Denote by $p : X_K \to X$ the projection morphism. For every connected  component $T$ of $X_K$ the image $p(T)$ is a connected component of  $X$. \end{lemma} 
\begin{lemma}[Gabber] \label{lemma-image-connected-component} \begin{reference} Email from Ofer Gabber dated June 4, 2016 \end{reference} Let $K/k$ be an extension of fields. Let $X$ be a scheme over $k$. Denote $p : X_K \to X$ the projection morphism. Let $\overline{T} \subset X_K$ be a connected component. Then $p(\overline{T})$ is a connected component of $X$. \end{lemma} 
\begin{lemma} \label{lemma-galois-action-connected-components} Let $k$ be a field, with separable algebraic closure $\overline{k}$. Let $X$ be a scheme over $k$. There is an action $$ \text{Gal}(\overline{k}/k)^{opp} \times \pi_0(X_{\overline{k}}) \longrightarrow \pi_0(X_{\overline{k}}) $$ with the following properties: \begin{enumerate} \item An element $\overline{T} \in \pi_0(X_{\overline{k}})$ is fixed by the action if and only if there exists a connected component $T \subset X$, which is geometrically connected over $k$, such that $T_{\overline{k}} = \overline{T}$. \item For any field extension $k'/k$ with separable algebraic closure $\overline{k}'$ the diagram $$ \xymatrix{ \text{Gal}(\overline{k}'/k') \times \pi_0(X_{\overline{k}'}) \ar[r] \ar[d] & \pi_0(X_{\overline{k}'}) \ar[d] \\ \text{Gal}(\overline{k}/k) \times \pi_0(X_{\overline{k}}) \ar[r] & \pi_0(X_{\overline{k}}) } $$ is commutative (where the right vertical arrow is a bijection according to Lemma \ref{lemma-separably-closed-field-connected-components}). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-galois-action-connected-components-continuous} Let $k$ be a field, with separable algebraic closure $\overline{k}$. Let $X$ be a scheme over $k$. Assume \begin{enumerate} \item $X$ is quasi-compact, and \item the connected components of $X_{\overline{k}}$ are open. \end{enumerate} Then \begin{enumerate} \item[(a)] $\pi_0(X_{\overline{k}})$ is finite, and \item[(b)] the action of $\text{Gal}(\overline{k}/k)$ on $\pi_0(X_{\overline{k}})$ is continuous. \end{enumerate} Moreover, assumptions (1) and (2) are satisfied when $X$ is of finite type over $k$. \end{lemma} 
\begin{definition} \label{definition-geometrically-irreducible} Let $X$ be a scheme over the field $k$. We say $X$ is {\it geometrically irreducible} over $k$ if the scheme $X_{k'}$ is irreducible\footnote{An irreducible space is nonempty.} for any field extension $k'$ of $k$. \end{definition} 
\begin{lemma} \label{lemma-geometrically-irreducible-check-after-extension} Let $X$ be a scheme over the field $k$. Let $k'/k$ be a field extension. Then $X$ is geometrically irreducible over $k$ if and only if $X_{k'}$ is geometrically irreducible over $k'$. \end{lemma} 
\begin{lemma} \label{lemma-separably-closed-irreducible} Let $X$ be a scheme over a separably closed field $k$. If $X$ is irreducible, then $X_K$ is irreducible for any field extension $K/k$. I.e., $X$ is geometrically irreducible over $k$. \end{lemma} 
\begin{lemma} \label{lemma-bijection-irreducible-components} Let $k$ be a field. Let $X$, $Y$ be schemes over $k$. Assume $X$ is geometrically irreducible over $k$. Then the projection morphism $$ p : X \times_k Y \longrightarrow Y $$ induces a bijection between irreducible components. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-irreducible-local} \begin{slogan} Geometric irreductibility is Zariski local modulo connectedness. \end{slogan} Let $k$ be a field. Let $X$ be a scheme over $k$. The following are equivalent \begin{enumerate} \item $X$ is geometrically irreducible over $k$, \item for every nonempty affine open $U$ the $k$-algebra $\mathcal{O}_X(U)$ is geometrically irreducible over $k$ (see Algebra, Definition \ref{algebra-definition-geometrically-irreducible}), \item $X$ is irreducible and there exists an affine open covering $X = \bigcup U_i$ such that each $k$-algebra $\mathcal{O}_X(U_i)$ is geometrically irreducible, and \item there exists an open covering $X = \bigcup_{i \in I} X_i$ with $I \not = \emptyset$ such that $X_i$ is geometrically irreducible for each $i$ and such that $X_i \cap X_j \not = \emptyset$ for all $i, j \in I$. \end{enumerate} Moreover, if $X$ is geometrically irreducible so is every nonempty open subscheme of $X$. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-irreducible-function-field} Let $X$ be an irreducible scheme over the field $k$. Let $\xi \in X$ be its generic point. The following are equivalent \begin{enumerate} \item $X$ is geometrically irreducible over $k$, and \item $\kappa(\xi)$ is geometrically irreducible over $k$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-separably-closed-field-irreducible-components} Let $k'/k$ be an extension of fields. Let $X$ be a scheme over $k$. Set $X' = X_{k'}$. Assume $k$ separably algebraically closed. Then the morphism $X' \to X$ induces a bijection of irreducible components. \end{lemma} 
\begin{lemma} \label{lemma-characterize-geometrically-irreducible} \begin{slogan} Geometric irreducibility can be tested over a separable algebraic closure of the base field. \end{slogan} Let $k$ be a field. Let $X$ be a scheme over $k$. The following are equivalent: \begin{enumerate} \item $X$ is geometrically irreducible over $k$, \item for every finite separable field extension $k'/k$ the scheme $X_{k'}$ is irreducible, and \item $X_{\overline{k}}$ is irreducible, where $k \subset \overline{k}$ is a separable algebraic closure of $k$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-inverse-image-irreducible} Let $K/k$ be an extension of fields. Let $X$ be a scheme over $k$. For every irreducible component $T$ of $X$ the inverse image $T_K \subset X_K$ is a union of irreducible components of $X_K$. \end{lemma} 
\begin{lemma} \label{lemma-image-irreducible} Let $K/k$ be an extension of fields. Let $X$ be a scheme over $k$. For every irreducible component $\overline{T} \subset X_K$ the image of $\overline{T}$ in $X$ is an irreducible component in $X$. This defines a canonical map $$ \text{IrredComp}(X_K) \longrightarrow \text{IrredComp}(X) $$ which is surjective. \end{lemma} 
\begin{lemma} \label{lemma-irreducible-dense-rational-points-geometrically-irreducible} Let $k$ be a field. Let $X$ be a scheme over $k$. If $X$ is irreducible and has a dense set of $k$-rational points, then $X$ is geometrically irreducible. \end{lemma} 
\begin{lemma} \label{lemma-galois-action-irreducible-components} Let $k$ be a field, with separable algebraic closure $\overline{k}$. Let $X$ be a scheme over $k$. There is an action $$ \text{Gal}(\overline{k}/k)^{opp} \times \text{IrredComp}(X_{\overline{k}}) \longrightarrow \text{IrredComp}(X_{\overline{k}}) $$ with the following properties: \begin{enumerate} \item An element $\overline{T} \in \text{IrredComp}(X_{\overline{k}})$ is fixed by the action if and only if there exists an irreducible component $T \subset X$, which is geometrically irreducible over $k$, such that $T_{\overline{k}} = \overline{T}$. \item For any field extension $k'/k$ with separable algebraic closure $\overline{k}'$ the diagram $$ \xymatrix{ \text{Gal}(\overline{k}'/k') \times \text{IrredComp}(X_{\overline{k}'}) \ar[r] \ar[d] & \text{IrredComp}(X_{\overline{k}'}) \ar[d] \\ \text{Gal}(\overline{k}/k) \times \text{IrredComp}(X_{\overline{k}}) \ar[r] & \text{IrredComp}(X_{\overline{k}}) } $$ is commutative (where the right vertical arrow is a bijection according to Lemma \ref{lemma-separably-closed-field-irreducible-components}). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-orbit-irreducible-components} Let $k$ be a field, with separable algebraic closure $\overline{k}$. Let $X$ be a scheme over $k$. The fibres of the map $$ \text{IrredComp}(X_{\overline{k}}) \longrightarrow \text{IrredComp}(X) $$ of Lemma \ref{lemma-image-irreducible} are exactly the orbits of $\text{Gal}(\overline{k}/k)$ under the action of Lemma \ref{lemma-galois-action-irreducible-components}. \end{lemma} 
\begin{lemma} \label{lemma-galois-action-irreducible-components-locally-finite-type} Let $k$ be a field. Assume $X \to \Spec(k)$ locally of finite type. In this case \begin{enumerate} \item the action $$ \text{Gal}(\overline{k}/k)^{opp} \times \text{IrredComp}(X_{\overline{k}}) \longrightarrow \text{IrredComp}(X_{\overline{k}}) $$ is continuous if we give $\text{IrredComp}(X_{\overline{k}})$ the discrete topology, \item every irreducible component of $X_{\overline{k}}$ can be defined over a finite extension of $k$, and \item given any irreducible component $T \subset X$ the scheme $T_{\overline{k}}$ is a finite union of irreducible components of $X_{\overline{k}}$ which are all in the same $\text{Gal}(\overline{k}/k)$-orbit. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-finite-extension-geometrically-irreducible-components} Let $k$ be a field. Let $X \to \Spec(k)$ be locally of finite type. Assume $X$ has finitely many irreducible components. Then there exists a finite separable extension $k'/k$ such that every irreducible component of $X_{k'}$ is geometrically irreducible over $k'$. \end{lemma} 
\begin{lemma} \label{lemma-irreducible-components-geometrically-irreducible} Let $X$ be a scheme over the field $k$. Assume $X$ has finitely many irreducible components which are all geometrically irreducible. Then $X$ has finitely many connected components each of which is geometrically connected. \end{lemma} 
\begin{definition} \label{definition-geometrically-integral} Let $X$ be a scheme over the field $k$. \begin{enumerate} \item Let $x \in X$. We say $X$ is {\it geometrically pointwise integral at $x$} if for every field extension $k'/k$ and every $x' \in X_{k'}$ lying over $x$ the local ring $\mathcal{O}_{X_{k'}, x'}$ is integral. \item We say $X$ is {\it geometrically pointwise integral} if $X$ is geometrically pointwise integral at every point. \item We say $X$ is {\it geometrically integral} over $k$ if the scheme $X_{k'}$ is integral for every field extension $k'$ of $k$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-geometrically-integral} Let $k$ be a field. Let $X$ be a scheme over $k$. Then $X$ is geometrically integral over $k$ if and only if $X$ is both geometrically reduced and geometrically irreducible over $k$. \end{lemma} 
\begin{lemma} \label{lemma-proper-geometrically-reduced-global-sections} Let $k$ be a field. Let $X$ be a proper scheme over $k$. \begin{enumerate} \item $A = H^0(X, \mathcal{O}_X)$ is a finite dimensional $k$-algebra, \item $A = \prod_{i = 1, \ldots, n} A_i$ is a product of Artinian local $k$-algebras, one factor for each connected component of $X$, \item if $X$ is reduced, then $A = \prod_{i = 1, \ldots, n} k_i$ is a product of fields, each a finite extension of $k$, \item if $X$ is geometrically reduced, then $k_i$ is finite separable over $k$, \item if $X$ is geometrically connected, then $A$ is geometrically irreducible over $k$, \item if $X$ is geometrically irreducible, then $A$ is geometrically irreducible over $k$, \item if $X$ is geometrically reduced and geometrically connected, then $A = k$, and \item if $X$ is geometrically integral, then $A = k$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-baby-stein} Let $X$ be a proper scheme over a field $k$. Set $A = H^0(X, \mathcal{O}_X)$. The fibres of the canonical morphism $X \to \Spec(A)$ are geometrically connected. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-reduced-stein} Let $k$ be a field. Let $X$ be a proper geometrically reduced scheme over $k$. The following are equivalent \begin{enumerate} \item $H^0(X, \mathcal{O}_X) = k$, and \item $X$ is geometrically connected. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-geometrically-normal} Let $X$ be a scheme over the field $k$. \begin{enumerate} \item Let $x \in X$. We say $X$ is {\it geometrically normal at $x$} if for every field extension $k'/k$ and every $x' \in X_{k'}$ lying over $x$ the local ring $\mathcal{O}_{X_{k'}, x'}$ is normal. \item We say $X$ is {\it geometrically normal} over $k$ if $X$ is geometrically normal at every $x \in X$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-geometrically-normal-at-point} Let $k$ be a field. Let $X$ be a scheme over $k$. Let $x \in X$. The following are equivalent \begin{enumerate} \item $X$ is geometrically normal at $x$, \item for every finite purely inseparable field extension $k'$ of $k$ and $x' \in X_{k'}$ lying over $x$ the local ring $\mathcal{O}_{X_{k'}, x'}$ is normal, and \item the ring $\mathcal{O}_{X, x}$ is geometrically normal over $k$ (see Algebra, Definition \ref{algebra-definition-geometrically-normal}). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-geometrically-normal} Let $k$ be a field. Let $X$ be a scheme over $k$. The following are equivalent \begin{enumerate} \item $X$ is geometrically normal, \item $X_{k'}$ is a normal scheme for every field extension $k'/k$, \item $X_{k'}$ is a normal scheme for every finitely generated field extension $k'/k$, \item $X_{k'}$ is a normal scheme for every finite purely inseparable field extension $k'/k$, \item for every affine open $U \subset X$ the ring $\mathcal{O}_X(U)$ is geometrically normal (see Algebra, Definition \ref{algebra-definition-geometrically-normal}), and \item $X_{k^{perf}}$ is a normal scheme. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-geometrically-normal-upstairs} Let $k$ be a field. Let $X$ be a scheme over $k$. Let $k'/k$ be a field extension. Let $x \in X$ be a point, and let $x' \in X_{k'}$ be a point lying over $x$. The following are equivalent \begin{enumerate} \item $X$ is geometrically normal at $x$, \item $X_{k'}$ is geometrically normal at $x'$. \end{enumerate} In particular, $X$ is geometrically normal over $k$ if and only if $X_{k'}$ is geometrically normal over $k'$. \end{lemma} 
\begin{lemma} \label{lemma-fibre-product-normal} Let $k$ be a field. Let $X$ be a geometrically normal scheme over $k$ and let $Y$ be a normal scheme over $k$. Then $X \times_k Y$ is a normal scheme. \end{lemma} 
\begin{lemma} \label{lemma-base-change-normal-by-separable} Let $k$ be a field. Let $X$ be a normal scheme over $k$. Let $K/k$ be a separable field extension. Then $X_K$ is a normal scheme. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-normal-stein} Let $k$ be a field. Let $X$ be a proper geometrically normal scheme over $k$. The following are equivalent \begin{enumerate} \item $H^0(X, \mathcal{O}_X) = k$, \item $X$ is geometrically connected, \item $X$ is geometrically irreducible, and \item $X$ is geometrically integral. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-locally-Noetherian-base-change} Let $k$ be a field. Let $X$ be a scheme over $k$. Let $k'/k$ be a finitely generated field extension. Then $X$ is locally Noetherian if and only if $X_{k'}$ is locally Noetherian. \end{lemma} 
\begin{definition} \label{definition-geometrically-regular} Let $k$ be a field. Let $X$ be a locally Noetherian scheme over $k$. \begin{enumerate} \item Let $x \in X$. We say $X$ is {\it geometrically regular at $x$} over $k$ if for every finitely generated field extension $k'/k$ and any $x' \in X_{k'}$ lying over $x$ the local ring $\mathcal{O}_{X_{k'}, x'}$ is regular. \item We say $X$ is {\it geometrically regular over $k$} if $X$ is geometrically regular at all of its points. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-geometrically-regular-at-point} Let $k$ be a field. Let $X$ be a locally Noetherian scheme over $k$. Let $x \in X$. The following are equivalent \begin{enumerate} \item $X$ is geometrically regular at $x$, \item for every finite purely inseparable field extension $k'$ of $k$ and $x' \in X_{k'}$ lying over $x$ the local ring $\mathcal{O}_{X_{k'}, x'}$ is regular, and \item the ring $\mathcal{O}_{X, x}$ is geometrically regular over $k$ (see Algebra, Definition \ref{algebra-definition-geometrically-regular}). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-geometrically-regular} Let $k$ be a field. Let $X$ be a locally Noetherian scheme over $k$. The following are equivalent \begin{enumerate} \item $X$ is geometrically regular, \item $X_{k'}$ is a regular scheme for every finitely generated field extension $k'/k$, \item $X_{k'}$ is a regular scheme for every finite purely inseparable field extension $k'/k$, \item for every affine open $U \subset X$ the ring $\mathcal{O}_X(U)$ is geometrically regular (see Algebra, Definition \ref{algebra-definition-geometrically-regular}), and \item there exists an affine open covering $X = \bigcup U_i$ such that each $\mathcal{O}_X(U_i)$ is geometrically regular over $k$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-geometrically-regular-upstairs} Let $k$ be a field. Let $X$ be a scheme over $k$. Let $k'/k$ be a finitely generated field extension. Let $x \in X$ be a point, and let $x' \in X_{k'}$ be a point lying over $x$. The following are equivalent \begin{enumerate} \item $X$ is geometrically regular at $x$, \item $X_{k'}$ is geometrically regular at $x'$. \end{enumerate} In particular, $X$ is geometrically regular over $k$ if and only if $X_{k'}$ is geometrically regular over $k'$. \end{lemma} 
\begin{lemma} \label{lemma-flat-under-geometrically-regular} Let $k$ be a field. Let $f : X \to Y$ be a morphism of locally Noetherian schemes over $k$. Let $x \in X$ be a point and set $y = f(x)$. If $X$ is geometrically regular at $x$ and $f$ is flat at $x$ then $Y$ is geometrically regular at $y$. In particular, if $X$ is geometrically regular over $k$ and $f$ is flat and surjective, then $Y$ is geometrically regular over $k$. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-regular-smooth} Let $k$ be a field. Let $X$ be a scheme locally of finite type over $k$. Let $x \in X$. Then $X$ is geometrically regular at $x$ if and only if $X \to \Spec(k)$ is smooth at $x$ (Morphisms, Definition \ref{morphisms-definition-smooth}). \end{lemma} 
\begin{lemma} \label{lemma-CM-base-change} Let $X$ be a locally Noetherian scheme over the field $k$. Let $k'/k$ be a finitely generated field extension. Let $x \in X$ be a point, and let $x' \in X_{k'}$ be a point lying over $x$. Then we have $$ \mathcal{O}_{X, x}\text{ is Cohen-Macaulay} \Leftrightarrow \mathcal{O}_{X_{k'}, x'}\text{ is Cohen-Macaulay} $$ If $X$ is locally of finite type over $k$, the same holds for any field extension $k'/k$. \end{lemma} 
\begin{lemma} \label{lemma-locally-finite-type-Jacobson} Let $X$ be a scheme which is locally of finite type over $k$. Then \begin{enumerate} \item for any closed point $x \in X$ the extension $\kappa(x)/k$ is algebraic, and \item $X$ is a Jacobson scheme (Properties, Definition \ref{properties-definition-jacobson}). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-make-Jacobson} Let $X$ be a scheme over a field $k$. For any field extension $K/k$ whose cardinality is large enough we have \begin{enumerate} \item for any closed point $x \in X_K$ the extension $\kappa(x)/K$ is algebraic, and \item $X_K$ is a Jacobson scheme (Properties, Definition \ref{properties-definition-jacobson}). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-ample-after-field-extension} Let $k$ be a field. Let $X$ be a scheme over $k$. If there exists an ample invertible sheaf on $X_K$ for some field extension $K/k$, then $X$ has an ample invertible sheaf. \end{lemma} 
\begin{lemma} \label{lemma-quasi-affine-after-field-extension} Let $k$ be a field. Let $X$ be a scheme over $k$. If $X_K$ is quasi-affine for some field extension $K/k$, then $X$ is quasi-affine. \end{lemma} 
\begin{lemma} \label{lemma-quasi-projective-after-field-extension} Let $k$ be a field. Let $X$ be a scheme over $k$. If $X_K$ is quasi-projective over $K$ for some field extension $K/k$, then $X$ is quasi-projective over $k$. \end{lemma} 
\begin{lemma} \label{lemma-proper-after-field-extension} Let $k$ be a field. Let $X$ be a scheme over $k$. If $X_K$ is proper over $K$ for some field extension $K/k$, then $X$ is proper over $k$. \end{lemma} 
\begin{lemma} \label{lemma-projective-after-field-extension} Let $k$ be a field. Let $X$ be a scheme over $k$. If $X_K$ is projective over $K$ for some field extension $K/k$, then $X$ is projective over $k$. \end{lemma} 
\begin{definition} \label{definition-dual-numbers} For any ring $R$ the {\it dual numbers} over $R$ is the $R$-algebra denoted $R[\epsilon]$. As an $R$-module it is free with basis $1$, $\epsilon$ and the $R$-algebra structure comes from setting $\epsilon^2 = 0$. \end{definition} 
\begin{lemma} \label{lemma-tangent-space} The set of dotted arrows making (\ref{equation-tangent-space}) commute has a canonical $\kappa(x)$-vector space structure. \end{lemma} 
\begin{definition} \label{definition-tangent-space} Let $f : X \to S$ be a morphism of schemes. Let $x \in X$. The set of dotted arrows making (\ref{equation-tangent-space}) commute with its canonical $\kappa(x)$-vector space structure is called the {\it tangent space of $X$ over $S$ at $x$} and we denote it $T_{X/S, x}$. An element of this space is called a {\it tangent vector} of $X/S$ at $x$. \end{definition} 
\begin{lemma} \label{lemma-tangent-space-cotangent-space} Let $f : X \to S$ be a morphism of schemes. Let $x \in X$. There is a canonical isomorphism $$ T_{X/S, x} = \Hom_{\mathcal{O}_{X, x}}(\Omega_{X/S, x}, \kappa(x)) $$ of vector spaces over $\kappa(x)$. \end{lemma} 
\begin{lemma} \label{lemma-tangent-space-rational-point} Let $f : X \to S$ be a morphism of schemes. Let $x \in X$ be a point and let $s = f(x) \in S$. Assume that $\kappa(x) = \kappa(s)$. Then there are canonical isomorphisms $$ \mathfrak m_x/(\mathfrak m_x^2 + \mathfrak m_s\mathcal{O}_{X, x}) = \Omega_{X/S, x} \otimes_{\mathcal{O}_{X, x}} \kappa(x) $$ and $$ T_{X/S, x} = \Hom_{\kappa(x)}( \mathfrak m_x/(\mathfrak m_x^2 + \mathfrak m_s\mathcal{O}_{X, x}), \kappa(x)) $$ This works more generally if $\kappa(x)/\kappa(s)$ is a separable algebraic extension. \end{lemma} 
\begin{lemma} \label{lemma-map-tangent-spaces} Let $f : X \to Y$ be a morphism of schemes over a base scheme $S$. Let $x \in X$ be a point. Set $y = f(x)$. If $\kappa(y) = \kappa(x)$, then $f$ induces a natural linear map $$ \text{d}f : T_{X/S, x} \longrightarrow T_{Y/S, y} $$ which is dual to the linear map $\Omega_{Y/S, y} \otimes \kappa(y) \to \Omega_{X/S, x}$ via the identifications of Lemma \ref{lemma-tangent-space-cotangent-space}. \end{lemma} 
\begin{lemma} \label{lemma-tangent-space-product} Let $X$, $Y$ be schemes over a base $S$. Let $x \in X$ and $y \in Y$ with the same image point $s \in S$ such that $\kappa(s) = \kappa(x)$ and $\kappa(s) = \kappa(y)$. There is a canonical isomorphism $$ T_{X \times_S Y/S, (x, y)} = T_{X/S, x} \oplus T_{Y/S, y} $$ The map from left to right is induced by the maps on tangent spaces coming from the projections $X \times_S Y \to X$ and $X \times_S Y \to Y$. The map from right to left is induced by the maps $1 \times y : X_s \to X_s \times_s Y_s$ and $x \times 1 : Y_s \to X_s \times_s Y_s$ via the identification (\ref{equation-tangent-space-fibre}) of tangent spaces with tangent spaces of fibres. \end{lemma} 
\begin{lemma} \label{lemma-injective-tangent-spaces-unramified} Let $f : X \to Y$ be a morphism of schemes locally of finite type over a base scheme $S$. Let $x \in X$ be a point. Set $y = f(x)$ and assume that $\kappa(y) = \kappa(x)$. Then the following are equivalent \begin{enumerate} \item $\text{d}f : T_{X/S, x} \longrightarrow T_{Y/S, y}$ is injective, and \item $f$ is unramified at $x$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-quasi-finite-in-codim-1} Let $f : X \to Y$ be locally of finite type. Let $y \in Y$ be a point such that $\mathcal{O}_{Y, y}$ is Noetherian of dimension $\leq 1$. Assume in addition one of the following conditions is satisfied \begin{enumerate} \item for every generic point $\eta$ of an irreducible component of $X$ the field extension $\kappa(\eta)/\kappa(f(\eta))$ is finite (or algebraic), \item for every generic point $\eta$ of an irreducible component of $X$ such that $f(\eta) \leadsto y$ the field extension $\kappa(\eta)/\kappa(f(\eta))$ is finite (or algebraic), \item $f$ is quasi-finite at every generic point of an irreducible component of $X$, \item $Y$ is locally Noetherian and $f$ is quasi-finite at a dense set of points of $X$, \item add more here. \end{enumerate} Then $f$ is quasi-finite at every point of $X$ lying over $y$. \end{lemma} 
\begin{lemma} \label{lemma-finite-in-codim-1} Let $f : X \to Y$ be a proper morphism. Let $y \in Y$ be a point such that $\mathcal{O}_{Y, y}$ is Noetherian of dimension $\leq 1$. Assume in addition one of the following conditions is satisfied \begin{enumerate} \item for every generic point $\eta$ of an irreducible component of $X$ the field extension $\kappa(\eta)/\kappa(f(\eta))$ is finite (or algebraic), \item for every generic point $\eta$ of an irreducible component of $X$ such that $f(\eta) \leadsto y$ the field extension $\kappa(\eta)/\kappa(f(\eta))$ is finite (or algebraic), \item $f$ is quasi-finite at every generic point of $X$, \item $Y$ is locally Noetherian and $f$ is quasi-finite at a dense set of points of $X$, \item add more here. \end{enumerate} Then there exists an open neighbourhood $V \subset Y$ of $y$ such that $f^{-1}(V) \to V$ is finite. \end{lemma} 
\begin{lemma} \label{lemma-modification-normal-iso-over-codimension-1} Let $X$ be a Noetherian scheme. Let $f : Y \to X$ be a birational proper morphism of schemes with $Y$ reduced. Let $U \subset X$ be the maximal open over which $f$ is an isomorphism. Then $U$ contains \begin{enumerate} \item every point of codimension $0$ in $X$, \item every $x \in X$ of codimension $1$ on $X$ such that $\mathcal{O}_{X, x}$ is a discrete valuation ring, \item every $x \in X$ such that the fibre of $Y \to X$ over $x$ is finite and such that $\mathcal{O}_{X, x}$ is normal, and \item every $x \in X$ such that $f$ is quasi-finite at some $y \in Y$ lying over $x$ and $\mathcal{O}_{X, x}$ is normal. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-noether-normalization} Let $f : X \to S$ be a morphism of schemes. Let $x \in X$ with image $s \in S$. Let $V \subset S$ be an affine open neighbourhood of $s$. If $f$ is locally of finite type and $\dim_x(X_s) = d$, then there exists an affine open $U \subset X$ with $x \in U$ and $f(U) \subset V$ and a factorization $$ U \xrightarrow{\pi} \mathbf{A}^d_V \to V $$ of $f|_U : U \to V$ such that $\pi$ is quasi-finite. \end{lemma} 
\begin{lemma} \label{lemma-noether-normalization-affine} Let $f : X \to S$ be a finite type morphism of affine schemes. Let $s \in S$. If $\dim(X_s) = d$, then there exists a factorization $$ X \xrightarrow{\pi} \mathbf{A}^d_S \to S $$ of $f$ such that the morphism $\pi_s : X_s \to \mathbf{A}^d_{\kappa(s)}$ of fibres over $s$ is finite. \end{lemma} 
\begin{lemma} \label{lemma-geometric-structure-unramified} Let $f : X \to S$ be a morphism of schemes. Let $x \in X$. Let $V = \Spec(A)$ be an affine open neighbourhood of $f(x)$ in $S$. If $f$ is unramified at $x$, then there exist exists an affine open $U \subset X$ with $x \in U$ and $f(U) \subset V$ such that we have a commutative diagram $$ \xymatrix{ X \ar[d] & U \ar[l] \ar[rd] \ar[r]^-j & \Spec(A[t]_{g'}/(g)) \ar[d] \ar[r] & \Spec(A[t]) = \mathbf{A}^1_V \ar[ld] \\ Y & & V \ar[ll] } $$ where $j$ is an immersion, $g \in A[t]$ is a monic polynomial, and $g'$ is the derivative of $g$ with respect to $t$. If $f$ is \'etale at $x$, then we may choose the diagram such that $j$ is an open immersion. \end{lemma} 
\begin{lemma} \label{lemma-unramfied-over-affine} Let $f : X \to S$ be a finite type morphism of affine schemes. Let $x \in X$ with image $s \in S$. Let $$ r = \dim_{\kappa(x)} \Omega_{X/S, x} \otimes_{\mathcal{O}_{X, x}} \kappa(x) = \dim_{\kappa(x)} \Omega_{X_s/s, x} \otimes_{\mathcal{O}_{X_s, x}} \kappa(x) = \dim_{\kappa(x)} T_{X/S, x} $$ Then there exists a factorization $$ X \xrightarrow{\pi} \mathbf{A}^r_S \to S $$ of $f$ such that $\pi$ is unramified at $x$. \end{lemma} 
\begin{lemma} \label{lemma-immersion-into-affine} Let $f : X \to S$ be a morphism of schemes. Let $x \in X$ with image $s \in S$. Let $V \subset S$ be an affine open neighbourhood of $s$. If $f$ is locally of finite type and $$ r = \dim_{\kappa(x)} \Omega_{X/S, x} \otimes_{\mathcal{O}_{X, x}} \kappa(x) = \dim_{\kappa(x)} \Omega_{X_s/s, x} \otimes_{\mathcal{O}_{X_s, x}} \kappa(x) = \dim_{\kappa(x)} T_{X/S, x} $$ then there exist \begin{enumerate} \item an affine open $U \subset X$ with $x \in U$ and $f(U) \subset V$ and a factorization $$ U \xrightarrow{j} \mathbf{A}^{r + 1}_V \to V $$ of $f|_U$ such that $j$ is an immersion, or \item an affine open $U \subset X$ with $x \in U$ and $f(U) \subset V$ and a factorization $$ U \xrightarrow{j} D \to V $$ of $f|_U$ such that $j$ is a closed immersion and $D \to V$ is smooth of relative dimension $r$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-dimension-fibre-in-codim-1} Let $f : X \to Y$ be locally of finite type. Let $x \in X$ be a point with image $y \in Y$ such that $\mathcal{O}_{Y, y}$ is Noetherian of dimension $\leq 1$. Let $d \geq 0$ be an integer such that for every generic point $\eta$ of an irreducible component of $X$ which contains $x$, we have $\dim_\eta(X_{f(\eta)}) = d$. Then $\dim_x(X_y) = d$. \end{lemma} 
\begin{lemma} \label{lemma-dominate-valuation-ring-dimension-fibres} Let $f : X \to \Spec(R)$ be a morphism from an irreducible scheme to the spectrum of a valuation ring. If $f$ is locally of finite type and surjective, then the special fibre is equidimensional of dimension equal to the dimension of the generic fibre. \end{lemma} 
\begin{lemma} \label{lemma-dimension-fibre-in-higher-codimension} Let $f : X \to Y$ be locally of finite type. Let $x \in X$ be a point with image $y \in Y$ such that $\mathcal{O}_{Y, y}$ is Noetherian. Let $d \geq 0$ be an integer such that for every generic point $\eta$ of an irreducible component of $X$ which contains $x$, we have $f(\eta) \not = y$ and $\dim_\eta(X_{f(\eta)}) = d$. Then $\dim_x(X_y) \leq d + \dim(\mathcal{O}_{Y, y}) - 1$. \end{lemma} 
\begin{definition} \label{definition-algebraic-scheme} Let $k$ be a field. An {\it algebraic $k$-scheme} is a scheme $X$ over $k$ such that the structure morphism $X \to \Spec(k)$ is of finite type. A {\it locally algebraic $k$-scheme} is a scheme $X$ over $k$ such that the structure morphism $X \to \Spec(k)$ is locally of finite type. \end{definition} 
\begin{lemma} \label{lemma-algebraic-scheme-dim-0} Let $k$ be a field. Let $X$ be a locally algebraic $k$-scheme of dimension $0$. Then $X$ is a disjoint union of spectra of local Artinian $k$-algebras $A$ with $\dim_k(A) < \infty$. If $X$ is an algebraic $k$-scheme of dimension $0$, then in addition $X$ is affine and the morphism $X \to \Spec(k)$ is finite. \end{lemma} 
\begin{lemma} \label{lemma-dimension-locally-algebraic} Let $k$ be a field. Let $X$ be a locally algebraic $k$-scheme. \begin{enumerate} \item \label{item-catenary} The topological space of $X$ is catenary (Topology, Definition \ref{topology-definition-catenary}). \item \label{item-dimension-at-closed-point} For $x \in X$ closed, we have $\dim_x(X) = \dim(\mathcal{O}_{X, x})$. \item \label{item-dimension-irreducible} For $X$ irreducible we have $\dim(X) = \dim(U)$ for any nonempty open $U \subset X$ and $\dim(X) = \dim_x(X)$ for any $x \in X$. \item \label{item-irreducible-maximal-chains} For $X$ irreducible any chain of irreducible closed subsets can be extended to a maximal chain and all maximal chains of irreducible closed subsets have length equal to $\dim(X)$. \item \label{item-dimension-irreducibles-passing-through} For $x \in X$ we have $\dim_x(X) = \max \dim(Z) = \min \dim(\mathcal{O}_{X, x'})$ where the maximum is over irreducible components $Z \subset X$ containing $x$ and the minimum is over specializations $x \leadsto x'$ with $x'$ closed in $X$. \item \label{item-dimension-irreducible-trdeg} If $X$ is irreducible with generic point $x$, then $\dim(X) = \text{trdeg}_k(\kappa(x))$. \item \label{item-immediate-specialization} If $x \leadsto x'$ is an immediate specialization of points of $X$, then we have $\text{trdeg}_k(\kappa(x)) = \text{trdeg}_k(\kappa(x')) + 1$. \item \label{item-dimension-sup-trdeg} The dimension of $X$ is the supremum of the numbers $\text{trdeg}_k(\kappa(x))$ where $x$ runs over the generic points of the irreducible components of $X$. \item \label{item-specialization} If $x \leadsto x'$ is a nontrivial specialization of points of $X$, then \begin{enumerate} \item $\dim_x(X) \leq \dim_{x'}(X)$, \item $\dim(\mathcal{O}_{X, x}) < \dim(\mathcal{O}_{X, x'})$, \item $\text{trdeg}_k(\kappa(x)) > \text{trdeg}_k(\kappa(x'))$, and \item any maximal chain of nontrivial specializations $x = x_0 \leadsto x_1 \leadsto \ldots \leadsto x_n = x$ has length $n = \text{trdeg}_k(\kappa(x)) - \text{trdeg}_k(\kappa(x'))$. \end{enumerate} \item \label{item-dimension-formula} For $x \in X$ we have $\dim_x(X) = \text{trdeg}_k(\kappa(x)) + \dim(\mathcal{O}_{X, x})$. \item \label{item-immediate-specialization-local-ring} If $x \leadsto x'$ is an immediate specialization of points of $X$ and $X$ is irreducible or equidimensional, then $\dim(\mathcal{O}_{X, x'}) = \dim(\mathcal{O}_{X, x}) + 1$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-dimension-fibres-locally-algebraic} Let $k$ be a field. Let $f : X \to Y$ be a morphism of locally algebraic $k$-schemes. \begin{enumerate} \item For $y \in Y$, the fibre $X_y$ is a locally algebraic scheme over $\kappa(y)$ hence all the results of Lemma \ref{lemma-dimension-locally-algebraic} apply. \item Assume $X$ is irreducible. Set $Z = \overline{f(X)}$ and $d = \dim(X) - \dim(Z)$. Then \begin{enumerate} \item $\dim_x(X_{f(x)}) \geq d$ for all $x \in X$, \item the set of $x \in X$ with $\dim_x(X_{f(x)}) = d$ is dense open, \item if $\dim(\mathcal{O}_{Z, f(x)}) \geq 1$, then $\dim_x(X_{f(x)}) \leq d + \dim(\mathcal{O}_{Z, f(x)}) - 1$, \item if $\dim(\mathcal{O}_{Z, f(x)}) = 1$, then $\dim_x(X_{f(x)}) = d$, \end{enumerate} \item For $x \in X$ with $y = f(x)$ we have $\dim_x(X_y) \geq \dim_x(X) - \dim_y(Y)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-dimension-product-locally-algebraic} \begin{slogan} The dimension of the product is the sum of the dimensions. \end{slogan} Let $k$ be a field. Let $X$, $Y$ be locally algebraic $k$-schemes. \begin{enumerate} \item For $z \in X \times Y$ lying over $(x, y)$ we have $\dim_z(X \times Y) = \dim_x(X) + \dim_y(Y)$. \item We have $\dim(X \times Y) = \dim(X) + \dim(Y)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-complete-local-ring-structure-as-algebra} Let $k$ be a field. Let $X$ be a locally Noetherian scheme over $k$. Let $x \in X$ be a point with residue field $\kappa$. There is an isomorphism \begin{equation} \label{equation-complete-local-ring} \kappa[[x_1, \ldots, x_n]]/I \longrightarrow \mathcal{O}_{X, x}^\wedge \end{equation} inducing the identity on residue fields. In general we cannot choose (\ref{equation-complete-local-ring}) to be a $k$-algebra isomorphism. However, if the extension $\kappa/k$ is separable, then we can choose (\ref{equation-complete-local-ring}) to be an isomorphism of $k$-algebras. \end{lemma} 
\begin{lemma} \label{lemma-base-change-complete-local-ring} Let $K/k$ be an extension of fields. Let $X$ be a locally algebraic $k$-scheme. Set $Y = X_K$. Let $y \in Y$ be a point with image $x \in X$. Assume that $\dim(\mathcal{O}_{X, x}) = \dim(\mathcal{O}_{Y, y})$ and that $\kappa(x)/k$ is separable. Choose an isomorphism $$ \kappa(x)[[x_1, \ldots, x_n]]/(g_1, \ldots, g_m) \longrightarrow \mathcal{O}_{X, x}^\wedge $$ of $k$-algebras as in (\ref{equation-complete-local-ring}). Then we have an isomorphism $$ \kappa(y)[[x_1, \ldots, x_n]]/(g_1, \ldots, g_m) \longrightarrow \mathcal{O}_{Y, y}^\wedge $$ of $K$-algebras as in (\ref{equation-complete-local-ring}). Here we use $\kappa(x) \to \kappa(y)$ to view $g_j$ as a power series over $\kappa(y)$. \end{lemma} 
\begin{lemma} \label{lemma-globally-generated-base-change} Let $X \to \Spec(A)$ be a morphism of schemes. Let $A \subset A'$ be a faithfully flat ring map. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Then $\mathcal{F}$ is globally generated if and only if the base change $\mathcal{F}_{A'}$ is globally generated. \end{lemma} 
\begin{lemma} \label{lemma-very-ample-vanish-at-point} Let $k$ be an infinite field. Let $X$ be a scheme of finite type over $k$. Let $\mathcal{L}$ be a very ample invertible sheaf on $X$. Let $n \geq 0$ and $x, x_1, \ldots, x_n \in X$ be points with $x$ a $k$-rational point, i.e., $\kappa(x) = k$, and $x \not = x_i$ for $i = 1, \ldots, n$. Then there exists an $s \in H^0(X, \mathcal{L})$ which vanishes at $x$ but not at $x_i$. \end{lemma} 
\begin{lemma} \label{lemma-generated-by-dim-plus-1-sections} Let $k$ be an infinite field. Let $X$ be an algebraic $k$-scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Let $V \to \Gamma(X, \mathcal{L})$ be a linear map of $k$-vector spaces whose image generates $\mathcal{L}$. Then there exists a subspace $W \subset V$ with $\dim_k(W) \leq \dim(X) + 1$ which generates $\mathcal{L}$. \end{lemma} 
\begin{lemma} \label{lemma-separate-points-tangent-vectors} Let $k$ be an algebraically closed field. Let $X$ be a proper $k$-scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Let $V \subset H^0(X, \mathcal{L})$ be a $k$-subvector space. If \begin{enumerate} \item for every pair of distinct closed points $x, y \in X$ there is a section $s \in V$ which vanishes at $x$ but not at $y$, and \item for every closed point $x \in X$ and nonzero tangent vector $\theta \in T_{X/k, x}$ there exists a section $s \in V$ which vanishes at $x$ but whose pullback by $\theta$ is nonzero, \end{enumerate} then $\mathcal{L}$ is very ample and the canonical morphism $\varphi_{\mathcal{L}, V} : X \to \mathbf{P}(V)$ is a closed immersion. \end{lemma} 
\begin{lemma} \label{lemma-variant-separate-points-tangent-vectors} Let $k$ be an algebraically closed field. Let $X$ be a proper $k$-scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Suppose that for every closed subscheme $Z \subset X$ of dimension $0$ and degree $2$ over $k$ the map $$ H^0(X, \mathcal{L}) \longrightarrow H^0(Z, \mathcal{L}|_Z) $$ is surjective. Then $\mathcal{L}$ is very ample on $X$ over $k$. \end{lemma} 
\begin{lemma} \label{lemma-closure-of-product} Let $k$ be a field. Let $X$, $Y$ be schemes over $k$, and let $A \subset X$, $B \subset Y$ be subsets. Set $$ AB = \{z \in X \times_k Y \mid \text{pr}_X(z) \in A, \ \text{pr}_Y(z) \in B\} \subset X \times_k Y $$ Then set theoretically we have $$ \overline{A} \times_k \overline{B} = \overline{AB} $$ \end{lemma} 
\begin{lemma} \label{lemma-closure-image-product-map} Let $k$ be a field. Let $f : A \to X$, $g : B \to Y$ be morphisms of schemes over $k$. Then set theoretically we have $$ \overline{f(A)} \times_k \overline{g(B)} = \overline{(f \times g)(A \times_k B)} $$ \end{lemma} 
\begin{lemma} \label{lemma-scheme-theoretic-image-product-map} Let $k$ be a field. Let $f : A \to X$, $g : B \to Y$ be quasi-compact morphisms of schemes over $k$. Let $Z \subset X$ be the scheme theoretic image of $f$, see Morphisms, Definition \ref{morphisms-definition-scheme-theoretic-image}. Similarly, let $Z' \subset Y$ be the scheme theoretic image of $g$. Then $Z \times_k Z'$ is the scheme theoretic image of $f \times g$. \end{lemma} 
\begin{lemma} \label{lemma-char-zero-differentials-free-smooth} Let $k$ be a field. Let $X$ be a scheme over $k$. Assume \begin{enumerate} \item $X$ is locally of finite type over $k$, \item $\Omega_{X/k}$ is locally free, and \item $k$ has characteristic zero. \end{enumerate} Then the structure morphism $X \to \Spec(k)$ is smooth. \end{lemma} 
\begin{lemma} \label{lemma-char-p-differentials-free-smooth} Let $k$ be a field. Let $X$ be a scheme over $k$. Assume \begin{enumerate} \item $X$ is locally of finite type over $k$, \item $\Omega_{X/k}$ is locally free, \item $X$ is reduced, and \item $k$ is perfect. \end{enumerate} Then the structure morphism $X \to \Spec(k)$ is smooth. \end{lemma} 
\begin{lemma} \label{lemma-smooth-regular} \begin{slogan} Smooth over a field implies regular \end{slogan} Let $X \to \Spec(k)$ be a smooth morphism where $k$ is a field. Then $X$ is a regular scheme. \end{lemma} 
\begin{lemma} \label{lemma-smooth-geometrically-normal} Let $X \to \Spec(k)$ be a smooth morphism where $k$ is a field. Then $X$ is geometrically regular, geometrically normal, and geometrically reduced over $k$. \end{lemma} 
\begin{lemma} \label{lemma-affine-space-over-field} Let $k$ be a field. Let $d \geq 0$. Let $W \subset \mathbf{A}^d_k$ be nonempty open. Then there exists a closed point $w \in W$ such that $k \subset \kappa(w)$ is finite separable. \end{lemma} 
\begin{lemma} \label{lemma-smooth-separable-closed-points-dense} Let $k$ be a field. If $X$ is smooth over $\Spec(k)$ then the set $$ \{x \in X\text{ closed such that }k \subset \kappa(x) \text{ is finite separable}\} $$ is dense in $X$. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-reduced-dense-smooth-open} Let $X$ be a scheme over a field $k$. If $X$ is locally of finite type and geometrically reduced over $k$ then $X$ contains a dense open which is smooth over $k$. \end{lemma} 
\begin{lemma} \label{lemma-dense-smooth-open-variety-over-perfect-field} Let $k$ be a perfect field. Let $X$ be a locally algebraic reduced $k$-scheme, for example a variety over $k$. Then we have $$ \{x \in X \mid X \to \Spec(k)\text{ is smooth at }x\} = \{x \in X \mid \mathcal{O}_{X, x}\text{ is regular}\} $$ and this is a dense open subscheme of $X$. \end{lemma} 
\begin{lemma} \label{lemma-flat-under-smooth} Let $k$ be a field. Let $f : X \to Y$ be a morphism of schemes locally of finite type over $k$. Let $x \in X$ be a point and set $y = f(x)$. If $X \to \Spec(k)$ is smooth at $x$ and $f$ is flat at $x$ then $Y \to \Spec(k)$ is smooth at $y$. In particular, if $X$ is smooth over $k$ and $f$ is flat and surjective, then $Y$ is smooth over $k$. \end{lemma} 
\begin{lemma} \label{lemma-variety-with-smooth-rational-point} Let $k$ be a field. Let $X$ be a variety over $k$ which has a $k$-rational point $x$ such that $X$ is smooth at $x$. Then $X$ is geometrically integral over $k$. \end{lemma} 
\begin{lemma} \label{lemma-smooth-stratification} Let $X$ be a scheme of finite type over a field $k$. There exists a finite purely inseparable extension $k'/k$, an integer $t \geq 0$, and closed subschemes $$ X_{k'} \supset Z_0 \supset Z_1 \supset \ldots \supset Z_t = \emptyset $$ such that $Z_0 = (X_{k'})_{red}$ and $Z_i \setminus Z_{i + 1}$ is smooth over $k'$ for all $i$. \end{lemma} 
\begin{definition} \label{definition-variety-type} Let $k$ be a field. Let $X$ be a variety over $k$. \begin{enumerate} \item We say $X$ is an {\it affine variety} if $X$ is an affine scheme. This is equivalent to requiring $X$ to be isomorphic to a closed subscheme of $\mathbf{A}^n_k$ for some $n$. \item We say $X$ is a {\it projective variety} if the structure morphism $X \to \Spec(k)$ is projective. By Morphisms, Lemma \ref{morphisms-lemma-characterize-locally-projective} this is true if and only if $X$ is isomorphic to a closed subscheme of $\mathbf{P}^n_k$ for some $n$. \item We say $X$ is a {\it quasi-projective variety} if the structure morphism $X \to \Spec(k)$ is quasi-projective. By Morphisms, Lemma \ref{morphisms-lemma-characterize-locally-quasi-projective} this is true if and only if $X$ is isomorphic to a locally closed subscheme of $\mathbf{P}^n_k$ for some $n$. \item A {\it proper variety} is a variety such that the morphism $X \to \Spec(k)$ is proper. \item A {\it smooth variety} is a variety such that the morphism $X \to \Spec(k)$ is smooth. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-regular-functions-proper-variety} Let $X$ be a proper variety over $k$. Then \begin{enumerate} \item $K = H^0(X, \mathcal{O}_X)$ is a field which is a finite extension of the field $k$, \item if $X$ is geometrically reduced, then $K/k$ is separable, \item if $X$ is geometrically irreducible, then $K/k$ is purely inseparable, \item if $X$ is geometrically integral, then $K = k$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-normalization-locally-algebraic} Let $k$ be a field. Let $X$ be a locally algebraic scheme over $k$. Let $\nu : X^\nu \to X$ be the normalization morphism, see Morphisms, Definition \ref{morphisms-definition-normalization}. Then \begin{enumerate} \item $\nu$ is finite, dominant, and $X^\nu$ is a disjoint union of normal irreducible locally algebraic schemes over $k$, \item $\nu$ factors as $X^\nu \to X_{red} \to X$ and the first morphism is the normalization morphism of $X_{red}$, \item if $X$ is a reduced algebraic scheme, then $\nu$ is birational, \item if $X$ is a variety, then $X^\nu$ is a variety and $\nu$ is a finite birational morphism of varieties. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-normalize-projective} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $\nu : X^\nu \to X$ be the normalization morphism, see Morphisms, Definition \ref{morphisms-definition-normalization}. Then $X^\nu$ is proper over $k$. If $X$ is projective over $k$, then $X^\nu$ is projective over $k$. \end{lemma} 
\begin{lemma} \label{lemma-relative-normalization-finite} Let $k$ be a field. Let $f : Y \to X$ be a quasi-compact morphism of locally algebraic schemes over $k$. Let $X'$ be the normalization of $X$ in $Y$. If $Y$ is reduced, then $X' \to X$ is finite. \end{lemma} 
\begin{lemma} \label{lemma-finite-extension-geometrically-normal} Let $k$ be a field. Let $X$ be an algebraic $k$-scheme. Then there exists a finite purely inseparable extension $k'/k$ such that the normalization $Y$ of $X_{k'}$ is geometrically normal over $k'$. \end{lemma} 
\begin{lemma} \label{lemma-normalization-and-change-of-fields} Let $k$ be a field. Let $X$ be a locally algebraic $k$-scheme. Let $K/k$ be an extension of fields. Let $\nu : X^\nu \to X$ be the normalization of $X$ and let $Y^\nu \to X_K$ be the normalization of the base change. Then the canonical morphism $$ Y^\nu \longrightarrow X^\nu \times_{\Spec(k)} \Spec(K) $$ is an isomorphism if $K/k$ is separable and a universal homeomorphism in general. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-normal-in-codim-1} Let $k$ be a field. Let $X$ be a locally algebraic $k$-scheme. Let $\nu : X^\nu \to X$ be the normalization of $X$. Let $x \in X$ be a point such that (a) $\mathcal{O}_{X, x}$ is reduced, (b) $\dim(\mathcal{O}_{X, x}) = 1$, and (c) for every $x' \in X^\nu$ with $\nu(x') = x$ the extension $\kappa(x')/k$ is separable. Then $X$ is geometrically reduced at $x$ and $X^\nu$ is geometrically regular at $x'$ with $\nu(x') = x$. \end{lemma} 
\begin{lemma} \label{lemma-open-in-normal-proper} Let $k$ be an algebraically closed field. Let $\overline{X}$ be a proper variety over $k$. Let $X \subset \overline{X}$ be an open subscheme. Assume $X$ is normal. Then $\mathcal{O}^*(X)/k^*$ is a finitely generated abelian group. \end{lemma} 
\begin{lemma} \label{lemma-units-integral-finite-type-algebraically-closed} Let $k$ be an algebraically closed field. Let $X$ be an integral scheme locally of finite type over $k$. Then $\mathcal{O}^*(X)/k^*$ is a finitely generated abelian group. \end{lemma} 
\begin{lemma} \label{lemma-units-general-algebraically-closed} Let $k$ be an algebraically closed field. Let $X$ be a connected reduced scheme which is locally of finite type over $k$ with finitely many irreducible components. Then $\mathcal{O}^*(X)/k^*$ is a finitely generated abelian group. \end{lemma} 
\begin{lemma} \label{lemma-integral-closure-ground-field} Let $k$ be a field. Let $X$ be a scheme over $k$ which is connected and reduced. Then the integral closure of $k$ in $\Gamma(X, \mathcal{O}_X)$ is a field. \end{lemma} 
\begin{proposition} \label{proposition-units-general} Let $k$ be a field. Let $X$ be a scheme over $k$. Assume that $X$ is locally of finite type over $k$, connected, reduced, and has finitely many irreducible components. Then $\mathcal{O}(X)^*/k^*$ is a finitely generated abelian group if in addition to the conditions above at least one of the following conditions is satisfied: \begin{enumerate} \item the integral closure of $k$ in $\Gamma(X, \mathcal{O}_X)$ is $k$, \item $X$ has a $k$-rational point, or \item $X$ is geometrically integral. \end{enumerate} \end{proposition} 
\begin{lemma} \label{lemma-units-variety} Let $k$ be a field. Let $X$ be a variety over $k$. The group $\mathcal{O}(X)^*/k^*$ is a finitely generated abelian group provided at least one of the following conditions holds: \begin{enumerate} \item $k$ is integrally closed in $\Gamma(X, \mathcal{O}_X)$, \item $k$ is algebraically closed in $k(X)$, \item $X$ is geometrically integral over $k$, or \item $k$ is the ``intersection'' of the field extensions $\kappa(x)/k$ where $x$ runs over the closed points of $x$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-kunneth} Let $k$ be a field. Let $X$ and $Y$ be schemes over $k$ and let $\mathcal{F}$, resp.\ $\mathcal{G}$ be a quasi-coherent $\mathcal{O}_X$-module, resp.\ $\mathcal{O}_Y$-module. Then we have a canonical isomorphism $$ H^n(X \times_{\Spec(k)} Y, \text{pr}_1^*\mathcal{F} \otimes_{\mathcal{O}_{X \times_{\Spec(k)} Y}} \text{pr}_2^*\mathcal{G}) = \bigoplus\nolimits_{p + q = n} H^p(X, \mathcal{F}) \otimes_k H^q(Y, \mathcal{G}) $$ provided $X$ and $Y$ are quasi-compact and have affine diagonal\footnote{The case where $X$ and $Y$ are quasi-separated will be discussed in Lemma \ref{lemma-kunneth-general} below.} (for example if $X$ and $Y$ are separated). \end{lemma} 
\begin{lemma} \label{lemma-kunneth-general} Let $k$ be a field. Let $X$ and $Y$ be schemes over $k$ and let $\mathcal{F}$, resp.\ $\mathcal{G}$ be a quasi-coherent $\mathcal{O}_X$-module, resp.\ $\mathcal{O}_Y$-module. Then we have a canonical isomorphism $$ H^n(X \times_{\Spec(k)} Y, \text{pr}_1^*\mathcal{F} \otimes_{\mathcal{O}_{X \times_{\Spec(k)} Y}} \text{pr}_2^*\mathcal{G}) = \bigoplus\nolimits_{p + q = n} H^p(X, \mathcal{F}) \otimes_k H^q(Y, \mathcal{G}) $$ provided $X$ and $Y$ are quasi-compact and quasi-separated. \end{lemma} 
\begin{lemma} \label{lemma-change-rings-pic-pre} Let $A \to B$ be a faithfully flat ring map. Let $X$ be a quasi-compact and quasi-separated scheme over $A$. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module whose pullback to $X_B$ is trivial. Then $H^0(X, \mathcal{L})$ and $H^0(X, \mathcal{L}^{\otimes -1})$ are invertible $H^0(X, \mathcal{O}_X)$-modules and the multiplication map induces an isomorphism $$ H^0(X, \mathcal{L}) \otimes_{H^0(X, \mathcal{O}_X)} H^0(X, \mathcal{L}^{\otimes -1}) \longrightarrow H^0(X, \mathcal{O}_X) $$ \end{lemma} 
\begin{lemma} \label{lemma-change-rings-pic} Let $A \to B$ be a faithfully flat ring map. Let $X$ be a scheme over $A$ such that \begin{enumerate} \item $X$ is quasi-compact and quasi-separated, and \item $R = H^0(X, \mathcal{O}_X)$ is a semi-local ring. \end{enumerate} Then the pullback map $\Pic(X) \to \Pic(X_B)$ is injective. \end{lemma} 
\begin{lemma} \label{lemma-change-fields-pic} Let $k'/k$ be a field extension. Let $X$ be a scheme over $k$ such that \begin{enumerate} \item $X$ is quasi-compact and quasi-separated, and \item $R = H^0(X, \mathcal{O}_X)$ is semi-local, e.g., if $\dim_k R < \infty$. \end{enumerate} Then the pullback map $\Pic(X) \to \Pic(X_{k'})$ is injective. \end{lemma} 
\begin{lemma} \label{lemma-rational-equivalence-for-Pic} Let $k$ be a field. Let $X$ be a normal variety over $k$. Let $U \subset \mathbf{A}^n_k$ be an open subscheme with $k$-rational points $p, q \in U(k)$. For every invertible module $\mathcal{L}$ on $X \times_{\Spec(k)} U$ the restrictions $\mathcal{L}|_{X \times p}$ and $\mathcal{L}|_{X \times q}$ are isomorphic. \end{lemma} 
\begin{proposition} \label{proposition-unique-base-field} Let $X$ be a scheme. Let $a : X \to \Spec(k_1)$ and $b : X \to \Spec(k_2)$ be morphisms from $X$ to spectra of fields. Assume $a, b$ are locally of finite type, and $X$ is reduced, and connected. Then we have $k_1' = k_2'$, where $k_i' \subset \Gamma(X, \mathcal{O}_X)$ is the integral closure of $k_i$ in $\Gamma(X, \mathcal{O}_X)$. \end{proposition} 
\begin{lemma} \label{lemma-automorphism} Let $X$ be a reduced scheme of finite type over a field $k$. Let $f : X \to X$ be an automorphism over $k$ which induces the identity map on the underlying topological space of $X$. Then \begin{enumerate} \item $f^*\mathcal{F} \cong \mathcal{F}$ for every coherent $\mathcal{O}_X$-module, and \item if $\dim(Z) > 0$ for every irreducible component $Z \subset X$, then $f$ is the identity. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-euler-characteristic} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. In this situation the {\it Euler characteristic of $\mathcal{F}$} is the integer $$ \chi(X, \mathcal{F}) = \sum\nolimits_i (-1)^i \dim_k H^i(X, \mathcal{F}). $$ For justification of the formula see below. \end{definition} 
\begin{lemma} \label{lemma-euler-characteristic-additive} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $0 \to \mathcal{F}_1 \to \mathcal{F}_2 \to \mathcal{F}_3 \to 0$ be a short exact sequence of coherent modules on $X$. Then $$ \chi(X, \mathcal{F}_2) = \chi(X, \mathcal{F}_1) + \chi(X, \mathcal{F}_3) $$ \end{lemma} 
\begin{lemma} \label{lemma-chi-tensor-finite} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $\mathcal{F}$ be a coherent sheaf with $\dim(\text{Supp}(\mathcal{F})) \leq 0$. Then \begin{enumerate} \item $\mathcal{F}$ is generated by global sections, \item $H^0(X, \mathcal{F}) = \bigoplus_{x \in \text{Supp}(\mathcal{F})} \mathcal{F}_x$, \item $H^i(X, \mathcal{F}) = 0$ for $i > 0$, \item $\chi(X, \mathcal{F}) = \dim_k H^0(X, \mathcal{F})$, and \item $\chi(X, \mathcal{F} \otimes \mathcal{E}) = n\chi(X, \mathcal{F})$ for every locally free module $\mathcal{E}$ of rank $n$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-euler-characteristic-extend-base-field} Let $k'/k$ be an extension of fields. Let $X$ be a proper scheme over $k$. Let $\mathcal{F}$ be a coherent sheaf on $X$. Let $\mathcal{F}'$ be the pullback of $\mathcal{F}$ to $X_{k'}$. Then $\chi(X, \mathcal{F}) = \chi(X', \mathcal{F}')$. \end{lemma} 
\begin{lemma} \label{lemma-euler-characteristic-morphism} Let $k$ be a field. Let $f : Y \to X$ be a morphism of proper schemes over $k$. Let $\mathcal{G}$ be a coherent $\mathcal{O}_Y$-module. Then $$ \chi(Y, \mathcal{G}) = \sum (-1)^i \chi(X, R^if_*\mathcal{G}) $$ \end{lemma} 
\begin{lemma} \label{lemma-projective-space-smooth} \begin{slogan} Projective space is smooth. \end{slogan} Let $k$ be a field and $n \geq 0$. Then $\mathbf{P}^n_k$ is a smooth projective variety of dimension $n$ over $k$. \end{lemma} 
\begin{lemma} \label{lemma-intersection-in-affine-space} Let $k$ be a field and $n \geq 0$. Let $X, Y \subset \mathbf{A}^n_k$ be closed subsets. Assume that $X$ and $Y$ are equidimensional, $\dim(X) = r$ and $\dim(Y) = s$. Then every irreducible component of $X \cap Y$ has dimension $\geq r + s - n$. \end{lemma} 
\begin{lemma} \label{lemma-intersection-in-projective-space} Let $k$ be a field and $n \geq 0$. Let $X, Y \subset \mathbf{P}^n_k$ be nonempty closed subsets. If $\dim(X) = r$ and $\dim(Y) = s$ and $r + s \geq n$, then $X \cap Y$ is nonempty and $\dim(X \cap Y) \geq r + s - n$. \end{lemma} 
\begin{lemma} \label{lemma-equation-codim-1-in-projective-space} Let $k$ be a field. Let $Z \subset \mathbf{P}^n_k$ be a closed subscheme which has no embedded points such that every irreducible component of $Z$ has dimension $n - 1$. Then the ideal $I(Z) \subset k[T_0, \ldots, T_n]$ corresponding to $Z$ is principal. \end{lemma} 
\begin{lemma} \label{lemma-hyperplane} Let $k$ be a field. Let $n \geq 1$. Let $i : H \to \mathbf{P}^n_k$ be a hyperplane. Then there exists an isomorphism $$ \varphi : \mathbf{P}^{n - 1}_k \longrightarrow H $$ such that $i^*\mathcal{O}(1)$ pulls back to $\mathcal{O}(1)$. \end{lemma} 
\begin{lemma} \label{lemma-exact-sequence-induction} Let $k$ be an infinite field. Let $n \geq 1$. Let $\mathcal{F}$ be a coherent module on $\mathbf{P}^n_k$. Then there exist a nonzero section $s \in \Gamma(\mathbf{P}^n_k, \mathcal{O}(1))$ and a short exact sequence $$ 0 \to \mathcal{F}(-1) \to \mathcal{F} \to i_*\mathcal{G} \to 0 $$ where $i : H \to \mathbf{P}^n_k$ is the hyperplane $H$ associated to $s$ and $\mathcal{G} = i^*\mathcal{F}$. \end{lemma} 
\begin{definition} \label{definition-regularity} Let $k$ be a field. Let $n \geq 0$. Let $\mathcal{F}$ be a coherent sheaf on $\mathbf{P}^n_k$. We say $\mathcal{F}$ is {\it $m$-regular} if $$ H^i(\mathbf{P}^n_k, \mathcal{F}(m - i)) = 0 $$ for $i = 1, \ldots, n$. \end{definition} 
\begin{lemma} \label{lemma-m-regular-extend-base-field} Let $k'/k$ be an extension of fields. Let $n \geq 0$. Let $\mathcal{F}$ be a coherent sheaf on $\mathbf{P}^n_k$. Let $\mathcal{F}'$ be the pullback of $\mathcal{F}$ to $\mathbf{P}^n_{k'}$. Then $\mathcal{F}$ is $m$-regular if and only if $\mathcal{F}'$ is $m$-regular. \end{lemma} 
\begin{lemma} \label{lemma-m-regular} In the situation of Lemma \ref{lemma-exact-sequence-induction}, if $\mathcal{F}$ is $m$-regular, then $\mathcal{G}$ is $m$-regular on $H \cong \mathbf{P}^{n - 1}_k$. \end{lemma} 
\begin{lemma} \label{lemma-m-regular-up} Let $k$ be a field. Let $n \geq 0$. Let $\mathcal{F}$ be a coherent sheaf on $\mathbf{P}^n_k$. If $\mathcal{F}$ is $m$-regular, then $\mathcal{F}$ is $(m + 1)$-regular. \end{lemma} 
\begin{lemma} \label{lemma-m-regular-multiply} Let $k$ be a field. Let $n \geq 0$. Let $\mathcal{F}$ be a coherent sheaf on $\mathbf{P}^n_k$. If $\mathcal{F}$ is $m$-regular, then the multiplication map $$ H^0(\mathbf{P}^n_k, \mathcal{F}(m)) \otimes_k H^0(\mathbf{P}^n_k, \mathcal{O}(1)) \longrightarrow H^0(\mathbf{P}^n_k, \mathcal{F}(m + 1)) $$ is surjective. \end{lemma} 
\begin{lemma} \label{lemma-m-regular-globally-generated} Let $k$ be a field. Let $n \geq 0$. Let $\mathcal{F}$ be a coherent sheaf on $\mathbf{P}^n_k$. If $\mathcal{F}$ is $m$-regular, then $\mathcal{F}(m)$ is globally generated. \end{lemma} 
\begin{lemma} \label{lemma-hilbert-polynomial} Let $k$ be a field. Let $n \geq 0$. Let $\mathcal{F}$ be a coherent sheaf on $\mathbf{P}^n_k$. The function $$ d \longmapsto \chi(\mathbf{P}^n_k, \mathcal{F}(d)) $$ is a polynomial. \end{lemma} 
\begin{definition} \label{definition-hilbert-polynomial} Let $k$ be a field. Let $n \geq 0$. Let $\mathcal{F}$ be a coherent sheaf on $\mathbf{P}^n_k$. The function $d \mapsto \chi(\mathbf{P}^n_k, \mathcal{F}(d))$ is called the {\it Hilbert polynomial} of $\mathcal{F}$. \end{definition} 
\begin{lemma} \label{lemma-hilbert-polynomial-H0} Let $k$ be a field. Let $n \geq 0$. Let $\mathcal{F}$ be a coherent sheaf on $\mathbf{P}^n_k$ with Hilbert polynomial $P \in \mathbf{Q}[t]$. Then $$ P(d) = \dim_k H^0(\mathbf{P}^n_k, \mathcal{F}(d)) $$ for all $d \gg 0$. \end{lemma} 
\begin{lemma} \label{lemma-bound-quotients-free} Let $k$ be a field. Let $n \geq 0$. Let $r \geq 1$. Let $P \in \mathbf{Q}[t]$. There exists an integer $m$ depending on $n$, $r$, and $P$ with the following property: if $$ 0 \to \mathcal{K} \to \mathcal{O}^{\oplus r} \to \mathcal{F} \to 0 $$ is a short exact sequence of coherent sheaves on $\mathbf{P}^n_k$ and $\mathcal{F}$ has Hilbert polynomial $P$, then $\mathcal{K}$ is $m$-regular. \end{lemma} 
\begin{definition} \label{definition-absolute-frobenius} Let $p$ be a prime number. Let $X$ be a scheme in characteristic $p$. The {\it absolute frobenius of $X$} is the morphism $F_X : X \to X$ given by the identity on the underlying topological space and with $F_X^\sharp : \mathcal{O}_X \to \mathcal{O}_X$ given by $g \mapsto g^p$. \end{definition} 
\begin{lemma} \label{lemma-frobenius-endomorphism-identity} Let $p > 0$ be a prime number. Let $f : X \to Y$ be a morphism of schemes in characteristic $p$. Then the diagram $$ \xymatrix{ X \ar[d]_f \ar[r]_{F_X} & X \ar[d]^f \\ Y \ar[r]^{F_Y} & Y } $$ commutes. \end{lemma} 
\begin{lemma} \label{lemma-frobenius} Let $p > 0$ be a prime number. Let $X$ be a scheme in characteristic $p$. Then the absolute frobenius $F_X : X \to X$ is a universal homeomorphism, is integral, and induces purely inseparable residue field extensions. \end{lemma} 
\begin{definition} \label{definition-relative-frobenius} Let $p > 0$ be a prime number. Let $S$ be a scheme in characteristic $p$. Let $X$ be a scheme over $S$. We define $$ X^{(p)} = X^{(p/S)} = X \times_{S, F_S} S $$ viewed as a scheme over $S$. Applying Lemma \ref{lemma-frobenius-endomorphism-identity} we see there is a unique morphism $F_{X/S} : X \longrightarrow X^{(p)}$ over $S$ fitting into the commutative diagram $$ \xymatrix{ X \ar[rr]_{F_{X/S}} \ar[rrd] \ar@/^1em/[rrrr]^{F_X} & & X^{(p)} \ar[rr] \ar[d] & & X \ar[d] \\ & & S \ar[rr]^{F_S} & & S } $$ where the right square is cartesian. The morphism $F_{X/S}$ is called the {\it relative Frobenius morphism of $X/S$}. \end{definition} 
\begin{lemma} \label{lemma-relative-frobenius-endomorphism-identity} Let $p > 0$ be a prime number. Let $S$ be a scheme in characteristic $p$. Let $f : X \to Y$ be a morphism of schemes over $S$ . Then the diagram $$ \xymatrix{ X \ar[d]_f \ar[r]_{F_{X/S}} & X^{(p)} \ar[d]^{f^{(p)}} \\ Y \ar[r]^{F_{Y/S}} & Y^{(p)} } $$ commutes. \end{lemma} 
\begin{lemma} \label{lemma-relative-frobenius} Let $p > 0$ be a prime number. Let $S$ be a scheme in characteristic $p$. Let $X$ be a scheme over $S$. Then the relative frobenius $F_{X/S} : X \to X^{(p)}$ is a universal homeomorphism, is integral, and induces purely inseparable residue field extensions. \end{lemma} 
\begin{lemma} \label{lemma-relative-frobenius-omega} Let $p > 0$ be a prime number. Let $S$ be a scheme in characteristic $p$. Let $X$ be a scheme over $S$. Then $\Omega_{X/S} = \Omega_{X/X^{(p)}}$. \end{lemma} 
\begin{lemma} \label{lemma-relative-frobenius-finite} Let $p > 0$ be a prime number. Let $S$ be a scheme in characteristic $p$. Let $X$ be a scheme over $S$. If $X \to S$ is locally of finite type, then $F_{X/S}$ is finite. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-reduced-p} Let $k$ be a field of characteristic $p > 0$. Let $X$ be a scheme over $k$. Then $X$ is geometrically reduced if and only if $X^{(p)}$ is reduced. \end{lemma} 
\begin{lemma} \label{lemma-inseparable-deg-p-smooth} Let $k$ be a field of characteristic $p > 0$. Let $X$ be a variety over $k$. The following are equivalent \begin{enumerate} \item $X^{(p)}$ is reduced, \item $X$ is geometrically reduced, \item there is a nonempty open $U \subset X$ smooth over $k$. \end{enumerate} In this case $X^{(p)}$ is a variety over $k$ and $F_{X/k} : X \to X^{(p)}$ is a finite dominant morphism of degree $p^{\dim(X)}$. \end{lemma} 
\begin{lemma} \label{lemma-glue-valuation-ring} In Situation \ref{situation-glue} assume that $B$ is a valuation ring. Then for every unit $u$ of $A$ either $u \in R$ or $u^{-1} \in R$. \end{lemma} 
\begin{lemma} \label{lemma-glue-separated} In Situation \ref{situation-glue} assume $A$ is a Noetherian ring of dimension $1$. The following are equivalent \begin{enumerate} \item $A \otimes B \to K$ is not surjective, \item there exists a discrete valuation ring $\mathcal{O} \subset K$ containing both $A$ and $B$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-semi-local} In Situation \ref{situation-glue} assume \begin{enumerate} \item $A$ is a Noetherian semi-local domain of dimension $1$, \item $B$ is a discrete valuation ring, \end{enumerate} Then we have the following two possibilities \begin{enumerate} \item[(a)] If $A^*$ is not contained in $R$, then $\Spec(A) \to \Spec(R)$ and $\Spec(B) \to \Spec(R)$ are open immersions covering $\Spec(R)$ and $K = A \otimes_R B$. \item[(b)] If $A^*$ is contained in $R$, then $B$ dominates one of the local rings of $A$ at a maximal ideal and $A \otimes B \to K$ is not surjective. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-semi-local-dimension-one-conductor} Let $B$ be a semi-local Noetherian domain of dimension $1$. Let $B'$ be the integral closure of $B$ in its fraction field. Then $B'$ is a semi-local Dedekind domain. Let $x$ be a nonzero element of the Jacobson radical of $B'$. Then for every $y \in B'$ there exists an $n$ such that $x^n y \in B$. \end{lemma} 
\begin{lemma} \label{lemma-semi-local-both-side} In Situation \ref{situation-glue} assume \begin{enumerate} \item $A$ is a Noetherian semi-local domain of dimension $1$, \item $B$ is a Noetherian semi-local domain of dimension $1$, \item $A \otimes B \to K$ is surjective. \end{enumerate} Then $\Spec(A) \to \Spec(R)$ and $\Spec(B) \to \Spec(R)$ are open immersions covering $\Spec(R)$ and $K = A \otimes_R B$. \end{lemma} 
\begin{lemma} \label{lemma-glue-a-bunch-of-local-rings} Let $K$ be a field. Let $A_1, \ldots, A_r \subset K$ be Noetherian semi-local rings of dimension $1$ with fraction field $K$. If $A_i \otimes A_j \to K$ is surjective for all $i \not = j$, then there exists a Noetherian semi-local domain $A \subset K$ of dimension $1$ contained in $A_1, \ldots, A_r$ such that \begin{enumerate} \item $A \to A_i$ induces an open immersion $j_i : \Spec(A_i) \to \Spec(A)$, \item $\Spec(A)$ is the union of the opens $j_i(\Spec(A_i))$, \item each closed point of $\Spec(A)$ lies in exactly one of these opens. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-create-globally-generated} Let $A$ be a domain with fraction field $K$. Let $B_1, \ldots, B_r \subset K$ be Noetherian $1$-dimensional semi-local domains whose fraction fields are $K$. If $A \otimes B_i \to K$ are surjective for $i = 1, \ldots, r$, then there exists an $x \in A$ such that $x^{-1}$ is in the Jacobson radical of $B_i$ for $i = 1, \ldots, r$. \end{lemma} 
\begin{lemma} \label{lemma-power-equal} Let $A$ be a Noetherian local ring of dimension $1$. Let $L = \prod A_\mathfrak p$ where the product is over the minimal primes of $A$. Let $a_1, a_2 \in \mathfrak m_A$ map to the same element of $L$. Then $a_1^n = a_2^n$ for some $n > 0$. \end{lemma} 
\begin{lemma} \label{lemma-power-works} Let $A$ be a Noetherian local ring of dimension $1$. Let $L = \prod A_\mathfrak p$ and $I = \bigcap \mathfrak p$ where the product and intersection are over the minimal primes of $A$. Let $f \in L$ be an element of the form $f = i + a$ where $a \in \mathfrak m_A$ and $i \in IL$. Then some power of $f$ is in the image of $A \to L$. \end{lemma} 
\begin{lemma} \label{lemma-good-intersection} Let $A$ be a Noetherian local ring of dimension $1$. Let $L = \prod A_\mathfrak p$ where the product is over the minimal primes of $A$. Let $K \to L$ be an integral ring map. Then there exist $a \in \mathfrak m_A$ and $x \in K$ which map to the same element of $L$ such that $\mathfrak m_A = \sqrt{(a)}$. \end{lemma} 
\begin{lemma} \label{lemma-localization-semi-local} Let $A$ be a ring. Let $\mathfrak p_1, \ldots, \mathfrak p_r$ be a finite set of a primes of $A$. Let $S = A \setminus \bigcup \mathfrak p_i$. Then $S$ is a multiplicative system and $S^{-1}A$ is a semi-local ring whose maximal ideals correspond to the maximal elements of the set $\{\mathfrak p_i\}$. \end{lemma} 
\begin{lemma} \label{lemma-affine} Let $X$ be a scheme all of whose local rings are Noetherian of dimension $\leq 1$. Let $U \subset X$ be a retrocompact open. Denote $j : U \to X$ the inclusion morphism. Then $R^pj_*\mathcal{F} = 0$, $p > 0$ for every quasi-coherent $\mathcal{O}_U$-module $\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-open-in-affine-curve-affine} Let $X$ be an affine scheme all of whose local rings are Noetherian of dimension $\leq 1$. Then any quasi-compact open $U \subset X$ is affine. \end{lemma} 
\begin{lemma} \label{lemma-complement-codim-1-closed-points} Let $X$ be a scheme. Let $U \subset X$ be an open. Assume \begin{enumerate} \item $U$ is a retrocompact open of $X$, \item $X \setminus U$ is discrete, and \item for $x \in X \setminus U$ the local ring $\mathcal{O}_{X, x}$ is Noetherian of dimension $\leq 1$. \end{enumerate} Then (1) there exists an invertible $\mathcal{O}_X$-module $\mathcal{L}$ and a section $s$ such that $U = X_s$ and (2) the map $\Pic(X) \to \Pic(U)$ is surjective. \end{lemma} 
\begin{lemma} \label{lemma-find-globally-generated} Let $X$ be an integral separated scheme. Let $U \subset X$ be a nonempty affine open such that $X \setminus U$ is a finite set of points $x_1, \ldots, x_r$ with $\mathcal{O}_{X, x_i}$ Noetherian of dimension $1$. Then there exists a globally generated invertible $\mathcal{O}_X$-module $\mathcal{L}$ and a section $s$ such that $U = X_s$. \end{lemma} 
\begin{lemma} \label{lemma-enough-globally-generated-ample} Let $X$ be a quasi-compact scheme. If for every $x \in X$ there exists a pair $(\mathcal{L}, s)$ consisting of a globally generated invertible sheaf $\mathcal{L}$ and a global section $s$ such that $x \in X_s$ and $X_s$ is affine, then $X$ has an ample invertible sheaf. \end{lemma} 
\begin{lemma} \label{lemma-dim-1-noetherian-integral-separated-has-ample} Let $X$ be a Noetherian integral separated scheme of dimension $1$. Then $X$ has an ample invertible sheaf. \end{lemma} 
\begin{lemma} \label{lemma-surjective-pic-birational-finite} Let $f : X \to Y$ be a finite morphism of schemes. Assume there exists an open $V \subset Y$ such that $f^{-1}(V) \to V$ is an isomorphism and $Y \setminus V$ is a discrete space. Then every invertible $\mathcal{O}_X$-module is the pullback of an invertible $\mathcal{O}_Y$-module. \end{lemma} 
\begin{lemma} \label{lemma-glue-invertible-sheaves} Let $X$ be a scheme. Let $Z_1, \ldots, Z_n \subset X$ be closed subschemes. Let $\mathcal{L}_i$ be an invertible sheaf on $Z_i$. Assume that \begin{enumerate} \item $X$ is reduced, \item $X = \bigcup Z_i$ set theoretically, and \item $Z_i \cap Z_j$ is a discrete topological space for $i \not = j$. \end{enumerate} Then there exists an invertible sheaf $\mathcal{L}$ on $X$ whose restriction to $Z_i$ is $\mathcal{L}_i$. Moreover, if we are given sections $s_i \in \Gamma(Z_i, \mathcal{L}_i)$ which are nonvanishing at the points of $Z_i \cap Z_j$, then we can choose $\mathcal{L}$ such that there exists a $s \in \Gamma(X, \mathcal{L})$ with $s|_{Z_i} = s_i$ for all $i$. \end{lemma} 
\begin{lemma} \label{lemma-dim-1-noetherian-reduced-separated-has-ample} Let $X$ be a Noetherian reduced separated scheme of dimension $1$. Then $X$ has an ample invertible sheaf. \end{lemma} 
\begin{lemma} \label{lemma-lift-line-bundle-from-reduction-dimension-1} Let $i : Z \to X$ be a closed immersion of schemes. If the underlying topological space of $X$ is Noetherian and $\dim(X) \leq 1$, then $\Pic(X) \to \Pic(Z)$ is surjective. \end{lemma} 
\begin{proposition} \label{proposition-dim-1-noetherian-separated-has-ample} Let $X$ be a Noetherian separated scheme of dimension $1$. Then $X$ has an ample invertible sheaf. \end{proposition} 
\begin{lemma} \label{lemma-surjection-on-pic-quasi-finite} Let $f : X \to Y$ be a morphism of schemes. Assume $Y$ is Noetherian of dimension $\leq 1$, $f$ is finite, and there exists a dense open $V \subset Y$ such that $f^{-1}(V) \to V$ is a closed immersion. Then every invertible $\mathcal{O}_X$-module is the pullback of an invertible $\mathcal{O}_Y$-module. \end{lemma} 
\begin{lemma} \label{lemma-pre-pre-delta-invariant} Let $(A, \mathfrak m)$ be a Noetherian $1$-dimensional local ring. Let $f \in \mathfrak m$. The following are equivalent \begin{enumerate} \item $\mathfrak m = \sqrt{(f)}$, \item $f$ is not contained in any minimal prime of $A$, and \item $A_f = \prod_{\mathfrak p\text{ minimal}} A_\mathfrak p$ as $A$-algebras. \end{enumerate} Such an $f \in \mathfrak m$ exists. If $\text{depth}(A) = 1$ (for example $A$ is reduced), then (1) -- (3) are also equivalent to \begin{enumerate} \item[(4)] $f$ is a nonzerodivisor, \item[(5)] $A_f$ is the total ring of fractions of $A$. \end{enumerate} If $A$ is reduced, then (1) -- (5) are also equivalent to \begin{enumerate} \item[(6)] $A_f$ is the product of the residue fields at the minimal primes of $A$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-pre-delta-invariant} Let $(A, \mathfrak m)$ be a reduced Nagata $1$-dimensional local ring. Let $A'$ be the integral closure of $A$ in the total ring of fractions of $A$. Then $A'$ is a normal Nagata ring, $A \to A'$ is finite, and $A'/A$ has finite length as an $A$-module. \end{lemma} 
\begin{definition} \label{definition-delta-invariant-algebra} Let $A$ be a reduced Nagata local ring of dimension $1$. The {\it $\delta$-invariant of $A$} is $\text{length}_A(A'/A)$ where $A'$ is as in Lemma \ref{lemma-pre-delta-invariant}. \end{definition} 
\begin{lemma} \label{lemma-delta-invariant-is-zero} Let $A$ be a reduced Nagata local ring of dimension $1$. The $\delta$-invariant of $A$ is $0$ if and only if $A$ is a discrete valuation ring. \end{lemma} 
\begin{lemma} \label{lemma-normalization-same-after-completion} Let $A$ be a reduced Nagata local ring of dimension $1$. Let $A \to A'$ be as in Lemma \ref{lemma-pre-delta-invariant}. Let $A^h$, $A^{sh}$, resp.\ $A^\wedge$ be the henselization, strict henselization, resp.\ completion of $A$. Then $A^h$, $A^{sh}$, resp. $A^\wedge$ is a reduced Nagata local ring of dimension $1$ and $A' \otimes_A A^h$, $A' \otimes_A A^{sh}$, resp. $A' \otimes_A A^\wedge$ is the integral closure of $A^h$, $A^{sh}$, resp.\ $A^\wedge$ in its total ring of fractions. \end{lemma} 
\begin{lemma} \label{lemma-delta-same-after-completion} Let $A$ be a reduced Nagata local ring of dimension $1$. The $\delta$-invariant of $A$ is the same as the $\delta$-invariant of the henselization, strict henselization, or the completion of $A$. \end{lemma} 
\begin{definition} \label{definition-delta-invariant} Let $k$ be a field. Let $X$ be a locally algebraic $k$-scheme. Let $x \in X$ be a point such that $\mathcal{O}_{X, x}$ is reduced and $\dim(\mathcal{O}_{X, x}) = 1$. The {\it $\delta$-invariant of $X$ at $x$} is the $\delta$-invariant of $\mathcal{O}_{X, x}$ as defined in Definition \ref{definition-delta-invariant-algebra}. \end{definition} 
\begin{lemma} \label{lemma-delta-invariant-and-change-of-fields} Let $k$ be a field. Let $X$ be a locally algebraic $k$-scheme. Let $K/k$ be a field extension and set $Y = X_K$. Let $y \in Y$ with image $x \in X$. Assume $X$ is geometrically reduced at $x$ and $\dim(\mathcal{O}_{X, x}) = \dim(\mathcal{O}_{Y, y}) = 1$. Then $$ \delta\text{-invariant of }X\text{ at }x \leq \delta\text{-invariant of }Y\text{ at }y $$ \end{lemma} 
\begin{lemma} \label{lemma-delta-invariant-and-change-of-fields-better} Let $k$ be a field. Let $X$ be a locally algebraic $k$-scheme. Let $K/k$ be a field extension and set $Y = X_K$. Let $y \in Y$ with image $x \in X$. Assume assumptions (a), (b), (c) of Lemma \ref{lemma-geometrically-normal-in-codim-1} hold for $x \in X$ and that $\dim(\mathcal{O}_{Y, y}) = 1$. Then the $\delta$-invariant of $X$ at $x$ is $\delta$-invariant of $Y$ at $y$. \end{lemma} 
\begin{lemma} \label{lemma-number-of-branches} Let $X$ be a scheme. Assume every quasi-compact open of $X$ has finitely many irreducible components. Let $\nu : X^\nu \to X$ be the normalization of $X$. Let $x \in X$. \begin{enumerate} \item The number of branches of $X$ at $x$ is the number of inverse images of $x$ in $X^\nu$. \item The number of geometric branches of $X$ at $x$ is $\sum_{\nu(x^\nu) = x} [\kappa(x^\nu) : \kappa(x)]_s$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-geometric-branches-and-change-of-fields} Let $k$ be a field. Let $X$ be a locally algebraic $k$-scheme. Let $K/k$ be an extension of fields. Let $y \in X_K$ be a point with image $x$ in $X$. Then the number of geometric branches of $X$ at $x$ is the number of geometric branches of $X_K$ at $y$. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-unibranch-and-change-of-fields} Let $k$ be a field. Let $X$ be a locally algebraic $k$-scheme. Let $K/k$ be an extension of fields. Let $y \in X_K$ be a point with image $x$ in $X$. Then $X$ is geometrically unibranch at $x$ if and only if $X_K$ is geometrically unibranch at $y$. \end{lemma} 
\begin{definition} \label{definition-wedge} Let $A$ and $A_i$, $1 \leq i \leq n$ be local rings. We say {\it $A$ is a wedge of $A_1, \ldots, A_n$} if there exist isomorphisms $$ \kappa_{A_1} \to \kappa_{A_2} \to \ldots \to \kappa_{A_n} $$ and $A$ is isomorphic to the ring consisting of $n$-tuples $(a_1, \ldots, a_n) \in A_1 \times \ldots \times A_n$ which map to the same element of $\kappa_{A_n}$. \end{definition} 
\begin{lemma} \label{lemma-delta-number-branches-inequality-sh} Let $(A, \mathfrak m)$ be a strictly henselian $1$-dimensional reduced Nagata local ring. Then $$ \delta\text{-invariant of }A \geq \text{number of geometric branches of }A - 1 $$ If equality holds, then $A$ is a wedge of $n \geq 1$ strictly henselian discrete valuation rings. \end{lemma} 
\begin{lemma} \label{lemma-delta-number-branches-inequality} Let $(A, \mathfrak m)$ be a $1$-dimensional reduced Nagata local ring. Then $$ \delta\text{-invariant of }A \geq \text{number of geometric branches of }A - 1 $$ \end{lemma} 
\begin{lemma} \label{lemma-normalize-noetherian-dim-1} Let $X$ be a locally Noetherian scheme of dimension $1$. Let $\nu : X^\nu \to X$ be the normalization. Then \begin{enumerate} \item $\nu$ is integral, surjective, and induces a bijection on irreducible components, \item there is a factorization $X^\nu \to X_{red} \to X$ and the morphism $X^\nu \to X_{red}$ is the normalization of $X_{red}$, \item $X^\nu \to X_{red}$ is birational, \item for every closed point $x \in X$ the stalk $(\nu_*\mathcal{O}_{X^\nu})_x$ is the integral closure of $\mathcal{O}_{X, x}$ in the total ring of fractions of $(\mathcal{O}_{X, x})_{red} = \mathcal{O}_{X_{red}, x}$, \item the fibres of $\nu$ are finite and the residue field extensions are finite, \item $X^\nu$ is a disjoint union of integral normal Noetherian schemes and each affine open is the spectrum of a finite product of Dedekind domains. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-prepare-delta-invariant} Let $X$ be a reduced Nagata scheme of dimension $1$. Let $\nu : X^\nu \to X$ be the normalization. Let $x \in X$ denote a closed point. Then \begin{enumerate} \item $\nu : X^\nu \to X$ is finite, surjective, and birational, \item $\mathcal{O}_X \subset \nu_*\mathcal{O}_{X^\nu}$ and $\nu_*\mathcal{O}_{X^\nu}/\mathcal{O}_X$ is a direct sum of skyscraper sheaves $\mathcal{Q}_x$ in the singular points $x$ of $X$, \item $A' = (\nu_*\mathcal{O}_{X^\nu})_x$ is the integral closure of $A = \mathcal{O}_{X, x}$ in its total ring of fractions, \item $\mathcal{Q}_x = A'/A$ has finite length equal to the $\delta$-invariant of $X$ at $x$, \item $A'$ is a semi-local ring which is a finite product of Dedekind domains, \item $A^\wedge$ is a reduced Noetherian complete local ring of dimension $1$, \item $(A')^\wedge$ is the integral closure of $A^\wedge$ in its total ring of fractions, \item $(A')^\wedge$ is a finite product of complete discrete valuation rings, and \item $A'/A \cong (A')^\wedge/A^\wedge$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-characterize-open-immersion} Let $f : X \to Y$ be a morphism of schemes. Let $X^0$ denote the set of generic points of irreducible components of $X$. If \begin{enumerate} \item $f$ is separated, \item there is an open covering $X = \bigcup U_i$ such that $f|_{U_i} : U_i \to Y$ is an open immersion, and \item if $\xi, \xi' \in X^0$, $\xi \not = \xi'$, then $f(\xi) \not = f(\xi')$, \end{enumerate} then $f$ is an open immersion. \end{lemma} 
\begin{lemma} \label{lemma-local-isomorphism} Let $X \to S$ be a morphism of schemes. Let $x \in X$ be a point with image $s \in S$. If \begin{enumerate} \item $\mathcal{O}_{X, x} = \mathcal{O}_{S, s}$, \item $X$ is reduced, \item $X \to S$ is of finite type, and \item $S$ has finitely many irreducible components, \end{enumerate} then there exists an open neighbourhood $U$ of $x$ such that $f|_U$ is an open immersion. \end{lemma} 
\begin{lemma} \label{lemma-points-in-affine} Let $f : T \to X$ be a morphism of schemes. Let $X^0$, resp.\ $T^0$ denote the sets of generic points of irreducible components. Let $t_1, \ldots, t_m \in T$ be a finite set of points with images $x_j = f(t_j)$. If \begin{enumerate} \item $T$ is affine, \item $X$ is quasi-separated, \item $X^0$ is finite \item $f(T^0) \subset X^0$ and $f : T^0 \to X^0$ is injective, and \item $\mathcal{O}_{X, x_j} = \mathcal{O}_{T, t_j}$, \end{enumerate} then there exists an affine open of $X$ containing $x_1, \ldots, x_r$. \end{lemma} 
\begin{lemma} \label{lemma-finite-set-codim-1-points-in-affine} Let $X$ be an integral separated scheme. Let $x_1, \ldots, x_r \in X$ be a finite set of points such that $\mathcal{O}_{X, x_i}$ is Noetherian of dimension $\leq 1$. Then there exists an affine open subscheme of $X$ containing all of $x_1, \ldots, x_r$. \end{lemma} 
\begin{lemma} \label{lemma-extra-silly} Let $A$ be a ring, $I \subset A$ an ideal, $\mathfrak p_1, \ldots, \mathfrak p_r$ primes of $A$, and $\overline{f} \in A/I$ an element. If $I \not \subset \mathfrak p_i$ for all $i$, then there exists an $f \in A$, $f \not \in \mathfrak p_i$ which maps to $\overline{f}$ in $A/I$. \end{lemma} 
\begin{lemma} \label{lemma-finite-set-codim-1-points-in-affine-per-component} Let $X$ be a scheme. Let $T \subset X$ be finite set of points. Assume \begin{enumerate} \item $X$ has finitely many irreducible components $Z_1, \ldots, Z_t$, and \item $Z_i \cap T$ is contained in an affine open of the reduced induced subscheme corresponding to $Z_i$. \end{enumerate} Then there exists an affine open subscheme of $X$ containing $T$. \end{lemma} 
\begin{proposition} \label{proposition-finite-set-of-points-of-codim-1-in-affine} Let $X$ be a separated scheme such that every quasi-compact open has a finite number of irreducible components. Let $x_1, \ldots, x_r \in X$ be points such that $\mathcal{O}_{X, x_i}$ is Noetherian of dimension $\leq 1$. Then there exists an affine open subscheme of $X$ containing all of $x_1, \ldots, x_r$. \end{proposition} 
\begin{definition} \label{definition-curve} Let $k$ be a field. A {\it curve} is a variety of dimension $1$ over $k$. \end{definition} 
\begin{lemma} \label{lemma-proper-minus-point} Let $X$ be a separated, irreducible scheme of dimension $> 0$ over a field $k$. Let $x \in X$ be a closed point. The open subscheme $X \setminus \{x\}$ is not proper over $k$. \end{lemma} 
\begin{lemma} \label{lemma-dim-1-quasi-projective} Let $X$ be a separated finite type scheme over a field $k$. If $\dim(X) \leq 1$ then $X$ is H-quasi-projective over $k$. \end{lemma} 
\begin{lemma} \label{lemma-dim-1-proper-projective} Let $X$ be a proper scheme over a field $k$. If $\dim(X) \leq 1$ then $X$ is H-projective over $k$. \end{lemma} 
\begin{lemma} \label{lemma-dim-1-projective-completion} Let $X$ be a separated scheme of finite type over $k$. If $\dim(X) \leq 1$, then there exists an open immersion $j : X \to \overline{X}$ with the following properties \begin{enumerate} \item $\overline{X}$ is H-projective over $k$, i.e., $\overline{X}$ is a closed subscheme of $\mathbf{P}^d_k$ for some $d$, \item $j(X) \subset \overline{X}$ is dense and scheme theoretically dense, \item $\overline{X} \setminus X = \{x_1, \ldots, x_n\}$ for some closed points $x_i \in \overline{X}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-reduced-dim-1-projective-completion} Let $X$ be a separated scheme of finite type over $k$. If $X$ is reduced and $\dim(X) \leq 1$, then there exists an open immersion $j : X \to \overline{X}$ such that \begin{enumerate} \item $\overline{X}$ is H-projective over $k$, i.e., $\overline{X}$ is a closed subscheme of $\mathbf{P}^d_k$ for some $d$, \item $j(X) \subset \overline{X}$ is dense and scheme theoretically dense, \item $\overline{X} \setminus X = \{x_1, \ldots, x_n\}$ for some closed points $x_i \in \overline{X}$, \item the local rings $\mathcal{O}_{\overline{X}, x_i}$ are discrete valuation rings for $i = 1, \ldots, n$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-dim-1-projective-completion-after-insep} Let $X$ be a separated scheme of finite type over $k$ with $\dim(X) \leq 1$. Then there exists a commutative diagram $$ \xymatrix{ \overline{Y}_1 \amalg \ldots \amalg \overline{Y}_n \ar[rd] & Y_1 \amalg \ldots \amalg Y_n \ar[r]_-\nu \ar[d] \ar[l]^j & X_{k'} \ar[r] \ar[d] & X \ar[d]^f \\ & \Spec(k'_1) \amalg \ldots \amalg \Spec(k'_n) \ar[r] & \Spec(k') \ar[r] & \Spec(k) } $$ of schemes with the following properties: \begin{enumerate} \item $k'/k$ is a finite purely inseparable extension of fields, \item $\nu$ is the normalization of $X_{k'}$, \item $j$ is an open immersion with dense image, \item $k'_i/k'$ is a finite separable extension for $i = 1, \ldots, n$, \item $\overline{Y}_i$ is smooth, projective, geometrically irreducible dimension $\leq 1$ over $k'_i$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-regular-point-on-curve} Let $k$ be a field. Let $X$ be a curve over $k$. Let $x \in X$ be a closed point. We think of $x$ as a (reduced) closed subscheme of $X$ with sheaf of ideals $\mathcal{I}$. The following are equivalent \begin{enumerate} \item $\mathcal{O}_{X, x}$ is regular, \item $\mathcal{O}_{X, x}$ is normal, \item $\mathcal{O}_{X, x}$ is a discrete valuation ring, \item $\mathcal{I}$ is an invertible $\mathcal{O}_X$-module, \item $x$ is an effective Cartier divisor on $X$. \end{enumerate} If $k$ is perfect or if $\kappa(x)$ is separable over $k$, these are also equivalent to \begin{enumerate} \item[(6)] $X \to \Spec(k)$ is smooth at $x$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-curve-affine-projective} Let $X$ be a curve over $k$. Then either $X$ is an affine scheme or $X$ is H-projective over $k$. \end{lemma} 
\begin{lemma} \label{lemma-dim-1-nonproper-affine} Let $X$ be a separated scheme of finite type over $k$. If $\dim(X) \leq 1$ and no irreducible component of $X$ is proper of dimension $1$, then $X$ is affine. \end{lemma} 
\begin{definition} \label{definition-degree-invertible-sheaf} Let $k$ be a field, let $X$ be a proper scheme of dimension $\leq 1$ over $k$, and let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. The {\it degree} of $\mathcal{L}$ is defined by $$ \deg(\mathcal{L}) = \chi(X, \mathcal{L}) - \chi(X, \mathcal{O}_X) $$ More generally, if $\mathcal{E}$ is a locally free sheaf of rank $n$ we define the {\it degree} of $\mathcal{E}$ by $$ \deg(\mathcal{E}) = \chi(X, \mathcal{E}) - n\chi(X, \mathcal{O}_X) $$ \end{definition} 
\begin{lemma} \label{lemma-degree-base-change} Let $k'/k$ be an extension of fields. Let $X$ be a proper scheme of dimension $\leq 1$ over $k$. Let $\mathcal{E}$ be a locally free $\mathcal{O}_X$-module of constant rank $n$. Then the degree of $\mathcal{E}/X/k$ is equal to the degree of $\mathcal{E}_{k'}/X_{k'}/k'$. \end{lemma} 
\begin{lemma} \label{lemma-degree-additive} Let $k$ be a field. Let $X$ be a proper scheme of dimension $\leq 1$ over $k$. Let $0 \to \mathcal{E}_1 \to \mathcal{E}_2 \to \mathcal{E}_3 \to 0$ be a short exact sequence of locally free $\mathcal{O}_X$-modules each of finite constant rank. Then $$ \deg(\mathcal{E}_2) = \deg(\mathcal{E}_1) + \deg(\mathcal{E}_3) $$ \end{lemma} 
\begin{lemma} \label{lemma-degree-birational-pullback} Let $k$ be a field. Let $f : X' \to X$ be a birational morphism of proper schemes of dimension $\leq 1$ over $k$. Then $$ \deg(f^*\mathcal{E}) = \deg(\mathcal{E}) $$ for every finite locally free sheaf of constant rank. More generally it suffices if $f$ induces a bijection between irreducible components of dimension $1$ and isomorphisms of local rings at the corresponding generic points. \end{lemma} 
\begin{lemma} \label{lemma-degree-on-proper-curve} Let $k$ be a field. Let $X$ be a proper curve over $k$ with generic point $\xi$. Let $\mathcal{E}$ be a locally free $\mathcal{O}_X$-module of rank $n$ and let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. Then $$ \chi(X, \mathcal{E} \otimes \mathcal{F}) = r \deg(\mathcal{E}) + n \chi(X, \mathcal{F}) $$ where $r = \dim_{\kappa(\xi)} \mathcal{F}_\xi$ is the rank of $\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-degree-in-terms-of-components} Let $k$ be a field. Let $X$ be a proper scheme of dimension $\leq 1$ over $k$. Let $\mathcal{E}$ be a locally free $\mathcal{O}_X$-module of rank $n$. Then $$ \deg(\mathcal{E}) = \sum m_i \deg(\mathcal{E}|_{C_i}) $$ where $C_i \subset X$, $i = 1, \ldots, t$ are the irreducible components of dimension $1$ with reduced induced scheme structure and $m_i$ is the multiplicity of $C_i$ in $X$. \end{lemma} 
\begin{lemma} \label{lemma-degree-tensor-product} Let $k$ be a field, let $X$ be a proper scheme of dimension $\leq 1$ over $k$, and let $\mathcal{E}$, $\mathcal{V}$ be locally free $\mathcal{O}_X$-modules of constant finite rank. Then $$ \deg(\mathcal{E} \otimes \mathcal{V}) = \text{rank}(\mathcal{E}) \deg(\mathcal{V}) + \text{rank}(\mathcal{V}) \deg(\mathcal{E}) $$ \end{lemma} 
\begin{lemma} \label{lemma-degree-and-det} Let $k$ be a field, let $X$ be a proper scheme of dimension $\leq 1$ over $k$, and let $\mathcal{E}$ be a locally free $\mathcal{O}_X$-module of rank $n$. Then $$ \deg(\mathcal{E}) = \deg(\wedge^n(\mathcal{E})) = \deg(\det(\mathcal{E})) $$ \end{lemma} 
\begin{lemma} \label{lemma-degree-effective-Cartier-divisor} Let $k$ be a field, let $X$ be a proper scheme of dimension $\leq 1$ over $k$. Let $D$ be an effective Cartier divisor on $X$. Then $D$ is finite over $\Spec(k)$ of degree $\deg(D) = \dim_k \Gamma(D, \mathcal{O}_D)$. For a locally free sheaf $\mathcal{E}$ of rank $n$ we have $$ \deg(\mathcal{E}(D)) = n\deg(D) + \deg(\mathcal{E}) $$ where $\mathcal{E}(D) = \mathcal{E} \otimes_{\mathcal{O}_X} \mathcal{O}_X(D)$. \end{lemma} 
\begin{lemma} \label{lemma-divisible} Let $k$ be a field. Let $X$ be a proper scheme over $k$ which is reduced and connected. Let $\kappa = H^0(X, \mathcal{O}_X)$. Then $\kappa/k$ is a finite extension of fields and $w = [\kappa : k]$ divides \begin{enumerate} \item $\deg(\mathcal{E})$ for all locally free $\mathcal{O}_X$-modules $\mathcal{E}$, \item $[\kappa(x) : k]$ for all closed points $x \in X$, and \item $\deg(D)$ for all closed subschemes $D \subset X$ of dimension zero. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-degree-pullback-map-proper-curves} Let $k$ be a field. Let $f : X \to Y$ be a nonconstant morphism of proper curves over $k$. Let $\mathcal{E}$ be a locally free $\mathcal{O}_Y$-module. Then $$ \deg(f^*\mathcal{E}) = \deg(X/Y) \deg(\mathcal{E}) $$ \end{lemma} 
\begin{lemma} \label{lemma-check-invertible-sheaf-trivial} Let $k$ be a field. Let $X$ be a proper curve over $k$. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. \begin{enumerate} \item If $\mathcal{L}$ has a nonzero section, then $\deg(\mathcal{L}) \geq 0$. \item If $\mathcal{L}$ has a nonzero section $s$ which vanishes at a point, then $\deg(\mathcal{L}) > 0$. \item If $\mathcal{L}$ and $\mathcal{L}^{-1}$ have nonzero sections, then $\mathcal{L} \cong \mathcal{O}_X$. \item If $\deg(\mathcal{L}) \leq 0$ and $\mathcal{L}$ has a nonzero section, then $\mathcal{L} \cong \mathcal{O}_X$. \item If $\mathcal{N} \to \mathcal{L}$ is a nonzero map of invertible $\mathcal{O}_X$-modules, then $\deg(\mathcal{L}) \geq \deg(\mathcal{N})$ and if equality holds then it is an isomorphism. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-no-sections-dual-nef} Let $k$ be a field. Let $X$ be a proper scheme over $k$ which is reduced, connected, and equidimensional of dimension $1$. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. If $\deg(\mathcal{L}|_C) \leq 0$ for all irreducible components $C$ of $X$, then either $H^0(X, \mathcal{L}) = 0$ or $\mathcal{L} \cong \mathcal{O}_X$. \end{lemma} 
\begin{lemma} \label{lemma-ample-curve} Let $k$ be a field. Let $X$ be a proper curve over $k$. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Then $\mathcal{L}$ is ample if and only if $\deg(\mathcal{L}) > 0$. \end{lemma} 
\begin{lemma} \label{lemma-ampleness-in-terms-of-degrees-components} Let $k$ be a field. Let $X$ be a proper scheme of dimension $\leq 1$ over $k$. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Let $C_i \subset X$, $i = 1, \ldots, t$ be the irreducible components of dimension $1$. The following are equivalent: \begin{enumerate} \item $\mathcal{L}$ is ample, and \item $\deg(\mathcal{L}|_{C_i}) > 0$ for $i = 1, \ldots, t$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-general-degree-g-line-bundle} Let $k$ be an algebraically closed field. Let $X$ be a proper curve over $k$. Then there exist \begin{enumerate} \item an invertible $\mathcal{O}_X$-module $\mathcal{L}$ with $\dim_k H^0(X, \mathcal{L}) = 1$ and $H^1(X, \mathcal{L}) = 0$, and \item an invertible $\mathcal{O}_X$-module $\mathcal{N}$ with $\dim_k H^0(X, \mathcal{N}) = 0$ and $H^1(X, \mathcal{N}) = 0$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-vanishing-degree-2g-and-1-line-bundle} Let $k$ be an algebraically closed field. Let $X$ be a proper curve over $k$. Set $g = \dim_k H^1(X, \mathcal{O}_X)$. For every invertible $\mathcal{O}_X$-module $\mathcal{L}$ with $\deg(\mathcal{L}) \geq 2g - 1$ we have $H^1(X, \mathcal{L}) = 0$. \end{lemma} 
\begin{lemma} \label{lemma-numerical-polynomial-from-euler} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. Let $\mathcal{L}_1, \ldots, \mathcal{L}_r$ be invertible $\mathcal{O}_X$-modules. The map $$ (n_1, \ldots, n_r) \longmapsto \chi(X, \mathcal{F} \otimes \mathcal{L}_1^{\otimes n_1} \otimes \ldots \otimes \mathcal{L}_r^{\otimes n_r}) $$ is a numerical polynomial in $n_1, \ldots, n_r$ of total degree at most the dimension of the support of $\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-numerical-polynomial-leading-term} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. Let $\mathcal{L}_1, \ldots, \mathcal{L}_r$ be invertible $\mathcal{O}_X$-modules. Let $d = \dim(\text{Supp}(\mathcal{F}))$. Let $Z_i \subset X$ be the irreducible components of $\text{Supp}(\mathcal{F})$ of dimension $d$. Let $\xi_i \in Z_i$ be the generic point and set $m_i = \text{length}_{\mathcal{O}_{X, \xi_i}}(\mathcal{F}_{\xi_i})$. Then $$ \chi(X, \mathcal{F} \otimes \mathcal{L}_1^{\otimes n_1} \otimes \ldots \otimes \mathcal{L}_r^{\otimes n_r}) - \sum\nolimits_i m_i\ \chi(Z_i, \mathcal{L}_1^{\otimes n_1} \otimes \ldots \otimes \mathcal{L}_r^{\otimes n_r}|_{Z_i}) $$ is a numerical polynomial in $n_1, \ldots, n_r$ of total degree $< d$. \end{lemma} 
\begin{definition} \label{definition-intersection-number} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $i : Z \to X$ be a closed subscheme of dimension $d$. Let $\mathcal{L}_1, \ldots, \mathcal{L}_d$ be invertible $\mathcal{O}_X$-modules. We define the {\it intersection number} $(\mathcal{L}_1 \cdots \mathcal{L}_d \cdot Z)$ as the coefficient of $n_1 \ldots n_d$ in the numerical polynomial $$ \chi(X, i_*\mathcal{O}_Z \otimes \mathcal{L}_1^{\otimes n_1} \otimes \ldots \otimes \mathcal{L}_d^{\otimes n_d}) = \chi(Z, \mathcal{L}_1^{\otimes n_1} \otimes \ldots \otimes \mathcal{L}_d^{\otimes n_d}|_Z) $$ In the special case that $\mathcal{L}_1 = \ldots = \mathcal{L}_d = \mathcal{L}$ we write $(\mathcal{L}^d \cdot Z)$. \end{definition} 
\begin{lemma} \label{lemma-intersection-number-integer} In the situation of Definition \ref{definition-intersection-number} the intersection number $(\mathcal{L}_1 \cdots \mathcal{L}_d \cdot Z)$ is an integer. \end{lemma} 
\begin{lemma} \label{lemma-intersection-number-additive} In the situation of Definition \ref{definition-intersection-number} the intersection number $(\mathcal{L}_1 \cdots \mathcal{L}_d \cdot Z)$ is additive: if $\mathcal{L}_i = \mathcal{L}_i' \otimes \mathcal{L}_i''$, then we have $$ (\mathcal{L}_1 \cdots \mathcal{L}_i \cdots \mathcal{L}_d \cdot Z) = (\mathcal{L}_1 \cdots \mathcal{L}_i' \cdots \mathcal{L}_d \cdot Z) + (\mathcal{L}_1 \cdots \mathcal{L}_i'' \cdots \mathcal{L}_d \cdot Z) $$ \end{lemma} 
\begin{lemma} \label{lemma-intersection-number-in-terms-of-components} In the situation of Definition \ref{definition-intersection-number} let $Z_i \subset Z$ be the irreducible components of dimension $d$. Let $m_i = \text{length}_{\mathcal{O}_{X, \xi_i}}(\mathcal{O}_{Z, \xi_i})$ where $\xi_i \in Z_i$ is the generic point. Then $$ (\mathcal{L}_1 \cdots \mathcal{L}_d \cdot Z) = \sum m_i(\mathcal{L}_1 \cdots \mathcal{L}_d \cdot Z_i) $$ \end{lemma} 
\begin{lemma} \label{lemma-intersection-number-and-pullback} Let $k$ be a field. Let $f : Y \to X$ be a morphism of proper schemes over $k$. Let $Z \subset Y$ be an integral closed subscheme of dimension $d$ and let $\mathcal{L}_1, \ldots, \mathcal{L}_d$ be invertible $\mathcal{O}_X$-modules. Then $$ (f^*\mathcal{L}_1 \cdots f^*\mathcal{L}_d \cdot Z) = \deg(f|_Z : Z \to f(Z)) (\mathcal{L}_1 \cdots \mathcal{L}_d \cdot f(Z)) $$ where $\deg(Z \to f(Z))$ is as in Morphisms, Definition \ref{morphisms-definition-degree} or $0$ if $\dim(f(Z)) < d$. \end{lemma} 
\begin{lemma} \label{lemma-numerical-intersection-effective-Cartier-divisor} Let $k$ be a field. Let $X$ be proper over $k$. Let $Z \subset X$ be a closed subscheme of dimension $d$. Let $\mathcal{L}_1, \ldots, \mathcal{L}_d$ be invertible $\mathcal{O}_X$-modules. Assume there exists an effective Cartier divisor $D \subset Z$ such that $\mathcal{L}_1|_Z \cong \mathcal{O}_Z(D)$. Then $$ (\mathcal{L}_1 \cdots \mathcal{L}_d \cdot Z) = (\mathcal{L}_2 \cdots \mathcal{L}_d \cdot D) $$ \end{lemma} 
\begin{lemma} \label{lemma-ample-positive} Let $k$ be a field. Let $X$ be proper over $k$. Let $Z \subset X$ be a closed subscheme of dimension $d$. If $\mathcal{L}_1, \ldots, \mathcal{L}_d$ are ample, then $(\mathcal{L}_1 \cdots \mathcal{L}_d \cdot Z)$ is positive. \end{lemma} 
\begin{definition} \label{definition-degree} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $\mathcal{L}$ be an ample invertible $\mathcal{O}_X$-module. For any closed subscheme the {\it degree of $Z$ with respect to $\mathcal{L}$}, denoted $\deg_\mathcal{L}(Z)$, is the intersection number $(\mathcal{L}^d \cdot Z)$ where $d = \dim(Z)$. \end{definition} 
\begin{lemma} \label{lemma-degree-finite-morphism-in-terms-degrees} Let $k$ be a field. Let $f : Y \to X$ be a finite dominant morphism of proper varieties over $k$. Let $\mathcal{L}$ be an ample invertible $\mathcal{O}_X$-module. Then $$ \deg_{f^*\mathcal{L}}(Y) = \deg(f) \deg_\mathcal{L}(X) $$ where $\deg(f)$ is as in Morphisms, Definition \ref{morphisms-definition-degree}. \end{lemma} 
\begin{lemma} \label{lemma-intersection-numbers-and-degrees-on-curves} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $Z \subset X$ be a closed subscheme of dimension $\leq 1$. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Then $$ (\mathcal{L} \cdot Z) = \deg(\mathcal{L}|_Z) $$ where $\deg(\mathcal{L}|_Z)$ is as in Definition \ref{definition-degree-invertible-sheaf}. If $\mathcal{L}$ is ample, then $\deg_\mathcal{L}(Z) = \deg(\mathcal{L}|_Z)$. \end{lemma} 
\begin{proposition}[Asymptotic Riemann-Roch] \label{proposition-asymptotic-riemann-roch} Let $k$ be a field. Let $X$ be a proper scheme over $k$ of dimension $d$. Let $\mathcal{L}$ be an ample invertible $\mathcal{O}_X$-module. Then $$ \dim_k \Gamma(X, \mathcal{L}^{\otimes n}) \sim c n^d + l.o.t. $$ where $c = \deg_\mathcal{L}(X)/d!$ is a positive constant. \end{proposition} 
\begin{definition} \label{definition-embed-dim} Let $k$ be an algebraically closed field. Let $X$ be a locally algebraic $k$-scheme and let $x \in X$ be a closed point. The {\it embedding dimension of $X$ at $x$} is $\dim_k \mathfrak m_x/\mathfrak m_x^2$. \end{definition} 
\begin{definition} \label{definition-embedding-dimension} Let $k$ be a field. Let $X$ be a locally algebraic $k$-scheme. Let $x \in X$ be a point. The {\it embedding dimension of $X/k$ at $x$} is $\dim_{\kappa(x)}(T_{X/k, x})$. \end{definition} 
\begin{lemma} \label{lemma-generate-over-complement} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $\mathcal{L}$ be an ample invertible $\mathcal{O}_X$-module. Let $Z \subset X$ be a closed subscheme. Then there exists an integer $n_0$ such that for all $n \geq n_0$ the kernel $V_n$ of $\Gamma(X, \mathcal{L}^{\otimes n}) \to \Gamma(Z, \mathcal{L}^{\otimes n}|_Z)$ generates $\mathcal{L}^{\otimes n}|_{X \setminus Z}$ and the canonical morphism $$ X \setminus Z \longrightarrow \mathbf{P}(V_n) $$ is an immersion of schemes over $k$. \end{lemma} 
\begin{lemma} \label{lemma-bertini} In Situation \ref{situation-family-divisors} assume \begin{enumerate} \item $X$ is smooth over $k$, \item the image of $\psi : V \to \Gamma(X, \mathcal{L})$ generates $\mathcal{L}$, \item the corresponding morphism $\varphi_{\mathcal{L}, \psi} : X \to \mathbf{P}(V)$ is an immersion. \end{enumerate} Then for general $v \in V \otimes_k k'$ the scheme $H_v$ is smooth over $k'$. \end{lemma} 
\begin{lemma} \label{lemma-vanishin-h0-negative} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $\mathcal{L}$ be an ample invertible $\mathcal{O}_X$-module. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. If $\text{Ass}(\mathcal{F})$ does not contain any closed points, then $\Gamma(X, \mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}^{\otimes n}) = 0$ for $n \ll 0$. \end{lemma} 
\begin{lemma}[Enriques-Severi-Zariski] \label{lemma-vanishin-h1-negative} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $\mathcal{L}$ be an ample invertible $\mathcal{O}_X$-module. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. Assume that for $x \in X$ closed we have $\text{depth}(\mathcal{F}_x) \geq 2$. Then $H^1(X, \mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}^{\otimes m}) = 0$ for $m \ll 0$. \end{lemma} 
\begin{lemma} \label{lemma-connectedness-ample-divisor} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $\mathcal{L}$ be an ample invertible $\mathcal{O}_X$-module. Let $s \in \Gamma(X, \mathcal{L})$. Assume \begin{enumerate} \item $s$ is a regular section (Divisors, Definition \ref{divisors-definition-regular-section}), \item for every closed point $x \in X$ we have $\text{depth}(\mathcal{O}_{X, x}) \geq 2$, and \item $X$ is connected. \end{enumerate} Then the zero scheme $Z(s)$ of $s$ is connected. \end{lemma} 
