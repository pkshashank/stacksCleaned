\begin{lemma} \label{lemma-properties-system} Let $X$ be a scheme. Let $\mathcal{I} \subset \mathcal{O}_X$ be a quasi-coherent sheaf of ideals. Let $$ \ldots \to \mathcal{F}_3 \to \mathcal{F}_2 \to \mathcal{F}_1 $$ be an inverse system of quasi-coherent $\mathcal{O}_X$-modules such that $\mathcal{F}_n = \mathcal{F}_{n + 1}/\mathcal{I}^n\mathcal{F}_{n + 1}$. Set $\mathcal{F} = \lim \mathcal{F}_n$. Then \begin{enumerate} \item $\mathcal{F} = R\lim \mathcal{F}_n$, \item for any affine open $U \subset X$ we have $H^p(U, \mathcal{F}) = 0$ for $p > 0$, and \item for each $p$ there is a short exact sequence $0 \to R^1\lim H^{p - 1}(X, \mathcal{F}_n) \to H^p(X, \mathcal{F}) \to \lim H^p(X, \mathcal{F}_n) \to 0$. \end{enumerate} If moreover $\mathcal{I}$ is of finite type, then \begin{enumerate} \item[(4)] $\mathcal{F}_n = \mathcal{F}/\mathcal{I}^n\mathcal{F}$, and \item[(5)] $\mathcal{I}^n \mathcal{F} = \lim_{m \geq n} \mathcal{I}^n\mathcal{F}_m$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-equivalent-f-good} Let $X$ be a scheme. Let $f \in \Gamma(X, \mathcal{O}_X)$. Let $$ \ldots \to \mathcal{F}_3 \to \mathcal{F}_2 \to \mathcal{F}_1 $$ be an inverse system of quasi-coherent $\mathcal{O}_X$-modules. The following are equivalent \begin{enumerate} \item for all $n \geq 1$ the map $f : \mathcal{F}_{n + 1} \to \mathcal{F}_{n + 1}$ factors through $\mathcal{F}_{n + 1} \to \mathcal{F}_n$ to give a short exact sequence $0 \to \mathcal{F}_n \to \mathcal{F}_{n + 1} \to \mathcal{F}_1 \to 0$, \item for all $n \geq 1$ the map $f^n : \mathcal{F}_{n + 1} \to \mathcal{F}_{n + 1}$ factors through $\mathcal{F}_{n + 1} \to \mathcal{F}_1$ to give a short exact sequence $0 \to \mathcal{F}_1 \to \mathcal{F}_{n + 1} \to \mathcal{F}_n \to 0$ \item there exists an $\mathcal{O}_X$-module $\mathcal{G}$ which is $f$-divisible such that $\mathcal{F}_n = \mathcal{G}[f^n]$. \item there exists an $\mathcal{O}_X$-module $\mathcal{F}$ which is $f$-torsion free such that $\mathcal{F}_n = \mathcal{F}/f^n\mathcal{F}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-formal-functions-principal} \begin{reference} Slightly improved version of \cite[Lemma 1.6]{Bhatt-local} \end{reference} Let $A$ be a ring and $f \in A$. Let $X$ be a scheme over $A$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Assume that $\mathcal{F}[f^n] = \Ker(f^n : \mathcal{F} \to \mathcal{F})$ stabilizes. Then $$ R\Gamma(X, \lim \mathcal{F}/f^n\mathcal{F}) = R\Gamma(X, \mathcal{F})^\wedge $$ where the right hand side indicates the derived completion with respect to the ideal $(f) \subset A$. Consequently, for $p \in \mathbf{Z}$ we obtain a commutative diagram $$ \xymatrix{ & 0 & 0 \\ 0 \ar[r] & \widehat{H^p(X, \mathcal{F})} \ar[r] \ar[u] & \lim H^p(X, \mathcal{F}/f^n\mathcal{F}) \ar[r] \ar[u] & T_f(H^{p + 1}(X, \mathcal{F})) \ar[r] & 0 \\ 0 \ar[r] & H^0(H^p(X, \mathcal{F})^\wedge) \ar[r] \ar[u] & H^p(X, \lim \mathcal{F}/f^n\mathcal{F}) \ar[r] \ar[u] & T_f(H^{p + 1}(X, \mathcal{F})) \ar[r] \ar@{=}[u] & 0 \\ & R^1\lim H^p(X, \mathcal{F})[f^n] \ar[u] \ar[r]^\cong & R^1\lim H^{p - 1}(X, \mathcal{F}/f^n\mathcal{F}) \ar[u] \\ & 0 \ar[u] & 0 \ar[u] } $$ with exact rows and columns where $\widehat{H^p(X, \mathcal{F})} = \lim H^p(X, \mathcal{F})/f^n H^p(X, \mathcal{F})$ is the usual $f$-adic completion and $T_f(-)$ denotes the $f$-adic Tate module as in More on Algebra, Example \ref{more-algebra-example-spectral-sequence-principal}. \end{lemma} 
\begin{lemma} \label{lemma-cd-one} Let $I = (f_1, \ldots, f_r)$ be an ideal of a Noetherian ring $A$. If $\text{cd}(A, I) = 1$, then there exist $c \geq 1$ and maps $\varphi_j : I^c \to A$ such that $\sum f_j \varphi_j : I^c \to I$ is the inclusion map. \end{lemma} 
\begin{lemma} \label{lemma-cd-one-extend} Let $I = (f_1, \ldots, f_r)$ be an ideal of a Noetherian ring $A$ with $\text{cd}(A, I) = 1$. Let $c \geq 1$ and $\varphi_j : I^c \to A$, $j = 1, \ldots, r$ be as in Lemma \ref{lemma-cd-one}. Then there is a unique graded $A$-algebra map $$ \Phi : \bigoplus\nolimits_{n \geq 0} I^{nc} \to A[T_1, \ldots, T_r] $$ with $\Phi(g) = \sum \varphi_j(g) T_j$ for $g \in I^c$. Moreover, the composition of $\Phi$ with the map $A[T_1, \ldots, T_r] \to \bigoplus_{n \geq 0} I^n$, $T_j \mapsto f_j$ is the inclusion map $\bigoplus_{n \geq 0} I^{nc} \to \bigoplus_{n \geq 0} I^n$. \end{lemma} 
\begin{lemma} \label{lemma-cd-one-extend-to-module} Let $I = (f_1, \ldots, f_r)$ be an ideal of a Noetherian ring $A$ with $\text{cd}(A, I) = 1$. Let $c \geq 1$ and $\varphi_j : I^c \to A$, $j = 1, \ldots, r$ be as in Lemma \ref{lemma-cd-one}. Let $A \to B$ be a ring map with $B$ Noetherian and let $N$ be a finite $B$-module. Then, after possibly increasing $c$ and adjusting $\varphi_j$ accordingly, there is a unique unique graded $B$-module map $$ \Phi_N : \bigoplus\nolimits_{n \geq 0} I^{nc}N \to N[T_1, \ldots, T_r] $$ with $\Phi_N(g x) = \Phi(g) x$ for $g \in I^{nc}$ and $x \in N$ where $\Phi$ is as in Lemma \ref{lemma-cd-one-extend}. The composition of $\Phi_N$ with the map $N[T_1, \ldots, T_r] \to \bigoplus_{n \geq 0} I^nN$, $T_j \mapsto f_j$ is the inclusion map $\bigoplus_{n \geq 0} I^{nc}N \to \bigoplus_{n \geq 0} I^nN$. \end{lemma} 
\begin{lemma} \label{lemma-cd-is-one-for-system} Let $I = (f_1, \ldots, f_r)$ be an ideal of a Noetherian ring $A$ with $\text{cd}(A, I) = 1$. Let $c \geq 1$ and $\varphi_j : I^c \to A$, $j = 1, \ldots, r$ be as in Lemma \ref{lemma-cd-one}. Let $X$ be a Noetherian scheme over $\Spec(A)$. Let $$ \ldots \to \mathcal{F}_3 \to \mathcal{F}_2 \to \mathcal{F}_1 $$ be an inverse system of coherent $\mathcal{O}_X$-modules such that $\mathcal{F}_n = \mathcal{F}_{n + 1}/I^n\mathcal{F}_{n + 1}$. Set $\mathcal{F} = \lim \mathcal{F}_n$. Then, after possibly increasing $c$ and adjusting $\varphi_j$ accordingly, there exists a unique graded $\mathcal{O}_X$-module map $$ \Phi_\mathcal{F} : \bigoplus\nolimits_{n \geq 0} I^{nc}\mathcal{F} \longrightarrow \mathcal{F}[T_1, \ldots, T_r] $$ with $\Phi_\mathcal{F}(g s) = \Phi(g) s$ for $g \in I^{nc}$ and $s$ a local section of $\mathcal{F}$ where $\Phi$ is as in Lemma \ref{lemma-cd-one-extend}. The composition of $\Phi_\mathcal{F}$ with the map $\mathcal{F}[T_1, \ldots, T_r] \to \bigoplus_{n \geq 0} I^n\mathcal{F}$, $T_j \mapsto f_j$ is the canonical inclusion $\bigoplus_{n \geq 0} I^{nc}\mathcal{F} \to \bigoplus_{n \geq 0} I^n\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-topology-I-adic} Let $I$ be an ideal of a Noetherian ring $A$. Let $X$ be a Noetherian scheme over $\Spec(A)$. Let $$ \ldots \to \mathcal{F}_3 \to \mathcal{F}_2 \to \mathcal{F}_1 $$ be an inverse system of coherent $\mathcal{O}_X$-modules such that $\mathcal{F}_n = \mathcal{F}_{n + 1}/I^n\mathcal{F}_{n + 1}$. If $\text{cd}(A, I) = 1$, then for all $p \in \mathbf{Z}$ the limit topology on $\lim H^p(X, \mathcal{F}_n)$ is $I$-adic. \end{lemma} 
\begin{lemma} \label{lemma-descending-chain} Let $(A, \mathfrak m)$ be a Noetherian local ring. \begin{enumerate} \item Let $M$ be a finite $A$-module. Then the $A$-module $H^i_\mathfrak m(M)$ satisfies the descending chain condition for any $i$. \item Let $U = \Spec(A) \setminus \{\mathfrak m\}$ be the punctured spectrum of $A$. Let $\mathcal{F}$ be a coherent $\mathcal{O}_U$-module. Then the $A$-module $H^i(U, \mathcal{F})$ satisfies the descending chain condition for $i > 0$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-ML-local} Let $(A, \mathfrak m)$ be a Noetherian local ring. \begin{enumerate} \item Let $(M_n)$ be an inverse system of finite $A$-modules. Then the inverse system $H^i_\mathfrak m(M_n)$ satisfies the Mittag-Leffler condition for any $i$. \item Let $U = \Spec(A) \setminus \{\mathfrak m\}$ be the punctured spectrum of $A$. Let $\mathcal{F}_n$ be an inverse system of coherent $\mathcal{O}_U$-modules. Then the inverse system $H^i(U, \mathcal{F}_n)$ satisfies the Mittag-Leffler condition for $i > 0$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-terrific} Let $(A, \mathfrak m)$ be a Noetherian local ring. Let $(M_n)$ be an inverse system of finite $A$-modules. Let $M \to \lim M_n$ be a map where $M$ is a finite $A$-module such that for some $i$ the map $H^i_\mathfrak m(M) \to \lim H^i_\mathfrak m(M_n)$ is an isomorphism. Then the inverse system $H^i_\mathfrak m(M_n)$ is essentially constant with value $H^i_\mathfrak m(M)$. \end{lemma} 
\begin{lemma} \label{lemma-local-cohomology-derived-completion} Let $(A, \mathfrak m)$ be a Noetherian local ring. Let $I \subset A$ be an ideal. Let $M$ be a finite $A$-module. Then $$ H^i(R\Gamma_\mathfrak m(M)^\wedge) = \lim H^i_\mathfrak m(M/I^nM) $$ for all $i$ where $R\Gamma_\mathfrak m(M)^\wedge$ denotes the derived $I$-adic completion. \end{lemma} 
\begin{lemma} \label{lemma-map-twice-localize} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $f$ be a global section of $\mathcal{O}$. \begin{enumerate} \item For $L, N \in D(\mathcal{O}_f)$ we have $R\SheafHom_\mathcal{O}(L, N) = R\SheafHom_{\mathcal{O}_f}(L, N)$. In particular the two $\mathcal{O}_f$-structures on $R\SheafHom_\mathcal{O}(L, N)$ agree. \item For $K \in D(\mathcal{O})$ and $L \in D(\mathcal{O}_f)$ we have $$ R\SheafHom_\mathcal{O}(L, K) = R\SheafHom_{\mathcal{O}_f}(L, R\SheafHom_\mathcal{O}(\mathcal{O}_f, K)) $$ In particular $R\SheafHom_\mathcal{O}(\mathcal{O}_f, R\SheafHom_\mathcal{O}(\mathcal{O}_f, K)) = R\SheafHom_\mathcal{O}(\mathcal{O}_f, K)$. \item If $g$ is a second global section of $\mathcal{O}$, then $$ R\SheafHom_\mathcal{O}(\mathcal{O}_f, R\SheafHom_\mathcal{O}(\mathcal{O}_g, K)) = R\SheafHom_\mathcal{O}(\mathcal{O}_{gf}, K). $$ \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-hom-from-Af} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $f$ be a global section of $\mathcal{O}$. Let $K \in D(\mathcal{O})$. The following are equivalent \begin{enumerate} \item $R\SheafHom_\mathcal{O}(\mathcal{O}_f, K) = 0$, \item $R\SheafHom_\mathcal{O}(L, K) = 0$ for all $L$ in $D(\mathcal{O}_f)$, \item $T(K, f) = 0$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-ideal-of-elements-complete-wrt} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $K \in D(\mathcal{O})$. The rule which associates to $U$ the set $\mathcal{I}(U)$ of sections $f \in \mathcal{O}(U)$ such that $T(K|_U, f) = 0$ is a sheaf of ideals in $\mathcal{O}$. \end{lemma} 
\begin{definition} \label{definition-derived-complete} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{I} \subset \mathcal{O}$ be a sheaf of ideals. Let $K \in D(\mathcal{O})$. We say that $K$ is {\it derived complete with respect to $\mathcal{I}$} if for every object $U$ of $\mathcal{C}$ and $f \in \mathcal{I}(U)$ the object $T(K|_U, f)$ of $D(\mathcal{O}_U)$ is zero. \end{definition} 
\begin{lemma} \label{lemma-derived-complete-internal-hom} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{I} \subset \mathcal{O}$ be a sheaf of ideals. If $K \in D(\mathcal{O})$ and $L \in D_{comp}(\mathcal{O})$, then $R\SheafHom_\mathcal{O}(K, L) \in D_{comp}(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-restriction-derived-complete} Let $\mathcal{C}$ be a site. Let $\mathcal{O} \to \mathcal{O}'$ be a homomorphism of sheaves of rings. Let $\mathcal{I} \subset \mathcal{O}$ be a sheaf of ideals. The inverse image of $D_{comp}(\mathcal{O}, \mathcal{I})$ under the restriction functor $D(\mathcal{O}') \to D(\mathcal{O})$ is $D_{comp}(\mathcal{O}', \mathcal{I}\mathcal{O}')$. \end{lemma} 
\begin{lemma} \label{lemma-pushforward-derived-complete} Let $f : (\Sh(\mathcal{D}), \mathcal{O}') \to (\Sh(\mathcal{C}), \mathcal{O})$ be a morphism of ringed topoi. Let $\mathcal{I} \subset \mathcal{O}$ and $\mathcal{I}' \subset \mathcal{O}'$ be sheaves of ideals such that $f^\sharp$ sends $f^{-1}\mathcal{I}$ into $\mathcal{I}'$. Then $Rf_*$ sends $D_{comp}(\mathcal{O}', \mathcal{I}')$ into $D_{comp}(\mathcal{O}, \mathcal{I})$. \end{lemma} 
\begin{lemma} \label{lemma-derived-completion} Let $(\mathcal{C}, \mathcal{O})$ be a ringed on a site. Let $f_1, \ldots, f_r$ be global sections of $\mathcal{O}$. Let $\mathcal{I} \subset \mathcal{O}$ be the ideal sheaf generated by $f_1, \ldots, f_r$. Then the inclusion functor $D_{comp}(\mathcal{O}) \to D(\mathcal{O})$ has a left adjoint, i.e., given any object $K$ of $D(\mathcal{O})$ there exists a map $K \to K^\wedge$ with $K^\wedge$ in $D_{comp}(\mathcal{O})$ such that the map $$ \Hom_{D(\mathcal{O})}(K^\wedge, E) \longrightarrow \Hom_{D(\mathcal{O})}(K, E) $$ is bijective whenever $E$ is in $D_{comp}(\mathcal{O})$. In fact we have $$ K^\wedge = R\SheafHom_\mathcal{O} (\mathcal{O} \to \prod\nolimits_{i_0} \mathcal{O}_{f_{i_0}} \to \prod\nolimits_{i_0 < i_1} \mathcal{O}_{f_{i_0}f_{i_1}} \to \ldots \to \mathcal{O}_{f_1\ldots f_r}, K) $$ functorially in $K$. \end{lemma} 
\begin{lemma} \label{lemma-derived-completion-koszul} Let $(\mathcal{C}, \mathcal{O})$ be a ringed on a site. Let $f_1, \ldots, f_r$ be global sections of $\mathcal{O}$. Let $\mathcal{I} \subset \mathcal{O}$ be the ideal sheaf generated by $f_1, \ldots, f_r$. Let $K \in D(\mathcal{O})$. The derived completion $K^\wedge$ of Lemma \ref{lemma-derived-completion} is given by the formula $$ K^\wedge = R\lim K \otimes^\mathbf{L}_\mathcal{O} K_n $$ where $K_n = K(\mathcal{O}, f_1^n, \ldots, f_r^n)$ is the Koszul complex on $f_1^n, \ldots, f_r^n$ over $\mathcal{O}$. \end{lemma} 
\begin{lemma} \label{lemma-all-rings} There exist a way to construct \begin{enumerate} \item for every pair $(A, I)$ consisting of a ring $A$ and a finitely generated ideal $I \subset A$ a complex $K(A, I)$ of $A$-modules, \item a map $K(A, I) \to A$ of complexes of $A$-modules, \item for every ring map $A \to B$ and finitely generated ideal $I \subset A$ a map of complexes $K(A, I) \to K(B, IB)$, \end{enumerate} such that \begin{enumerate} \item[(a)] for $A \to B$ and $I \subset A$ finitely generated the diagram $$ \xymatrix{ K(A, I) \ar[r] \ar[d] & A \ar[d] \\ K(B, IB) \ar[r] & B } $$ commutes, \item[(b)] for $A \to B \to C$ and $I \subset A$ finitely generated the composition of the maps $K(A, I) \to K(B, IB) \to K(C, IC)$ is the map $K(A, I) \to K(C, IC)$. \item[(c)] for $A \to B$ and a finitely generated ideal $I \subset A$ the induced map $K(A, I) \otimes_A^\mathbf{L} B \to K(B, IB)$ is an isomorphism in $D(B)$, and \item[(d)] if $I = (f_1, \ldots, f_r) \subset A$ then there is a commutative diagram $$ \xymatrix{ (A \to \prod\nolimits_{i_0} A_{f_{i_0}} \to \prod\nolimits_{i_0 < i_1} A_{f_{i_0}f_{i_1}} \to \ldots \to A_{f_1\ldots f_r}) \ar[r] \ar[d] &  K(A, I) \ar[d] \\ A \ar[r]^1 & A } $$ in $D(A)$ whose horizontal arrows are isomorphisms. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-global-extended-cech-complex} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{I} \subset \mathcal{O}$ be a finite type sheaf of ideals. There exists a map $K \to \mathcal{O}$ in $D(\mathcal{O})$ such that for every $U \in \Ob(\mathcal{C})$ such that $\mathcal{I}|_U$ is generated by $f_1, \ldots, f_r \in \mathcal{I}(U)$ there is an isomorphism $$ (\mathcal{O}_U \to \prod\nolimits_{i_0} \mathcal{O}_{U, f_{i_0}} \to \prod\nolimits_{i_0 < i_1} \mathcal{O}_{U, f_{i_0}f_{i_1}} \to \ldots \to \mathcal{O}_{U, f_1\ldots f_r}) \longrightarrow K|_U $$ compatible with maps to $\mathcal{O}_U$. \end{lemma} 
\begin{proposition} \label{proposition-derived-completion} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{I} \subset \mathcal{O}$ be a finite type sheaf of ideals. There exists a left adjoint to the inclusion functor $D_{comp}(\mathcal{O}) \to D(\mathcal{O})$. \end{proposition} 
\begin{lemma} \label{lemma-map-identifies-koszul-and-cech-complexes} Let $\mathcal{C}$ be a site. Assume $\varphi : \mathcal{O} \to \mathcal{O}'$ is a flat homomorphism of sheaves of rings. Let $f_1, \ldots, f_r$ be global sections of $\mathcal{O}$ such that $\mathcal{O}/(f_1, \ldots, f_r) \cong \mathcal{O}'/(f_1, \ldots, f_r)\mathcal{O}'$. Then the map of extended alternating {\v C}ech complexes $$ \xymatrix{ \mathcal{O} \to \prod_{i_0} \mathcal{O}_{f_{i_0}} \to \prod_{i_0 < i_1} \mathcal{O}_{f_{i_0}f_{i_1}} \to \ldots \to \mathcal{O}_{f_1\ldots f_r} \ar[d] \\ \mathcal{O}' \to \prod_{i_0} \mathcal{O}'_{f_{i_0}} \to \prod_{i_0 < i_1} \mathcal{O}'_{f_{i_0}f_{i_1}} \to \ldots \to \mathcal{O}'_{f_1\ldots f_r} } $$ is a quasi-isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-restriction-derived-complete-equivalence} Let $\mathcal{C}$ be a site. Let $\mathcal{O} \to \mathcal{O}'$ be a homomorphism of sheaves of rings. Let $\mathcal{I} \subset \mathcal{O}$ be a finite type sheaf of ideals. If $\mathcal{O} \to \mathcal{O}'$ is flat and $\mathcal{O}/\mathcal{I} \cong \mathcal{O}'/\mathcal{I}\mathcal{O}'$, then the restriction functor $D(\mathcal{O}') \to D(\mathcal{O})$ induces an equivalence $D_{comp}(\mathcal{O}', \mathcal{I}\mathcal{O}') \to D_{comp}(\mathcal{O}, \mathcal{I})$. \end{lemma} 
\begin{lemma} \label{lemma-pushforward-derived-complete-adjoint} Let $f : (\Sh(\mathcal{D}), \mathcal{O}') \to (\Sh(\mathcal{C}), \mathcal{O})$ be a morphism of ringed topoi. Let $\mathcal{I} \subset \mathcal{O}$ and $\mathcal{I}' \subset \mathcal{O}'$  be finite type sheaves of ideals such that $f^\sharp$ sends $f^{-1}\mathcal{I}$ into $\mathcal{I}'$. Then $Rf_*$ sends $D_{comp}(\mathcal{O}', \mathcal{I}')$ into $D_{comp}(\mathcal{O}, \mathcal{I})$ and has a left adjoint $Lf_{comp}^*$ which is $Lf^*$ followed by derived completion. \end{lemma} 
\begin{lemma} \label{lemma-pushforward-commutes-with-derived-completion} \begin{reference} Generalization of \cite[Lemma 6.5.9 (2)]{BS}. Compare with \cite[Theorem 6.5]{HL-P} in the setting of quasi-coherent modules and morphisms of (derived) algebraic stacks. \end{reference} Let $f : (\Sh(\mathcal{D}), \mathcal{O}') \to (\Sh(\mathcal{C}), \mathcal{O})$ be a morphism of ringed topoi. Let $\mathcal{I} \subset \mathcal{O}$ be a finite type sheaf of ideals. Let $\mathcal{I}' \subset \mathcal{O}'$ be the ideal generated by $f^\sharp(f^{-1}\mathcal{I})$. Then $Rf_*$ commutes with derived completion, i.e., $Rf_*(K^\wedge) = (Rf_*K)^\wedge$. \end{lemma} 
\begin{lemma} \label{lemma-formal-functions-general} Let $A$ be a ring and let $I \subset A$ be a finitely generated ideal. Let $\mathcal{C}$ be a site and let $\mathcal{O}$ be a sheaf of $A$-algebras. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}$-modules. Then we have $$ R\Gamma(\mathcal{C}, \mathcal{F})^\wedge = R\Gamma(\mathcal{C}, \mathcal{F}^\wedge) $$ in $D(A)$ where $\mathcal{F}^\wedge$ is the derived completion of $\mathcal{F}$ with respect to $I\mathcal{O}$ and on the left hand wide we have the derived completion with respect to $I$. This produces two spectral sequences $$ E_2^{i, j} = H^i(H^j(\mathcal{C}, \mathcal{F})^\wedge) \quad\text{and}\quad E_2^{p, q} = H^p(\mathcal{C}, H^q(\mathcal{F}^\wedge)) $$ both converging to $H^*(R\Gamma(\mathcal{C}, \mathcal{F})^\wedge) = H^*(\mathcal{C}, \mathcal{F}^\wedge)$ \end{lemma} 
\begin{lemma} \label{lemma-sections-derived-completion-pseudo-coherent} Let $X$ be a locally Noetherian scheme. Let $\mathcal{I} \subset \mathcal{O}_X$ be a quasi-coherent sheaf of ideals. Let $K$ be a pseudo-coherent object of $D(\mathcal{O}_X)$ with derived completion $K^\wedge$. Then $$ H^p(U, K^\wedge) = \lim H^p(U, K)/I^nH^p(U, K) = H^p(U, K)^\wedge $$ for any affine open $U \subset X$ where $I = \mathcal{I}(U)$ and where on the right we have the derived completion with respect to $I$. \end{lemma} 
\begin{lemma} \label{lemma-derived-completion-pseudo-coherent} Let $X$ be a locally Noetherian scheme. Let $\mathcal{I} \subset \mathcal{O}_X$ be a quasi-coherent sheaf of ideals. Let $K$ be an object of $D(\mathcal{O}_X)$. Then \begin{enumerate} \item the derived completion $K^\wedge$ is equal to $R\lim (K \otimes_{\mathcal{O}_X}^\mathbf{L} \mathcal{O}_X/\mathcal{I}^n)$. \end{enumerate} Let $K$ is a pseudo-coherent object of $D(\mathcal{O}_X)$. Then \begin{enumerate} \item[(2)] the cohomology sheaf $H^q(K^\wedge)$ is equal to $\lim H^q(K)/\mathcal{I}^nH^q(K)$. \end{enumerate} Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module\footnote{For example $H^q(K)$ for $K$ pseudo-coherent on our locally Noetherian $X$.}. Then \begin{enumerate} \item[(3)] the derived completion $\mathcal{F}^\wedge$ is equal to $\lim \mathcal{F}/\mathcal{I}^n\mathcal{F}$, \item[(4)] $\lim \mathcal{F}/I^n \mathcal{F} = R\lim \mathcal{F}/I^n \mathcal{F}$, \item[(5)] $H^p(U, \mathcal{F}^\wedge) = 0$ for $p \not = 0$ for all affine opens $U \subset X$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-formal-functions} Let $A$ be a Noetherian ring and let $I \subset A$ be an ideal. Let $X$ be a Noetherian scheme over $A$. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. Assume that $H^p(X, \mathcal{F})$ is a finite $A$-module for all $p$. Then there are short exact sequences $$ 0 \to R^1\lim H^{p - 1}(X, \mathcal{F}/I^n\mathcal{F}) \to H^p(X, \mathcal{F})^\wedge \to \lim H^p(X, \mathcal{F}/I^n\mathcal{F}) \to 0 $$ of $A$-modules where $H^p(X, \mathcal{F})^\wedge$ is the usual $I$-adic completion. If $f$ is proper, then the $R^1\lim$ term is zero. \end{lemma} 
\begin{lemma} \label{lemma-kill-completion-general} Let $I, J$ be ideals of a Noetherian ring $A$. Let $M$ be a finite $A$-module. Let $\mathfrak p \subset A$ be a prime. Let $s$ and $d$ be integers. Assume \begin{enumerate} \item $A$ has a dualizing complex, \item $\mathfrak p \not \in V(J) \cap V(I)$, \item $\text{cd}(A, I) \leq d$, and \item for all primes $\mathfrak p' \subset \mathfrak p$ we have $\text{depth}_{A_{\mathfrak p'}}(M_{\mathfrak p'}) + \dim((A/\mathfrak p')_\mathfrak q) > d + s$ for all $\mathfrak q \in V(\mathfrak p') \cap V(J) \cap V(I)$. \end{enumerate} Then there exists an $f \in A$, $f \not \in \mathfrak p$ which annihilates $H^i(R\Gamma_J(M)^\wedge)$ for $i \leq s$ where ${}^\wedge$ indicates $I$-adic completion. \end{lemma} 
\begin{lemma} \label{lemma-kill-colimit-weak-general} Let $I, J$ be ideals of a Noetherian ring. Let $M$ be a finite $A$-module. Let $s$ and $d$ be integers. With $T$ as in (\ref{equation-associated-subset}) assume \begin{enumerate} \item $A$ has a dualizing complex, \item if $\mathfrak p \in V(I)$, then no condition, \item if $\mathfrak p \not \in V(I)$, $\mathfrak p \in T$, then $\dim((A/\mathfrak p)_\mathfrak q) \leq d$ for some $\mathfrak q \in V(\mathfrak p) \cap V(J) \cap V(I)$, \item if $\mathfrak p \not \in V(I)$, $\mathfrak p \not \in T$, then $$ \text{depth}_{A_\mathfrak p}(M_\mathfrak p) \geq s \quad\text{or}\quad \text{depth}_{A_\mathfrak p}(M_\mathfrak p) + \dim((A/\mathfrak p)_\mathfrak q) > d + s $$ for all $\mathfrak q \in V(\mathfrak p) \cap V(J) \cap V(I)$. \end{enumerate} Then there exists an ideal $J_0 \subset J$ with $V(J_0) \cap V(I) = V(J) \cap V(I)$ such that for any $J' \subset J_0$ with $V(J') \cap V(I) = V(J) \cap V(I)$ the map $$ R\Gamma_{J'}(M) \longrightarrow R\Gamma_{J_0}(M) $$ induces an isomorphism in cohomology in degrees $\leq s$ and moreover these modules are annihilated by a power of $J_0I$. \end{lemma} 
\begin{lemma} \label{lemma-kill-colimit-general} In Lemma \ref{lemma-kill-colimit-weak-general} if instead of the empty condition (2) we assume \begin{enumerate} \item[(2')] if $\mathfrak p \in V(I)$, $\mathfrak p \not \in V(J) \cap V(I)$, then $\text{depth}_{A_\mathfrak p}(M_\mathfrak p) + \dim((A/\mathfrak p)_\mathfrak q) > s$ for all $\mathfrak q \in V(\mathfrak p) \cap V(J) \cap V(I)$, \end{enumerate} then the conditions also imply that $H^i_{J_0}(M)$ is a finite $A$-module for $i \leq s$. \end{lemma} 
\begin{lemma} \label{lemma-kill-colimit-support-general} If in Lemma \ref{lemma-kill-colimit-weak-general} we additionally assume \begin{enumerate} \item[(6)] if $\mathfrak p \not \in V(I)$, $\mathfrak p \in T$, then $\text{depth}_{A_\mathfrak p}(M_\mathfrak p) > s$, \end{enumerate} then $H^i_{J_0}(M) = H^i_J(M) = H^i_{J + I}(M)$ for $i \leq s$ and these modules are annihilated by a power of $I$. \end{lemma} 
\begin{lemma} \label{lemma-algebraize-local-cohomology-general} Let $I, J$ be ideals of a Noetherian ring $A$. Let $M$ be a finite $A$-module. Let $s$ and $d$ be integers. With $T$ as in (\ref{equation-associated-subset}) assume \begin{enumerate} \item $A$ is $I$-adically complete and has a dualizing complex, \item if $\mathfrak p \in V(I)$ no condition, \item $\text{cd}(A, I) \leq d$, \item if $\mathfrak p \not \in V(I)$, $\mathfrak p \not \in T$ then $$ \text{depth}_{A_\mathfrak p}(M_\mathfrak p) \geq s \quad\text{or}\quad \text{depth}_{A_\mathfrak p}(M_\mathfrak p) + \dim((A/\mathfrak p)_\mathfrak q) > d + s $$ for all $\mathfrak q \in V(\mathfrak p) \cap V(J) \cap V(I)$, \item if $\mathfrak p \not \in V(I)$, $\mathfrak p \not \in T$, $V(\mathfrak p) \cap V(J) \cap V(I) \not = \emptyset$, and $\text{depth}(M_\mathfrak p) < s$, then one of the following holds\footnote{Our method forces this additional condition. We will return to this (insert future reference).}: \begin{enumerate} \item $\dim(\text{Supp}(M_\mathfrak p)) < s + 2$\footnote{For example if $M$ satisfies Serre's condition $(S_s)$ on the complement of $V(I) \cup T$.}, or \item  $\delta(\mathfrak p) > d + \delta_{max} - 1$ where $\delta$ is a dimension function and $\delta_{max}$ is the maximum of $\delta$ on $V(J) \cap V(I)$, or \item $\text{depth}_{A_\mathfrak p}(M_\mathfrak p) + \dim((A/\mathfrak p)_\mathfrak q) > d + s + \delta_{max} - \delta_{min} - 2$ for all $\mathfrak q \in V(\mathfrak p) \cap V(J) \cap V(I)$. \end{enumerate} \end{enumerate} Then there exists an ideal $J_0 \subset J$ with $V(J_0) \cap V(I) = V(J) \cap V(I)$ such that for any $J' \subset J_0$ with $V(J') \cap V(I) = V(J) \cap V(I)$ the map $$ R\Gamma_{J'}(M) \longrightarrow R\Gamma_J(M)^\wedge $$ induces an isomorphism on cohomology in degrees $\leq s$. Here ${}^\wedge$ denotes derived $I$-adic completion. \end{lemma} 
\begin{lemma} \label{lemma-kill-completion} Let $(A, \mathfrak m)$ be a Noetherian local ring. Let $I \subset A$ be an ideal. Let $M$ be a finite $A$-module and let $\mathfrak p \subset A$ be a prime. Let $s$ and $d$ be integers. Assume \begin{enumerate} \item $A$ has a dualizing complex, \item $\text{cd}(A, I) \leq d$, and \item $\text{depth}_{A_\mathfrak p}(M_\mathfrak p) + \dim(A/\mathfrak p) > d + s$. \end{enumerate} Then there exists an $f \in A \setminus \mathfrak p$ which annihilates $H^i(R\Gamma_\mathfrak m(M)^\wedge)$ for $i \leq s$ where ${}^\wedge$ indicates $I$-adic completion. \end{lemma} 
\begin{lemma} \label{lemma-kill-colimit-weak} Let $(A, \mathfrak m)$ be a Noetherian local ring. Let $I \subset A$ be an ideal. Let $M$ be a finite $A$-module. Let $s$ and $d$ be integers. Assume \begin{enumerate} \item $A$ has a dualizing complex, \item if $\mathfrak p \in V(I)$, then no condition, \item if $\mathfrak p \not \in V(I)$ and $V(\mathfrak p) \cap V(I) = \{\mathfrak m\}$, then $\dim(A/\mathfrak p) \leq d$, \item if $\mathfrak p \not \in V(I)$ and $V(\mathfrak p) \cap V(I) \not = \{\mathfrak m\}$, then $$ \text{depth}_{A_\mathfrak p}(M_\mathfrak p) \geq s \quad\text{or}\quad \text{depth}_{A_\mathfrak p}(M_\mathfrak p) + \dim(A/\mathfrak p) > d + s $$ \end{enumerate} Then there exists an ideal $J_0 \subset A$ with $V(J_0) \cap V(I) = \{\mathfrak m\}$ such that for any $J \subset J_0$ with $V(J) \cap V(I) = \{\mathfrak m\}$ the map $$ R\Gamma_J(M) \longrightarrow R\Gamma_{J_0}(M) $$ induces an isomorphism in cohomology in degrees $\leq s$ and moreover these modules are annihilated by a power of $J_0I$. \end{lemma} 
\begin{lemma} \label{lemma-kill-colimit} In Lemma \ref{lemma-kill-colimit-weak} if instead of the empty condition (2) we assume \begin{enumerate} \item[(2')] if $\mathfrak p \in V(I)$ and $\mathfrak p \not = \mathfrak m$, then $\text{depth}_{A_\mathfrak p}(M_\mathfrak p) + \dim(A/\mathfrak p) > s$, \end{enumerate} then the conditions also imply that $H^i_{J_0}(M)$ is a finite $A$-module for $i \leq s$. \end{lemma} 
\begin{lemma} \label{lemma-kill-colimit-support} If in Lemma \ref{lemma-kill-colimit-weak} we additionally assume \begin{enumerate} \item[(6)] if $\mathfrak p \not \in V(I)$ and $V(\mathfrak p) \cap V(I) = \{\mathfrak m\}$, then $\text{depth}_{A_\mathfrak p}(M_\mathfrak p) > s$, \end{enumerate} then $H^i_{J_0}(M) = H^i_J(M) = H^i_\mathfrak m(M)$ for $i \leq s$ and these modules are annihilated by a power of $I$. \end{lemma} 
\begin{lemma} \label{lemma-algebraize-local-cohomology} Let $(A, \mathfrak m)$ be a Noetherian local ring. Let $I \subset A$ be an ideal. Let $M$ be a finite $A$-module. Let $s$ and $d$ be integers. Assume \begin{enumerate} \item $A$ is $I$-adically complete and has a dualizing complex, \item if $\mathfrak p \in V(I)$, no condition, \item $\text{cd}(A, I) \leq d$, \item if $\mathfrak p \not \in V(I)$ and $V(\mathfrak p) \cap V(I) \not = \{\mathfrak m\}$ then $$ \text{depth}_{A_\mathfrak p}(M_\mathfrak p) \geq s \quad\text{or}\quad \text{depth}_{A_\mathfrak p}(M_\mathfrak p) + \dim(A/\mathfrak p) > d + s $$ \end{enumerate} Then there exists an ideal $J_0 \subset A$ with $V(J_0) \cap V(I) = \{\mathfrak m\}$ such that for any $J \subset J_0$ with $V(J) \cap V(I) = \{\mathfrak m\}$ the map $$ R\Gamma_J(M) \longrightarrow R\Gamma_J(M)^\wedge = R\Gamma_\mathfrak m(M)^\wedge $$ induces an isomorphism in cohomology in degrees $\leq s$. Here ${}^\wedge$ denotes derived $I$-adic completion. \end{lemma} 
\begin{lemma} \label{lemma-helper-bootstrap} In Situation \ref{situation-bootstrap} let $\mathfrak p \subset \mathfrak q$ be primes of $A$ with $\mathfrak p \not \in V(I)$ and $\mathfrak q \in T$. If there does not exist an $\mathfrak r \in V(I) \setminus T$ with $\mathfrak p \subset \mathfrak r \subset \mathfrak q$ then $\text{depth}(M_\mathfrak p) > s$. \end{lemma} 
\begin{lemma} \label{lemma-bootstrap-inherited} In Situation \ref{situation-bootstrap} we have \begin{enumerate} \item[(E)] if $T' \subset T$ is a smaller specialization stable subset, then $A, I, T', M$ satisfies the assumptions of Situation \ref{situation-bootstrap}, \item[(F)] if $S \subset A$ is a multiplicative subset, then $S^{-1}A, S^{-1}I, T', S^{-1}M$ satisfies the assumptions of Situation \ref{situation-bootstrap} where $T' \subset V(S^{-1}I)$ is the inverse image of $T$, \item[(G)] the quadruple $A', I', T', M'$ satisfies the assumptions of Situation \ref{situation-bootstrap} where $A', I', M'$ are the usual $I$-adic completions of $A, I, M$ and $T' \subset V(I')$ is the inverse image of $T$. \end{enumerate} Let $I \subset \mathfrak a \subset A$ be an ideal such that $V(\mathfrak a) \subset T$. Then \begin{enumerate} \item[(A)] if $I$ is contained in the Jacobson radical of $A$, then all hypotheses of Lemmas \ref{lemma-kill-colimit-weak-general} and \ref{lemma-kill-colimit-support-general} are satisfied for $A, I, \mathfrak a, M$, \item[(B)] if $A$ is complete with respect to $I$, then all hypotheses except for possibly (5) of Lemma \ref{lemma-algebraize-local-cohomology-general} are satisfied for $A, I, \mathfrak a, M$, \item[(C)] if $A$ is local with maximal ideal $\mathfrak m = \mathfrak a$, then all hypotheses of Lemmas \ref{lemma-kill-colimit-weak} and \ref{lemma-kill-colimit-support} hold for $A, \mathfrak m, I, M$, \item[(D)] if $A$ is local with maximal ideal $\mathfrak m = \mathfrak a$ and $I$-adically complete, then all hypotheses of Lemma \ref{lemma-algebraize-local-cohomology} hold for $A, \mathfrak m, I, M$, \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-algebraize-local-cohomology-bis} In Situation \ref{situation-bootstrap} assume $A$ is local with maximal ideal $\mathfrak m$ and $T = \{\mathfrak m\}$. Then $H^i_\mathfrak m(M) \to \lim H^i_\mathfrak m(M/I^nM)$ is an isomorphism for $i \leq s$ and these modules are annihilated by a power of $I$. \end{lemma} 
\begin{lemma} \label{lemma-bootstrap-bis-bis} Let $I \subset \mathfrak a$ be ideals of a Noetherian ring $A$. Let $M$ be a finite $A$-module. Let $s$ and $d$ be integers. If we assume \begin{enumerate} \item[(a)] $A$ has a dualizing complex, \item[(b)] $\text{cd}(A, I) \leq d$, \item[(c)] if $\mathfrak p \not \in V(I)$ and $\mathfrak q \in V(\mathfrak p) \cap V(\mathfrak a)$ then $\text{depth}_{A_\mathfrak p}(M_\mathfrak p) > s$ or $\text{depth}_{A_\mathfrak p}(M_\mathfrak p) + \dim((A/\mathfrak p)_\mathfrak q) > d + s$. \end{enumerate} Then $A, I, V(\mathfrak a), M, s, d$ are as in Situation \ref{situation-bootstrap}. \end{lemma} 
\begin{lemma} \label{lemma-bootstrap} In Situation \ref{situation-bootstrap} the inverse systems $\{H^i_T(I^nM)\}_{n \geq 0}$ are pro-zero for $i \leq s$. Moreover, there exists an integer $m_0$ such that for all $m \geq m_0$ there exists an integer $m'(m) \geq m$ such that for $k \geq m'(m)$ the image of $H^{s + 1}_T(I^kM) \to H^{s + 1}_T(I^mM)$ maps injectively to $H^{s + 1}_T(I^{m_0}M)$. \end{lemma} 
\begin{lemma} \label{lemma-final-bootstrap} In Situation \ref{situation-bootstrap} there exists an integer $m_0 \geq 0$ such that \begin{enumerate} \item $H^i_T(M) \to H^i_T(M/I^nM)$ is injective for all $i \leq s$ and $n \geq m_0$, \item $\{H^i_T(M/I^nM)\}_{n \geq 0}$ satisfies the Mittag-Leffler condition for $i < s$. \item $\{H^i_T(I^{m_0}M/I^nM)\}_{n \geq m_0}$ satisfies the Mittag-Leffler condition for $i \leq s$, \item $H^i_T(M) \to \lim H^i_T(M/I^nM)$ is an isomorphism for $i < s$, \item $H^s_T(I^{m_0}M) \to \lim H^s_T(I^{m_0}M/I^nM)$ is an isomorphism for $i \leq s$, \item $H^s_T(M) \to \lim H^s_T(M/I^nM)$ is injective with cokernel killed by $I^{m_0}$, and \item $R^1\lim H^s_T(M/I^nM)$ is killed by $I^{m_0}$. \end{enumerate} \end{lemma} 
\begin{theorem} \label{theorem-final-bootstrap} In Situation \ref{situation-bootstrap} for $i \leq s$ the inverse system $\{H^i_T(M/I^nM)\}_{n \geq 0}$ is essentially constant with value $H^i_T(M)$. In particular, $\{H^i_T(M/I^nM)\}_{n \geq 0}$ is Mittag-Leffler, $H^i_T(M)$ is annihilated by a power of $I$, and $H^i_T(M) = \lim H^i_T(M/I^nM)$. \end{theorem} 
\begin{lemma} \label{lemma-combine-two} Let $I \subset \mathfrak a \subset A$ be ideals of a Noetherian ring $A$ and let $M$ be a finite $A$-module. Let $s$ and $d$ be integers. Suppose that \begin{enumerate} \item $A, I, V(\mathfrak a), M$ satisfy the assumptions of Situation \ref{situation-bootstrap} for $s$ and $d$, and \item $A, I, \mathfrak a, M$ satisfy the conditions of Lemma \ref{lemma-algebraize-local-cohomology-general} for $s + 1$ and $d$ with $J = \mathfrak a$. \end{enumerate} Then there exists an ideal $J_0 \subset \mathfrak a$ with $V(J_0) \cap V(I) = V(\mathfrak a)$ such that for any $J \subset J_0$ with $V(J) \cap V(I) = V(\mathfrak a)$ the map $$ H^{s + 1}_J(M) \longrightarrow \lim H^{s + 1}_\mathfrak a(M/I^nM) $$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-compare-with-derived-completion} Let $U$ be the punctured spectrum of a Noetherian local ring $A$. Let $\mathcal{F}$ be a coherent $\mathcal{O}_U$-module. Let $I \subset A$ be an ideal. Then $$ H^i(R\Gamma(U, \mathcal{F})^\wedge) = \lim H^i(U, \mathcal{F}/I^n\mathcal{F}) $$ for all $i$ where $R\Gamma(U, \mathcal{F})^\wedge$ denotes the derived $I$-adic completion. \end{lemma} 
\begin{theorem} \label{theorem-algebraization-formal-sections} \begin{reference} The method of proof follows roughly the method of proof of \cite[Theorem 1]{Faltings-algebraisation} and \cite[Satz 2]{Faltings-uber}. The result is almost the same as \cite[Theorem 1.1]{MRaynaud-paper} (affine complement case) and \cite[Theorem 3.9]{MRaynaud-book} (complement is union of few affines). \end{reference} Let $(A, \mathfrak m)$ be a Noetherian local ring which has a dualizing complex and is complete with respect to an ideal $I$. Set $X = \Spec(A)$, $Y = V(I)$, and $U = X \setminus \{\mathfrak m\}$. Let $\mathcal{F}$ be a coherent sheaf on $U$. Assume \begin{enumerate} \item $\text{cd}(A, I) \leq d$, i.e., $H^i(X \setminus Y, \mathcal{G}) = 0$ for $i \geq d$ and quasi-coherent $\mathcal{G}$ on $X$, \item for any $x \in X \setminus Y$ whose closure $\overline{\{x\}}$ in $X$ meets $U \cap Y$ we have $$ \text{depth}_{\mathcal{O}_{X, x}}(\mathcal{F}_x) \geq s \quad\text{or}\quad \text{depth}_{\mathcal{O}_{X, x}}(\mathcal{F}_x) + \dim(\overline{\{x\}}) > d + s $$ \end{enumerate} Then there exists an open $V_0 \subset U$ containing $U \cap Y$ such that for any open $V \subset V_0$ containing $U \cap Y$ the map $$ H^i(V, \mathcal{F}) \to \lim H^i(U, \mathcal{F}/I^n\mathcal{F}) $$ is an isomorphism for $i < s$. If in addition $ \text{depth}_{\mathcal{O}_{X, x}}(\mathcal{F}_x) + \dim(\overline{\{x\}}) > s $ for all $x \in U \cap Y$, then these cohomology groups are finite $A$-modules. \end{theorem} 
\begin{lemma} \label{lemma-application-theorem} Let $(A, \mathfrak m)$ be a Noetherian local ring which has a dualizing complex and is complete with respect to an ideal $I$. Set $X = \Spec(A)$, $Y = V(I)$, and $U = X \setminus \{\mathfrak m\}$. Let $\mathcal{F}$ be a coherent sheaf on $U$. Assume for any associated point $x \in U$ of $\mathcal{F}$ we have $\dim(\overline{\{x\}}) > \text{cd}(A, I) + 1$ where $\overline{\{x\}}$ is the closure in $X$. Then the map $$ \colim H^0(V, \mathcal{F}) \longrightarrow \lim H^0(U, \mathcal{F}/I^n\mathcal{F}) $$ is an isomorphism of finite $A$-modules where the colimit is over opens $V \subset U$ containing $U \cap Y$. \end{lemma} 
\begin{lemma} \label{lemma-ses-H0} Let $I \subset \mathfrak a$ be ideals of a Noetherian ring $A$. Let $0 \to \mathcal{F}' \to \mathcal{F} \to \mathcal{F}'' \to 0$ be a short exact sequence of coherent modules on $U = \Spec(A) \setminus V(\mathfrak a)$. Let $\mathcal{V}$ be the set of open subschemes $V \subset U$ containing $U \cap V(I)$ ordered by reverse inclusion. Consider the commutative diagram $$ \xymatrix{ \colim_\mathcal{V} H^0(V, \mathcal{F}') \ar[d] \ar[r] & \colim_\mathcal{V} H^0(V, \mathcal{F}) \ar[d] \ar[r] & \colim_\mathcal{V} H^0(V, \mathcal{F}'') \ar[d] \\ \lim H^0(U, \mathcal{F}'/I^n\mathcal{F}') \ar[r] & \lim H^0(U, \mathcal{F}'/I^n\mathcal{F}) \ar[r] & \lim H^0(U, \mathcal{F}'/I^n\mathcal{F}'') } $$ If the left and right downarrows are isomorphisms so is the middle. If the middle and left downarrows are isomorphisms, so is the left. \end{lemma} 
\begin{lemma} \label{lemma-application-H0-pre} Let $I \subset \mathfrak a$ be ideals of a Noetherian ring $A$. Let $\mathcal{F}$ be a coherent module on $U = \Spec(A) \setminus V(\mathfrak a)$. Assume \begin{enumerate} \item $A$ is $I$-adically complete and has a dualizing complex, \item if $x \in \text{Ass}(\mathcal{F})$, $x \not \in V(I)$, $\overline{\{x\}} \cap V(I) \not \subset V(\mathfrak a)$, and $z \in \overline{\{x\}} \cap V(\mathfrak a)$, then $\dim(\mathcal{O}_{\overline{\{x\}}, z}) > \text{cd}(A, I) + 1$, \item one of the following holds: \begin{enumerate} \item the restriction of $\mathcal{F}$ to $U \setminus V(I)$ is $(S_1)$ \item the dimension of $V(\mathfrak a)$ is at most $2$\footnote{In the sense that the difference of the maximal and minimal values on $V(\mathfrak a)$ of a dimension function on $\Spec(A)$ is at most $2$.}. \end{enumerate} \end{enumerate} Then we obtain an isomorphism $$ \colim H^0(V, \mathcal{F}) \longrightarrow \lim H^0(U, \mathcal{F}/I^n\mathcal{F}) $$ where the colimit is over opens $V \subset U$ containing $U \cap V(I)$. \end{lemma} 
\begin{proposition} \label{proposition-application-H0} Let $I \subset \mathfrak a$ be ideals of a Noetherian ring $A$. Let $\mathcal{F}$ be a coherent module on $U = \Spec(A) \setminus V(\mathfrak a)$. Assume \begin{enumerate} \item $A$ is $I$-adically complete and has a dualizing complex, \item if $x \in \text{Ass}(\mathcal{F})$, $x \not \in V(I)$, $\overline{\{x\}} \cap V(I) \not \subset V(\mathfrak a)$, and $z \in \overline{\{x\}} \cap V(\mathfrak a)$, then $\dim(\mathcal{O}_{\overline{\{x\}}, z}) > \text{cd}(A, I) + 1$. \end{enumerate} Then we obtain an isomorphism $$ \colim H^0(V, \mathcal{F}) \longrightarrow \lim H^0(U, \mathcal{F}/I^n\mathcal{F}) $$ where the colimit is over opens $V \subset U$ containing $U \cap V(I)$. \end{proposition} 
\begin{lemma} \label{lemma-application-H0} Let $I \subset \mathfrak a$ be ideals of a Noetherian ring $A$. Let $\mathcal{F}$ be a coherent module on $U = \Spec(A) \setminus V(\mathfrak a)$. Assume \begin{enumerate} \item $A$ is $I$-adically complete and has a dualizing complex, \item if $x \in \text{Ass}(\mathcal{F})$, $x \not \in V(I)$, $\overline{\{x\}} \cap V(I) \not \subset V(\mathfrak a)$, and $z \in V(\mathfrak a) \cap \overline{\{x\}}$, then $\dim(\mathcal{O}_{\overline{\{x\}}, z}) > \text{cd}(A, I) + 1$, \item for $x \in U$ with $\overline{\{x\}} \cap V(I) \subset V(\mathfrak a)$ we have $\text{depth}(\mathcal{F}_x) \geq 2$, \end{enumerate} Then we obtain an isomorphism $$ H^0(U, \mathcal{F}) \longrightarrow \lim H^0(U, \mathcal{F}/I^n\mathcal{F}) $$ \end{lemma} 
\begin{lemma} \label{lemma-alternative-colim-H0} Let $A$ be a Noetherian ring. Let $f \in \mathfrak a \subset A$ be an element of an ideal of $A$. Let $M$ be a finite $A$-module. Assume \begin{enumerate} \item $A$ is $f$-adically complete, \item $f$ is a nonzerodivisor on $M$, \item $H^1_\mathfrak a(M/fM)$ is a finite $A$-module. \end{enumerate} Then with $U = \Spec(A) \setminus V(\mathfrak a)$ the map $$ \colim_V \Gamma(V, \widetilde{M}) \longrightarrow \lim \Gamma(U, \widetilde{M/f^nM}) $$ is an isomorphism where the colimit is over opens $V \subset U$ containing $U \cap V(f)$. \end{lemma} 
\begin{proposition} \label{proposition-alternative-colim-H0} Let $A$ be a Noetherian ring. Let $f \in \mathfrak a \subset A$ be an element of an ideal of $A$. Let $\mathcal{F}$ be a coherent module on $U = \Spec(A) \setminus V(\mathfrak a)$. Assume \begin{enumerate} \item $A$ is $f$-adically complete and has a dualizing complex, \item if $x \in \text{Ass}(\mathcal{F})$, $x \not \in V(f)$, $\overline{\{x\}} \cap V(f) \not \subset V(\mathfrak a)$, and $z \in \overline{\{x\}} \cap V(\mathfrak a)$, then $\dim(\mathcal{O}_{\overline{\{x\}}, z}) > 2$. \end{enumerate} Then the map $$ \colim_V \Gamma(V, \mathcal{F}) \longrightarrow \lim \Gamma(U, \mathcal{F}/f^n\mathcal{F}) $$ is an isomorphism where the colimit is over opens $V \subset U$ containing $U \cap V(f)$. \end{proposition} 
\begin{lemma} \label{lemma-alternative-H0} Let $A$ be a Noetherian ring. Let $f \in \mathfrak a \subset A$ be an element of an ideal of $A$. Let $M$ be a finite $A$-module. Assume \begin{enumerate} \item $A$ is $f$-adically complete, \item $H^1_\mathfrak a(M)$ and $H^2_\mathfrak a(M)$ are annihilated by a power of $f$. \end{enumerate} Then with $U = \Spec(A) \setminus V(\mathfrak a)$ the map $$ \Gamma(U, \widetilde{M}) \longrightarrow \lim \Gamma(U, \widetilde{M/f^nM}) $$ is an isomorphism. \end{lemma} 
\begin{proposition} \label{proposition-application-higher} Let $I \subset \mathfrak a$ be ideals of a Noetherian ring $A$. Let $\mathcal{F}$ be a coherent module on $U = \Spec(A) \setminus V(\mathfrak a)$. Let $s \geq 0$. Assume \begin{enumerate} \item $A$ is $I$-adically complete and has a dualizing complex, \item if $x \in U \setminus V(I)$ then $\text{depth}(\mathcal{F}_x) > s$ or $$ \text{depth}(\mathcal{F}_x) + \dim(\mathcal{O}_{\overline{\{x\}}, z}) > \text{cd}(A, I) + s + 1 $$ for all $z \in V(\mathfrak a) \cap \overline{\{x\}}$, \item one of the following conditions holds: \begin{enumerate} \item the restriction of $\mathcal{F}$ to $U \setminus V(I)$ is $(S_{s + 1})$, or \item the dimension of $V(\mathfrak a)$ is at most $2$\footnote{In the sense that the difference of the maximal and minimal values on $V(\mathfrak a)$ of a dimension function on $\Spec(A)$ is at most $2$.}. \end{enumerate} \end{enumerate} Then the maps $$ H^i(U, \mathcal{F}) \longrightarrow \lim H^i(U, \mathcal{F}/I^n\mathcal{F}) $$ are isomorphisms for $i < s$. Moreover we have an isomorphism $$ \colim H^s(V, \mathcal{F}) \longrightarrow \lim H^s(U, \mathcal{F}/I^n\mathcal{F}) $$ where the colimit is over opens $V \subset U$ containing $U \cap V(I)$. \end{proposition} 
\begin{lemma} \label{lemma-alternative-higher} Let $A$ be a Noetherian ring. Let $f \in \mathfrak a \subset A$ be an element of an ideal of $A$. Let $M$ be a finite $A$-module. Let $s \geq 0$. Assume \begin{enumerate} \item $A$ is $f$-adically complete, \item $H^i_\mathfrak a(M)$ is annihilated by a power of $f$ for $i \leq s + 1$. \end{enumerate} Then with $U = \Spec(A) \setminus V(\mathfrak a)$ the map $$ H^i(U, \widetilde{M}) \longrightarrow \lim H^i(U, \widetilde{M/f^nM}) $$ is an isomorphism for $i < s$. \end{lemma} 
\begin{lemma} \label{lemma-punctured-still-connected} \begin{reference} \cite[Theorem 1.6]{Varbaro} \end{reference} Let $(A, \mathfrak m)$ be a Noetherian complete local ring. Let $I$ be a proper ideal of $A$. Set $X = \Spec(A)$ and $Y = V(I)$. Denote \begin{enumerate} \item $d$ the minimal dimension of an irreducible component of $X$, and \item $c$ the minimal dimension of a closed subset $Z \subset X$ such that $X \setminus Z$ is disconnected. \end{enumerate} Then for $Z \subset Y$ closed we have $Y \setminus Z$ is connected if $\dim(Z) < \min(c, d - 1) - \text{cd}(A, I)$. In particular, the punctured spectrum of $A/I$ is connected if $\text{cd}(A, I) < \min(c, d - 1)$. \end{lemma} 
\begin{lemma} \label{lemma-connected} Let $I \subset \mathfrak a$ be ideals of a Noetherian ring $A$. Assume \begin{enumerate} \item $A$ is $I$-adically complete and has a dualizing complex, \item if $\mathfrak p \subset A$ is a minimal prime not contained in $V(I)$ and $\mathfrak q \in V(\mathfrak p) \cap V(\mathfrak a)$, then $\dim((A/\mathfrak p)_\mathfrak q) > \text{cd}(A, I) + 1$, \item any nonempty open $V \subset \Spec(A)$ which contains $V(I) \setminus V(\mathfrak a)$ is connected\footnote{For example if $A$ is a domain.}. \end{enumerate} Then $V(I) \setminus V(\mathfrak a)$ is either empty or connected. \end{lemma} 
\begin{lemma} \label{lemma-H0} Let $A$ be a Noetherian domain which has a dualizing complex and which is complete with respect to a nonzero $f \in A$. Let $f \in \mathfrak a \subset A$ be an ideal. Assume every irreducible component of $Z = V(\mathfrak a)$ has codimension $> 2$ in $X = \Spec(A)$, i.e., assume every irreducible component of $Z$ has codimension $> 1$ in $Y = V(f)$. Then $Y \setminus Z$ is connected. \end{lemma} 
\begin{lemma} \label{lemma-completion-fully-faithful} Let $X$ be a Noetherian scheme and let $Y \subset X$ be a closed subscheme. Let $Y_n \subset X$ be the $n$th infinitesimal neighbourhood of $Y$ in $X$. Consider the following conditions \begin{enumerate} \item $X$ is quasi-affine and $\Gamma(X, \mathcal{O}_X) \to \lim \Gamma(Y_n, \mathcal{O}_{Y_n})$ is an isomorphism, \item $X$ has an ample invertible module $\mathcal{L}$ and $\Gamma(X, \mathcal{L}^{\otimes m}) \to \lim \Gamma(Y_n, \mathcal{L}^{\otimes m}|_{Y_n})$ is an isomorphism for all $m \gg 0$, \item for every finite locally free $\mathcal{O}_X$-module $\mathcal{E}$ the map $\Gamma(X, \mathcal{E}) \to \lim \Gamma(Y_n, \mathcal{E}|_{Y_n})$ is an isomorphism, and \item the completion functor $\textit{Coh}(\mathcal{O}_X) \to \textit{Coh}(X, \mathcal{I})$ is fully faithful on the full subcategory of finite locally free objects. \end{enumerate} Then (1) $\Rightarrow$ (2) $\Rightarrow$ (3) $\Rightarrow$ (4) and (4) $\Rightarrow$ (3). \end{lemma} 
\begin{lemma} \label{lemma-completion-fully-faithful-general} Let $X$ be a Noetherian scheme and let $Y \subset X$ be a closed subscheme with ideal sheaf $\mathcal{I} \subset \mathcal{O}_X$. Let $Y_n \subset X$ be the $n$th infinitesimal neighbourhood of $Y$ in $X$. Let $\mathcal{V}$ be the set of open subschemes $V \subset X$ containing $Y$ ordered by reverse inclusion. \begin{enumerate} \item $X$ is quasi-affine and $$ \colim_\mathcal{V} \Gamma(V, \mathcal{O}_V) \longrightarrow \lim \Gamma(Y_n, \mathcal{O}_{Y_n}) $$ is an isomorphism, \item $X$ has an ample invertible module $\mathcal{L}$ and $$ \colim_\mathcal{V} \Gamma(V, \mathcal{L}^{\otimes m}) \longrightarrow \lim \Gamma(Y_n, \mathcal{L}^{\otimes m}|_{Y_n}) $$ is an isomorphism for all $m \gg 0$, \item for every $V \in \mathcal{V}$ and every finite locally free $\mathcal{O}_V$-module $\mathcal{E}$ the map $$ \colim_{V' \geq V} \Gamma(V', \mathcal{E}|_{V'}) \longrightarrow \lim \Gamma(Y_n, \mathcal{E}|_{Y_n}) $$ is an isomorphism, and \item the completion functor $$ \colim_\mathcal{V} \textit{Coh}(\mathcal{O}_V) \longrightarrow \textit{Coh}(X, \mathcal{I}), \quad \mathcal{F} \longmapsto \mathcal{F}^\wedge $$ is fully faithful on the full subcategory of finite locally free objects (see explanation above). \end{enumerate} Then (1) $\Rightarrow$ (2) $\Rightarrow$ (3) $\Rightarrow$ (4) and (4) $\Rightarrow$ (3). \end{lemma} 
\begin{lemma} \label{lemma-recognize-formal-coherent-modules} Let $X$ be a Noetherian scheme. Let $\mathcal{I} \subset \mathcal{O}_X$ be a quasi-coherent sheaf of ideals. The functor $$ \textit{Coh}(X, \mathcal{I}) \longrightarrow \text{Pro-}\QCoh(\mathcal{O}_X) $$ is fully faithful, see Categories, Remark \ref{categories-remark-pro-category}. \end{lemma} 
\begin{lemma} \label{lemma-fully-faithful} Let $I \subset \mathfrak a$ be ideals of a Noetherian ring $A$. Let $U = \Spec(A) \setminus V(\mathfrak a)$. Assume \begin{enumerate} \item $A$ is $I$-adically complete and has a dualizing complex, \item for any associated prime $\mathfrak p \subset A$ with $\mathfrak p \not \in V(I)$ and $V(\mathfrak p) \cap V(I) \not \subset V(\mathfrak a)$ and $\mathfrak q \in V(\mathfrak p) \cap V(\mathfrak a)$ we have $\dim((A/\mathfrak p)_\mathfrak q) > \text{cd}(A, I) + 1$, \item for $\mathfrak p \subset A$ with $\mathfrak p \not \in V(I)$ and $V(\mathfrak p) \cap V(I) \subset V(\mathfrak a)$ we have $\text{depth}(A_\mathfrak p) \geq 2$. \end{enumerate} Then the completion functor $$ \textit{Coh}(\mathcal{O}_U) \longrightarrow \textit{Coh}(U, I\mathcal{O}_U), \quad \mathcal{F} \longmapsto \mathcal{F}^\wedge $$ is fully faithful on the full subcategory of finite locally free objects. \end{lemma} 
\begin{lemma} \label{lemma-fully-faithful-alternative} Let $A$ be a Noetherian ring. Let $f \in \mathfrak a \subset A$ be an element of an ideal of $A$. Let $U = \Spec(A) \setminus V(\mathfrak a)$. Assume \begin{enumerate} \item $A$ is $f$-adically complete, \item $H^1_\mathfrak a(A)$ and $H^2_\mathfrak a(A)$ are annihilated by a power of $f$. \end{enumerate} Then the completion functor $$ \textit{Coh}(\mathcal{O}_U) \longrightarrow \textit{Coh}(U, I\mathcal{O}_U), \quad \mathcal{F} \longmapsto \mathcal{F}^\wedge $$ is fully faithful on the full subcategory of finite locally free objects. \end{lemma} 
\begin{lemma} \label{lemma-fully-faithful-simple-two} Let $A$ be a Noetherian ring. Let $f \in \mathfrak a$ be an element of an ideal of $A$. Let $U = \Spec(A) \setminus V(\mathfrak a)$. Assume \begin{enumerate} \item $A$ has a dualizing complex and is complete with respect to $f$, \item for every prime $\mathfrak p \subset A$, $f \not \in \mathfrak p$ and $\mathfrak q \in V(\mathfrak p) \cap V(\mathfrak a)$ we have $\text{depth}(A_\mathfrak p) + \dim((A/\mathfrak p)_\mathfrak q) > 2$. \end{enumerate} Then the completion functor $$ \textit{Coh}(\mathcal{O}_U) \longrightarrow \textit{Coh}(U, I\mathcal{O}_U), \quad \mathcal{F} \longmapsto \mathcal{F}^\wedge $$ is fully faithful on the full subcategory of finite locally free objects. \end{lemma} 
\begin{lemma} \label{lemma-fully-faithful-general} Let $I \subset \mathfrak a \subset A$ be ideals of a Noetherian ring $A$. Let $U = \Spec(A) \setminus V(\mathfrak a)$. Let $\mathcal{V}$ be the set of open subschemes of $U$ containing $U \cap V(I)$ ordered by reverse inclusion. Assume \begin{enumerate} \item $A$ is $I$-adically complete and has a dualizing complex, \item for any associated prime $\mathfrak p \subset A$ with $I \not \subset \mathfrak p$ and $V(\mathfrak p) \cap V(I) \not \subset V(\mathfrak a)$ and $\mathfrak q \in V(\mathfrak p) \cap V(\mathfrak a)$ we have $\dim((A/\mathfrak p)_\mathfrak q) > \text{cd}(A, I) + 1$. \end{enumerate} Then the completion functor $$ \colim_\mathcal{V} \textit{Coh}(\mathcal{O}_V) \longrightarrow \textit{Coh}(U, I\mathcal{O}_U), \quad \mathcal{F} \longmapsto \mathcal{F}^\wedge $$ is fully faithful on the full subcategory of finite locally free objects. \end{lemma} 
\begin{lemma} \label{lemma-fully-faithful-general-alternative} Let $A$ be a Noetherian ring. Let $f \in \mathfrak a \subset A$ be an element of an ideal of $A$. Let $U = \Spec(A) \setminus V(\mathfrak a)$. Let $\mathcal{V}$ be the set of open subschemes of $U$ containing $U \cap V(f)$ ordered by reverse inclusion. Assume \begin{enumerate} \item $A$ is $f$-adically complete, \item $f$ is a nonzerodivisor, \item $H^1_\mathfrak a(A/fA)$ is a finite $A$-module. \end{enumerate} Then the completion functor $$ \colim_\mathcal{V} \textit{Coh}(\mathcal{O}_V) \longrightarrow \textit{Coh}(U, f\mathcal{O}_U), \quad \mathcal{F} \longmapsto \mathcal{F}^\wedge $$ is fully faithful on the full subcategory of finite locally free objects. \end{lemma} 
\begin{lemma} \label{lemma-fully-faithful-very-general} Let $I \subset \mathfrak a \subset A$ be ideals of a Noetherian ring $A$. Let $U = \Spec(A) \setminus V(\mathfrak a)$. Let $\mathcal{V}$ be the set of open subschemes of $U$ containing $U \cap V(I)$ ordered by reverse inclusion. Let $\mathcal{F}$ and $\mathcal{G}$ be coherent $\mathcal{O}_V$-modules for some $V \in \mathcal{V}$. The map $$ \colim_{V' \geq V} \Hom_V(\mathcal{G}|_{V'}, \mathcal{F}|_{V'}) \longrightarrow \Hom_{\textit{Coh}(U, I\mathcal{O}_U)}(\mathcal{G}^\wedge, \mathcal{F}^\wedge) $$ is bijective if the following assumptions hold: \begin{enumerate} \item $A$ is $I$-adically complete and has a dualizing complex, \item if $x \in \text{Ass}(\mathcal{F})$, $x \not \in V(I)$, $\overline{\{x\}} \cap V(I) \not \subset V(\mathfrak a)$ and $z \in \overline{\{x\}} \cap V(\mathfrak a)$, then $\dim(\mathcal{O}_{\overline{\{x\}}, z}) > \text{cd}(A, I) + 1$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-system-of-modules} In Situation \ref{situation-algebraize}. Consider an inverse system $(M_n)$ of $A$-modules such that \begin{enumerate} \item $M_n$ is a finite $A$-module, \item $M_n$ is annihilated by $I^n$, \item the kernel and cokernel of $M_{n + 1}/I^nM_{n + 1} \to M_n$ are $\mathfrak a$-power torsion. \end{enumerate} Then $(\widetilde{M}_n|_U)$ is in $\textit{Coh}(U, I\mathcal{O}_U)$. Conversely, every object of $\textit{Coh}(U, I\mathcal{O}_U)$ arises in this manner. \end{lemma} 
\begin{lemma} \label{lemma-essential-image-completion} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Consider the following conditions: \begin{enumerate} \item $(\mathcal{F}_n)$ is in the essential image of the functor (\ref{equation-completion}), \item $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_U$-module, \item $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_V$-module for $U \cap Y \subset V \subset U$ open, \item $(\mathcal{F}_n)$ is the completion of the restriction to $U$ of a coherent $\mathcal{O}_X$-module, \item $(\mathcal{F}_n)$ is the restriction to $U$ of the completion of a coherent $\mathcal{O}_X$-module, \item there exists an object $(\mathcal{G}_n)$ of $\textit{Coh}(X, I\mathcal{O}_X)$ whose restriction to $U$ is $(\mathcal{F}_n)$. \end{enumerate} Then conditions (1), (2), (3), (4), and (5) are equivalent and imply (6). If $A$ is $I$-adically complete then condition (6) implies the others. \end{lemma} 
\begin{definition} \label{definition-algebraizable} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. We say {\it $(\mathcal{F}_n)$ extends to $X$} if there exists an object $(\mathcal{G}_n)$ of $\textit{Coh}(X, I\mathcal{O}_X)$ whose restriction to $U$ is isomorphic to $(\mathcal{F}_n)$. \end{definition} 
\begin{lemma} \label{lemma-algebraizable} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Let $A', I', \mathfrak a'$ be the $I$-adic completions of $A, I, \mathfrak a$. Set $X' = \Spec(A')$ and $U' = X' \setminus V(\mathfrak a')$. The following are equivalent \begin{enumerate} \item $(\mathcal{F}_n)$ extends to $X$, and \item the pullback of $(\mathcal{F}_n)$ to $U'$ is the completion of a coherent $\mathcal{O}_{U'}$-module. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-canonically-algebraizable} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. We say {\it $(\mathcal{F}_n)$ canonically extends to $X$} if the the inverse system $$ \{\widetilde{H^0(U, \mathcal{F}_n)}\}_{n \geq 1} $$ in $\QCoh(\mathcal{O}_X)$ is pro-isomorphic to an object $(\mathcal{G}_n)$ of $\textit{Coh}(X, I\mathcal{O}_X)$. \end{definition} 
\begin{lemma} \label{lemma-canonically-algebraizable} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. If $(\mathcal{F}_n)$ canonically extends to $X$, then \begin{enumerate} \item $(\widetilde{H^0(U, \mathcal{F}_n)})$ is pro-isomorphic to an object $(\mathcal{G}_n)$ of $\textit{Coh}(X, I \mathcal{O}_X)$ unique up to unique isomorphism, \item the restriction of $(\mathcal{G}_n)$ to $U$ is isomorphic to $(\mathcal{F}_n)$, i.e., $(\mathcal{F}_n)$ extends to $X$, \item the inverse system $\{H^0(U, \mathcal{F}_n)\}$ satisfies the Mittag-Leffler condition, and \item the module $M$ in (\ref{equation-guess}) is finite over the $I$-adic completion of $A$ and the limit topology on $M$ is the $I$-adic topology. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-canonically-extend-base-change} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Let $A \to A'$ be a flat ring map. Set $X' = \Spec(A')$, let $U' \subset X'$ be the inverse image of $U$, and denote $g : U' \to U$ the induced morphism. Set $(\mathcal{F}'_n) = (g^*\mathcal{F}_n)$, see Cohomology of Schemes, Lemma \ref{coherent-lemma-inverse-systems-pullback}. If $(\mathcal{F}_n)$ canonically extends to $X$, then $(\mathcal{F}'_n)$ canonically extends to $X'$. Moreover, the extension found in Lemma \ref{lemma-canonically-algebraizable} for $(\mathcal{F}_n)$ pulls back to the extension for $(\mathcal{F}'_n)$. \end{lemma} 
\begin{lemma} \label{lemma-when-done} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Let $M$ be as in (\ref{equation-guess}). Assume \begin{enumerate} \item[(a)] the inverse system $H^0(U, \mathcal{F}_n)$ has Mittag-Leffler, \item[(b)] the limit topology on $M$ agrees with the $I$-adic topology, and \item[(c)] the image of $M \to H^0(U, \mathcal{F}_n)$ is a finite $A$-module for all $n$. \end{enumerate} Then $(\mathcal{F}_n)$ extends canonically to $X$. In particular, if $A$ is $I$-adically complete, then $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_U$-module. \end{lemma} 
\begin{lemma} \label{lemma-algebraization-principal-variant} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume \begin{enumerate} \item $I = (f)$ is a principal ideal for a nonzerodivisor $f \in \mathfrak a$, \item $\mathcal{F}_n$ is a finite locally free $\mathcal{O}_U/f^n\mathcal{O}_U$-module, \item $H^1_\mathfrak a(A/fA)$ and $H^2_\mathfrak a(A/fA)$ are finite $A$-modules. \end{enumerate} Then $(\mathcal{F}_n)$ extends canonically to $X$. In particular, if $A$ is complete, then $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_U$-module. \end{lemma} 
\begin{lemma} \label{lemma-map-kernel-cokernel-on-closed} In Situation \ref{situation-algebraize}. Let $(\mathcal{F}_n) \to (\mathcal{F}'_n)$ be a morphism of $\textit{Coh}(U, I\mathcal{O}_U)$ whose kernel and cokernel are annihilated by a power of $I$. Then \begin{enumerate} \item $(\mathcal{F}_n)$ extends to $X$ if and only if $(\mathcal{F}'_n)$ extends to $X$, and \item $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_U$-module if and only if $(\mathcal{F}'_n)$ is. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-when-ML} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. If the inverse system $H^0(U, \mathcal{F}_n)$ has Mittag-Leffler, then the canonical maps $$ \widetilde{M/I^nM}|_U \to \mathcal{F}_n $$ are surjective for all $n$ where $M$ is as in (\ref{equation-guess}). \end{lemma} 
\begin{lemma} \label{lemma-when-topology} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Let $M$ be as in (\ref{equation-guess}). Set $$ \mathcal{G}_n = \widetilde{M/I^nM}. $$ If the limit topology on $M$ agrees with the $I$-adic topology, then $\mathcal{G}_n|_U$ is a coherent $\mathcal{O}_U$-module and the map of inverse systems $$ (\mathcal{G}_n|_U) \longrightarrow (\mathcal{F}_n) $$ is injective in the abelian category $\textit{Coh}(U, I\mathcal{O}_U)$. \end{lemma} 
\begin{lemma} \label{lemma-discussion} Let $Y$ be a Noetherian scheme and let $Z \subset Y$ be a closed subset. \begin{enumerate} \item For $y \in Y$ we have $\delta_Z(y) = 0 \Leftrightarrow y \in Z$. \item The subsets $\{y \in Y \mid \delta_Z(y) \leq k\}$ are stable under specialization. \item For $y \in Y$ and $z \in \overline{\{y\}} \cap Z$ we have $\dim(\mathcal{O}_{\overline{\{y\}}, z}) \geq \delta_Z(y)$. \item If $\delta$ is a dimension function on $Y$, then $\delta_Z(y) \geq \delta(y) - \delta_{max}$ where $\delta_{max}$ is the maximum value of $\delta$ on $Z$. \item If $Y = \Spec(A)$ is the spectrum of a catenary Noetherian local ring with maximal ideal $\mathfrak m$ and $Z = \{\mathfrak m\}$, then $\delta_Z(y) = \dim(\overline{\{y\}})$. \item If $Y' \subset Y$ is an open subscheme, then $\delta^{Y'}_{Y' \cap Z}(y') \geq \delta^Y_Z(y')$ for $y' \in Y'$. \end{enumerate} Assume $Y$ is catenary. Then \begin{enumerate} \setcounter{enumi}{6} \item Let $y' \leadsto y$ be an immediate specialization of points of $Y$. If $Y$ is catenary, then $\delta_Z(y') \leq \delta_Z(y) + 1$. \item Given a pattern of specializations $$ \xymatrix{ & y'_0 \ar@{~>}[ld] \ar@{~>}[rd] & & y'_1 \ar@{~>}[ld] & \ldots & y'_{k - 1} \ar@{~>}[rd] & \\ y_0 & & y_1 & & \ldots & & y_k = y } $$ between points of $Y$ with $y_0 \in Z$ and $y_i' \leadsto y_i$ an immediate specialization, then $\delta_Z(y_k) \leq k$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-change-distance-function} Let $Y$ be a universally catenary Noetherian scheme. Let $Z \subset Y$ be a closed subscheme. Let $f : Y' \to Y$ be a finite type morphism all of whose fibres have dimension $\leq e$. Set $Z' = f^{-1}(Z)$. Then $$ \delta_Z(y) \leq \delta_{Z'}(y') + e - \text{trdeg}_{\kappa(y)}(\kappa(y')) $$ for $y' \in Y'$ with image $y \in Y$. \end{lemma} 
\begin{definition} \label{definition-s-d-inequalities} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Let $a, b$ be integers. Let $\delta^Y_Z$ be as in (\ref{equation-delta-Z}). We say {\it $(\mathcal{F}_n)$ satisfies the $(a, b)$-inequalities} if for $y \in U \cap Y$ and a prime $\mathfrak p \subset \mathcal{O}_{X, y}^\wedge$ with $\mathfrak p \not \in V(I\mathcal{O}_{X, y}^\wedge)$ \begin{enumerate} \item if $V(\mathfrak p) \cap V(I\mathcal{O}_{X, y}^\wedge) \not = \{\mathfrak m_y^\wedge\}$, then $$ \text{depth}((\mathcal{F}^\wedge_y)_\mathfrak p) + \delta^Y_Z(y) \geq a \quad\text{or}\quad \text{depth}((\mathcal{F}^\wedge_y)_\mathfrak p) + \dim(\mathcal{O}_{X, y}^\wedge/\mathfrak p) + \delta^Y_Z(y) > b $$ \item if $V(\mathfrak p) \cap V(I\mathcal{O}_{X, y}^\wedge) = \{\mathfrak m_y^\wedge\}$, then $$ \text{depth}((\mathcal{F}^\wedge_y)_\mathfrak p) + \delta^Y_Z(y) > a $$ \end{enumerate} We say {\it $(\mathcal{F}_n)$ satisfies the strict $(a, b)$-inequalities} if for $y \in U \cap Y$ and a prime $\mathfrak p \subset \mathcal{O}_{X, y}^\wedge$ with $\mathfrak p \not \in V(I\mathcal{O}_{X, y}^\wedge)$ we have $$ \text{depth}((\mathcal{F}^\wedge_y)_\mathfrak p) + \delta^Y_Z(y) > a \quad\text{or}\quad \text{depth}((\mathcal{F}^\wedge_y)_\mathfrak p) + \dim(\mathcal{O}_{X, y}^\wedge/\mathfrak p) + \delta^Y_Z(y) > b $$ \end{definition} 
\begin{lemma} \label{lemma-elementary} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Let $a, b$ be integers. \begin{enumerate} \item If $(\mathcal{F}_n)$ is annihilated by a power of $I$, then $(\mathcal{F}_n)$ satisfies the $(a, b)$-inequalities for any $a, b$. \item If $(\mathcal{F}_n)$ satisfies the $(a + 1, b)$-inequalities, then $(\mathcal{F}_n)$ satisfies the strict $(a, b)$-inequalities. \end{enumerate} If $\text{cd}(A, I) \leq d$ and $A$ has a dualizing complex, then \begin{enumerate} \item[(3)] $(\mathcal{F}_n)$ satisfies the $(s, s + d)$-inequalities if and only if for all $y \in U \cap Y$ the tuple $\mathcal{O}_{X, y}^\wedge, I\mathcal{O}_{X, y}^\wedge, \{\mathfrak m_y^\wedge\}, \mathcal{F}_y^\wedge, s - \delta^Y_Z(y), d$ is as in Situation \ref{situation-bootstrap}. \item[(4)] If $(\mathcal{F}_n)$ satisfies the strict $(s, s + d)$-inequalities, then $(\mathcal{F}_n)$ satisfies the $(s, s + d)$-inequalities. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-explain-2-3-cd-1} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. If $\text{cd}(A, I) = 1$, then $\mathcal{F}$ satisfies the $(2, 3)$-inequalities if and only if $$ \text{depth}((\mathcal{F}^\wedge_y)_\mathfrak p) + \dim(\mathcal{O}_{X, y}^\wedge/\mathfrak p) + \delta^Y_Z(y) > 3 $$ for all $y \in U \cap Y$ and $\mathfrak p \subset \mathcal{O}_{X, y}^\wedge$ with $\mathfrak p \not \in V(I\mathcal{O}_{X, y}^\wedge)$. \end{lemma} 
\begin{lemma} \label{lemma-sanity} In Situation \ref{situation-algebraize} let $\mathcal{F}$ be a coherent $\mathcal{O}_U$-module and $d \geq 1$. Assume \begin{enumerate} \item $A$ is $I$-adically complete, has a dualizing complex, and $\text{cd}(A, I) \leq d$, \item the completion $\mathcal{F}^\wedge$ of $\mathcal{F}$ satisfies the strict $(1, 1 + d)$-inequalities. \end{enumerate} Let $x \in X$ be a point. Let $W = \overline{\{x\}}$. If $W \cap Y$ has an irreducible component contained in $Z$ and one which is not, then $\text{depth}(\mathcal{F}_x) \geq 1$. \end{lemma} 
\begin{lemma} \label{lemma-recover} In Situation \ref{situation-algebraize} let $\mathcal{F}$ be a coherent $\mathcal{O}_U$-module and $d \geq 1$. Assume \begin{enumerate} \item $A$ is $I$-adically complete, has a dualizing complex, and $\text{cd}(A, I) \leq d$, \item the completion $\mathcal{F}^\wedge$ of $\mathcal{F}$ satisfies the strict $(1, 1+ d)$-inequalities, and \item for $x \in U$ with $\overline{\{x\}} \cap Y \subset Z$ we have $\text{depth}(\mathcal{F}_x) \geq 2$. \end{enumerate} Then $H^0(U, \mathcal{F}) \to \lim H^0(U, \mathcal{F}/I^n\mathcal{F})$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-fully-faithful-inequalities} In Situation \ref{situation-algebraize} let $\mathcal{F}$ be a coherent $\mathcal{O}_U$-module and $d \geq 1$. Assume \begin{enumerate} \item $A$ is $I$-adically complete, has a dualizing complex, and $\text{cd}(A, I) \leq d$, \item the completion $\mathcal{F}^\wedge$ of $\mathcal{F}$ satisfies the strict $(1, 1 + d)$-inequalities, and \item for $x \in U$ with $\overline{\{x\}} \cap Y \subset Z$ we have $\text{depth}(\mathcal{F}_x) \geq 2$. \end{enumerate} Then the map $$ \Hom_U(\mathcal{G}, \mathcal{F}) \longrightarrow \Hom_{\textit{Coh}(U, I\mathcal{O}_U)}(\mathcal{G}^\wedge, \mathcal{F}^\wedge) $$ is bijective for every coherent $\mathcal{O}_U$-module $\mathcal{G}$.  \end{lemma} 
\begin{lemma} \label{lemma-construct-unique} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$ and $d \geq 1$. Assume \begin{enumerate} \item $A$ is $I$-adically complete, has a dualizing complex, and $\text{cd}(A, I) \leq d$, \item $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_U$-module, \item $(\mathcal{F}_n)$ satisfies the strict $(1, 1 + d)$-inequalities. \end{enumerate} Then there exists a unique coherent $\mathcal{O}_U$-module $\mathcal{F}$ whose completion is $(\mathcal{F}_n)$ such that for $x \in U$ with $\overline{\{x\}} \cap Y \subset Z$ we have $\text{depth}(\mathcal{F}_x) \geq 2$. \end{lemma} 
\begin{lemma} \label{lemma-algebraization-principal} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume \begin{enumerate} \item $A$ is local and $\mathfrak a = \mathfrak m$ is the maximal ideal, \item $A$ has a dualizing complex, \item $I = (f)$ is a principal ideal for a nonzerodivisor $f \in \mathfrak m$, \item $\mathcal{F}_n$ is a finite locally free $\mathcal{O}_U/f^n\mathcal{O}_U$-module, \item if $\mathfrak p \in V(f) \setminus \{\mathfrak m\}$, then $\text{depth}((A/f)_\mathfrak p) + \dim(A/\mathfrak p) > 1$, and \item if $\mathfrak p \not \in V(f)$ and $V(\mathfrak p) \cap V(f) \not = \{\mathfrak m\}$, then $\text{depth}(A_\mathfrak p) + \dim(A/\mathfrak p) > 3$. \end{enumerate} Then $(\mathcal{F}_n)$ extends canonically to $X$. In particular, if $A$ is complete, then $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_U$-module. \end{lemma} 
\begin{lemma} \label{lemma-helper-algebraize} In Situation \ref{situation-algebraize} let $(M_n)$ be an inverse system of $A$-modules as in Lemma \ref{lemma-system-of-modules} and let $(\mathcal{F}_n)$ be the corresponding object of $\textit{Coh}(U, I\mathcal{O}_U)$. Let $d \geq \text{cd}(A, I)$ and $s \geq 0$ be integers. With notation as above assume \begin{enumerate} \item $A$ is local with maximal ideal $\mathfrak m = \mathfrak a$, \item $A$ has a dualizing complex, and \item $(\mathcal{F}_n)$ satisfies the $(s, s + d)$-inequalities (Definition \ref{definition-s-d-inequalities}). \end{enumerate} Let $E$ be an injective hull of the residue field of $A$. Then for $i \leq s$ there exists a finite $A$-module $N$ annihilated by a power of $I$ and for $n \gg 0$ compatible maps $$ H^i_\mathfrak m(M_n) \to \Hom_A(N, E) $$ whose cokernels are finite length $A$-modules and whose kernels $K_n$ form an inverse system such that $\Im(K_{n''} \to K_{n'})$ has finite length for $n'' \gg n' \gg 0$. \end{lemma} 
\begin{lemma} \label{lemma-algebraization-principal-bis} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume \begin{enumerate} \item $A$ is local and $\mathfrak a = \mathfrak m$ is the maximal ideal, \item $A$ has a dualizing complex, \item $I = (f)$ is a principal ideal, \item $(\mathcal{F}_n)$ satisfies the $(2, 3)$-inequalities. \end{enumerate} Then $(\mathcal{F}_n)$ extends to $X$. In particular, if $A$ is $I$-adically complete, then $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_U$-module.  \end{lemma} 
\begin{lemma} \label{lemma-unwinding-conditions} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume \begin{enumerate} \item $A$ is local with maximal ideal $\mathfrak a = \mathfrak m$, \item $\text{cd}(A, I) = 1$. \end{enumerate} Then $(\mathcal{F}_n)$ satisfies the $(2, 3)$-inequalities if and only if for all $y \in U \cap Y$ with $\dim(\{y\}) = 1$ and every prime $\mathfrak p \subset \mathcal{O}_{X, y}^\wedge$, $\mathfrak p \not \in V(I\mathcal{O}_{X, y}^\wedge)$ we have $$ \text{depth}((\mathcal{F}_y^\wedge)_\mathfrak p) + \dim(\mathcal{O}_{X, y}^\wedge/\mathfrak p) > 2 $$ \end{lemma} 
\begin{lemma} \label{lemma-unwinding-conditions-bis} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume \begin{enumerate} \item $A$ is local with maximal ideal $\mathfrak a = \mathfrak m$, \item $A$ has a dualizing complex, \item $\text{cd}(A, I) = 1$, \item for $y \in U \cap Y$ the module $\mathcal{F}_y^\wedge$ is finite locally free outside $V(I\mathcal{O}_{X, y}^\wedge)$, for example if $\mathcal{F}_n$ is a finite locally free $\mathcal{O}_U/I^n\mathcal{O}_U$-module, and \item one of the following is true \begin{enumerate} \item $A_f$ is $(S_2)$ and every irreducible component of $X$ not contained in $Y$ has dimension $\geq 4$, or \item if $\mathfrak p \not \in V(f)$ and $V(\mathfrak p) \cap V(f) \not = \{\mathfrak m\}$, then $\text{depth}(A_\mathfrak p) + \dim(A/\mathfrak p) > 3$. \end{enumerate} \end{enumerate} Then $(\mathcal{F}_n)$ satisfies the $(2, 3)$-inequalities. \end{lemma} 
\begin{lemma} \label{lemma-divide-torsion-formal-coherent-module} In the situation above assume $X$ locally has a dualizing complex. Let $T \subset Y$ be a subset stable under specialization. Assume for $y \in T$ and for a nonmaximal prime $\mathfrak p \subset \mathcal{O}_{X, y}^\wedge$ with $V(\mathfrak p) \cap V(\mathcal{I}^\wedge_y) = \{\mathfrak m_y^\wedge\}$ we have $$ \text{depth}_{(\mathcal{O}_{X, y})_\mathfrak p} ((\mathcal{F}^\wedge_y)_\mathfrak p) > 0 $$ Then there exists a canonical map $(\mathcal{F}_n) \to (\mathcal{F}_n')$ of inverse systems of coherent $\mathcal{O}_X$-modules with the following properties \begin{enumerate} \item for $y \in T$ we have $\text{depth}(\mathcal{F}'_{n, y}) \geq 1$, \item $(\mathcal{F}'_n)$ is isomorphic as a pro-system to an object $(\mathcal{G}_n)$ of $\textit{Coh}(X, \mathcal{I})$, \item the induced morphism $(\mathcal{F}_n) \to (\mathcal{G}_n)$ of $\textit{Coh}(X, \mathcal{I})$ is surjective with kernel annihilated by a power of $\mathcal{I}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-improvement-formal-coherent-module-better} In the situation above assume $X$ locally has a dualizing complex. Let $T' \subset T \subset Y$ be subsets stable under specialization. Let $d \geq 0$ be an integer. Assume \begin{enumerate} \item[(a)] affine locally we have $X = \Spec(A_0)$ and $Y = V(I_0)$ and $\text{cd}(A_0, I_0) \leq d$, \item[(b)] for $y \in T$ and a nonmaximal prime $\mathfrak p \subset \mathcal{O}_{X, y}^\wedge$ with $V(\mathfrak p) \cap V(\mathcal{I}_y^\wedge) = \{\mathfrak m_y^\wedge\}$ we have $$ \text{depth}_{(\mathcal{O}_{X, y})_\mathfrak p} ((\mathcal{F}^\wedge_y)_\mathfrak p) > 0 $$ \item[(c)] for $y \in T'$ and for a prime $\mathfrak p \subset \mathcal{O}_{X, y}^\wedge$ with $\mathfrak p \not \in V(\mathcal{I}_y^\wedge)$ and $V(\mathfrak p) \cap V(\mathcal{I}_y^\wedge) \not = \{\mathfrak m_y^\wedge\}$ we have $$ \text{depth}_{(\mathcal{O}_{X, y})_\mathfrak p} ((\mathcal{F}^\wedge_y)_\mathfrak p) \geq 1 \quad\text{or}\quad \text{depth}_{(\mathcal{O}_{X, y})_\mathfrak p} ((\mathcal{F}^\wedge_y)_\mathfrak p) + \dim(\mathcal{O}_{X, y}^\wedge/\mathfrak p) > 1 + d $$ \item[(d)] for $y \in T'$ and a nonmaximal prime $\mathfrak p \subset \mathcal{O}_{X, y}^\wedge$ with $V(\mathfrak p) \cap V(\mathcal{I}_y^\wedge) = \{\mathfrak m_y^\wedge\}$ we have $$ \text{depth}_{(\mathcal{O}_{X, y})_\mathfrak p} ((\mathcal{F}^\wedge_y)_\mathfrak p) > 1 $$ \item[(e)] if $y \leadsto y'$ is an immediate specialization and $y' \in T'$, then $y \in T$. \end{enumerate} Then there exists a canonical map $(\mathcal{F}_n) \to (\mathcal{F}_n'')$ of inverse systems of coherent $\mathcal{O}_X$-modules with the following properties \begin{enumerate} \item for $y \in T$ we have $\text{depth}(\mathcal{F}''_{n, y}) \geq 1$, \item for $y' \in T'$ we have $\text{depth}(\mathcal{F}''_{n, y'}) \geq 2$, \item $(\mathcal{F}''_n)$ is isomorphic as a pro-system to an object $(\mathcal{H}_n)$ of $\textit{Coh}(X, \mathcal{I})$, \item the induced morphism $(\mathcal{F}_n) \to (\mathcal{H}_n)$ of $\textit{Coh}(X, \mathcal{I})$ has kernel and cokernel annihilated by a power of $\mathcal{I}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-improvement-application} In Situation \ref{situation-algebraize} assume that $A$ has a dualizing complex. Let $d \geq \text{cd}(A, I)$. Let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume $(\mathcal{F}_n)$ satisfies the $(2, 2 + d)$-inequalities, see Definition \ref{definition-s-d-inequalities}. Then there exists a canonical map $(\mathcal{F}_n) \to (\mathcal{F}_n'')$ of inverse systems of coherent $\mathcal{O}_U$-modules with the following properties \begin{enumerate} \item if $\text{depth}(\mathcal{F}''_{n, y}) + \delta^Y_Z(y) \geq 3$ for all $y \in U \cap Y$, \item $(\mathcal{F}''_n)$ is isomorphic as a pro-system to an object $(\mathcal{H}_n)$ of $\textit{Coh}(U, I\mathcal{O}_U)$, \item the induced morphism $(\mathcal{F}_n) \to (\mathcal{H}_n)$ of $\textit{Coh}(U, I\mathcal{O}_U)$ has kernel and cokernel annihilated by a power of $I$, \item the modules $H^0(U, \mathcal{F}''_n)$ and $H^1(U, \mathcal{F}''_n)$ are finite $A$-modules for all $n$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-cd-1-canonical} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume \begin{enumerate} \item $A$ has a dualizing complex and $\text{cd}(A, I) = 1$, \item $(\mathcal{F}_n)$ is pro-isomorphic to an inverse system $(\mathcal{F}_n'')$ of coherent $\mathcal{O}_U$-modules such that $\text{depth}(\mathcal{F}''_{n, y}) + \delta^Y_Z(y) \geq 3$ for all $y \in U \cap Y$. \end{enumerate} Then $(\mathcal{F}_n)$ extends canonically to $X$, see Definition \ref{definition-canonically-algebraizable}. \end{lemma} 
\begin{proposition}[Algebraization in cohomological dimension 1] \label{proposition-cd-1} \begin{reference} The local case of this result is \cite[IV Corollaire 2.9]{MRaynaud-book}. \end{reference} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume \begin{enumerate} \item $A$ has a dualizing complex and $\text{cd}(A, I) = 1$, \item $(\mathcal{F}_n)$ satisfies the $(2, 3)$-inequalities, see Definition \ref{definition-s-d-inequalities}. \end{enumerate} Then $(\mathcal{F}_n)$ extends to $X$. In particular, if $A$ is $I$-adically complete, then $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_U$-module. \end{proposition} 
\begin{lemma} \label{lemma-blowup} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume \begin{enumerate} \item $A$ has a dualizing complex, \item all fibres of the blowing up $b : X' \to X$ of $I$ have dimension $\leq d - 1$, \item one of the following is true \begin{enumerate} \item $(\mathcal{F}_n)$ satisfies the $(d + 1, d + 2)$-inequalities (Definition \ref{definition-s-d-inequalities}), or \item for $y \in U \cap Y$ and a prime $\mathfrak p \subset \mathcal{O}_{X, y}^\wedge$ with $\mathfrak p \not \in V(I\mathcal{O}_{X, y}^\wedge)$ we have $$ \text{depth}((\mathcal{F}^\wedge_y)_\mathfrak p) + \dim(\mathcal{O}_{X, y}^\wedge/\mathfrak p) + \delta^Y_Z(y) > d + 2 $$ \end{enumerate} \end{enumerate} Then $(\mathcal{F}_n)$ extends to $X$. \end{lemma} 
\begin{proposition}[Algebraization for ideals with few generators] \label{proposition-d-generators} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume \begin{enumerate} \item $A$ has a dualizing complex, \item $V(I) = V(f_1, \ldots, f_d)$ for some $d \geq 1$ and $f_1, \ldots, f_d \in A$, \item one of the following is true \begin{enumerate} \item $(\mathcal{F}_n)$ satisfies the $(d + 1, d + 2)$-inequalities (Definition \ref{definition-s-d-inequalities}), or \item for $y \in U \cap Y$ and a prime $\mathfrak p \subset \mathcal{O}_{X, y}^\wedge$ with $\mathfrak p \not \in V(I\mathcal{O}_{X, y}^\wedge)$ we have $$ \text{depth}((\mathcal{F}^\wedge_y)_\mathfrak p) + \dim(\mathcal{O}_{X, y}^\wedge/\mathfrak p) + \delta^Y_Z(y) > d + 2 $$ \end{enumerate} \end{enumerate} Then $(\mathcal{F}_n)$ extends to $X$. In particular, if $A$ is $I$-adically complete, then $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_U$-module.  \end{proposition} 
\begin{lemma} \label{lemma-interesting-case-final} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume \begin{enumerate} \item $A$ is a local ring which has a dualizing complex, \item all irreducible components of $X$ have the same dimension, \item the scheme $X \setminus Y$ is Cohen-Macaulay, \item $I$ is generated by $d$ elements, \item $\dim(X) - \dim(Z) > d + 2$, and \item for $y \in U \cap Y$ the module $\mathcal{F}_y^\wedge$ is finite locally free outside $V(I\mathcal{O}_{X, y}^\wedge)$, for example if $\mathcal{F}_n$ is a finite locally free $\mathcal{O}_U/I^n\mathcal{O}_U$-module. \end{enumerate} Then $(\mathcal{F}_n)$ extends to $X$. In particular if $A$ is $I$-adically complete, then $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_U$-module. \end{lemma} 
\begin{proposition} \label{proposition-algebraization-regular-sequence} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume \begin{enumerate} \item there exist $f_1, \ldots, f_d \in I$ such that for $y \in U \cap Y$ the ideal $I\mathcal{O}_{X, y}$ is generated by $f_1, \ldots, f_d$ and $f_1, \ldots, f_d$ form a $\mathcal{F}_y^\wedge$-regular sequence, \item $H^0(U, \mathcal{F}_1)$ and $H^1(U, \mathcal{F}_1)$ are finite $A$-modules. \end{enumerate} Then $(\mathcal{F}_n)$ extends canonically to $X$. In particular, if $A$ is complete, then $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_U$-module. \end{proposition} 
\begin{proposition} \label{proposition-algebraization-flat} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume there is Noetherian local ring $(R, \mathfrak m)$ and a ring map $R \to A$ such that \begin{enumerate} \item $I = \mathfrak m A$, \item for $y \in U \cap Y$ the stalk $\mathcal{F}_y^\wedge$ is $R$-flat, \item $H^0(U, \mathcal{F}_1)$ and $H^1(U, \mathcal{F}_1)$ are finite $A$-modules. \end{enumerate} Then $(\mathcal{F}_n)$ extends canonically to $X$. In particular, if $A$ is complete, then $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_U$-module. \end{proposition} 
\begin{lemma} \label{lemma-equivalence-better} In Situation \ref{situation-algebraize} assume \begin{enumerate} \item $A$ has a dualizing complex and is $I$-adically complete, \item $I = (f)$ generated by a single element, \item $A$ is local with maximal ideal $\mathfrak a = \mathfrak m$, \item one of the following is true \begin{enumerate} \item $A_f$ is $(S_2)$ and for $\mathfrak p \subset A$, $f \not \in \mathfrak p$ minimal we have $\dim(A/\mathfrak p) \geq 4$, or \item if $\mathfrak p \not \in V(f)$ and $V(\mathfrak p) \cap V(f) \not = \{\mathfrak m\}$, then $\text{depth}(A_\mathfrak p) + \dim(A/\mathfrak p) > 3$. \end{enumerate} \end{enumerate} Then with $U_0 = U \cap V(f)$ the completion functor $$ \colim_{U_0 \subset U' \subset U\text{ open}} \textit{Coh}(\mathcal{O}_{U'}) \longrightarrow \textit{Coh}(U, f\mathcal{O}_U) $$ is an equivalence on the full subcategories of finite locally free objects. \end{lemma} 
\begin{lemma} \label{lemma-equivalence} In Situation \ref{situation-algebraize} assume \begin{enumerate} \item $I = (f)$ is principal, \item $A$ is $f$-adically complete, \item $f$ is a nonzerodivisor, \item $H^1_\mathfrak a(A/fA)$ and $H^2_\mathfrak a(A/fA)$ are finite $A$-modules. \end{enumerate} Then with $U_0 = U \cap V(f)$ the completion functor $$ \colim_{U_0 \subset U' \subset U\text{ open}} \textit{Coh}(\mathcal{O}_{U'}) \longrightarrow \textit{Coh}(U, f\mathcal{O}_U) $$ is an equivalence on the full subcategories of finite locally free objects. \end{lemma} 
\begin{lemma} \label{lemma-prepare-chi-triple} For any coherent triple $(\mathcal{F}, \mathcal{F}_0, \alpha)$ there exists a coherent $\mathcal{O}_X$-module $\mathcal{F}'$ such that $f : \mathcal{F}' \to \mathcal{F}'$ is injective, an isomorphism $\alpha' : \mathcal{F}'|_U \to \mathcal{F}$, and a map $\alpha'_0 : \mathcal{F}'/f\mathcal{F}' \to \mathcal{F}_0$ such that $\alpha \circ (\alpha' \bmod f) = \alpha'_0|_{U_0}$. \end{lemma} 
\begin{lemma} \label{lemma-well-defined-chi-triple} The quantity $\chi(\mathcal{F}, \mathcal{F}_0, \alpha)$ in (\ref{equation-chi-triple}) does not depend on the choice of $\mathcal{F}', \alpha', \alpha'_0$ as in Lemma \ref{lemma-prepare-chi-triple}. \end{lemma} 
\begin{lemma} \label{lemma-ses-chi-triple} We have $\chi(\mathcal{G}, \mathcal{G}_0, \beta) = \chi(\mathcal{F}, \mathcal{F}_0, \alpha) + \chi(\mathcal{H}, \mathcal{H}_0, \gamma)$ if $$ 0 \to (\mathcal{F}, \mathcal{F}_0, \alpha) \to (\mathcal{G}, \mathcal{G}_0, \beta) \to (\mathcal{H}, \mathcal{H}_0, \gamma) \to 0 $$ is a short exact sequence of coherent triples. \end{lemma} 
\begin{proposition} \label{proposition-hilbert-triple} Let $(\mathcal{F}, \mathcal{F}_0, \alpha)$ be a coherent triple. Let $(\mathcal{L}, \mathcal{L}_0, \lambda)$ be an invertible coherent triple. Then the function $$ \mathbf{Z} \longrightarrow \mathbf{Z},\quad n \longmapsto \chi((\mathcal{F}, \mathcal{F}_0, \alpha) \otimes (\mathcal{L}, \mathcal{L}_0, \lambda)^{\otimes n}) $$ is a polynomial of degree $\leq \dim(\text{Supp}(\mathcal{F}))$. \end{proposition} 
\begin{lemma} \label{lemma-nonnegative-chi-triple} Assume $\text{depth}(A) \geq 3$ or equivalently $\text{depth}(A/fA) \geq 2$. Let $(\mathcal{L}, \mathcal{L}_0, \lambda)$ be an invertible coherent triple. Then $$ \chi(\mathcal{L}, \mathcal{L}_0, \lambda) = \text{length}_A \Coker(\Gamma(U, \mathcal{L}) \to \Gamma(U_0, \mathcal{L}_0)) $$ and in particular this is $\geq 0$. Moreover,  $\chi(\mathcal{L}, \mathcal{L}_0, \lambda) = 0$ if and only if $\mathcal{L} \cong \mathcal{O}_U$. \end{lemma} 
\begin{lemma} \label{lemma-injective-torsion-in-pic} Let $(A, \mathfrak m)$ be a Noetherian local ring. Let $f \in \mathfrak m$ be a nonzerodivisor and assume that $\text{depth}(A/fA) \geq 2$, or equivalently $\text{depth}(A) \geq 3$. Let $U$, resp.\ $U_0$ be the punctured spectrum of $A$, resp.\ $A/fA$. The map $$ \Pic(U) \to \Pic(U_0) $$ is injective on torsion. \end{lemma} 
\begin{proposition}[Koll\'ar] \label{proposition-injective-pic} \begin{reference} \cite[Theorem 1.9]{Kollar-map-pic} \end{reference} Let $(A, \mathfrak m)$ be a Noetherian local ring. Let $f \in \mathfrak m$. Assume \begin{enumerate} \item $A$ has a dualizing complex, \item $f$ is a nonzerodivisor, \item $\text{depth}(A/fA) \geq 2$, or equivalently $\text{depth}(A) \geq 3$, \item if $f \in \mathfrak p \subset A$ is a prime ideal with $\dim(A/\mathfrak p) = 2$, then $\text{depth}(A_\mathfrak p) \geq 2$. \end{enumerate} Let $U$, resp.\ $U_0$ be the punctured spectrum of $A$, resp.\ $A/fA$. The map $$ \Pic(U) \to \Pic(U_0) $$ is injective. Finally, if (1), (2), (3), $A$ is $(S_2)$, and $\dim(A) \geq 4$, then (4) holds. \end{proposition} 
\begin{lemma} \label{lemma-surjective-Pic-first} Let $(A, \mathfrak m)$ be a Noetherian local ring and $f \in \mathfrak m$. Assume \begin{enumerate} \item $A$ is $f$-adically complete, \item $f$ is a nonzerodivisor, \item $H^1_\mathfrak m(A/fA)$ and $H^2_\mathfrak m(A/fA)$ are finite $A$-modules, and \item $H^3_\mathfrak m(A/fA) = 0$\footnote{Observe that (3) and (4) hold if $\text{depth}(A/fA) \geq 4$, or equivalently $\text{depth}(A) \geq 5$.}. \end{enumerate} Let $U$, resp.\ $U_0$ be the punctured spectrum of $A$, resp.\ $A/fA$. Then $$ \colim_{U_0 \subset U' \subset U\text{ open}} \Pic(U') \longrightarrow \Pic(U_0) $$ is surjective. \end{lemma} 
\begin{lemma} \label{lemma-surjective-Pic-first-better} Let $(A, \mathfrak m)$ be a Noetherian local ring and $f \in \mathfrak m$. Assume \begin{enumerate} \item the conditions of Lemma \ref{lemma-surjective-Pic-first} hold, and \item for every maximal ideal $\mathfrak p \subset A_f$ the punctured spectrum of $(A_f)_\mathfrak p$ has trivial Picard group. \end{enumerate} Let $U$, resp.\ $U_0$ be the punctured spectrum of $A$, resp.\ $A/fA$. Then $$ \Pic(U) \longrightarrow \Pic(U_0) $$ is surjective. \end{lemma} 
\begin{lemma} \label{lemma-local-pic-to-completion} Let $(A, \mathfrak m)$ be a Noetherian local ring of depth $\geq 2$. Let $A^\wedge$ be its completion. Let $U$, resp.\ $U^\wedge$ be the punctured spectrum of $A$, resp.\ $A^\wedge$. Then $\Pic(U) \to \Pic(U^\wedge)$ is injective. \end{lemma} 
\begin{lemma} \label{lemma-trivial-local-pic-regular} Let $(A, \mathfrak m)$ be a regular local ring. Then the Picard group of the punctured spectrum of $A$ is trivial. \end{lemma} 
\begin{proposition}[Grothendieck] \label{proposition-trivial-local-pic-complete-intersection} Let $(A, \mathfrak m)$ be a Noetherian local ring. If $A$ is a complete intersection of dimension $\geq 4$, then the Picard group of the punctured spectrum of $A$ is trivial. \end{proposition} 
\begin{proposition} \label{proposition-lefschetz} In the situation above assume there exists an integer $\sigma$ such that for all points $p \in P \setminus Q$ we have $$ \text{depth}(\mathcal{F}_p) + \dim(\overline{\{p\}}) > \sigma $$ Then the map $$ H^i(P, \mathcal{F}) \longrightarrow \lim H^i(Q_n, \mathcal{F}_n) $$ is an isomorphism for $0 \leq i < \sigma$. \end{proposition} 
\begin{lemma} \label{lemma-lefschetz-addendum} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $\mathcal{L}$ be an ample invertible $\mathcal{O}_X$-module. Let $s \in \Gamma(X, \mathcal{L})$. Let $Y = Z(s)$ be the zero scheme of $s$ with $n$th infinitesimal neighbourhood $Y_n = Z(s^n)$. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. Assume that for all $x \in X \setminus Y$ we have $$ \text{depth}(\mathcal{F}_x) + \dim(\overline{\{x\}}) > 1 $$ Then $\Gamma(V, \mathcal{F}) \to \lim \Gamma(Y_n, \mathcal{F}|_{Y_n})$ is an isomorphism for any open subscheme $V \subset X$ containing $Y$. \end{lemma} 
\begin{lemma} \label{lemma-Gm-equivariant-extend-canonically} In Situation \ref{situation-algebraize} let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(U, I\mathcal{O}_U)$. Assume \begin{enumerate} \item $A$ is a graded ring, $\mathfrak a = A_+$, and $I$ is a homogeneous ideal, \item $(\mathcal{F}_n) = (\widetilde{M_n}|_U)$ where $(M_n)$ is an inverse system of graded $A$-modules, and \item $(\mathcal{F}_n)$ extends canonically to $X$. \end{enumerate} Then there is a finite graded $A$-module $N$ such that \begin{enumerate} \item[(a)] the inverse systems $(N/I^nN)$ and $(M_n)$ are pro-isomorphic in the category of graded $A$-modules modulo $A_+$-power torsion modules, and \item[(b)] $(\mathcal{F}_n)$ is the completion of of the coherent module associated to $N$. \end{enumerate} \end{lemma} 
\begin{proposition} \label{proposition-lefschetz-existence} In the situation above let $(\mathcal{F}_n)$ be an object of $\textit{Coh}(P, \mathcal{I})$. Assume for all $q \in Q$ and for all primes $\mathfrak p \in \mathcal{O}_{P, q}^\wedge$, $\mathfrak p \not \in V(\mathcal{I}_q^\wedge)$ we have $$ \text{depth}((\mathcal{F}_q^\wedge)_\mathfrak p) + \dim(\mathcal{O}_{P, q}^\wedge/\mathfrak p) + \dim(\overline{\{q\}}) > 2 $$ Then $(\mathcal{F}_n)$ is the completion of a coherent $\mathcal{O}_P$-module. \end{proposition} 
\begin{proposition} \label{proposition-lefschetz-equivalence} Let $k$ be a field. Let $X$ be a proper scheme over $k$. Let $\mathcal{L}$ be an ample invertible $\mathcal{O}_X$-module and let $s \in \Gamma(X, \mathcal{L})$. Let $Y = Z(s)$ be the zero scheme of $s$ and denote $\mathcal{I} \subset \mathcal{O}_X$ the corresponding sheaf of ideals. Let $\mathcal{V}$ be the set of open subschemes of $X$ containing $Y$ ordered by reverse inclusion. Assume that for all $x \in X \setminus Y$ we have $$ \text{depth}(\mathcal{O}_{X, x}) + \dim(\overline{\{x\}}) > 2 $$ Then the completion functor $$ \colim_\mathcal{V} \textit{Coh}(\mathcal{O}_V) \longrightarrow \textit{Coh}(X, \mathcal{I}) $$ is an equivalence on the full subcategories of finite locally free objects. \end{proposition} 
