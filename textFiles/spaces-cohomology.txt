\begin{lemma} \label{lemma-higher-direct-image} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. If $f$ is quasi-compact and quasi-separated, then $R^if_*$ transforms quasi-coherent $\mathcal{O}_X$-modules into quasi-coherent $\mathcal{O}_Y$-modules. \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherence-higher-direct-images-application} Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-separated and quasi-compact morphism of algebraic spaces over $S$. For any quasi-coherent $\mathcal{O}_X$-module $\mathcal{F}$ and any affine object $V$ of $Y_\etale$ we have $$ H^q(V \times_Y X, \mathcal{F}) = H^0(V, R^qf_*\mathcal{F}) $$ for all $q \in \mathbf{Z}$. \end{lemma} 
\begin{lemma} \label{lemma-finite-higher-direct-image-zero} Let $S$ be a scheme. Let $f : X \to Y$ be an integral (for example finite) morphism of algebraic spaces. Then $f_* : \textit{Ab}(X_\etale) \to \textit{Ab}(Y_\etale)$ is an exact functor and $R^pf_* = 0$ for $p > 0$. \end{lemma} 
\begin{lemma} \label{lemma-stalk-push-finite} Let $S$ be a scheme. Let $f : X \to Y$ be a finite morphism of algebraic spaces over $S$. Let $\overline{y}$ be a geometric point of $Y$ with lifts $\overline{x}_1, \ldots, \overline{x}_n$ in $X$. Then $$ (f_*\mathcal{F})_{\overline{y}} = \prod\nolimits_{i = 1, \ldots, n} \mathcal{F}_{\overline{x}_i} $$ for any sheaf $\mathcal{F}$ on $X_\etale$. \end{lemma} 
\begin{lemma} \label{lemma-finite-rings} Let $S$ be a scheme. Let $\pi : X \to Y$ be a finite morphism of algebraic spaces over $S$. Let $\mathcal{A}$ be a sheaf of rings on $X_\etale$. Let $\mathcal{B}$ be a sheaf of rings on $Y_\etale$. Let $\varphi : \mathcal{B} \to \pi_*\mathcal{A}$ be a homomorphism of sheaves of rings so that we obtain a morphism of ringed topoi $$ f = (\pi, \varphi) : (\Sh(X_\etale), \mathcal{A}) \longrightarrow (\Sh(Y_\etale), \mathcal{B}). $$ For a sheaf of $\mathcal{A}$-modules $\mathcal{F}$ and a sheaf of $\mathcal{B}$-modules $\mathcal{G}$ the canonical map $$ \mathcal{G} \otimes_\mathcal{B} f_*\mathcal{F} \longrightarrow f_*(f^*\mathcal{G} \otimes_\mathcal{A} \mathcal{F}). $$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-projection-formula-finite} With $S$, $X$, $Y$, $\pi$, $\mathcal{A}$, $\mathcal{B}$, $\varphi$, and $f$ as in Lemma \ref{lemma-finite-rings} we have $$ K \otimes_\mathcal{B}^\mathbf{L} Rf_*M = Rf_*(Lf^*K \otimes_\mathcal{A}^\mathbf{L} M) $$ in $D(\mathcal{B})$ for any $K \in D(\mathcal{B})$ and $M \in D(\mathcal{A})$. \end{lemma} 
\begin{lemma} \label{lemma-colimits} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. If $X$ is quasi-compact and quasi-separated, then $$ \colim_i H^p(X, \mathcal{F}_i) \longrightarrow H^p(X, \colim_i \mathcal{F}_i) $$ is an isomorphism for every filtered diagram of abelian sheaves on $X_\etale$. \end{lemma} 
\begin{lemma} \label{lemma-colimit-cohomology} \begin{slogan} Higher direct images of qcqs morphisms commute with filtered colimits of sheaves. \end{slogan} Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-compact and quasi-separated morphism of algebraic spaces over $S$. Let $\mathcal{F} = \colim \mathcal{F}_i$ be a filtered colimit of abelian sheaves on $X_\etale$. Then for any $p \geq 0$ we have $$ R^pf_*\mathcal{F} = \colim R^pf_*\mathcal{F}_i. $$ \end{lemma} 
\begin{lemma} \label{lemma-finite-presentation-quasi-compact-colimit} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Let $I$ be a directed set and let $(\mathcal{F}_i, \varphi_{ii'})$ be a system over $I$ of $\mathcal{O}_X$-modules. Let $\mathcal{G}$ be an $\mathcal{O}_X$-module of finite presentation. Then we have $$ \colim_i \Hom_X(\mathcal{G}, \mathcal{F}_i) = \Hom_X(\mathcal{G}, \colim_i \mathcal{F}_i). $$ In particular, $\Hom_X(\mathcal{G}, -)$ commutes with filtered colimits in $\QCoh(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-product-is-tensor-product} Let $S$ be a scheme. Let $f_i : U_i \to X$ be \'etale morphisms of algebraic spaces over $S$. Then there are isomorphisms $$ f_{1, !}\underline{\mathbf{Z}} \otimes_{\mathbf{Z}} f_{2, !}\underline{\mathbf{Z}} \longrightarrow f_{12, !}\underline{\mathbf{Z}} $$ where $f_{12} : U_1 \times_X U_2 \to X$ is the structure morphism and $$ (f_1 \amalg f_2)_! \underline{\mathbf{Z}} \longrightarrow f_{1, !}\underline{\mathbf{Z}} \oplus f_{2, !}\underline{\mathbf{Z}} $$ \end{lemma} 
\begin{definition} \label{definition-alternating-cech-complex} Let $S$ be a scheme. Let $f : U \to X$ be a surjective \'etale morphism of algebraic spaces over $S$. Let $\mathcal{F}$ be an object of $\textit{Ab}(X_\etale)$. The {\it alternating {\v C}ech complex}\footnote{This may be nonstandard notation} $\check{\mathcal{C}}^\bullet_{alt}(f, \mathcal{F})$ associated to $\mathcal{F}$ and $f$ is the complex $$ \Hom(K^0, \mathcal{F}) \to \Hom(K^1, \mathcal{F}) \to \Hom(K^2, \mathcal{F}) \to \ldots $$ with Hom groups computed in $\textit{Ab}(X_\etale)$. \end{definition} 
\begin{lemma} \label{lemma-alternating-cech-to-cohomology} Let $S$ be a scheme. Let $f : U \to X$ be a surjective \'etale morphism of algebraic spaces over $S$. Let $\mathcal{F}$ be an object of $\textit{Ab}(X_\etale)$. There exists a canonical map $$ \check{\mathcal{C}}^\bullet_{alt}(f, \mathcal{F}) \longrightarrow R\Gamma(X, \mathcal{F}) $$ in $D(\textit{Ab})$. Moreover, there is a spectral sequence with $E_1$-page $$ E_1^{p, q} = \Ext_{\textit{Ab}(X_\etale)}^q(K^p, \mathcal{F}) $$ converging to $H^{p + q}(X, \mathcal{F})$ where $K^p = \wedge^{p + 1}f_!\underline{\mathbf{Z}}$. \end{lemma} 
\begin{lemma} \label{lemma-compute} Let $S$ be a scheme. Let $f : U \to X$ be a surjective, \'etale, and separated morphism of algebraic spaces over $S$. For $p \geq 0$ set $$ W_p = U \times_X \ldots \times_X U \setminus \text{all diagonals} $$ where the fibre product has $p + 1$ factors. There is a free action of $S_{p + 1}$ on $W_p$ over $X$ and $$ \Hom(K^p, \mathcal{F}) = S_{p + 1}\text{-anti-invariant elements of } \mathcal{F}(W_p) $$ functorially in $\mathcal{F}$ where $K^p = \wedge^{p + 1}f_!\underline{\mathbf{Z}}$. \end{lemma} 
\begin{lemma} \label{lemma-twist} Let $S$ be a scheme. Let $W$ be an algebraic space over $S$. Let $G$ be a finite group acting freely on $W$. Let $U = W/G$, see Properties of Spaces, Lemma \ref{spaces-properties-lemma-quotient}. Let $\chi : G \to \{+1, -1\}$ be a character. Then there exists a rank 1 locally free sheaf of $\mathbf{Z}$-modules $\underline{\mathbf{Z}}(\chi)$ on $U_\etale$ such that for every abelian sheaf $\mathcal{F}$ on $U_\etale$ we have $$ H^0(W, \mathcal{F}|_W)^\chi = H^0(U, \mathcal{F} \otimes_{\mathbf{Z}} \underline{\mathbf{Z}}(\chi)) $$ \end{lemma} 
\begin{lemma} \label{lemma-alternating-spectral-sequence} Let $S$ be a scheme. Let $f : U \to X$ be a surjective, \'etale, and separated morphism of algebraic spaces over $S$. For $p \geq 0$ set $$ W_p = U \times_X \ldots \times_X U \setminus \text{all diagonals} $$ (with $p + 1$ factors) as in Lemma \ref{lemma-compute}. Let $\chi_p : S_{p + 1} \to \{+1, -1\}$ be the sign character. Let $U_p = W_p/S_{p + 1}$ and $\underline{\mathbf{Z}}(\chi_p)$ be as in Lemma \ref{lemma-twist}. Then the spectral sequence of Lemma \ref{lemma-alternating-cech-to-cohomology} has $E_1$-page $$ E_1^{p, q} = H^q(U_p, \mathcal{F}|_{U_p} \otimes_\mathbf{Z} \underline{\mathbf{Z}}(\chi_p)) $$ and converges to $H^{p + q}(X, \mathcal{F})$. \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherent-twist} With $S$, $W$, $G$, $U$, $\chi$ as in Lemma \ref{lemma-twist}. If $\mathcal{F}$ is a quasi-coherent $\mathcal{O}_U$-module, then so is $\mathcal{F} \otimes_{\mathbf{Z}} \underline{\mathbf{Z}}(\chi)$. \end{lemma} 
\begin{proposition} \label{proposition-vanishing} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Assume $X$ is quasi-compact and separated. Let $U$ be an affine scheme, and let $f : U \to X$ be a surjective \'etale morphism. Let $d$ be an upper bound for the size of the fibres of $|U| \to |X|$. Then for any quasi-coherent $\mathcal{O}_X$-module $\mathcal{F}$ we have $H^q(X, \mathcal{F}) = 0$ for $q \geq d$. \end{proposition} 
\begin{lemma} \label{lemma-vanishing-quasi-separated} Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Assume $X$ is quasi-compact and quasi-separated. Then we can choose \begin{enumerate} \item an affine scheme $U$, \item a surjective \'etale morphism $f : U \to X$, \item an integer $d$ bounding the degrees of the fibres of $U \to X$, \item for every $p = 0, 1, \ldots, d$ a surjective \'etale morphism $V_p \to U_p$ from an affine scheme $V_p$ where $U_p$ is as in Lemma \ref{lemma-alternating-spectral-sequence}, and \item an integer $d_p$ bounding the degree of the fibres of $V_p \to U_p$. \end{enumerate} Moreover, whenever we have (1) -- (5), then for any quasi-coherent $\mathcal{O}_X$-module $\mathcal{F}$ we have $H^q(X, \mathcal{F}) = 0$ for $q \geq \max(d_p + p)$. \end{lemma} 
\begin{lemma} \label{lemma-vanishing-higher-direct-images} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume that \begin{enumerate} \item $f$ is quasi-compact and quasi-separated, and \item $Y$ is quasi-compact. \end{enumerate} Then there exists an integer $n(X \to Y)$ such that for any algebraic space $Y'$, any morphism $Y' \to Y$ and any quasi-coherent sheaf $\mathcal{F}'$ on $X' = Y' \times_Y X$ the higher direct images $R^if'_*\mathcal{F}'$ are zero for $i \geq n(X \to Y)$. \end{lemma} 
\begin{lemma} \label{lemma-affine-vanishing-higher-direct-images} Let $S$ be a scheme. Let $f : X \to Y$ be an affine morphism of algebraic spaces over $S$. Then $R^if_*\mathcal{F} = 0$ for $i > 0$ and any quasi-coherent $\mathcal{O}_X$-module $\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-relative-affine-cohomology} Let $S$ be a scheme. Let $f : X \to Y$ be an affine morphism of algebraic spaces over $S$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Then $H^i(X, \mathcal{F}) = H^i(Y, f_*\mathcal{F})$ for all $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-sections-with-support-acyclic} Let $S$ be a scheme. Let $i : Z \to X$ be a closed immersion of algebraic spaces over $S$. Let $\mathcal{I}$ be an injective abelian sheaf on $X_\etale$. Then $\mathcal{H}_Z(\mathcal{I})$ is an injective abelian sheaf on $Z_\etale$. \end{lemma} 
\begin{lemma} \label{lemma-cohomology-with-support-sheaf-on-support} Let $S$ be a scheme. Let $i : Z \to X$ be a closed immersion of algebraic spaces over $S$. Let $\mathcal{G}$ be an injective abelian sheaf on $Z_\etale$. Then $\mathcal{H}^p_Z(i_*\mathcal{G}) = 0$ for $p > 0$. \end{lemma} 
\begin{lemma} \label{lemma-etale-localization-sheaf-with-support} Let $S$ be a scheme. Let $f : X \to Y$ be an \'etale morphism of algebraic spaces over $S$. Let $Z \subset Y$ be a closed subspace such that $f^{-1}(Z) \to Z$ is an isomorphism of algebraic spaces. Let $\mathcal{F}$ be an abelian sheaf on $X$. Then $$ \mathcal{H}^q_Z(\mathcal{F}) = \mathcal{H}^q_{f^{-1}(Z)}(f^{-1}\mathcal{F}) $$ as abelian sheaves on $Z = f^{-1}(Z)$ and we have $H^q_Z(Y, \mathcal{F}) = H^q_{f^{-1}(Z)}(X, f^{-1}\mathcal{F})$. \end{lemma} 
\begin{lemma} \label{lemma-complexes-with-support-on-closed} Let $S$ be a scheme. Let $i : Z \to X$ be a closed immersion of algebraic spaces over $S$. The map $Ri_* = i_* : D(Z_\etale) \to D(X_\etale)$ induces an equivalence $D(Z_\etale) \to D_{|Z|}(X_\etale)$ with quasi-inverse $$ i^{-1}|_{D_Z(X_\etale)} = R\mathcal{H}_Z|_{D_{|Z|}(X_\etale)} $$ \end{lemma} 
\begin{lemma} \label{lemma-vanishing-above-dimension} Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated algebraic space over $S$. Assume $\dim(X) \leq d$ for some integer $d$. Let $\mathcal{F}$ be a quasi-coherent sheaf $\mathcal{F}$ on $X$. \begin{enumerate} \item $H^q(X, \mathcal{F}) = 0$ for $q > d$, \item $H^d(X, \mathcal{F}) \to H^d(U, \mathcal{F})$ is surjective for any quasi-compact open $U \subset X$, \item $H^q_Z(X, \mathcal{F}) = 0$ for $q > d$ for any closed subspace $Z \subset X$ whose complement is quasi-compact. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-affine-base-change} Let $S$ be a scheme. Let $f : X \to Y$ be an affine morphism of algebraic spaces over $S$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. In this case $f_*\mathcal{F} \cong Rf_*\mathcal{F}$ is a quasi-coherent sheaf, and for every diagram (\ref{equation-base-change-diagram}) we have $$ g^*f_*\mathcal{F} = f'_*(g')^*\mathcal{F}. $$ \end{lemma} 
\begin{lemma}[Flat base change] \label{lemma-flat-base-change-cohomology} Let $S$ be a scheme. Consider a cartesian diagram of algebraic spaces $$ \xymatrix{ X' \ar[d]_{f'} \ar[r]_{g'} & X \ar[d]^f \\ Y' \ar[r]^g & Y } $$ over $S$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module with pullback $\mathcal{F}' = (g')^*\mathcal{F}$. Assume that $g$ is flat and that $f$ is quasi-compact and quasi-separated. For any $i \geq 0$ \begin{enumerate} \item the base change map of Cohomology on Sites, Lemma \ref{sites-cohomology-lemma-base-change-map-flat-case} is an isomorphism $$ g^*R^if_*\mathcal{F} \longrightarrow R^if'_*\mathcal{F}', $$ \item if $Y = \Spec(A)$ and $Y' = \Spec(B)$, then $H^i(X, \mathcal{F}) \otimes_A B = H^i(X', \mathcal{F}')$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-coherent} Let $S$ be a scheme. Let $X$ be a locally Noetherian algebraic space over $S$. A quasi-coherent module $\mathcal{F}$ on $X$ is called {\it coherent} if $\mathcal{F}$ is a coherent $\mathcal{O}_X$-module on the site $X_\etale$ in the sense of Modules on Sites, Definition \ref{sites-modules-definition-site-local}. \end{definition} 
\begin{lemma} \label{lemma-coherent-Noetherian} Let $S$ be a scheme. Let $X$ be a locally Noetherian algebraic space over $S$. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module. The following are equivalent \begin{enumerate} \item $\mathcal{F}$ is coherent, \item $\mathcal{F}$ is a quasi-coherent, finite type $\mathcal{O}_X$-module, \item $\mathcal{F}$ is a finitely presented $\mathcal{O}_X$-module, \item for any \'etale morphism $\varphi : U \to X$ where $U$ is a scheme the pullback $\varphi^*\mathcal{F}$ is a coherent module on $U$, and \item there exists a surjective \'etale morphism $\varphi : U \to X$ where $U$ is a scheme such that the pullback $\varphi^*\mathcal{F}$ is a coherent module on $U$. \end{enumerate} In particular $\mathcal{O}_X$ is coherent, any invertible $\mathcal{O}_X$-module is coherent, and more generally any finite locally free $\mathcal{O}_X$-module is coherent. \end{lemma} 
\begin{lemma} \label{lemma-coherent-abelian-Noetherian} Let $S$ be a scheme. Let $X$ be a locally Noetherian algebraic space over $S$. The category of coherent $\mathcal{O}_X$-modules is abelian. More precisely, the kernel and cokernel of a map of coherent $\mathcal{O}_X$-modules are coherent. Any extension of coherent sheaves is coherent. \end{lemma} 
\begin{lemma} \label{lemma-coherent-Noetherian-quasi-coherent-sub-quotient} Let $S$ be a scheme. Let $X$ be a locally Noetherian algebraic space over $S$. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. Any quasi-coherent submodule of $\mathcal{F}$ is coherent. Any quasi-coherent quotient module of $\mathcal{F}$ is coherent. \end{lemma} 
\begin{lemma} \label{lemma-tensor-hom-coherent} Let $S$ be a scheme. Let $X$ be a locally Noetherian algebraic space over $S$,. Let $\mathcal{F}$, $\mathcal{G}$ be coherent $\mathcal{O}_X$-modules. The $\mathcal{O}_X$-modules $\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G}$ and $\SheafHom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{G})$ are coherent. \end{lemma} 
\begin{lemma} \label{lemma-local-isomorphism} Let $S$ be a scheme. Let $X$ be a locally Noetherian algebraic space over $S$. Let $\mathcal{F}$, $\mathcal{G}$ be coherent $\mathcal{O}_X$-modules. Let $\varphi : \mathcal{G} \to \mathcal{F}$ be a homomorphism of $\mathcal{O}_X$-modules. Let $\overline{x}$ be a geometric point of $X$ lying over $x \in |X|$. \begin{enumerate} \item If $\mathcal{F}_{\overline{x}} = 0$ then there exists an open neighbourhood $X' \subset X$ of $x$ such that $\mathcal{F}|_{X'} = 0$. \item If $\varphi_{\overline{x}} : \mathcal{G}_{\overline{x}} \to \mathcal{F}_{\overline{x}}$ is injective, then there exists an open neighbourhood $X' \subset X$ of $x$ such that $\varphi|_{X'}$ is injective. \item If $\varphi_{\overline{x}} : \mathcal{G}_{\overline{x}} \to \mathcal{F}_{\overline{x}}$ is surjective, then there exists an open neighbourhood $X' \subset X$ of $x$ such that $\varphi|_{X'}$ is surjective. \item If $\varphi_{\overline{x}} : \mathcal{G}_{\overline{x}} \to \mathcal{F}_{\overline{x}}$ is bijective, then there exists an open neighbourhood $X' \subset X$ of $x$ such that $\varphi|_{X'}$ is an isomorphism. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-coherent-support-closed} Let $S$ be a scheme. Let $X$ be a locally Noetherian algebraic space over $S$. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. Let $i : Z \to X$ be the scheme theoretic support of $\mathcal{F}$ and $\mathcal{G}$ the quasi-coherent $\mathcal{O}_Z$-module such that $i_*\mathcal{G} = \mathcal{F}$, see Morphisms of Spaces, Definition \ref{spaces-morphisms-definition-scheme-theoretic-support}. Then $\mathcal{G}$ is a coherent $\mathcal{O}_Z$-module. \end{lemma} 
\begin{lemma} \label{lemma-i-star-equivalence} Let $S$ be a scheme. Let $i : Z \to X$ be a closed immersion of locally Noetherian algebraic spaces over $S$. Let $\mathcal{I} \subset \mathcal{O}_X$ be the quasi-coherent sheaf of ideals cutting out $Z$. The functor $i_*$ induces an equivalence between the category of coherent $\mathcal{O}_X$-modules annihilated by $\mathcal{I}$ and the category of coherent $\mathcal{O}_Z$-modules. \end{lemma} 
\begin{lemma} \label{lemma-finite-pushforward-coherent} Let $S$ be a scheme. Let $f : X \to Y$ be a finite morphism of algebraic spaces over $S$ with $Y$ locally Noetherian. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. Assume $f$ is finite and $Y$ locally Noetherian. Then $R^pf_*\mathcal{F} = 0$ for $p > 0$ and $f_*\mathcal{F}$ is coherent. \end{lemma} 
\begin{lemma} \label{lemma-acc-coherent} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. The ascending chain condition holds for quasi-coherent submodules of $\mathcal{F}$. In other words, given any sequence $$ \mathcal{F}_1 \subset \mathcal{F}_2 \subset \ldots \subset \mathcal{F} $$ of quasi-coherent submodules, then $\mathcal{F}_n = \mathcal{F}_{n + 1} = \ldots $ for some $n \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-power-ideal-kills-sheaf} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Let $\mathcal{F}$ be a coherent sheaf on $X$. Let $\mathcal{I} \subset \mathcal{O}_X$ be a quasi-coherent sheaf of ideals corresponding to a closed subspace $Z \subset X$. Then there is some $n \geq 0$ such that $\mathcal{I}^n\mathcal{F} = 0$ if and only if $\text{Supp}(\mathcal{F}) \subset Z$ (set theoretically). \end{lemma} 
\begin{lemma}[Artin-Rees] \label{lemma-Artin-Rees} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Let $\mathcal{F}$ be a coherent sheaf on $X$. Let $\mathcal{G} \subset \mathcal{F}$ be a quasi-coherent subsheaf. Let $\mathcal{I} \subset \mathcal{O}_X$ be a quasi-coherent sheaf of ideals. Then there exists a $c \geq 0$ such that for all $n \geq c$ we have $$ \mathcal{I}^{n - c}(\mathcal{I}^c\mathcal{F} \cap \mathcal{G}) = \mathcal{I}^n\mathcal{F} \cap \mathcal{G} $$ \end{lemma} 
\begin{lemma} \label{lemma-homs-over-open} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Let $\mathcal{G}$ be a coherent $\mathcal{O}_X$-module. Let $\mathcal{I} \subset \mathcal{O}_X$ be a quasi-coherent sheaf of ideals. Denote $Z \subset X$ the corresponding closed subspace and set $U = X \setminus Z$. There is a canonical isomorphism $$ \colim_n \Hom_{\mathcal{O}_X}(\mathcal{I}^n\mathcal{G}, \mathcal{F}) \longrightarrow \Hom_{\mathcal{O}_U}(\mathcal{G}|_U, \mathcal{F}|_U). $$ In particular we have an isomorphism $$ \colim_n \Hom_{\mathcal{O}_X}(\mathcal{I}^n, \mathcal{F}) \longrightarrow \Gamma(U, \mathcal{F}). $$ \end{lemma} 
\begin{lemma} \label{lemma-prepare-filter-support} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Let $\mathcal{F}$ be a coherent sheaf on $X$. Suppose that $\text{Supp}(\mathcal{F}) = Z \cup Z'$ with $Z$, $Z'$ closed. Then there exists a short exact sequence of coherent sheaves $$ 0 \to \mathcal{G}' \to \mathcal{F} \to \mathcal{G} \to 0 $$ with $\text{Supp}(\mathcal{G}') \subset Z'$ and $\text{Supp}(\mathcal{G}) \subset Z$. \end{lemma} 
\begin{lemma} \label{lemma-prepare-filter-irreducible} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Let $\mathcal{F}$ be a coherent sheaf on $X$. Assume that the scheme theoretic support of $\mathcal{F}$ is a reduced $Z \subset X$ with $|Z|$ irreducible. Then there exist an integer $r > 0$, a nonzero sheaf of ideals $\mathcal{I} \subset \mathcal{O}_Z$, and an injective map of coherent sheaves $$ i_*\left(\mathcal{I}^{\oplus r}\right) \to \mathcal{F} $$ whose cokernel is supported on a proper closed subspace of $Z$. \end{lemma} 
\begin{lemma} \label{lemma-coherent-filter} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Let $\mathcal{F}$ be a coherent sheaf on $X$. There exists a filtration $$ 0 = \mathcal{F}_0 \subset \mathcal{F}_1 \subset \ldots \subset \mathcal{F}_m = \mathcal{F} $$ by coherent subsheaves such that for each $j = 1, \ldots, m$ there exists a reduced closed subspace $Z_j \subset X$ with $|Z_j|$ irreducible and a sheaf of ideals $\mathcal{I}_j \subset \mathcal{O}_{Z_j}$ such that $$ \mathcal{F}_j/\mathcal{F}_{j - 1} \cong (Z_j \to X)_* \mathcal{I}_j $$ \end{lemma} 
\begin{lemma} \label{lemma-property-initial} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Let $\mathcal{P}$ be a property of coherent sheaves on $X$. Assume \begin{enumerate} \item For any short exact sequence of coherent sheaves $$ 0 \to \mathcal{F}_1 \to \mathcal{F} \to \mathcal{F}_2 \to 0 $$ if $\mathcal{F}_i$, $i = 1, 2$ have property $\mathcal{P}$ then so does $\mathcal{F}$. \item For every reduced closed subspace $Z \subset X$ with $|Z|$ irreducible and every quasi-coherent sheaf of ideals $\mathcal{I} \subset \mathcal{O}_Z$ we have $\mathcal{P}$ for $i_*\mathcal{I}$. \end{enumerate} Then property $\mathcal{P}$ holds for every coherent sheaf on $X$. \end{lemma} 
\begin{lemma} \label{lemma-property-higher-rank-cohomological} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Let $\mathcal{P}$ be a property of coherent sheaves on $X$. Assume \begin{enumerate} \item For any short exact sequence of coherent sheaves $$ 0 \to \mathcal{F}_1 \to \mathcal{F} \to \mathcal{F}_2 \to 0 $$ if $\mathcal{F}_i$, $i = 1, 2$ have property $\mathcal{P}$ then so does $\mathcal{F}$. \item If $\mathcal{P}$ holds for $\mathcal{F}^{\oplus r}$ for some $r \geq 1$, then it holds for $\mathcal{F}$. \item For every reduced closed subspace $i : Z \to X$ with $|Z|$ irreducible there exists a coherent sheaf $\mathcal{G}$ on $Z$ such that \begin{enumerate} \item $\text{Supp}(\mathcal{G}) = Z$, \item for every nonzero quasi-coherent sheaf of ideals $\mathcal{I} \subset \mathcal{O}_Z$ there exists a quasi-coherent subsheaf $\mathcal{G}' \subset \mathcal{I}\mathcal{G}$ such that $\text{Supp}(\mathcal{G}/\mathcal{G}')$ is proper closed in $|Z|$ and such that $\mathcal{P}$ holds for $i_*\mathcal{G}'$. \end{enumerate} \end{enumerate} Then property $\mathcal{P}$ holds for every coherent sheaf on $X$. \end{lemma} 
\begin{lemma} \label{lemma-property-higher-rank-cohomological-variant} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Let $\mathcal{P}$ be a property of coherent sheaves on $X$. Assume \begin{enumerate} \item For any short exact sequence of coherent sheaves on $X$ if two out of three have property $\mathcal{P}$ so does the third. \item If $\mathcal{P}$ holds  for $\mathcal{F}^{\oplus r}$ for some $r \geq 1$, then it holds for $\mathcal{F}$. \item For every reduced closed subspace $i : Z \to X$ with $|Z|$ irreducible there exists a coherent sheaf $\mathcal{G}$ on $X$ whose scheme theoretic support is $Z$ such that $\mathcal{P}$ holds for $\mathcal{G}$. \end{enumerate} Then property $\mathcal{P}$ holds for every coherent sheaf on $X$. \end{lemma} 
\begin{lemma} \label{lemma-directed-colimit-coherent} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Every quasi-coherent $\mathcal{O}_X$-module is the filtered colimit of its coherent submodules. \end{lemma} 
\begin{lemma} \label{lemma-direct-colimit-finite-presentation} Let $S$ be a scheme. Let $f : X \to Y$ be an affine morphism of algebraic spaces over $S$ with $Y$ Noetherian. Then every quasi-coherent $\mathcal{O}_X$-module is a filtered colimit of finitely presented $\mathcal{O}_X$-modules. \end{lemma} 
\begin{lemma} \label{lemma-vanishing-compute} In Situation \ref{situation-vanishing} for an $A$-module $M$ we have $p_*(M \otimes_A \mathcal{O}_X) = \widetilde{M}$ and $\Gamma(X, M \otimes_A \mathcal{O}_X) = M$. \end{lemma} 
\begin{lemma} \label{lemma-vanishing-base-change} In Situation \ref{situation-vanishing}. \begin{enumerate} \item Given an affine morphism $X' \to X$ of algebraic spaces, we have $H^1(X', \mathcal{F}') = 0$ for every quasi-coherent $\mathcal{O}_{X'}$-module $\mathcal{F}'$. \item Given an $A$-algebra $A'$ setting $X' = X \times_{\Spec(A)} \Spec(A')$ the morphism $X' \to X$ is affine and $\Gamma(X', \mathcal{O}_{X'}) = A'$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-vanishing-separate-closed} In Situation \ref{situation-vanishing}. Let $Z_0, Z_1 \subset |X|$ be disjoint closed subsets. Then there exists an $a \in A$ such that $Z_0 \subset V(a)$ and $Z_1 \subset V(a - 1)$. \end{lemma} 
\begin{lemma} \label{lemma-vanishing-injective} In Situation \ref{situation-vanishing} the morphism $p : X \to \Spec(A)$ is universally injective. \end{lemma} 
\begin{lemma} \label{lemma-vanishing-separated} In Situation \ref{situation-vanishing} the morphism $p : X \to \Spec(A)$ is separated. \end{lemma} 
\begin{proposition} \label{proposition-vanishing-affine} \begin{slogan} Serre's criterion for affineness in the setting of algebraic spaces. \end{slogan} A quasi-compact and quasi-separated algebraic space is affine if and only if all higher cohomology groups of quasi-coherent sheaves vanish. More precisely, any algebraic space as in Situation \ref{situation-vanishing} is an affine scheme. \end{proposition} 
\begin{lemma} \label{lemma-Noetherian-h1-zero} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Assume that for every coherent $\mathcal{O}_X$-module $\mathcal{F}$ we have $H^1(X, \mathcal{F}) = 0$. Then $X$ is an affine scheme. \end{lemma} 
\begin{lemma} \label{lemma-Noetherian-h1-zero-invertible} Let $S$ be a scheme. Let $X$ be a Noetherian algebraic space over $S$. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Assume that for every coherent $\mathcal{O}_X$-module $\mathcal{F}$ there exists an $n \geq 1$ such that $H^1(X, \mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}^{\otimes n}) = 0$. Then $X$ is a scheme and $\mathcal{L}$ is ample on $X$. \end{lemma} 
\begin{lemma} \label{lemma-finite-morphism-Noetherian} Let $S$ be a scheme. Let $f : Y \to X$ be a morphism of algebraic spaces over $S$. Assume $f$ is finite, surjective and $X$ locally Noetherian. Let $i : Z \to X$ be a closed immersion. Denote $i' : Z' \to Y$ the inverse image of $Z$ (Morphisms of Spaces, Section \ref{spaces-morphisms-section-closed-immersions}) and $f' : Z' \to Z$ the induced morphism. Then $\mathcal{G} = f'_*\mathcal{O}_{Z'}$ is a coherent $\mathcal{O}_Z$-module whose support is $Z$. \end{lemma} 
\begin{lemma} \label{lemma-affine-morphism-projection-ideal} Let $S$ be a scheme. Let $f : Y \to X$ be a morphism of algebraic spaces over $S$. Let $\mathcal{F}$ be a quasi-coherent sheaf on $Y$. Let $\mathcal{I}$ be a quasi-coherent sheaf of ideals on $X$. If $f$ is affine then $\mathcal{I}f_*\mathcal{F} = f_*(f^{-1}\mathcal{I}\mathcal{F})$ (with notation as explained in the proof). \end{lemma} 
\begin{lemma} \label{lemma-image-affine-finite-morphism-affine-Noetherian} Let $S$ be a scheme. Let $f : Y \to X$ be a morphism of algebraic spaces over $S$. Assume \begin{enumerate} \item $f$ finite, \item $f$ surjective, \item $Y$ affine, and \item $X$ Noetherian. \end{enumerate} Then $X$ is affine. \end{lemma} 
\begin{lemma} \label{lemma-weak-chow} Let $A$ be a ring. Let $X$ be an algebraic space over $\Spec(A)$ whose structure morphism $X \to \Spec(A)$ is separated of finite type. Then there exists a proper surjective morphism $X' \to X$ where $X'$ is a scheme which is H-quasi-projective over $\Spec(A)$. \end{lemma} 
\begin{lemma} \label{lemma-check-separated-dvr} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume \begin{enumerate} \item $Y$ is locally Noetherian, \item $f$ is locally of finite type and quasi-separated, \item for every commutative diagram $$ \xymatrix{ \Spec(K) \ar[r] \ar[d] & X \ar[d] \\ \Spec(A) \ar[r] \ar@{-->}[ru] & Y } $$ where $A$ is a discrete valuation ring and $K$ its fraction field, there is at most one dotted arrow making the diagram commute. \end{enumerate} Then $f$ is separated. \end{lemma} 
\begin{lemma} \label{lemma-check-proper-dvr} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume \begin{enumerate} \item $Y$ is locally Noetherian, \item $f$ is of finite type and quasi-separated, \item for every commutative diagram $$ \xymatrix{ \Spec(K) \ar[r] \ar[d] & X \ar[d] \\ \Spec(A) \ar[r] \ar@{-->}[ru] & Y } $$ where $A$ is a discrete valuation ring and $K$ its fraction field, there is a unique dotted arrow making the diagram commute. \end{enumerate} Then $f$ is proper. \end{lemma} 
\begin{lemma} \label{lemma-kill-by-twisting} Let $S$ be a scheme. Consider a commutative diagram $$ \xymatrix{ X \ar[r]_i \ar[rd]_f & \mathbf{P}^n_Y \ar[d] \\ & Y } $$ of algebraic spaces over $S$. Assume $i$ is a closed immersion and $Y$ Noetherian. Set $\mathcal{L} = i^*\mathcal{O}_{\mathbf{P}^n_Y}(1)$. Let $\mathcal{F}$ be a coherent module on $X$. Then there exists an integer $d_0$ such that for all $d \geq d_0$ we have $R^pf_*(\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}^{\otimes d}) = 0$ for all $p > 0$. \end{lemma} 
\begin{lemma} \label{lemma-proper-pushforward-coherent} Let $S$ be a scheme. Let $f : X \to Y$ be a proper morphism of algebraic spaces over $S$ with $Y$ locally Noetherian. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. Then $R^if_*\mathcal{F}$ is a coherent $\mathcal{O}_Y$-module for all $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-proper-over-affine-cohomology-finite} Let $A$ be a Noetherian ring. Let $f : X \to \Spec(A)$ be a proper morphism of algebraic spaces. Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module. Then $H^i(X, \mathcal{F})$ is finite $A$-module for all $i \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-graded-finiteness} Let $A$ be a Noetherian ring. Let $B$ be a finitely generated graded $A$-algebra. Let $f : X \to \Spec(A)$ be a proper morphism of algebraic spaces. Set $\mathcal{B} = f^*\widetilde B$. Let $\mathcal{F}$ be a quasi-coherent graded $\mathcal{B}$-module of finite type. For every $p \geq 0$ the graded $B$-module $H^p(X, \mathcal{F})$ is a finite $B$-module. \end{lemma} 
\begin{lemma} \label{lemma-vanshing-gives-ample} Let $R$ be a Noetherian ring. Let $X$ be a proper algebraic space over $R$. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. The following are equivalent \begin{enumerate} \item $X$ is a scheme and $\mathcal{L}$ is ample on $X$, \item for every coherent $\mathcal{O}_X$-module $\mathcal{F}$ there exists an $n_0 \geq 0$ such that $H^p(X, \mathcal{F} \otimes \mathcal{L}^{\otimes n}) = 0$ for all $n \geq n_0$ and $p > 0$, and \item for every coherent $\mathcal{O}_X$-module $\mathcal{F}$ there exists an $n \geq 1$ such that $H^1(X, \mathcal{F} \otimes \mathcal{L}^{\otimes n}) = 0$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-surjective-finite-morphism-ample} Let $R$ be a Noetherian ring. Let $f : Y \to X$ be a morphism of algebraic spaces proper over $R$. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Assume $f$ is finite and surjective. The following are equivalent \begin{enumerate} \item $X$ is a scheme and $\mathcal{L}$ is ample, and \item $Y$ is a scheme and $f^*\mathcal{L}$ is ample. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-cohomology-powers-ideal-times-F} In Situation \ref{situation-formal-functions}. Set $B = \bigoplus_{n \geq 0} I^n$. Then for every $p \geq 0$ the graded $B$-module $\bigoplus_{n \geq 0} H^p(X, I^n\mathcal{F})$ is a finite $B$-module. \end{lemma} 
\begin{lemma} \label{lemma-cohomology-powers-ideal-application} In Situation \ref{situation-formal-functions}. For every $p \geq 0$ there exists an integer $c \geq 0$ such that \begin{enumerate} \item the multiplication map $I^{n - c} \otimes H^p(X, I^c\mathcal{F}) \to H^p(X, I^n\mathcal{F})$ is surjective for all $n \geq c$, and \item the image of $H^p(X, I^{n + m}\mathcal{F}) \to H^p(X, I^n\mathcal{F})$ is contained in the submodule $I^{m - c} H^p(X, I^n\mathcal{F})$ for all $n \geq 0$, $m \geq c$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-ML-cohomology-powers-ideal} In Situation \ref{situation-formal-functions}. Fix $p \geq 0$. \begin{enumerate} \item There exists a $c_1 \geq 0$ such that for all $n \geq c_1$ we have $$ \Ker( H^p(X, \mathcal{F}) \to H^p(X, \mathcal{F}/I^n\mathcal{F}) ) \subset I^{n - c_1}H^p(X, \mathcal{F}). $$ \item The inverse system $$ \left(H^p(X, \mathcal{F}/I^n\mathcal{F})\right)_{n \in \mathbf{N}} $$ satisfies the Mittag-Leffler condition (see Homology, Definition \ref{homology-definition-Mittag-Leffler}). \item In fact for any $p$ and $n$ there exists a $c_2(n) \geq n$ such that $$ \Im(H^p(X, \mathcal{F}/I^k\mathcal{F}) \to H^p(X, \mathcal{F}/I^n\mathcal{F})) = \Im(H^p(X, \mathcal{F}) \to H^p(X, \mathcal{F}/I^n\mathcal{F})) $$ for all $k \geq c_2(n)$. \end{enumerate} \end{lemma} 
\begin{theorem}[Theorem on formal functions] \label{theorem-formal-functions} In Situation \ref{situation-formal-functions}. Fix $p \geq 0$. The system of maps $$ H^p(X, \mathcal{F})/I^nH^p(X, \mathcal{F}) \longrightarrow H^p(X, \mathcal{F}/I^n\mathcal{F}) $$ define an isomorphism of limits $$ H^p(X, \mathcal{F})^\wedge \longrightarrow \lim_n H^p(X, \mathcal{F}/I^n\mathcal{F}) $$ where the left hand side is the completion of the $A$-module $H^p(X, \mathcal{F})$ with respect to the ideal $I$, see Algebra, Section \ref{algebra-section-completion}. Moreover, this is in fact a homeomorphism for the limit topologies. \end{theorem} 
\begin{lemma} \label{lemma-spell-out-theorem-formal-functions} Let $A$ be a ring. Let $I \subset A$ be an ideal. Assume $A$ is Noetherian and complete with respect to $I$. Let $f : X \to \Spec(A)$ be a proper morphism of algebraic spaces. Let $\mathcal{F}$ be a coherent sheaf on $X$. Then $$ H^p(X, \mathcal{F}) = \lim_n H^p(X, \mathcal{F}/I^n\mathcal{F}) $$ for all $p \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-formal-functions-stalk} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$ and let $\mathcal{F}$ be a quasi-coherent sheaf on $X$. Assume \begin{enumerate} \item $Y$ locally Noetherian, \item $f$ proper, and \item $\mathcal{F}$ coherent. \end{enumerate} Let $\overline{y}$ be a geometric point of $Y$. Consider the ``infinitesimal neighbourhoods'' $$ \xymatrix{ X_n = \Spec(\mathcal{O}_{Y, \overline{y}}/\mathfrak m_{\overline{y}}^n) \times_Y X \ar[r]_-{i_n} \ar[d]_{f_n} & X \ar[d]^f \\ \Spec(\mathcal{O}_{Y, \overline{y}}/\mathfrak m_{\overline{y}}^n) \ar[r]^-{c_n} & Y } $$ of the fibre $X_1 = X_{\overline{y}}$ and set $\mathcal{F}_n = i_n^*\mathcal{F}$. Then we have $$ \left(R^pf_*\mathcal{F}\right)_{\overline{y}}^\wedge \cong \lim_n H^p(X_n, \mathcal{F}_n) $$ as $\mathcal{O}_{Y, \overline{y}}^\wedge$-modules. \end{lemma} 
\begin{lemma} \label{lemma-higher-direct-images-zero-finite-fibre} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Let $\overline{y}$ be a geometric point of $Y$. Assume \begin{enumerate} \item $Y$ locally Noetherian, \item $f$ is proper, and \item $X_{\overline{y}}$ has discrete underlying topological space. \end{enumerate} Then for any coherent sheaf $\mathcal{F}$ on $X$ we have $(R^pf_*\mathcal{F})_{\overline{y}} = 0$ for all $p > 0$. \end{lemma} 
\begin{lemma} \label{lemma-higher-direct-images-zero-above-dimension-fibre} \begin{slogan} For proper maps, stalks of higher direct images are trivial in degrees larger than the dimension of the fibre. \end{slogan} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Let $\overline{y}$ be a geometric point of $Y$. Assume \begin{enumerate} \item $Y$ locally Noetherian, \item $f$ is proper, and \item $\dim(X_{\overline{y}}) = d$. \end{enumerate} Then for any coherent sheaf $\mathcal{F}$ on $X$ we have $(R^pf_*\mathcal{F})_{\overline{y}} = 0$ for all $p > d$. \end{lemma} 
\begin{lemma} \label{lemma-characterize-finite} (For a more general version see More on Morphisms of Spaces, Lemma \ref{spaces-more-morphisms-lemma-characterize-finite}). Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume $Y$ is locally Noetherian. The following are equivalent \begin{enumerate} \item $f$ is finite, and \item $f$ is proper and $|X_k|$ is a discrete space for every morphism $\Spec(k) \to Y$ where $k$ is a field. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-proper-finite-fibre-finite-in-neighbourhood} (For a more general version see More on Morphisms of Spaces, Lemma \ref{spaces-more-morphisms-lemma-proper-finite-fibre-finite-in-neighbourhood}). Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Let $\overline{y}$ be a geometric point of $Y$. Assume \begin{enumerate} \item $Y$ is locally Noetherian, \item $f$ is proper, and \item $|X_{\overline{y}}|$ is finite. \end{enumerate} Then there exists an open neighbourhood $V \subset Y$ of $\overline{y}$ such that $f|_{f^{-1}(V)} : f^{-1}(V) \to V$ is finite. \end{lemma} 
