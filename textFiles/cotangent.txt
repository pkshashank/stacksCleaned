\begin{definition} \label{definition-standard-resolution} Let $A \to B$ be a ring map. The {\it standard resolution of $B$ over $A$} is the augmentation $\epsilon : P_\bullet \to B$ with terms $$ P_0 = A[B],\quad P_1 = A[A[B]],\quad \ldots $$ and maps as constructed above. \end{definition} 
\begin{definition} \label{definition-cotangent-complex-ring-map} The {\it cotangent complex} $L_{B/A}$ of a ring map $A \to B$ is the complex of $B$-modules associated to the simplicial $B$-module $$ \Omega_{P_\bullet/A} \otimes_{P_\bullet, \epsilon} B $$ where $\epsilon : P_\bullet \to B$ is the standard resolution of $B$ over $A$. \end{definition} 
\begin{lemma} \label{lemma-colimit-cotangent-complex} Let $A_i \to B_i$ be a system of ring maps over a directed index set $I$. Then $\colim L_{B_i/A_i} = L_{\colim B_i/\colim A_i}$. \end{lemma} 
\begin{lemma} \label{lemma-identify-pi-shriek} With notation as above let $P_\bullet$ be a simplicial $A$-algebra endowed with an augmentation $\epsilon : P_\bullet \to B$. Assume each $P_n$ is a polynomial algebra over $A$ and $\epsilon$ is a trivial Kan fibration on underlying simplicial sets. Then $$ L\pi_!(\mathcal{F}) = \mathcal{F}(P_\bullet, \epsilon) $$ in $D(\textit{Ab})$, resp.\ $D(B)$ functorially in $\mathcal{F}$ in $\textit{Ab}(\mathcal{C})$, resp.\ $\textit{Mod}(\underline{B})$. \end{lemma} 
\begin{lemma} \label{lemma-pi-shriek-standard} Let $A \to B$ be a ring map. Let $\epsilon : P_\bullet \to B$ be the standard resolution of $B$ over $A$. Let $\pi$ be as in (\ref{equation-pi}). Then $$ L\pi_!(\mathcal{F}) = \mathcal{F}(P_\bullet, \epsilon) $$ in $D(\textit{Ab})$, resp.\ $D(B)$ functorially in $\mathcal{F}$ in $\textit{Ab}(\mathcal{C})$, resp.\ $\textit{Mod}(\underline{B})$. \end{lemma} 
\begin{lemma} \label{lemma-compute-cotangent-complex} Let $A \to B$ be a ring map.  Let $\pi$ and $i$ be as in (\ref{equation-pi}). There is a canonical isomorphism $$ L_{B/A} = L\pi_!(Li^*\Omega_{\mathcal{O}/A}) = L\pi_!(i^*\Omega_{\mathcal{O}/A}) = L\pi_!(\Omega_{\mathcal{O}/A} \otimes_\mathcal{O} \underline{B}) $$ in $D(B)$. \end{lemma} 
\begin{lemma} \label{lemma-pi-lower-shriek-constant-sheaf} If $A \to B$ is a ring map, then $L\pi_!(\pi^{-1}M) = M$ with $\pi$ as in (\ref{equation-pi}). \end{lemma} 
\begin{lemma} \label{lemma-identify-H0} If $A \to B$ is a ring map, then $H^0(L_{B/A}) = \Omega_{B/A}$. \end{lemma} 
\begin{lemma} \label{lemma-pi-lower-shriek-polynomial-algebra} If $B$ is a polynomial algebra over the ring $A$, then with $\pi$ as in (\ref{equation-pi}) we have that $\pi_!$ is exact and $\pi_!\mathcal{F} = \mathcal{F}(B \to B)$. \end{lemma} 
\begin{lemma} \label{lemma-cotangent-complex-polynomial-algebra} If $B$ is a polynomial algebra over the ring $A$, then $L_{B/A}$ is quasi-isomorphic to $\Omega_{B/A}[0]$. \end{lemma} 
\begin{lemma} \label{lemma-polynomial} Let $A$ be a Noetherian ring. Let $A \to B$ be a finite type ring map. Let $\mathcal{A}$ be the category of $A$-algebra maps $C \to B$. Let $n \geq 0$ and let $P_\bullet$ be a simplicial object of $\mathcal{A}$ such that \begin{enumerate} \item $P_\bullet \to B$ is a trivial Kan fibration of simplicial sets, \item $P_k$ is finite type over $A$ for $k \leq n$, \item $P_\bullet = \text{cosk}_n \text{sk}_n P_\bullet$ as simplicial objects of $\mathcal{A}$. \end{enumerate} Then $P_{n + 1}$ is a finite type $A$-algebra. \end{lemma} 
\begin{proposition} \label{proposition-polynomial} Let $A$ be a Noetherian ring. Let $A \to B$ be a finite type ring map. There exists a simplicial $A$-algebra $P_\bullet$ with an augmentation $\epsilon : P_\bullet \to B$ such that each $P_n$ is a polynomial algebra of finite type over $A$ and such that $\epsilon$ is a trivial Kan fibration of simplicial sets. \end{proposition} 
\begin{lemma} \label{lemma-pi-shriek-finite} Let $A$ be a Noetherian ring. Let $A \to B$ be a finite type ring map. Let $\pi$, $\underline{B}$ be as in (\ref{equation-pi}). If $\mathcal{F}$ is an $\underline{B}$-module such that $\mathcal{F}(P, \alpha)$ is a finite $B$-module for all $\alpha : P = A[x_1, \ldots, x_n] \to B$, then the cohomology modules of $L\pi_!(\mathcal{F})$ are finite $B$-modules. \end{lemma} 
\begin{lemma} \label{lemma-cotangent-finite} Let $A$ be a Noetherian ring. Let $A \to B$ be a finite type ring map. Then $H^n(L_{B/A})$ is a finite $B$-module for all $n \in \mathbf{Z}$. \end{lemma} 
\begin{lemma} \label{lemma-O-homology-B-homology} Let $A \to B$ be a ring map. Let $\pi$, $\mathcal{O}$, $\underline{B}$ be as in (\ref{equation-pi}). For any $\mathcal{O}$-module $\mathcal{F}$ we have $$ L\pi_!(\mathcal{F}) = L\pi_!(Li^*\mathcal{F}) = L\pi_!(\mathcal{F} \otimes_\mathcal{O}^\mathbf{L} \underline{B}) $$ in $D(\textit{Ab})$. \end{lemma} 
\begin{lemma} \label{lemma-apply-O-B-comparison} Let $A \to B$ be a ring map. Let $\pi$, $\mathcal{O}$, $\underline{B}$ be as in (\ref{equation-pi}). We have $$ L\pi_!(\mathcal{O}) = L\pi_!(\underline{B}) = B \quad\text{and}\quad L_{B/A} = L\pi_!(\Omega_{\mathcal{O}/A} \otimes_\mathcal{O} \underline{B}) = L\pi_!(\Omega_{\mathcal{O}/A}) $$ in $D(\textit{Ab})$. \end{lemma} 
\begin{lemma} \label{lemma-special-case-triangle} Let $A \to B \to C$ be ring maps. If $B$ is a polynomial algebra over $A$, then there is a distinguished triangle  $L_{B/A} \otimes_B^\mathbf{L} C \to L_{C/A} \to L_{C/B} \to L_{B/A} \otimes_B^\mathbf{L} C[1]$ in $D(C)$. \end{lemma} 
\begin{lemma} \label{lemma-flat-base-change} Assume (\ref{equation-commutative-square}) induces a quasi-isomorphism $B \otimes_A^\mathbf{L} A' = B'$. Then, with notation as in (\ref{equation-double-square}) and $\mathcal{F}' \in \textit{Ab}(\mathcal{C}')$, we have $L\pi_!(g^{-1}\mathcal{F}') = L\pi'_!(\mathcal{F}')$. \end{lemma} 
\begin{lemma} \label{lemma-flat-base-change-cotangent-complex} If (\ref{equation-commutative-square}) induces a quasi-isomorphism $B \otimes_A^\mathbf{L} A' = B'$, then the functoriality map induces an isomorphism $$ L_{B/A} \otimes_B^\mathbf{L} B' \longrightarrow L_{B'/A'} $$ \end{lemma} 
\begin{lemma} \label{lemma-cotangent-complex-product} Let $A \to B$ and $A \to C$ be ring maps. Then the map $L_{B \times C/A} \to L_{B/A} \oplus L_{C/A}$ is an isomorphism in $D(B \times C)$. \end{lemma} 
\begin{lemma} \label{lemma-triangle-ses} With notation as in (\ref{equation-three-maps}) set $$ \begin{matrix} \Omega_1 = \Omega_{\mathcal{O}/A} \otimes_\mathcal{O} \underline{B} \text{ on }\mathcal{C}_{B/A} \\ \Omega_2 = \Omega_{\mathcal{O}/A} \otimes_\mathcal{O} \underline{C} \text{ on }\mathcal{C}_{C/A} \\ \Omega_3 = \Omega_{\mathcal{O}/B} \otimes_\mathcal{O} \underline{C} \text{ on }\mathcal{C}_{C/B} \end{matrix} $$ Then we have a canonical short exact sequence of sheaves of $\underline{C}$-modules $$ 0 \to g_1^{-1}\Omega_1 \otimes_{\underline{B}} \underline{C} \to g_2^{-1}\Omega_2 \to g_3^{-1}\Omega_3 \to 0 $$ on $\mathcal{C}_{C/B/A}$. \end{lemma} 
\begin{lemma} \label{lemma-polynomial-on-top} With notation as in (\ref{equation-three-maps}) suppose that $C$ is a polynomial algebra over $B$. Then $L\pi_!(g_3^{-1}\mathcal{F}) = L\pi_{3, !}\mathcal{F} = \pi_{3, !}\mathcal{F}$ for any abelian sheaf $\mathcal{F}$ on $\mathcal{C}_{C/B}$ \end{lemma} 
\begin{lemma} \label{lemma-triangle-compute-lower-shriek} With notation as in (\ref{equation-three-maps}) we have $Lg_{i, !} \circ g_i^{-1} = \text{id}$ for $i = 1, 2, 3$ and hence also $L\pi_! \circ g_i^{-1} = L\pi_{i, !}$ for $i = 1, 2, 3$. \end{lemma} 
\begin{proposition} \label{proposition-triangle} Let $A \to B \to C$ be ring maps. There is a canonical distinguished triangle $$ L_{B/A} \otimes_B^\mathbf{L} C \to L_{C/A} \to L_{C/B} \to L_{B/A} \otimes_B^\mathbf{L} C[1] $$ in $D(C)$. \end{proposition} 
\begin{lemma} \label{lemma-localize-at-bottom} Let $A \to A' \to B$ be ring maps such that $B = B \otimes_A^\mathbf{L} A'$. Then $L_{B/A} = L_{B/A'}$ in $D(B)$. \end{lemma} 
\begin{lemma} \label{lemma-derived-diagonal} Let $A \to B$ be a ring map such that $B = B \otimes_A^\mathbf{L} B$. Then $L_{B/A} = 0$ in $D(B)$. \end{lemma} 
\begin{lemma} \label{lemma-bootstrap} Let $A \to B$ be a ring map such that $\text{Tor}^A_i(B, B) = 0$ for $i > 0$ and such that $L_{B/B \otimes_A B} = 0$. Then $L_{B/A} = 0$ in $D(B)$. \end{lemma} 
\begin{lemma} \label{lemma-when-zero} The cotangent complex $L_{B/A}$ is zero in each of the following cases: \begin{enumerate} \item $A \to B$ and $B \otimes_A B \to B$ are flat, i.e., $A \to B$ is weakly \'etale (More on Algebra, Definition \ref{more-algebra-definition-weakly-etale}), \item $A \to B$ is a flat epimorphism of rings, \item $B = S^{-1}A$ for some multiplicative subset $S \subset A$, \item $A \to B$ is unramified and flat, \item $A \to B$ is \'etale, \item $A \to B$ is a filtered colimit of ring maps for which the cotangent complex vanishes, \item $B$ is a henselization of a local ring of $A$, \item $B$ is a strict henselization of a local ring of $A$, and \item add more here. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-localize-on-top} Let $A \to B \to C$ be ring maps such that $L_{C/B} = 0$. Then $L_{C/A} = L_{B/A} \otimes_B^\mathbf{L} C$. \end{lemma} 
\begin{lemma} \label{lemma-localize} Let $A \to B$ be ring maps and $S \subset A$, $T \subset B$ multiplicative subsets such that $S$ maps into $T$. Then $L_{T^{-1}B/S^{-1}A} = L_{B/A} \otimes_B T^{-1}B$ in $D(T^{-1}B)$. \end{lemma} 
\begin{lemma} \label{lemma-cotangent-complex-henselization} Let $A \to B$ be a local ring homomorphism of local rings. Let $A^h \to B^h$, resp.\ $A^{sh} \to B^{sh}$ be the induced maps of henselizations, resp.\ strict henselizations. Then $$ L_{B^h/A^h} = L_{B^h/A} = L_{B/A} \otimes_B^\mathbf{L} B^h \quad\text{resp.}\quad L_{B^{sh}/A^{sh}} = L_{B^{sh}/A} = L_{B/A} \otimes_B^\mathbf{L} B^{sh} $$ in $D(B^h)$, resp.\ $D(B^{sh})$. \end{lemma} 
\begin{lemma} \label{lemma-when-projective} If $A \to B$ is a smooth ring map, then $L_{B/A} = \Omega_{B/A}[0]$. \end{lemma} 
\begin{lemma} \label{lemma-frobenius-homotopy} Let $A \to B$ be a ring map with $p = 0$ in $A$. Let $P_\bullet$ be the standard resolution of $B$ over $A$. The map $P_\bullet \to P_\bullet$ induced by the diagram $$ \xymatrix{ B \ar[r]_{F_B} & B \\ A \ar[u] \ar[r]^{F_A} & A \ar[u] } $$ discussed in Section \ref{section-functoriality} is homotopic to the Frobenius endomorphism $P_\bullet \to P_\bullet$ given by Frobenius on each $P_n$. \end{lemma} 
\begin{lemma} \label{lemma-frobenius-acts-as-zero} Let $p$ be a prime number. Let $A \to B$ be a ring homomorphism and assume that $p = 0$ in $A$. The map $L_{B/A} \to L_{B/A}$ of Section \ref{section-functoriality} induced by the Frobenius maps $F_A$ and $F_B$ is homotopic to zero. \end{lemma} 
\begin{lemma} \label{lemma-perfect-zero} Let $p$ be a prime number. Let $A \to B$ be a ring homomorphism and assume that $p = 0$ in $A$. If $A$ and $B$ are perfect, then $L_{B/A}$ is zero in $D(B)$. \end{lemma} 
\begin{lemma} \label{lemma-surjection} \begin{slogan} The cohomology of the cotangent complex of a surjective ring map is trivial in degree zero; it is the kernel modulo its square in degree $-1$. \end{slogan} Let $A \to B$ be a surjective ring map with kernel $I$. Then $H^0(L_{B/A}) = 0$ and $H^{-1}(L_{B/A}) = I/I^2$. This isomorphism comes from the map (\ref{equation-comparison-map}) for the object $(A \to B)$ of $\mathcal{C}_{B/A}$. \end{lemma} 
\begin{lemma} \label{lemma-relation-with-naive-cotangent-complex} Let $A \to B$ be a ring map. Then $\tau_{\geq -1}L_{B/A}$ is canonically quasi-isomorphic to the naive cotangent complex. \end{lemma} 
\begin{lemma} \label{lemma-vanishing-symmetric-powers} Notation and assumptions as in Cohomology on Sites, Example \ref{sites-cohomology-example-category-to-point}. Assume $\mathcal{C}$ has a cosimplicial object as in Cohomology on Sites, Lemma \ref{sites-cohomology-lemma-compute-by-cosimplicial-resolution}. Let $\mathcal{F}$ be a flat $\underline{B}$-module such that $H_0(\mathcal{C}, \mathcal{F}) = 0$. Then $H_l(\mathcal{C}, \text{Sym}_{\underline{B}}^k(\mathcal{F})) = 0$ for $l < k$. \end{lemma} 
\begin{lemma} \label{lemma-map-tors-zero} Let $A$ be a ring. Let $P = A[E]$ be a polynomial ring. Set $I = (e; e \in E) \subset P$. The maps $\text{Tor}_i^P(A, I^{n + 1}) \to \text{Tor}_i^P(A, I^n)$ are zero for all $i$ and $n$. \end{lemma} 
\begin{theorem}[Quillen spectral sequence] \label{theorem-quillen-spectral-sequence} Let $A \to B$ be a surjective ring map. Consider the sheaf $\Omega = \Omega_{\mathcal{O}/A} \otimes_\mathcal{O} \underline{B}$ of $\underline{B}$-modules on $\mathcal{C}_{B/A}$, see Section \ref{section-compute-L-pi-shriek}. Then there is a spectral sequence with $E_1$-page $$ E_1^{p, q} = H_{- p - q}(\mathcal{C}_{B/A}, \text{Sym}^p_{\underline{B}}(\Omega)) \Rightarrow \text{Tor}^A_{- p - q}(B, B) $$ with $d_r$ of bidegree $(r, -r + 1)$. Moreover, $H_i(\mathcal{C}_{B/A}, \text{Sym}^k_{\underline{B}}(\Omega)) = 0$ for $i < k$. \end{theorem} 
\begin{definition} \label{definition-biderivation} Let $A \to B$ be a ring map. Let $M$ be a $(B, B)$-bimodule over $A$. An {\it $A$-biderivation} is an $A$-linear map $\lambda : B \to M$ such that $\lambda(xy) = x\lambda(y) + \lambda(x)y$. \end{definition} 
\begin{lemma} \label{lemma-polynomial-ring-unique} Let $P = A[S]$ be a polynomial ring over $A$. Let $M$ be a $(P, P)$-bimodule over $A$. Given $m_s \in M$ for $s \in S$, there exists a unique $A$-biderivation $\lambda : P \to M$ mapping $s$ to $m_s$ for $s \in S$. \end{lemma} 
\begin{lemma} \label{lemma-compare-higher} In the situation above denote $L$ the complex (\ref{equation-lichtenbaum-schlessinger}). There is a canonical map $L_{B/A} \to L$ in $D(B)$ which induces an isomorphism $\tau_{\geq -2}L_{B/A} \to L$ in $D(B)$. \end{lemma} 
\begin{lemma} \label{lemma-special-case} Let $A = \mathbf{Z}[x_1, \ldots, x_n] \to B = \mathbf{Z}$ be the ring map which sends $x_i$ to $0$ for $i = 1, \ldots, n$. Let $I = (x_1, \ldots, x_n) \subset A$. Then $L_{B/A}$ is quasi-isomorphic to $I/I^2[1]$. \end{lemma} 
\begin{lemma} \label{lemma-mod-regular-sequence} Let $A \to B$ be a surjective ring map whose kernel $I$ is generated by a Koszul-regular sequence (for example a regular sequence). Then $L_{B/A}$ is quasi-isomorphic to $I/I^2[1]$. \end{lemma} 
\begin{lemma} \label{lemma-mod-Koszul-regular-ideal} Let $A \to B$ be a surjective ring map whose kernel $I$ is Koszul. Then $L_{B/A}$ is quasi-isomorphic to $I/I^2[1]$. \end{lemma} 
\begin{proposition} \label{proposition-cotangent-complex-local-complete-intersection} Let $A \to B$ be a local complete intersection map. Then $L_{B/A}$ is a perfect complex with tor amplitude in $[-1, 0]$. \end{proposition} 
\begin{lemma} \label{lemma-tensor-product-tor-independent} If $A$ and $B$ are Tor independent $R$-algebras, then the object $E$ in (\ref{equation-tensor-product}) is zero. In this case we have $$ L_{A \otimes_R B/R} = L_{A/R} \otimes_A^\mathbf{L} (A \otimes_R B) \oplus L_{B/R} \otimes_B^\mathbf{L} (A \otimes_R B) $$ which is represented by the complex $L_{A/R} \otimes_R B \oplus L_{B/R} \otimes_R A $ of $A \otimes_R B$-modules. \end{lemma} 
\begin{lemma} \label{lemma-tensor-product} Let $R$ be a ring and let $A$, $B$ be $R$-algebras. The object $E$ in (\ref{equation-tensor-product}) satisfies $$ H^i(E) = \left\{ \begin{matrix} 0 & \text{if} & i \geq -1 \\ \text{Tor}_1^R(A, B) & \text{if} & i = -2 \end{matrix} \right. $$ \end{lemma} 
\begin{lemma} \label{lemma-find-obstruction} In the situation above we have \begin{enumerate} \item There is a canonical element $\xi \in \Ext^2_B(L_{B/A}, N)$ whose vanishing is a sufficient and necessary condition for the existence of a solution to (\ref{equation-to-solve}). \item If there exists a solution, then the set of isomorphism classes of solutions is principal homogeneous under $\Ext^1_B(L_{B/A}, N)$. \item Given a solution $B'$, the set of automorphisms of $B'$ fitting into (\ref{equation-to-solve}) is canonically isomorphic to $\Ext^0_B(L_{B/A}, N)$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-atiyah-class} Let $A \to B$ be a ring map. Let $M$ be a $B$-module. The map $M \to L_{B/A} \otimes_B^\mathbf{L} M[1]$ in (\ref{equation-atiyah}) is called the {\it Atiyah class} of $M$. \end{definition} 
\begin{definition} \label{definition-standard-resolution-sheaves-rings} Let $\mathcal{C}$ be a site. Let $\mathcal{A} \to \mathcal{B}$ be a homomorphism of sheaves of rings on $\mathcal{C}$. The {\it standard resolution of $\mathcal{B}$ over $\mathcal{A}$} is the augmentation $\epsilon : \mathcal{P}_\bullet \to \mathcal{B}$ with terms $$ \mathcal{P}_0 = \mathcal{A}[\mathcal{B}],\quad \mathcal{P}_1 = \mathcal{A}[\mathcal{A}[\mathcal{B}]],\quad \ldots $$ and maps as constructed above. \end{definition} 
\begin{definition} \label{definition-cotangent-complex-morphism-sheaves-rings} Let $\mathcal{C}$ be a site. Let $\mathcal{A} \to \mathcal{B}$ be a homomorphism of sheaves of rings on $\mathcal{C}$. The {\it cotangent complex} $L_{\mathcal{B}/\mathcal{A}}$ is the complex of $\mathcal{B}$-modules associated to the simplicial module $$ \Omega_{\mathcal{P}_\bullet/\mathcal{A}} \otimes_{\mathcal{P}_\bullet, \epsilon} \mathcal{B} $$ where $\epsilon : \mathcal{P}_\bullet \to \mathcal{B}$ is the standard resolution of $\mathcal{B}$ over $\mathcal{A}$. We usually think of $L_{\mathcal{B}/\mathcal{A}}$ as an object of $D(\mathcal{B})$. \end{definition} 
\begin{lemma} \label{lemma-pullback-cotangent-morphism-topoi} Let $f : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$ be a morphism of topoi. Let $\mathcal{A} \to \mathcal{B}$ be a homomorphism of sheaves of rings on $\mathcal{C}$. Then $f^{-1}L_{\mathcal{B}/\mathcal{A}} = L_{f^{-1}\mathcal{B}/f^{-1}\mathcal{A}}$. \end{lemma} 
\begin{lemma} \label{lemma-compute-L-morphism-sheaves-rings} Let $\mathcal{C}$ be a site. Let $\mathcal{A} \to \mathcal{B}$ be a homomorphism of sheaves of rings on $\mathcal{C}$. Then $H^i(L_{\mathcal{B}/\mathcal{A}})$ is the sheaf associated to the presheaf $U \mapsto H^i(L_{\mathcal{B}(U)/\mathcal{A}(U)})$. \end{lemma} 
\begin{lemma} \label{lemma-H0-L-morphism-sheaves-rings} Let $\mathcal{C}$ be a site. Let $\mathcal{A} \to \mathcal{B}$ be a homomorphism of sheaves of rings on $\mathcal{C}$. Then $H^0(L_{\mathcal{B}/\mathcal{A}}) = \Omega_{\mathcal{B}/\mathcal{A}}$. \end{lemma} 
\begin{lemma} \label{lemma-compute-L-product-sheaves-rings} Let $\mathcal{C}$ be a site. Let $\mathcal{A} \to \mathcal{B}$ and $\mathcal{A} \to \mathcal{B}'$ be homomorphisms of sheaves of rings on $\mathcal{C}$. Then $$ L_{\mathcal{B} \times \mathcal{B}'/\mathcal{A}} \longrightarrow L_{\mathcal{B}/\mathcal{A}} \oplus L_{\mathcal{B}'/\mathcal{A}} $$ is an isomorphism in $D(\mathcal{B} \times \mathcal{B}')$. \end{lemma} 
\begin{lemma} \label{lemma-triangle-sheaves-rings} Let $\mathcal{D}$ be a site. Let $\mathcal{A} \to \mathcal{B} \to \mathcal{C}$ be homomorphisms of sheaves of rings on $\mathcal{D}$. There is a canonical distinguished triangle $$ L_{\mathcal{B}/\mathcal{A}} \otimes_\mathcal{B}^\mathbf{L} \mathcal{C} \to L_{\mathcal{C}/\mathcal{A}} \to L_{\mathcal{C}/\mathcal{B}} \to L_{\mathcal{B}/\mathcal{A}} \otimes_\mathcal{B}^\mathbf{L} \mathcal{C}[1] $$ in $D(\mathcal{C})$. \end{lemma} 
\begin{lemma} \label{lemma-stalk-cotangent-complex} Let $\mathcal{C}$ be a site. Let $\mathcal{A} \to \mathcal{B}$ be a homomorphism of sheaves of rings on $\mathcal{C}$. If $p$ is a point of $\mathcal{C}$, then $(L_{\mathcal{B}/\mathcal{A}})_p = L_{\mathcal{B}_p/\mathcal{A}_p}$. \end{lemma} 
\begin{lemma} \label{lemma-compare-cotangent-complex-with-naive} Let $\mathcal{C}$ be a site. Let $\mathcal{A} \to \mathcal{B}$ be a homomorphism of sheaves of rings on $\mathcal{C}$. There is a canonical map $L_{\mathcal{B}/\mathcal{A}} \to \NL_{\mathcal{B}/\mathcal{A}}$ which identifies the naive cotangent complex with the truncation $\tau_{\geq -1}L_{\mathcal{B}/\mathcal{A}}$. \end{lemma} 
\begin{definition} \label{definition-atiyah-class-general} Let $\mathcal{C}$ be a site. Let $\mathcal{A} \to \mathcal{B}$ be a homomorphism of sheaves of rings. Let $\mathcal{F}$ be a sheaf of $\mathcal{B}$-modules. The map $\mathcal{F} \to L_{\mathcal{B}/\mathcal{A}} \otimes_\mathcal{B}^\mathbf{L} \mathcal{F}[1]$ in (\ref{equation-atiyah-general}) is called the {\it Atiyah class} of $\mathcal{F}$. \end{definition} 
\begin{definition} \label{definition-cotangent-complex-morphism-ringed-spaces} Let $f : (X, \mathcal{O}_X) \to (S, \mathcal{O}_S)$ be a morphism of ringed spaces. The {\it cotangent complex} $L_f$ of $f$ is $L_f = L_{\mathcal{O}_X/f^{-1}\mathcal{O}_S}$. We will also use the notation $L_f = L_{X/S} = L_{\mathcal{O}_X/\mathcal{O}_S}$. \end{definition} 
\begin{lemma} \label{lemma-H0-L-morphism-ringed-spaces} Let $f : (X, \mathcal{O}_X) \to (S, \mathcal{O}_S)$ be a morphism of ringed spaces. Then $H^0(L_{X/S}) = \Omega_{X/S}$. \end{lemma} 
\begin{lemma} \label{lemma-triangle-ringed-spaces} Let $f : X \to Y$ and $g : Y \to Z$ be morphisms of ringed spaces. Then there is a canonical distinguished triangle $$ Lf^* L_{Y/Z} \to L_{X/Z} \to L_{X/Y} \to Lf^*L_{Y/Z}[1] $$ in $D(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-compare-cotangent-complex-with-naive-ringed-spaces} Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. There is a canonical map $L_{X/Y} \to \NL_{X/Y}$ which identifies the naive cotangent complex with the truncation $\tau_{\geq -1}L_{X/Y}$. \end{lemma} 
\begin{lemma} \label{lemma-find-obstruction-ringed-spaces} In the situation above we have \begin{enumerate} \item There is a canonical element $\xi \in \Ext^2_{\mathcal{O}_X}(L_{X/S}, \mathcal{G})$ whose vanishing is a sufficient and necessary condition for the existence of a solution to (\ref{equation-to-solve-ringed-spaces}). \item If there exists a solution, then the set of isomorphism classes of solutions is principal homogeneous under $\Ext^1_{\mathcal{O}_X}(L_{X/S}, \mathcal{G})$. \item Given a solution $X'$, the set of automorphisms of $X'$ fitting into (\ref{equation-to-solve-ringed-spaces}) is canonically isomorphic to $\Ext^0_{\mathcal{O}_X}(L_{X/S}, \mathcal{G})$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-cotangent-complex-morphism-ringed-topoi} Let $(f, f^\sharp) : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ be a morphism of ringed topoi. The {\it cotangent complex} $L_f$ of $f$ is $L_f = L_{\mathcal{O}_\mathcal{C}/f^{-1}\mathcal{O}_\mathcal{D}}$. We sometimes write $L_f = L_{\mathcal{O}_\mathcal{C}/\mathcal{O}_\mathcal{D}}$. \end{definition} 
\begin{lemma} \label{lemma-H0-L-morphism-ringed-topoi} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{B}), \mathcal{O}_\mathcal{B})$ be a morphism of ringed topoi. Then $H^0(L_f) = \Omega_f$. \end{lemma} 
\begin{lemma} \label{lemma-triangle-ringed-topoi} Let $f : (\Sh(\mathcal{C}_1), \mathcal{O}_1) \to (\Sh(\mathcal{C}_2), \mathcal{O}_2)$ and $g : (\Sh(\mathcal{C}_2), \mathcal{O}_2) \to (\Sh(\mathcal{C}_3), \mathcal{O}_3)$ be morphisms of ringed topoi. Then there is a canonical distinguished triangle $$ Lf^* L_g \to L_{g \circ f} \to L_f \to Lf^*L_g[1] $$ in $D(\mathcal{O}_1)$. \end{lemma} 
\begin{lemma} \label{lemma-compare-cotangent-complex-with-naive-ringed-topoi} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{B}), \mathcal{O}_\mathcal{B})$ be a morphism of ringed topoi. There is a canonical map $L_f \to \NL_f$ which identifies the naive cotangent complex with the truncation $\tau_{\geq -1}L_f$. \end{lemma} 
\begin{lemma} \label{lemma-find-obstruction-ringed-topoi} In the situation above we have \begin{enumerate} \item There is a canonical element $\xi \in \Ext^2_\mathcal{O}(L_f, \mathcal{G})$ whose vanishing is a sufficient and necessary condition for the existence of a solution to (\ref{equation-to-solve-ringed-topoi}). \item If there exists a solution, then the set of isomorphism classes of solutions is principal homogeneous under $\Ext^1_\mathcal{O}(L_f, \mathcal{G})$. \item Given a solution $X'$, the set of automorphisms of $X'$ fitting into (\ref{equation-to-solve-ringed-topoi}) is canonically isomorphic to $\Ext^0_\mathcal{O}(L_f, \mathcal{G})$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-cotangent-morphism-schemes} Let $f : X \to Y$ be a morphism of schemes. The {\it cotangent complex $L_{X/Y}$ of $X$ over $Y$} is the cotangent complex of $f$ as a morphism of ringed spaces (Definition \ref{definition-cotangent-complex-morphism-ringed-spaces}). \end{definition} 
\begin{lemma} \label{lemma-morphism-affine-schemes} Let $f : X \to Y$ be a morphism of schemes. Let $U = \Spec(B) \subset X$ and $V = \Spec(A) \subset Y$ be affine opens such that $f(U) \subset V$. There is a canonical map $$ \widetilde{L_{B/A}} \longrightarrow L_{X/Y}|_U $$ of complexes which is an isomorphism in $D(\mathcal{O}_U)$. This map is compatible with restricting to smaller affine opens of $X$ and $Y$. \end{lemma} 
\begin{lemma} \label{lemma-scheme-over-ring} Let $\Lambda$ be a ring. Let $X$ be a scheme over $\Lambda$. Then $$ L_{X/\Spec(\Lambda)} = L_{\mathcal{O}_X/\underline{\Lambda}} $$ where $\underline{\Lambda}$ is the constant sheaf with value $\Lambda$ on $X$. \end{lemma} 
\begin{lemma} \label{lemma-category-fibred} In the situation above the category $\mathcal{C}_{X/\Lambda}$ is fibred over $X_{Zar}$. \end{lemma} 
\begin{lemma} \label{lemma-cotangent-morphism-schemes} In the situation above there is a canonical isomorphism $$ L_{X/\Lambda} =  L\pi_!(Li^*\Omega_{\mathcal{O}/\underline{\Lambda}}) = L\pi_!(i^*\Omega_{\mathcal{O}/\underline{\Lambda}}) = L\pi_!(\Omega_{\mathcal{O}/\underline{\Lambda}} \otimes_\mathcal{O} \underline{\mathcal{O}}_X) $$ in $D(\mathcal{O}_X)$. \end{lemma} 
\begin{definition} \label{definition-cotangent-morphism-spaces} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. The {\it cotangent complex $L_{X/Y}$ of $X$ over $Y$} is the cotangent complex of the morphism of ringed topoi $f_{small}$ between the small \'etale sites of $X$ and $Y$ (see Properties of Spaces, Lemma \ref{spaces-properties-lemma-morphism-ringed-topoi} and Definition \ref{definition-cotangent-complex-morphism-ringed-topoi}). \end{definition} 
\begin{lemma} \label{lemma-etale-localization} Let $S$ be a scheme. Consider a commutative diagram $$ \xymatrix{ U \ar[d]_p \ar[r]_g & V \ar[d]^q \\ X \ar[r]^f & Y } $$ of algebraic spaces over $S$ with $p$ and $q$ \'etale. Then there is a canonical identification $L_{X/Y}|_{U_\etale} = L_{U/V}$ in $D(\mathcal{O}_U)$. \end{lemma} 
\begin{lemma} \label{lemma-compare-spaces-schemes} Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces over $S$. Assume $X$ and $Y$ representable by schemes $X_0$ and $Y_0$. Then there is a canonical identification $L_{X/Y} = \epsilon^*L_{X_0/Y_0}$ in $D(\mathcal{O}_X)$ where $\epsilon$ is as in Derived Categories of Spaces, Section \ref{spaces-perfect-section-derived-quasi-coherent-etale} and $L_{X_0/Y_0}$ is as in  Definition \ref{definition-cotangent-morphism-schemes}. \end{lemma} 
\begin{lemma} \label{lemma-space-over-ring} Let $\Lambda$ be a ring. Let $X$ be an algebraic space over $\Lambda$. Then $$ L_{X/\Spec(\Lambda)} = L_{\mathcal{O}_X/\underline{\Lambda}} $$ where $\underline{\Lambda}$ is the constant sheaf with value $\Lambda$ on $X_\etale$. \end{lemma} 
\begin{lemma} \label{lemma-category-fibred-space} In the situation above the category $\mathcal{C}_{X/\Lambda}$ is fibred over $X_\etale$. \end{lemma} 
\begin{lemma} \label{lemma-cotangent-morphism-spaces} In the situation above there is a canonical isomorphism $$ L_{X/\Lambda} =  L\pi_!(Li^*\Omega_{\mathcal{O}/\underline{\Lambda}}) = L\pi_!(i^*\Omega_{\mathcal{O}/\underline{\Lambda}}) = L\pi_!(\Omega_{\mathcal{O}/\underline{\Lambda}} \otimes_\mathcal{O} \underline{\mathcal{O}}_X) $$ in $D(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-fibre-product-tor-independent} In the situation above, if $X$ and $Y$ are Tor independent over $B$, then the object $E$ in (\ref{equation-fibre-product}) is zero. In this case we have $$ L_{X \times_B Y/B} = Lp^*L_{X/B} \oplus Lq^*L_{Y/B} $$ \end{lemma} 
\begin{lemma} \label{lemma-fibre-product} Let $S$ be a scheme. Let $X \to B$ and $Y \to B$ be morphisms of algebraic spaces over $S$. The object $E$ in (\ref{equation-fibre-product}) satisfies $H^i(E) = 0$ for $i = 0, -1$ and for a geometric point $(\overline{x}, \overline{y}) : \Spec(k) \to X \times_B Y$ we have $$ H^{-2}(E)_{(\overline{x}, \overline{y})} = \text{Tor}_1^R(A, B) \otimes_{A \otimes_R B} C $$ where $R = \mathcal{O}_{B, \overline{b}}$, $A = \mathcal{O}_{X, \overline{x}}$, $B = \mathcal{O}_{Y, \overline{y}}$, and $C = \mathcal{O}_{X \times_B Y, (\overline{x}, \overline{y})}$. \end{lemma} 
