\begin{definition} \label{definition-invariant} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $j = (t, s) : R \to U \times_B U$ be a pre-relation of algebraic spaces over $B$. We say a morphism $\phi : U \to X$ of algebraic spaces over $B$ is {\it $R$-invariant} if the diagram $$ \xymatrix{ R \ar[r]_s \ar[d]_t & U \ar[d]^\phi \\ U \ar[r]^\phi & X } $$ is commutative. If $j : R \to U \times_B U$ comes from the action of a group algebraic space $G$ on $U$ over $B$ as in Groupoids in Spaces, Lemma \ref{spaces-groupoids-lemma-groupoid-from-action}, then we say that $\phi$ is {\it $G$-invariant}. \end{definition} 
\begin{lemma} \label{lemma-invariant} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $j = (t, s) : R \to U \times_B U$ be a pre-relation of algebraic spaces over $B$. A morphism of algebraic spaces $\phi : U \to X$ is $R$-invariant if and only if it factors as $U \to U/R \to X$. \end{lemma} 
\begin{lemma} \label{lemma-base-change-on-invariant} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $j = (t, s) : R \to U \times_B U$ be a pre-relation of algebraic spaces over $B$. Let $U \to X$ be an $R$-invariant morphism of algebraic spaces over $B$. Let $X' \to X$ be any morphism of algebraic spaces. \begin{enumerate} \item Setting $U' = X' \times_X U$, $R' = X' \times_X R$ we obtain a pre-relation $j' : R' \to U' \times_B U'$. \item If $j$ is a relation, then $j'$ is a relation. \item If $j$ is a pre-equivalence relation, then $j'$ is a pre-equivalence relation. \item If $j$ is an equivalence relation, then $j'$ is an equivalence relation. \item If $j$ comes from a groupoid in algebraic spaces $(U, R, s, t, c)$ over $B$, then \begin{enumerate} \item $(U, R, s, t, c)$ is a groupoid in algebraic spaces over $X$, and \item $j'$ comes from the base change $(U', R', s', t', c')$ of this groupoid to $X'$, see Groupoids in Spaces, Lemma \ref{spaces-groupoids-lemma-base-change-groupoid}. \end{enumerate} \item If $j$ comes from the action of a group algebraic space $G/B$ on $U$ as in Groupoids in Spaces, Lemma \ref{spaces-groupoids-lemma-groupoid-from-action} then $j'$ comes from the induced action of $G$ on $U'$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-base-change} In the situation of Lemma \ref{lemma-base-change-on-invariant} we call $j' : R' \to U' \times_B U'$ the {\it base change} of the pre-relation $j$ to $X'$. We say it is a {\it flat base change} if $X' \to X$ is a flat morphism of algebraic spaces. \end{definition} 
\begin{lemma} \label{lemma-base-change-quotient-sheaf} In the situation of Lemma \ref{lemma-base-change-on-invariant} there is an isomorphism of sheaves $$ U'/R' = X' \times_X U/R $$ For the construction of quotient sheaves, see Groupoids in Spaces, Section \ref{spaces-groupoids-section-quotient-sheaves}. \end{lemma} 
\begin{lemma} \label{lemma-base-change-quotient-stack} Let $S$ be a scheme. Let $B$ be an algebraic space over $S$. Let $(U, R, s, t, c)$ be a groupoid in algebraic spaces over $B$. Let $U \to X$ be an $R$-invariant morphism of algebraic spaces over $B$. Let $g : X' \to X$ be a morphism of algebraic spaces over $B$ and let $(U', R', s', t', c')$ be the base change as in Lemma \ref{lemma-base-change-on-invariant}. Then $$ \xymatrix{ [U'/R'] \ar[r] \ar[d] & [U/R] \ar[d] \\ \mathcal{S}_{X'} \ar[r] & \mathcal{S}_X } $$ is a $2$-fibre product of stacks in groupoids over $(\Sch/S)_{fppf}$. For the construction of quotient stacks and the morphisms in this diagram, see Groupoids in Spaces, Section \ref{spaces-groupoids-section-stacks}. \end{lemma} 
\begin{definition} \label{definition-categorical} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $j = (t, s) : R \to U \times_B U$ be pre-relation in algebraic spaces over $B$. \begin{enumerate} \item We say a morphism $\phi : U \to X$ of algebraic spaces over $B$ is a {\it categorical quotient} if it is $R$-invariant, and for every $R$-invariant morphism $\psi : U \to Y$ of algebraic spaces over $B$ there exists a unique morphism $\chi : X \to Y$ such that $\psi = \phi \circ \chi$. \item Let $\mathcal{C}$ be a full subcategory of the category of algebraic spaces over $B$. Assume $U$, $R$ are objects of $\mathcal{C}$. In this situation we say a morphism $\phi : U \to X$ of algebraic spaces over $B$ is a {\it categorical quotient in $\mathcal{C}$} if $X \in \Ob(\mathcal{C})$, and $\phi$ is $R$-invariant, and for every $R$-invariant morphism $\psi : U \to Y$ with $Y \in \Ob(\mathcal{C})$ there exists a unique morphism $\chi : X \to Y$ such that $\psi = \phi \circ \chi$. \item If $B = S$ and $\mathcal{C}$ is the category of schemes over $S$, then we say $U \to X$ is a {\it categorical quotient in the category of schemes}, or simply a {\it categorical quotient in schemes}. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-categorical-unique} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $j : R \to U \times_B U$ be a pre-relation in algebraic spaces over $B$. If a categorical quotient in the category of algebraic spaces over $B$ exists, then it is unique up to unique isomorphism. Similarly for categorical quotients in full subcategories of $\textit{Spaces}/B$. \end{lemma} 
\begin{definition} \label{definition-universal-categorical} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $\mathcal{C}$ be a full subcategory of the category of algebraic spaces over $B$ closed under fibre products. Let $j = (t, s) : R \to U \times_B U$ be pre-relation in $\mathcal{C}$, and let $U \to X$ be an $R$-invariant morphism with $X \in \Ob(\mathcal{C})$. \begin{enumerate} \item We say $U \to X$ is a {\it universal categorical quotient} in $\mathcal{C}$ if for every morphism $X' \to X$ in $\mathcal{C}$ the morphism $U' = X' \times_X U \to X'$ is the categorical quotient in $\mathcal{C}$ of the base change $j' : R' \to U'$ of $j$. \item We say $U \to X$ is a {\it uniform categorical quotient} in $\mathcal{C}$ if for every flat morphism $X' \to X$ in $\mathcal{C}$ the morphism $U' = X' \times_X U \to X'$ is the categorical quotient in $\mathcal{C}$ of the base change $j' : R' \to U'$ of $j$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-categorical-reduced} In the situation of Definition \ref{definition-categorical}. If $\phi : U \to X$ is a categorical quotient and $U$ is reduced, then $X$ is reduced. The same holds for categorical quotients in a category of spaces $\mathcal{C}$ listed in Example \ref{example-categories}. \end{lemma} 
\begin{definition} \label{definition-orbit} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $j : R \to U \times_B U$ be a pre-relation over $B$. If $u \in |U|$, then the {\it orbit}, or more precisely the {\it $R$-orbit} of $u$ is $$ O_u = \left\{ u' \in |U|\ : \begin{matrix} \exists n \geq 1, \ \exists u_0, \ldots, u_n \in |U|\text{ such that } u_0 = u \text{ and } u_n = u' \\ \text{and for all }i \in \{0, \ldots, n - 1\}\text{ either } u_i = u_{i + 1}\text{ or } \\ \exists r \in |R|, \ s(r) = u_i, t(r) = u_{i + 1} \text{ or } \\ \exists r \in |R|, \ t(r) = u_i, s(r) = u_{i + 1} \end{matrix} \right\} $$ \end{definition} 
\begin{lemma} \label{lemma-pre-equivalence-equivalence-relation-points} Let $B \to S$ as in Section \ref{section-conventions-notation}. Let $j : R \to U \times_B U$ be a pre-equivalence relation of algebraic spaces over $B$. Then $$ O_u = \{u' \in |U| \text{ such that } \exists r \in |R|, \ s(r) = u, \ t(r) = u'\}. $$ \end{lemma} 
\begin{lemma} \label{lemma-invariant-map-constant-on-orbit} In the situation of Definition \ref{definition-orbit}. Let $\phi : U \to X$ be an $R$-invariant morphism of algebraic spaces over $B$. Then $|\phi| : |U| \to |X|$ is constant on the orbits. \end{lemma} 
\begin{definition} \label{definition-geometric-orbits} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $j : R \to U \times_B U$ be a pre-relation over $B$. Let $\Spec(k) \to B$ be a geometric point of $B$. \begin{enumerate} \item We say $\overline{u}, \overline{u}' \in U(k)$ are {\it weakly $R$-equivalent} if they are in the same equivalence class for the equivalence relation generated by the relation $j(R(k)) \subset U(k) \times U(k)$. \item We say $\overline{u}, \overline{u}' \in U(k)$ are {\it $R$-equivalent} if for some overfield $k \subset \Omega$ the images in $U(\Omega)$ are weakly $R$-equivalent. \item The {\it weak orbit}, or more precisely the {\it weak $R$-orbit} of $\overline{u} \in U(k)$ is set of all elements of $U(k)$ which are weakly $R$-equivalent to $\overline{u}$. \item The {\it orbit}, or more precisely the {\it $R$-orbit} of $\overline{u} \in U(k)$ is set of all elements of $U(k)$ which are $R$-equivalent to $\overline{u}$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-weak-orbit-pre-equivalence} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $\Spec(k) \to B$ be a geometric point of $B$. Let $j : R \to U \times_B U$ be a pre-equivalence relation over $B$. In this case the weak orbit of $\overline{u} \in U(k)$ is simply $$ \{ \overline{u}' \in U(k) \text{ such that } \exists \overline{r} \in R(k), \ s(\overline{r}) = \overline{u}, \ t(\overline{r}) = \overline{u}' \} $$ and the orbit of $\overline{u} \in U(k)$ is $$ \{ \overline{u}' \in U(k) : \exists\text{ field extension }K/k, \ \exists\ r \in R(K), \ s(r) = \overline{u}, \ t(r) = \overline{u}'\} $$ \end{lemma} 
\begin{lemma} \label{lemma-make-pre-equivalence} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $j : R \to U \times_B U$ be a pre-relation over $B$. Then $j_\infty : R_\infty \to U \times_B U$ is a pre-equivalence relation over $B$. Moreover \begin{enumerate} \item $\phi : U \to X$ is $R$-invariant if and only if it is $R_\infty$-invariant, \item the canonical map of quotient sheaves $U/R \to U/R_\infty$ (see Groupoids in Spaces, Section \ref{spaces-groupoids-section-quotient-sheaves}) is an isomorphism, \item weak $R$-orbits agree with weak $R_\infty$-orbits, \item $R$-orbits agree with $R_\infty$-orbits, \item if $s, t$ are locally of finite type, then $s_\infty$, $t_\infty$ are locally of finite type, \item add more here as needed. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-geometric-orbits} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $j : R \to U \times_B U$ be a pre-relation over $B$. Let $\Spec(k) \to B$ be a geometric point of $B$. \begin{enumerate} \item If $s, t : R \to U$ are locally of finite type then weak $R$-equivalence on $U(k)$ agrees with $R$-equivalence, and weak $R$-orbits agree with $R$-orbits on $U(k)$. \item If $k$ has sufficiently large cardinality then weak $R$-equivalence on $U(k)$ agrees with $R$-equivalence, and weak $R$-orbits agree with $R$-orbits on $U(k)$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-set-theoretically-invariant} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $j : R \to U \times_B U$ be a pre-relation over $B$. \begin{enumerate} \item We say $\phi : U \to X$ is {\it set-theoretically $R$-invariant} if and only if the map $U(k) \to X(k)$ equalizes the two maps $s, t : R(k) \to U(k)$ for every algebraically closed field $k$ over $B$. \item We say $\phi : U \to X$ {\it separates orbits}, or {\it separates $R$-orbits} if it is set-theoretically $R$-invariant and $\phi(\overline{u}) = \phi(\overline{u}')$ in $X(k)$ implies that $\overline{u}, \overline{u}' \in U(k)$ are in the same orbit for every algebraically closed field $k$ over $B$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-set-theoretic-invariant} In the situation of Definition \ref{definition-set-theoretically-invariant}. A morphism $\phi : U \to X$ is set-theoretically $R$-invariant if and only if for any algebraically closed field $k$ over $B$ the map $U(k) \to X(k)$ is constant on orbits. \end{lemma} 
\begin{lemma} \label{lemma-invariant-set-theoretically-invariant} In the situation of Definition \ref{definition-set-theoretically-invariant}. An invariant morphism is set-theoretically invariant. \end{lemma} 
\begin{lemma} \label{lemma-set-theoretically-invariant-invariant-when-reduced} In the situation of Definition \ref{definition-set-theoretically-invariant}. Let $\phi : U \to X$ be a morphism of algebraic spaces over $B$. Assume \begin{enumerate} \item $\phi$ is set-theoretically $R$-invariant, \item $R$ is reduced, and \item $X$ is locally separated over $B$. \end{enumerate} Then $\phi$ is $R$-invariant. \end{lemma} 
\begin{definition} \label{definition-set-theoretic-equivalence} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $j : R \to U \times_B U$ be a pre-relation over $B$. \begin{enumerate} \item We say $j$ is a {\it set-theoretic pre-equivalence relation} if for all algebraically closed fields $k$ over $B$ the relation $\sim_R$ on $U(k)$ defined by $$ \overline{u} \sim_R \overline{u}' \Leftrightarrow \begin{matrix} \exists\text{ field extension }K/k, \ \exists\ r \in R(K), \\ s(r) = \overline{u}, \ t(r) = \overline{u}' \end{matrix} $$ is an equivalence relation. \item We say $j$ is a {\it set-theoretic equivalence relation} if $j$ is universally injective and a set-theoretic pre-equivalence relation. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-set-theoretic-pre-equivalence-geometric} In the situation of Definition \ref{definition-set-theoretic-equivalence}. The following are equivalent: \begin{enumerate} \item The morphism $j$ is a set-theoretic pre-equivalence relation. \item The subset $j(|R|) \subset |U \times_B U|$ contains the image of $|j'|$ for any of the morphisms $j'$ as in Equation (\ref{equation-list}). \item For every algebraically closed field $k$ over $B$ of sufficiently large cardinality the subset $j(R(k)) \subset U(k) \times U(k)$ is an equivalence relation. \end{enumerate} If $s, t$ are locally of finite type these are also equivalent to \begin{enumerate} \item[(4)] For every algebraically closed field $k$ over $B$ the subset $j(R(k)) \subset U(k) \times U(k)$ is an equivalence relation. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-set-theoretic-equivalence-geometric} In the situation of Definition \ref{definition-set-theoretic-equivalence}. The following are equivalent: \begin{enumerate} \item The morphism $j$ is a set-theoretic equivalence relation. \item The morphism $j$ is universally injective and $j(|R|) \subset |U \times_B U|$ contains the image of $|j'|$ for any of the morphisms $j'$ as in Equation (\ref{equation-list}). \item For every algebraically closed field $k$ over $B$ of sufficiently large cardinality the map $j : R(k) \to U(k) \times U(k)$ is injective and its image is an equivalence relation. \end{enumerate} If $j$ is decent, or locally separated, or quasi-separated these are also equivalent to \begin{enumerate} \item[(4)] For every algebraically closed field $k$ over $B$ the map $j : R(k) \to U(k) \times U(k)$ is injective and its image is an equivalence relation. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-set-theoretic-equivalence} Let $S$ be a scheme, and let $B$ be an algebraic space over $S$. Let $j : R \to U \times_B U$ be a pre-relation over $B$. \begin{enumerate} \item If $j$ is a pre-equivalence relation, then $j$ is a set-theoretic pre-equivalence relation. This holds in particular when $j$ comes from a groupoid in algebraic spaces, or from an action of a group algebraic space on $U$. \item If $j$ is an equivalence relation, then $j$ is a set-theoretic equivalence relation. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-separates-orbits} Let $B \to S$ be as in Section \ref{section-conventions-notation}. Let $j : R \to U \times_B U$ be a pre-relation. Let $\phi : U \to X$ be a morphism of algebraic spaces over $B$. Consider the diagram $$ \xymatrix{ (U \times_X U) \times_{(U \times_B U)} R \ar[d]^q \ar[r]_-p & R \ar[d]^j \\ U \times_X U \ar[r]^c & U \times_B U } $$ Then we have: \begin{enumerate} \item The morphism $\phi$ is set-theoretically invariant if and only if $p$ is surjective. \item If $j$ is a set-theoretic pre-equivalence relation then $\phi$ separates orbits if and only if $p$ and $q$ are surjective. \item If $p$ and $q$ are surjective, then $j$ is a set-theoretic pre-equivalence relation (and $\phi$ separates orbits). \item If $\phi$ is $R$-invariant and $j$ is a set-theoretic pre-equivalence relation, then $\phi$ separates orbits if and only if the induced morphism $R \to U \times_X U$ is surjective. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-orbit-space} Let $B \to S$ as in Section \ref{section-conventions-notation}. Let $j : R \to U \times_B U$ be a pre-relation. We say $\phi : U \to X$ is an {\it orbit space for $R$} if \begin{enumerate} \item $\phi$ is $R$-invariant, \item $\phi$ separates $R$-orbits, and \item $\phi$ is surjective. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-orbit-space} Let $B \to S$ as in Section \ref{section-conventions-notation}. Let $j : R \to U \times_B U$ be a set-theoretic pre-equivalence relation. A morphism $\phi : U \to X$ is an orbit space for $R$ if and only if \begin{enumerate} \item $\phi \circ s = \phi \circ t$, i.e., $\phi$ is invariant, \item the induced morphism $(t, s) : R \to U \times_X U$ is surjective, and \item the morphism $\phi : U \to X$ is surjective. \end{enumerate} This characterization applies for example if $j$ is a pre-equivalence relation, or comes from a groupoid in algebraic spaces over $B$, or comes from the action of a group algebraic space over $B$ on $U$. \end{lemma} 
\begin{lemma} \label{lemma-orbit-space-locally-finite-type-over-base} Let $B \to S$ as in Section \ref{section-conventions-notation}. Let $j = (t, s) : R \to U \times_B U$ be a pre-relation. Assume $R, U$ are locally of finite type over $B$. Let $\phi : U \to X$ be an $R$-invariant morphism of algebraic spaces over $B$. Then $\phi$ is an orbit space for $R$ if and only if the natural map $$ U(k)/\big(\text{equivalence relation generated by }j(R(k))\big) \longrightarrow X(k) $$ is bijective for all algebraically closed fields $k$ over $B$. \end{lemma} 
\begin{definition} \label{definition-coarse} Let $S$ be a scheme and $B$ an algebraic space over $S$. Let $j : R \to U \times_B U$ be a pre-relation. A morphism $\phi : U \to X$ of algebraic spaces over $B$ is called a {\it coarse quotient} if \begin{enumerate} \item $\phi$ is a categorical quotient, and \item $\phi$ is an orbit space. \end{enumerate} If $S = B$, $U$, $R$ are all schemes, then we say a morphism of schemes $\phi : U \to X$ is a {\it coarse quotient in schemes} if \begin{enumerate} \item $\phi$ is a categorical quotient in schemes, and \item $\phi$ is an orbit space. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-topological} Let $S$ be a scheme and $B$ an algebraic space over $S$. Let $j : R \to U \times_B U$ be a pre-relation. Let $\phi : U \to X$ be an $R$-invariant morphism of algebraic spaces over $B$. \begin{enumerate} \item \label{item-submersive} The morphism $\phi$ is submersive. \item \label{item-invariant-closed} For any $R$-invariant closed subset $Z \subset |U|$ the image $\phi(Z)$ is closed in $|X|$. \item \label{item-intersect-invariant-closed} Condition (\ref{item-invariant-closed}) holds and for any pair of $R$-invariant closed subsets $Z_1, Z_2 \subset |U|$ we have $$ \phi(Z_1 \cap Z_2) = \phi(Z_1) \cap \phi(Z_2) $$ \item The morphism $(t, s) : R \to U \times_X U$ is universally submersive. \label{item-strong} \end{enumerate} For each of these properties we can also require them to hold after any flat base change, or after any base change, see Definition \ref{definition-base-change}. In this case we say condition (\ref{item-submersive}), (\ref{item-invariant-closed}), (\ref{item-intersect-invariant-closed}), or (\ref{item-strong}) holds {\it uniformly} or {\it universally}. \end{definition} 
\begin{definition} \label{definition-functions} Let $S$ be a scheme and $B$ an algebraic space over $S$. Let $j : R \to U \times_B U$ be a pre-relation. Let $\phi : U \to X$ be an $R$-invariant morphism. Denote $\phi' = \phi \circ s = \phi \circ t : R \to X$. \begin{enumerate} \item We denote $(\phi_*\mathcal{O}_U)^R$ the $\mathcal{O}_X$-sub-algebra of $\phi_*\mathcal{O}_U$ which is the equalizer of the two maps $$ \xymatrix{ \phi_*\mathcal{O}_U \ar@<1ex>[rr]^{\phi_*s^\sharp} \ar@<-1ex>[rr]_{\phi_*t^\sharp} & & \phi'_*\mathcal{O}_R } $$ on $X_\etale$. We sometimes call this the {\it sheaf of $R$-invariant functions on $X$}. \item We say {\it the functions on $X$ are the $R$-invariant functions on $U$} if the natural map $\mathcal{O}_X \to (\phi_*\mathcal{O}_U)^R$ is an isomorphism. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-good} Let $S$ be a scheme and $B$ an algebraic space over $S$. Let $j : R \to U \times_B U$ be a pre-relation. A morphism $\phi : U \to X$ of algebraic spaces over $B$ is called a {\it good quotient} if \begin{enumerate} \item $\phi$ is invariant, \item $\phi$ is affine, \item $\phi$ is surjective, \item condition (\ref{item-intersect-invariant-closed}) holds universally, and \item the functions on $X$ are the $R$-invariant functions on $U$. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-geometric} Let $S$ be a scheme and $B$ an algebraic space over $S$. Let $j : R \to U \times_B U$ be a pre-relation. A morphism $\phi : U \to X$ of algebraic spaces over $B$ is called a {\it geometric quotient} if \begin{enumerate} \item $\phi$ is an orbit space, \item condition (\ref{item-submersive}) holds universally, i.e., $\phi$ is universally submersive, and \item the functions on $X$ are the $R$-invariant functions on $U$. \end{enumerate} \end{definition} 
