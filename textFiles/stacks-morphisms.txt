\begin{lemma} \label{lemma-isom-locally-finite-type} Let $\mathcal{X}$ be an algebraic stack. Let $T$ be a scheme and let $x, y$ be objects of the fibre category of $\mathcal{X}$ over $T$. Then the morphism $\mathit{Isom}_\mathcal{X}(x, y) \to T$ is locally of finite type. \end{lemma} 
\begin{lemma} \label{lemma-isom-pseudo-torsor-aut} Let $\mathcal{X}$ be an algebraic stack. Let $T$ be a scheme and let $x, y$ be objects of the fibre category of $\mathcal{X}$ over $T$. Then \begin{enumerate} \item $\mathit{Isom}_\mathcal{X}(y, y)$ is a group algebraic space over $T$, and \item $\mathit{Isom}_\mathcal{X}(x, y)$ is a pseudo torsor for $\mathit{Isom}_\mathcal{X}(y, y)$ over $T$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-properties-diagonal} \begin{slogan} Diagonals of morphisms of algebraic stacks are representable by algebraic spaces and locally of finite type. \end{slogan} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Then \begin{enumerate} \item $\Delta_f$ is representable by algebraic spaces, and \item $\Delta_f$ is locally of finite type. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-properties-diagonal-representable} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks which is representable by algebraic spaces. Then \begin{enumerate} \item $\Delta_f$ is representable (by schemes), \item $\Delta_f$ is locally of finite type, \item $\Delta_f$ is a monomorphism, \item $\Delta_f$ is separated, and \item $\Delta_f$ is locally quasi-finite. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-representable-separated-diagonal-closed} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks representable by algebraic spaces. Then the following are equivalent \begin{enumerate} \item $f$ is separated, \item $\Delta_f$ is a closed immersion, \item $\Delta_f$ is proper, or \item $\Delta_f$ is universally closed. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-representable-quasi-separated-diagonal-quasi-compact} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks representable by algebraic spaces. Then the following are equivalent \begin{enumerate} \item $f$ is quasi-separated, \item $\Delta_f$ is quasi-compact, or \item $\Delta_f$ is of finite type. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-representable-locally-separated-diagonal-immersion} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks representable by algebraic spaces. Then the following are equivalent \begin{enumerate} \item $f$ is locally separated, and \item $\Delta_f$ is an immersion. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-separated} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. \begin{enumerate} \item We say $f$ is {\it DM} if $\Delta_f$ is unramified\footnote{The letters DM stand for Deligne-Mumford. If $f$ is DM then given any scheme $T$ and any morphism $T \to \mathcal{Y}$ the fibre product $\mathcal{X}_T = \mathcal{X} \times_\mathcal{Y} T$ is an algebraic stack over $T$ whose diagonal is unramified, i.e., $\mathcal{X}_T$ is DM. This implies $\mathcal{X}_T$ is a Deligne-Mumford stack, see Theorem \ref{theorem-DM}. In other words a DM morphism is one whose ``fibres'' are Deligne-Mumford stacks. This hopefully at least motivates the terminology.}. \item We say $f$ is {\it quasi-DM} if $\Delta_f$ is locally quasi-finite\footnote{If $f$ is quasi-DM, then the ``fibres'' $\mathcal{X}_T$ of $\mathcal{X} \to \mathcal{Y}$ are quasi-DM. An algebraic stack $\mathcal{X}$ is quasi-DM exactly if there exists a scheme $U$ and a surjective flat morphism $U \to \mathcal{X}$ of finite presentation which is locally quasi-finite, see Theorem \ref{theorem-quasi-DM}. Note the similarity to being Deligne-Mumford, which is defined in terms of having an \'etale covering by a scheme.}. \item We say $f$ is {\it separated} if $\Delta_f$ is proper. \item We say $f$ is {\it quasi-separated} if $\Delta_f$ is quasi-compact and quasi-separated. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-absolute-separated} Let $\mathcal{X}$ be an algebraic stack over the base scheme $S$. Denote $p : \mathcal{X} \to S$ the structure morphism. \begin{enumerate} \item We say $\mathcal{X}$ is {\it DM over $S$} if $p : \mathcal{X} \to S$ is DM. \item We say $\mathcal{X}$ is {\it quasi-DM over $S$} if $p : \mathcal{X} \to S$ is quasi-DM. \item We say $\mathcal{X}$ is {\it separated over $S$} if $p : \mathcal{X} \to S$ is separated. \item We say $\mathcal{X}$ is {\it quasi-separated over $S$} if $p : \mathcal{X} \to S$ is quasi-separated. \item We say $\mathcal{X}$ is {\it DM} if $\mathcal{X}$ is DM\footnote{Theorem \ref{theorem-DM} shows that this is equivalent to $\mathcal{X}$ being a Deligne-Mumford stack.} over $\Spec(\mathbf{Z})$. \item We say $\mathcal{X}$ is {\it quasi-DM} if $\mathcal{X}$ is quasi-DM over $\Spec(\mathbf{Z})$. \item We say $\mathcal{X}$ is {\it separated} if $\mathcal{X}$ is separated over $\Spec(\mathbf{Z})$. \item We say $\mathcal{X}$ is {\it quasi-separated} if $\mathcal{X}$ is quasi-separated over $\Spec(\mathbf{Z})$. \end{enumerate} In the last 4 definitions we view $\mathcal{X}$ as an algebraic stack over $\Spec(\mathbf{Z})$ via Algebraic Stacks, Definition \ref{algebraic-definition-viewed-as}. \end{definition} 
\begin{lemma} \label{lemma-trivial-implications} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. \begin{enumerate} \item If $f$ is separated, then $f$ is quasi-separated. \item If $f$ is DM, then $f$ is quasi-DM. \item If $f$ is representable by algebraic spaces, then $f$ is DM. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-base-change-separated} All of the separation axioms listed in Definition \ref{definition-separated} are stable under base change. \end{lemma} 
\begin{lemma} \label{lemma-check-separated-covering} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $W \to \mathcal{Y}$ be a surjective, flat, and locally of finite presentation where $W$ is an algebraic space. If the base change $W \times_\mathcal{Y} \mathcal{X} \to W$ has one of the separation properties of Definition \ref{definition-separated} then so does $f$. \end{lemma} 
\begin{lemma} \label{lemma-change-of-base-separated} Let $S$ be a scheme. The property of being quasi-DM over $S$, quasi-separated over $S$, or separated over $S$ (see Definition \ref{definition-absolute-separated}) is stable under change of base scheme, see Algebraic Stacks, Definition \ref{algebraic-definition-change-of-base}. \end{lemma} 
\begin{lemma} \label{lemma-fibre-product-after-map} Let $f : \mathcal{X} \to \mathcal{Z}$, $g : \mathcal{Y} \to \mathcal{Z}$ and $\mathcal{Z} \to \mathcal{T}$ be morphisms of algebraic stacks. Consider the induced morphism $i : \mathcal{X} \times_\mathcal{Z} \mathcal{Y} \to \mathcal{X} \times_\mathcal{T} \mathcal{Y}$. Then \begin{enumerate} \item $i$ is representable by algebraic spaces and locally of finite type, \item if $\Delta_{\mathcal{Z}/\mathcal{T}}$ is quasi-separated, then $i$ is quasi-separated, \item if $\Delta_{\mathcal{Z}/\mathcal{T}}$ is separated, then $i$ is separated, \item if $\mathcal{Z} \to \mathcal{T}$ is DM, then $i$ is unramified, \item if $\mathcal{Z} \to \mathcal{T}$ is quasi-DM, then $i$ is locally quasi-finite, \item if $\mathcal{Z} \to \mathcal{T}$ is separated, then $i$ is proper, and \item if $\mathcal{Z} \to \mathcal{T}$ is quasi-separated, then $i$ is quasi-compact and quasi-separated. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-semi-diagonal} Let $\mathcal{T}$ be an algebraic stack. Let $g : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks over $\mathcal{T}$. Consider the graph $i : \mathcal{X} \to \mathcal{X} \times_\mathcal{T} \mathcal{Y}$ of $g$. Then \begin{enumerate} \item $i$ is representable by algebraic spaces and locally of finite type, \item if $\mathcal{Y} \to \mathcal{T}$ is DM, then $i$ is unramified, \item if $\mathcal{Y} \to \mathcal{T}$ is quasi-DM, then $i$ is locally quasi-finite, \item if $\mathcal{Y} \to \mathcal{T}$ is separated, then $i$ is proper, and \item if $\mathcal{Y} \to \mathcal{T}$ is quasi-separated, then $i$ is quasi-compact and quasi-separated. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-section-immersion} Let $f : \mathcal{X} \to \mathcal{T}$ be a morphism of algebraic stacks. Let $s : \mathcal{T} \to \mathcal{X}$ be a morphism such that $f \circ s$ is $2$-isomorphic to $\text{id}_\mathcal{T}$. Then \begin{enumerate} \item $s$ is representable by algebraic spaces and locally of finite type, \item if $f$ is DM, then $s$ is unramified, \item if $f$ is quasi-DM, then $s$ is locally quasi-finite, \item if $f$ is separated, then $s$ is proper, and \item if $f$ is quasi-separated, then $s$ is quasi-compact and quasi-separated. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-composition-separated} All of the separation axioms listed in Definition \ref{definition-separated} are stable under composition of morphisms. \end{lemma} 
\begin{lemma} \label{lemma-separated-over-separated} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks over the base scheme $S$. \begin{enumerate} \item If $\mathcal{Y}$ is DM over $S$ and $f$ is DM, then $\mathcal{X}$ is DM over $S$. \item If $\mathcal{Y}$ is quasi-DM over $S$ and $f$ is quasi-DM, then $\mathcal{X}$ is quasi-DM over $S$. \item If $\mathcal{Y}$ is separated over $S$ and $f$ is separated, then $\mathcal{X}$ is separated over $S$. \item If $\mathcal{Y}$ is quasi-separated over $S$ and $f$ is quasi-separated, then $\mathcal{X}$ is quasi-separated over $S$. \item If $\mathcal{Y}$ is DM and $f$ is DM, then $\mathcal{X}$ is DM. \item If $\mathcal{Y}$ is quasi-DM and $f$ is quasi-DM, then $\mathcal{X}$ is quasi-DM. \item If $\mathcal{Y}$ is separated and $f$ is separated, then $\mathcal{X}$ is separated. \item If $\mathcal{Y}$ is quasi-separated and $f$ is quasi-separated, then $\mathcal{X}$ is quasi-separated. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-compose-after-separated} Let $f : \mathcal{X} \to \mathcal{Y}$ and $g : \mathcal{Y} \to \mathcal{Z}$ be morphisms of algebraic stacks. \begin{enumerate} \item If $g \circ f$ is DM then so is $f$. \item If $g \circ f$ is quasi-DM then so is $f$. \item If $g \circ f$ is separated and $\Delta_g$ is separated, then $f$ is separated. \item If $g \circ f$ is quasi-separated and $\Delta_g$ is quasi-separated, then $f$ is quasi-separated. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-separated-implies-morphism-separated} Let $\mathcal{X}$ be an algebraic stack over the base scheme $S$. \begin{enumerate} \item $\mathcal{X}$ is DM $\Leftrightarrow$ $\mathcal{X}$ is DM over $S$. \item $\mathcal{X}$ is quasi-DM $\Leftrightarrow$ $\mathcal{X}$ is quasi-DM over $S$. \item If $\mathcal{X}$ is separated, then $\mathcal{X}$ is separated over $S$. \item If $\mathcal{X}$ is quasi-separated, then $\mathcal{X}$ is quasi-separated over $S$. \end{enumerate} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks over the base scheme $S$. \begin{enumerate} \item[(5)] If $\mathcal{X}$ is DM over $S$, then $f$ is DM. \item[(6)] If $\mathcal{X}$ is quasi-DM over $S$, then $f$ is quasi-DM. \item[(7)] If $\mathcal{X}$ is separated over $S$ and $\Delta_{\mathcal{Y}/S}$ is separated, then $f$ is separated. \item[(8)] If $\mathcal{X}$ is quasi-separated over $S$ and $\Delta_{\mathcal{Y}/S}$ is quasi-separated, then $f$ is quasi-separated. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-properties-covering-imply-diagonal} Let $\mathcal{X}$ be an algebraic stack. Let $W$ be an algebraic space, and let $f : W \to \mathcal{X}$ be a surjective, flat, locally finitely presented morphism. \begin{enumerate} \item If $f$ is unramified (i.e., \'etale, i.e., $\mathcal{X}$ is Deligne-Mumford), then $\mathcal{X}$ is DM. \item If $f$ is locally quasi-finite, then $\mathcal{X}$ is quasi-DM. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-monomorphism-separated} A monomorphism of algebraic stacks is separated and DM. The same is true for immersions of algebraic stacks. \end{lemma} 
\begin{lemma} \label{lemma-separation-properties-residual-gerbe} Let $\mathcal{X}$ be an algebraic stack. Let $x \in |\mathcal{X}|$. Assume the residual gerbe $\mathcal{Z}_x$ of $\mathcal{X}$ at $x$ exists. If $\mathcal{X}$ is DM, resp.\ quasi-DM, resp.\ separated, resp.\ quasi-separated, then so is $\mathcal{Z}_x$. \end{lemma} 
\begin{lemma} \label{lemma-inertia} Let $\mathcal{X}$ be an algebraic stack. Then the inertia stack $\mathcal{I}_\mathcal{X}$ is an algebraic stack as well. The morphism $$ \mathcal{I}_\mathcal{X} \longrightarrow \mathcal{X} $$ is representable by algebraic spaces and locally of finite type. More generally, let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Then the relative inertia $\mathcal{I}_{\mathcal{X}/\mathcal{Y}}$ is an algebraic stack and the morphism $$ \mathcal{I}_{\mathcal{X}/\mathcal{Y}} \longrightarrow \mathcal{X} $$ is representable by algebraic spaces and locally of finite type. \end{lemma} 
\begin{definition} \label{definition-isom} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $Z$ be an algebraic space. \begin{enumerate} \item Let $x : Z \to \mathcal{X}$ be a morphism. We set $$ \mathit{Isom}_{\mathcal{X}/\mathcal{Y}}(x, x) = Z \times_{x, \mathcal{X}} \mathcal{I}_{\mathcal{X}/\mathcal{Y}} $$ We endow it with the structure of a group algebraic space over $Z$ by pulling back the composition law discussed in Remark \ref{remark-inertia-is-group-in-spaces}. We will sometimes refer to $\mathit{Isom}_{\mathcal{X}/\mathcal{Y}}(x, x)$ as the {\it relative sheaf of automorphisms of $x$}. \item Let $x_1, x_2 : Z \to \mathcal{X}$ be morphisms. Set $y_i = f \circ x_i$. Let $\alpha : y_1 \to y_2$ be a $2$-morphism. Then $\alpha$ determines a morphism $\Delta^\alpha : Z \to Z \times_{y_1, \mathcal{Y}, y_2} Z$ and we set $$ \mathit{Isom}_{\mathcal{X}/\mathcal{Y}}^\alpha(x_1, x_2) = (Z \times_{x_1, \mathcal{X}, x_2} Z) \times_{Z \times_{y_1, \mathcal{Y}, y_2} Z, \Delta^\alpha} Z. $$ We will sometimes refer to $\mathit{Isom}_{\mathcal{X}/\mathcal{Y}}^\alpha(x_1, x_2)$ as the {\it relative sheaf of isomorphisms from $x_1$ to $x_2$}. \end{enumerate} If $\mathcal{Y} = \Spec(\mathbf{Z})$ or more generally when $\mathcal{Y}$ is an algebraic space, then we use the notation $\mathit{Isom}_\mathcal{X}(x, x)$ and $\mathit{Isom}_\mathcal{X}(x_1, x_2)$ and we use the terminology {\it sheaf of automorphisms of $x$} and {\it sheaf of isomorphisms from $x_1$ to $x_2$}. \end{definition} 
\begin{lemma} \label{lemma-isom-pseudo-torsor-aut-over-space} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $Z$ be an algebraic space and let $x_i : Z \to \mathcal{X}$, $i = 1, 2$ be morphisms. Then \begin{enumerate} \item $\mathit{Isom}_{\mathcal{X}/\mathcal{Y}}(x_2, x_2)$ is a group algebraic space over $Z$, \item there is an exact sequence of groups $$ 0 \to \mathit{Isom}_{\mathcal{X}/\mathcal{Y}}(x_2, x_2) \to \mathit{Isom}_\mathcal{X}(x_2, x_2) \to \mathit{Isom}_\mathcal{Y}(f \circ x_2, f \circ x_2) $$ \item there is a map of algebraic spaces $ \mathit{Isom}_\mathcal{X}(x_1, x_2) \to \mathit{Isom}_\mathcal{Y}(f \circ x_1, f \circ x_2) $ such that for any $2$-morphism $\alpha : f \circ x_1 \to f \circ x_2$ we obtain a cartesian diagram $$ \xymatrix{ \mathit{Isom}_{\mathcal{X}/\mathcal{Y}}^\alpha(x_1, x_2) \ar[d] \ar[r] & Z \ar[d]^\alpha \\ \mathit{Isom}_\mathcal{X}(x_1, x_2) \ar[r] & \mathit{Isom}_\mathcal{Y}(f \circ x_1, f \circ x_2) } $$ \item for any $2$-morphism $\alpha : f \circ x_1 \to f \circ x_2$ the algebraic space $\mathit{Isom}_{\mathcal{X}/\mathcal{Y}}^\alpha(x_1, x_2)$ is a pseudo torsor for $\mathit{Isom}_{\mathcal{X}/\mathcal{Y}}(x_2, x_2)$ over $Z$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-cartesian-square-inertia} Let $\pi : \mathcal{X} \to \mathcal{Y}$ and $f : \mathcal{Y}' \to \mathcal{Y}$ be morphisms of algebraic stacks. Set $\mathcal{X}' = \mathcal{X} \times_\mathcal{Y} \mathcal{Y}'$. Then both squares in the diagram $$ \xymatrix{ \mathcal{I}_{\mathcal{X}'/\mathcal{Y}'} \ar[r] \ar[d]_{ \text{Categories, Equation}\ (\ref{categories-equation-functorial}) } & \mathcal{X}' \ar[r]_{\pi'} \ar[d] & \mathcal{Y}' \ar[d]^f \\ \mathcal{I}_{\mathcal{X}/\mathcal{Y}} \ar[r] & \mathcal{X} \ar[r]^\pi & \mathcal{Y} } $$ are fibre product squares. \end{lemma} 
\begin{lemma} \label{lemma-monomorphism-cartesian-square-inertia} Let $f : \mathcal{X} \to \mathcal{Y}$ be a monomorphism of algebraic stacks. Then the diagram $$ \xymatrix{ \mathcal{I}_\mathcal{X} \ar[r] \ar[d] & \mathcal{X} \ar[d] \\ \mathcal{I}_\mathcal{Y} \ar[r] & \mathcal{Y} } $$ is a fibre product square. \end{lemma} 
\begin{lemma} \label{lemma-presentation-inertia} Let $\mathcal{X}$ be an algebraic stack. Let $[U/R] \to \mathcal{X}$ be a presentation. Let $G/U$ be the stabilizer group algebraic space associated to the groupoid $(U, R, s, t, c)$. Then $$ \xymatrix{ G \ar[d] \ar[r] & U \ar[d] \\ \mathcal{I}_\mathcal{X} \ar[r] & \mathcal{X} } $$ is a fibre product diagram. \end{lemma} 
\begin{lemma} \label{lemma-diagonal-diagonal} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. \begin{enumerate} \item The following are equivalent \begin{enumerate} \item $\mathcal{I}_{\mathcal{X}/\mathcal{Y}} \to \mathcal{X}$ is separated, \item $\Delta_{f, 1} = \Delta_f : \mathcal{X} \to \mathcal{X} \times_\mathcal{Y} \mathcal{X}$ is separated, and \item $\Delta_{f, 2} = e : \mathcal{X} \to \mathcal{I}_{\mathcal{X}/\mathcal{Y}}$ is a closed immersion. \end{enumerate} \item The following are equivalent \begin{enumerate} \item $\mathcal{I}_{\mathcal{X}/\mathcal{Y}} \to \mathcal{X}$ is quasi-separated, \item $\Delta_{f, 1} = \Delta_f : \mathcal{X} \to \mathcal{X} \times_\mathcal{Y} \mathcal{X}$ is quasi-separated, and \item $\Delta_{f, 2} = e : \mathcal{X} \to \mathcal{I}_{\mathcal{X}/\mathcal{Y}}$ is a quasi-compact. \end{enumerate} \item The following are equivalent \begin{enumerate} \item $\mathcal{I}_{\mathcal{X}/\mathcal{Y}} \to \mathcal{X}$ is locally separated, \item $\Delta_{f, 1} = \Delta_f : \mathcal{X} \to \mathcal{X} \times_\mathcal{Y} \mathcal{X}$ is locally separated, and \item $\Delta_{f, 2} = e : \mathcal{X} \to \mathcal{I}_{\mathcal{X}/\mathcal{Y}}$ is an immersion. \end{enumerate} \item The following are equivalent \begin{enumerate} \item $\mathcal{I}_{\mathcal{X}/\mathcal{Y}} \to \mathcal{X}$ is unramified, \item $f$ is DM. \end{enumerate} \item The following are equivalent \begin{enumerate} \item $\mathcal{I}_{\mathcal{X}/\mathcal{Y}} \to \mathcal{X}$ is locally quasi-finite, \item $f$ is quasi-DM. \end{enumerate} \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-second-diagonal} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. The following are equivalent: \begin{enumerate} \item the morphism $f$ is representable by algebraic spaces, \item the second diagonal of $f$ is an isomorphism, \item the group stack $ \mathcal{I}_{\mathcal{X}/\mathcal{Y}}$ is trivial over $\mathcal X$, and \item for a scheme $T$ and a morphism $x : T \to \mathcal{X}$ the kernel of $\mathit{Isom}_\mathcal{X}(x, x) \to \mathit{Isom}_\mathcal{Y}(f(x), f(x))$ is trivial. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-hierarchy} A morphism $f : \mathcal{X} \to \mathcal{Y}$ of algebraic stacks is \begin{enumerate} \item a monomorphism if and only if $\Delta_{f, 1}$ is an isomorphism, and \item representable by algebraic spaces if and only if $\Delta_{f, 1}$ is a monomorphism. \end{enumerate} Moreover, the second diagonal $\Delta_{f, 2}$ is always a monomorphism. \end{lemma} 
\begin{lemma} \label{lemma-first-diagonal-separated-second-diagonal-closed} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Then \begin{enumerate} \item $\Delta_{f, 1}$ separated $\Leftrightarrow$ $\Delta_{f, 2}$ closed immersion $\Leftrightarrow$ $\Delta_{f, 2}$ proper $\Leftrightarrow$ $\Delta_{f, 2}$ universally closed, \item $\Delta_{f, 1}$ quasi-separated $\Leftrightarrow$ $\Delta_{f, 2}$ finite type $\Leftrightarrow$ $\Delta_{f, 2}$ quasi-compact, and \item $\Delta_{f, 1}$ locally separated $\Leftrightarrow$ $\Delta_{f, 2}$ immersion. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-definition-separated} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Then \begin{enumerate} \item $f$ is separated if and only if $\Delta_{f, 1}$ and $\Delta_{f, 2}$ are universally closed, and \item $f$ is quasi-separated if and only if $\Delta_{f, 1}$ and $\Delta_{f, 2}$ are quasi-compact. \item $f$ is quasi-DM if and only if $\Delta_{f, 1}$ and $\Delta_{f, 2}$ are locally quasi-finite. \item $f$ is DM if and only if $\Delta_{f, 1}$ and $\Delta_{f, 2}$ are unramified. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-separated-implies-isom} Let $f : \mathcal{X} \to \mathcal{Y}$ be a separated (resp.\ quasi-separated, resp.\ quasi-DM, resp.\ DM) morphism of algebraic stacks. Then \begin{enumerate} \item given algebraic spaces $T_i$, $i = 1, 2$ and morphisms $x_i : T_i \to \mathcal{X}$, with $y_i = f \circ x_i$ the morphism $$ T_1 \times_{x_1, \mathcal{X}, x_2} T_2 \longrightarrow T_1 \times_{y_1, \mathcal{Y}, y_2} T_2 $$ is proper (resp.\ quasi-compact and quasi-separated, resp.\ locally quasi-finite, resp.\ unramified), \item given an algebraic space $T$ and morphisms $x_i : T \to \mathcal{X}$, $i = 1, 2$, with $y_i = f \circ x_i$ the morphism $$ \mathit{Isom}_\mathcal{X}(x_1, x_2) \longrightarrow \mathit{Isom}_\mathcal{Y}(y_1, y_2) $$ is proper (resp.\ quasi-compact and quasi-separated, resp.\ locally quasi-finite, resp.\ unramified). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-characterize-representable-quasi-compact} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks which is representable by algebraic spaces. The following are equivalent: \begin{enumerate} \item $f$ is quasi-compact (as in Properties of Stacks, Section \ref{stacks-properties-section-properties-morphisms}), and \item for every quasi-compact algebraic stack $\mathcal{Z}$ and any morphism $\mathcal{Z} \to \mathcal{Y}$ the algebraic stack $\mathcal{Z} \times_\mathcal{Y} \mathcal{X}$ is quasi-compact. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-quasi-compact} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $f$ is {\it quasi-compact} if for every quasi-compact algebraic stack $\mathcal{Z}$ and morphism $\mathcal{Z} \to \mathcal{Y}$ the fibre product $\mathcal{Z} \times_\mathcal{Y} \mathcal{X}$ is quasi-compact. \end{definition} 
\begin{lemma} \label{lemma-base-change-quasi-compact} The base change of a quasi-compact morphism of algebraic stacks by any morphism of algebraic stacks is quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-composition-quasi-compact} The composition of a pair of quasi-compact morphisms of algebraic stacks is quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-closed-immersion-quasi-compact} A closed immersion of algebraic stacks is quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-surjection-from-quasi-compact} Let $$ \xymatrix{ \mathcal{X} \ar[rr]_f \ar[rd]_p & & \mathcal{Y} \ar[dl]^q \\ & \mathcal{Z} } $$ be a $2$-commutative diagram of morphisms of algebraic stacks. If $f$ is surjective and $p$ is quasi-compact, then $q$ is quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-quasi-compact-permanence} Let $f : \mathcal{X} \to \mathcal{Y}$ and $g : \mathcal{Y} \to \mathcal{Z}$ be morphisms of algebraic stacks. If $g \circ f$ is quasi-compact and $g$ is quasi-separated then $f$ is quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-quasi-compact-quasi-separated-permanence} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. \begin{enumerate} \item If $\mathcal{X}$ is quasi-compact and $\mathcal{Y}$ is quasi-separated, then $f$ is quasi-compact. \item If $\mathcal{X}$ is quasi-compact and quasi-separated and $\mathcal{Y}$ is quasi-separated, then $f$ is quasi-compact and quasi-separated. \item A fibre product of quasi-compact and quasi-separated algebraic stacks is quasi-compact and quasi-separated. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-reach-points-scheme-theoretic-image} Let $f : \mathcal{X} \to \mathcal{Y}$ be a quasi-compact morphism of algebraic stacks. Let $y \in |\mathcal{Y}|$ be a point in the closure of the image of $|f|$. There exists a valuation ring $A$ with fraction field $K$ and a commutative diagram $$ \xymatrix{ \Spec(K) \ar[r] \ar[d] & \mathcal{X} \ar[d] \\ \Spec(A) \ar[r] & \mathcal{Y} } $$ such that the closed point of $\Spec(A)$ maps to $y$. \end{lemma} 
\begin{lemma} \label{lemma-check-quasi-compact-covering} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $W \to \mathcal{Y}$ be surjective, flat, and locally of finite presentation where $W$ is an algebraic space. If the base change $W \times_\mathcal{Y} \mathcal{X} \to W$ is quasi-compact, then $f$ is quasi-compact. \end{lemma} 
\begin{definition} \label{definition-noetherian} Let $\mathcal{X}$ be an algebraic stack. We say $\mathcal{X}$ is {\it Noetherian} if $\mathcal{X}$ is quasi-compact, quasi-separated and locally Noetherian. \end{definition} 
\begin{lemma} \label{lemma-locally-closed-in-noetherian} Let $j : \mathcal{X} \to \mathcal{Y}$ be an immersion of algebraic stacks. \begin{enumerate} \item If $\mathcal{Y}$ is locally Noetherian, then $\mathcal{X}$ is locally Noetherian and $j$ is quasi-compact. \item If $\mathcal{Y}$ is Noetherian, then $\mathcal{X}$ is Noetherian. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-Noetherian-topology} Let $\mathcal{X}$ be an algebraic stack. \begin{enumerate} \item If $\mathcal{X}$ is locally Noetherian then $|\mathcal{X}|$ is a locally Noetherian topological space. \item If $\mathcal{X}$ is quasi-compact and locally Noetherian, then $|\mathcal{X}|$ is a Noetherian topological space. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-locally-Noetherian-quasi-sober} Let $\mathcal{X}$ be a locally Noetherian algebraic stack. Then $|\mathcal{X}|$ is quasi-sober (Topology, Definition \ref{topology-definition-generic-point}). \end{lemma} 
\begin{definition} \label{definition-affine} A morphism of algebraic stacks is said to be {\it affine} if it is representable and affine in the sense of Properties of Stacks, Section \ref{stacks-properties-section-properties-morphisms}. \end{definition} 
\begin{lemma} \label{lemma-base-change-affine} Let $\mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $\mathcal{Z} \to \mathcal{Y}$ be an affine morphism of algebraic stacks. Then $\mathcal{Z} \times_\mathcal{Y} \mathcal{X} \to \mathcal{X}$ is an affine morphism of algebraic stacks. \end{lemma} 
\begin{lemma} \label{lemma-composition-affine} Compositions of affine morphisms of algebraic stacks are affine. \end{lemma} 
\begin{lemma} \label{lemma-affine-permanence} Let $$ \xymatrix{ \mathcal{X} \ar[rr]_f \ar[rd]_a & & \mathcal{Y} \ar[dl]^b \\ & \mathcal{Z} } $$ be a commutative diagram of morphisms of algebraic stacks. If $a$ is affine and $\Delta_b$ is affine, then $f$ is affine. \end{lemma} 
\begin{definition} \label{definition-integral} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. \begin{enumerate} \item We say $f$ is {\it integral} if $f$ is representable and integral in the sense of Properties of Stacks, Section \ref{stacks-properties-section-properties-morphisms}. \item We say $f$ is {\it finite} if $f$ is representable and finite in the sense of Properties of Stacks, Section \ref{stacks-properties-section-properties-morphisms}. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-base-change-integral} Let $\mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $\mathcal{Z} \to \mathcal{Y}$ be an integral (or finite) morphism of algebraic stacks. Then $\mathcal{Z} \times_\mathcal{Y} \mathcal{X} \to \mathcal{X}$ is an integral (or finite) morphism of algebraic stacks. \end{lemma} 
\begin{lemma} \label{lemma-composition-integral} Compositions of integral, resp.\ finite morphisms of algebraic stacks are integral, resp.\ finite. \end{lemma} 
\begin{lemma} \label{lemma-characterize-representable-universally-open} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks which is representable by algebraic spaces. The following are equivalent \begin{enumerate} \item $f$ is universally open (as in Properties of Stacks, Section \ref{stacks-properties-section-properties-morphisms}), and \item for every morphism of algebraic stacks $\mathcal{Z} \to \mathcal{Y}$ the morphism of topological spaces $|\mathcal{Z} \times_\mathcal{Y} \mathcal{X}| \to |\mathcal{Z}|$ is open. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-open} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. \begin{enumerate} \item We say $f$ is {\it open} if the map of topological spaces $|\mathcal{X}| \to |\mathcal{Y}|$ is open. \item We say $f$ is {\it universally open} if for every morphism of algebraic stacks $\mathcal{Z} \to \mathcal{Y}$ the morphism of topological spaces $$ |\mathcal{Z} \times_\mathcal{Y} \mathcal{X}| \to |\mathcal{Z}| $$ is open, i.e., the base change $\mathcal{Z} \times_\mathcal{Y} \mathcal{X} \to \mathcal{Z}$ is open. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-base-change-universally-open} The base change of a universally open morphism of algebraic stacks by any morphism of algebraic stacks is universally open. \end{lemma} 
\begin{lemma} \label{lemma-composition-universally-open} The composition of a pair of (universally) open morphisms of algebraic stacks is (universally) open. \end{lemma} 
\begin{lemma} \label{lemma-characterize-representable-universally-submersive} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks which is representable by algebraic spaces. The following are equivalent \begin{enumerate} \item $f$ is universally submersive (as in Properties of Stacks, Section \ref{stacks-properties-section-properties-morphisms}), and \item for every morphism of algebraic stacks $\mathcal{Z} \to \mathcal{Y}$ the morphism of topological spaces $|\mathcal{Z} \times_\mathcal{Y} \mathcal{X}| \to |\mathcal{Z}|$ is submersive. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-submersive} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. \begin{enumerate} \item We say $f$ is {\it submersive}\footnote{This is very different from the notion of a submersion of differential manifolds.} if the continuous map $|\mathcal{X}| \to |\mathcal{Y}|$ is submersive, see Topology, Definition \ref{topology-definition-submersive}. \item We say $f$ is {\it universally submersive} if for every morphism of algebraic stacks $\mathcal{Y}' \to \mathcal{Y}$ the base change $\mathcal{Y}' \times_\mathcal{Y} \mathcal{X} \to \mathcal{Y}'$ is submersive. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-base-change-universally-submersive} The base change of a universally submersive morphism of algebraic stacks by any morphism of algebraic stacks is universally submersive. \end{lemma} 
\begin{lemma} \label{lemma-composition-universally-submersive} The composition of a pair of (universally) submersive morphisms of algebraic stacks is (universally) submersive. \end{lemma} 
\begin{lemma} \label{lemma-characterize-representable-universally-closed} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks which is representable by algebraic spaces. The following are equivalent \begin{enumerate} \item $f$ is universally closed (as in Properties of Stacks, Section \ref{stacks-properties-section-properties-morphisms}), and \item for every morphism of algebraic stacks $\mathcal{Z} \to \mathcal{Y}$ the morphism of topological spaces $|\mathcal{Z} \times_\mathcal{Y} \mathcal{X}| \to |\mathcal{Z}|$ is closed. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-closed} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. \begin{enumerate} \item We say $f$ is {\it closed} if the map of topological spaces $|\mathcal{X}| \to |\mathcal{Y}|$ is closed. \item We say $f$ is {\it universally closed} if for every morphism of algebraic stacks $\mathcal{Z} \to \mathcal{Y}$ the morphism of topological spaces $$ |\mathcal{Z} \times_\mathcal{Y} \mathcal{X}| \to |\mathcal{Z}| $$ is closed, i.e., the base change $\mathcal{Z} \times_\mathcal{Y} \mathcal{X} \to \mathcal{Z}$ is closed. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-base-change-universally-closed} The base change of a universally closed morphism of algebraic stacks by any morphism of algebraic stacks is universally closed. \end{lemma} 
\begin{lemma} \label{lemma-composition-universally-closed} The composition of a pair of (universally) closed morphisms of algebraic stacks is (universally) closed. \end{lemma} 
\begin{lemma} \label{lemma-universally-closed-local} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. The following are equivalent \begin{enumerate} \item $f$ is universally closed, \item for every scheme $Z$ and every morphism $Z \to \mathcal{Y}$ the projection $|Z \times_\mathcal{Y} \mathcal{X}| \to |Z|$ is closed, \item for every affine scheme $Z$ and every morphism $Z \to \mathcal{Y}$ the projection $|Z \times_\mathcal{Y} \mathcal{X}| \to |Z|$ is closed, and \item there exists an algebraic space $V$ and a surjective smooth morphism $V \to \mathcal{Y}$ such that $V \times_\mathcal{Y} \mathcal{X} \to V$ is a universally closed morphism of algebraic stacks. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-characterize-representable-universally-injective} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks which is representable by algebraic spaces. The following are equivalent \begin{enumerate} \item $f$ is universally injective (as in Properties of Stacks, Section \ref{stacks-properties-section-properties-morphisms}), and \item for every morphism of algebraic stacks $\mathcal{Z} \to \mathcal{Y}$ the map $|\mathcal{Z} \times_\mathcal{Y} \mathcal{X}| \to |\mathcal{Z}|$ is injective. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-universally-injective} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $f$ is {\it universally injective} if for every morphism of algebraic stacks $\mathcal{Z} \to \mathcal{Y}$ the map $$ |\mathcal{Z} \times_\mathcal{Y} \mathcal{X}| \to |\mathcal{Z}| $$ is injective. \end{definition} 
\begin{lemma} \label{lemma-base-change-universally-injective} The base change of a universally injective morphism of algebraic stacks by any morphism of algebraic stacks is universally injective. \end{lemma} 
\begin{lemma} \label{lemma-composition-universally-injective} The composition of a pair of universally injective morphisms of algebraic stacks is universally injective. \end{lemma} 
\begin{lemma} \label{lemma-universally-injective} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. The following are equivalent \begin{enumerate} \item $f$ is universally injective, \item $\Delta : \mathcal{X} \to \mathcal{X} \times_\mathcal{Y} \mathcal{X}$ is surjective, and \item for an algebraically closed field, for $x_1, x_2 : \Spec(k) \to \mathcal{X}$, and for a $2$-arrow $\beta : f \circ x_1 \to f \circ x_2$ there is a $2$-arrow $\alpha : x_1 \to x_2$ with $\beta = \text{id}_f \star \alpha$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-universally-injective-point} Let $f : \mathcal{X} \to \mathcal{Y}$ be a universally injective morphism of algebraic stacks. Let $y : \Spec(k) \to \mathcal{Y}$ be a morphism where $k$ is an algebraically closed field. If $y$ is in the image of $|\mathcal{X}| \to |\mathcal{Y}|$, then there is a morphism $x : \Spec(k) \to \mathcal{X}$ with $y = f \circ x$. \end{lemma} 
\begin{lemma} \label{lemma-universally-injective-local} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. The following are equivalent: \begin{enumerate} \item $f$ is universally injective, \item for every affine scheme $Z$ and any morphism $Z \to \mathcal{Y}$ the morphism $Z \times_\mathcal{Y} \mathcal{X} \to Z$ is universally injective, and \item add more here. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-check-universally-injective-covering} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $W \to \mathcal{Y}$ be surjective, flat, and locally of finite presentation where $W$ is an algebraic space. If the base change $W \times_\mathcal{Y} \mathcal{X} \to W$ is universally injective, then $f$ is universally injective. \end{lemma} 
\begin{lemma} \label{lemma-characterize-representable-universal-homeomorphism} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks which is representable by algebraic spaces. The following are equivalent \begin{enumerate} \item $f$ is a universal homeomorphism (Properties of Stacks, Section \ref{stacks-properties-section-properties-morphisms}), and \item for every morphism of algebraic stacks $\mathcal{Z} \to \mathcal{Y}$ the map of topological spaces $|\mathcal{Z} \times_\mathcal{Y} \mathcal{X}| \to |\mathcal{Z}|$ is a homeomorphism. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-universal-homeomorphism} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $f$ is a {\it universal homeomorphism} if for every morphism of algebraic stacks $\mathcal{Z} \to \mathcal{Y}$ the map of topological spaces $$ |\mathcal{Z} \times_\mathcal{Y} \mathcal{X}| \to |\mathcal{Z}| $$ is a homeomorphism. \end{definition} 
\begin{lemma} \label{lemma-base-change-universal-homeomorphism} The base change of a universal homeomorphism of algebraic stacks by any morphism of algebraic stacks is a universal homeomorphism. \end{lemma} 
\begin{lemma} \label{lemma-composition-universal-homeomorphism} The composition of a pair of universal homeomorphisms of algebraic stacks is a universal homeomorphism. \end{lemma} 
\begin{lemma} \label{lemma-check-universal-homeomorphism-covering} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $W \to \mathcal{Y}$ be surjective, flat, and locally of finite presentation where $W$ is an algebraic space. If the base change $W \times_\mathcal{Y} \mathcal{X} \to W$ is a universal homeomorphism, then $f$ is a universal homeomorphism. \end{lemma} 
\begin{lemma} \label{lemma-local-source-target} Let $\mathcal{P}$ be a property of morphisms of algebraic spaces which is smooth local on the source-and-target. Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Consider commutative diagrams $$ \xymatrix{ U \ar[d]_a \ar[r]_h & V \ar[d]^b \\ \mathcal{X} \ar[r]^f & \mathcal{Y} } $$ where $U$ and $V$ are algebraic spaces and the vertical arrows are smooth. The following are equivalent \begin{enumerate} \item for any diagram as above such that in addition $U \to \mathcal{X} \times_\mathcal{Y} V$ is smooth the morphism $h$ has property $\mathcal{P}$, and \item for some diagram as above with $a : U \to \mathcal{X}$ surjective the morphism $h$ has property $\mathcal{P}$. \end{enumerate} If $\mathcal{X}$ and $\mathcal{Y}$ are representable by algebraic spaces, then this is also equivalent to $f$ (as a morphism of algebraic spaces) having property $\mathcal{P}$. If $\mathcal{P}$ is also preserved under any base change, and fppf local on the base, then for morphisms $f$ which are representable by algebraic spaces this is also equivalent to $f$ having property $\mathcal{P}$ in the sense of Properties of Stacks, Section \ref{stacks-properties-section-properties-morphisms}. \end{lemma} 
\begin{definition} \label{definition-P} Let $\mathcal{P}$ be a property of morphisms of algebraic spaces which is smooth local on the source-and-target. We say a morphism $f : \mathcal{X} \to \mathcal{Y}$ of algebraic stacks {\it has property $\mathcal{P}$} if the equivalent conditions of Lemma \ref{lemma-local-source-target} hold. \end{definition} 
\begin{definition} \label{definition-locally-finite-type} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. \begin{enumerate} \item We say $f$ {\it locally of finite type} if the equivalent conditions of Lemma \ref{lemma-local-source-target} hold with $\mathcal{P} = \text{locally of finite type}$. \item We say $f$ is {\it of finite type} if it is locally of finite type and quasi-compact. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-composition-finite-type} The composition of finite type morphisms is of finite type. The same holds for locally of finite type. \end{lemma} 
\begin{lemma} \label{lemma-base-change-finite-type} A base change of a finite type morphism is finite type. The same holds for locally of finite type. \end{lemma} 
\begin{lemma} \label{lemma-immersion-locally-finite-type} An immersion is locally of finite type. \end{lemma} 
\begin{lemma} \label{lemma-locally-finite-type-locally-noetherian} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. If $f$ is locally of finite type and $\mathcal{Y}$ is locally Noetherian, then $\mathcal{X}$ is locally Noetherian. \end{lemma} 
\begin{lemma} \label{lemma-check-finite-type-covering} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $W \to \mathcal{Y}$ be a surjective, flat, and locally of finite presentation where $W$ is an algebraic space. If the base change $W \times_\mathcal{Y} \mathcal{X} \to W$ is locally of finite type, then $f$ is locally of finite type. \end{lemma} 
\begin{lemma} \label{lemma-check-finite-type-precompose} Let $\mathcal{X} \to \mathcal{Y} \to \mathcal{Z}$ be morphisms of algebraic stacks. Assume $\mathcal{X} \to \mathcal{Z}$ is locally of finite type and that $\mathcal{X} \to \mathcal{Y}$ is representable by algebraic spaces, surjective, flat, and locally of finite presentation. Then $\mathcal{Y} \to \mathcal{Z}$ is locally of finite type. \end{lemma} 
\begin{lemma} \label{lemma-finite-type-permanence} Let $f : \mathcal{X} \to \mathcal{Y}$, $g : \mathcal{Y} \to \mathcal{Z}$ be morphisms of algebraic stacks. If $g \circ f : \mathcal{X} \to \mathcal{Z}$ is locally of finite type, then $f : \mathcal{X} \to \mathcal{Y}$ is locally of finite type. \end{lemma} 
\begin{lemma} \label{lemma-point-finite-type} Let $\mathcal{X}$ be an algebraic stack. Let $x \in |\mathcal{X}|$. The following are equivalent: \begin{enumerate} \item There exists a morphism $\Spec(k) \to \mathcal{X}$ which is locally of finite type and represents $x$. \item There exists a scheme $U$, a closed point $u \in U$, and a smooth morphism $\varphi : U \to \mathcal{X}$ such that $\varphi(u) = x$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-finite-type-point} Let $\mathcal{X}$ be an algebraic stack. We say a point $x \in |\mathcal{X}|$ is a {\it finite type point}\footnote{This is a slight abuse of language as it would perhaps be more correct to say ``locally finite type point''.} if the equivalent conditions of Lemma \ref{lemma-point-finite-type} are satisfied. We denote $\mathcal{X}_{\text{ft-pts}}$ the set of finite type points of $\mathcal{X}$. \end{definition} 
\begin{lemma} \label{lemma-identify-finite-type-points} Let $\mathcal{X}$ be an algebraic stack. We have $$ \mathcal{X}_{\text{ft-pts}} = \bigcup\nolimits_{\varphi : U \to \mathcal{X}\text{ smooth}} |\varphi|(U_0) $$ where $U_0$ is the set of closed points of $U$. Here we may let $U$ range over all schemes smooth over $\mathcal{X}$ or over all affine schemes smooth over $\mathcal{X}$. \end{lemma} 
\begin{lemma} \label{lemma-finite-type-points-morphism} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. If $f$ is locally of finite type, then $f(\mathcal{X}_{\text{ft-pts}}) \subset \mathcal{Y}_{\text{ft-pts}}$. \end{lemma} 
\begin{lemma} \label{lemma-finite-type-points-surjective-morphism} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. If $f$ is locally of finite type and surjective, then $f(\mathcal{X}_{\text{ft-pts}}) = \mathcal{Y}_{\text{ft-pts}}$. \end{lemma} 
\begin{lemma} \label{lemma-enough-finite-type-points} Let $\mathcal{X}$ be an algebraic stack. For any locally closed subset $T \subset |\mathcal{X}|$ we have $$ T \not = \emptyset \Rightarrow T \cap \mathcal{X}_{\text{ft-pts}} \not = \emptyset. $$ In particular, for any closed subset $T \subset |\mathcal{X}|$ we see that $T \cap \mathcal{X}_{\text{ft-pts}}$ is dense in $T$. \end{lemma} 
\begin{lemma} \label{lemma-point-finite-type-monomorphism} Let $\mathcal{X}$ be an algebraic stack. Let $x \in |\mathcal{X}|$. The following are equivalent: \begin{enumerate} \item $x$ is a finite type point, \item there exists an algebraic stack $\mathcal{Z}$ whose underlying topological space $|\mathcal{Z}|$ is a singleton, and a morphism $f : \mathcal{Z} \to \mathcal{X}$ which is locally of finite type such that $\{x\} = |f|(|\mathcal{Z}|)$, and \item the residual gerbe $\mathcal{Z}_x$ of $\mathcal{X}$ at $x$ exists and the inclusion morphism $\mathcal{Z}_x \to \mathcal{X}$ is locally of finite type. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-automorphism-group-scheme} In the situation above $G_x$ is a scheme if one of the following holds \begin{enumerate} \item $\Delta : \mathcal{X} \to \mathcal{X} \times \mathcal{X}$ is quasi-separated \item $\Delta : \mathcal{X} \to \mathcal{X} \times \mathcal{X}$ is locally separated, \item $\mathcal{X}$ is quasi-DM, \item $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is quasi-separated, \item $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is locally separated, or \item $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is locally quasi-finite. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-property-automorphism-groups} Let $\mathcal{X}$ be an algebraic stack. Let $x \in |\mathcal{X}|$ be a point. Let $P$ be a property of algebraic spaces over fields which is invariant under ground field extensions; for example $P(X/k) = X \to \Spec(k)\text{ is finite}$. The following are equivalent \begin{enumerate} \item for some morphism $x : \Spec(k) \to \mathcal{X}$ in the class of $x$ the automorphism group algebraic space $G_x/k$ has $P$, and \item for any morphism $x : \Spec(k) \to \mathcal{X}$ in the class of $x$ the automorphism group algebraic space $G_x/k$ has $P$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-iso-automorphism-groups} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $x \in |\mathcal{X}|$ be a point. The following are equivalent \begin{enumerate} \item for some morphism $x : \Spec(k) \to \mathcal{X}$ in the class of $x$ setting $y = f \circ x$ the map $G_x \to G_y$ of automorphism group algebraic spaces is an isomorphism, and \item for any morphism $x : \Spec(k) \to \mathcal{X}$ in the class of $x$ setting $y = f \circ x$ the map $G_x \to G_y$ of automorphism group algebraic spaces is an isomorphism. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-properties-diagonal-from-presentation} Let $(U, R, s, t, c)$ be a groupoid in algebraic spaces such that $s, t : R \to U$ are flat and locally of finite presentation. Consider the algebraic stack $\mathcal{X} = [U/R]$ (see above). \begin{enumerate} \item If $R \to U \times U$ is separated, then $\Delta_\mathcal{X}$ is separated. \item If $U$, $R$ are separated, then $\Delta_\mathcal{X}$ is separated. \item If $R \to U \times U$ is locally quasi-finite, then $\mathcal{X}$ is quasi-DM. \item If $s, t : R \to U$ are locally quasi-finite, then $\mathcal{X}$ is quasi-DM. \item If $R \to U \times U$ is proper, then $\mathcal{X}$ is separated. \item If $s, t : R \to U$ are proper and $U$ is separated, then $\mathcal{X}$ is separated. \item Add more here. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-points-presentation} Let $(U, R, s, t, c)$ be a groupoid in algebraic spaces such that $s, t : R \to U$ are flat and locally of finite presentation. Consider the algebraic stack $\mathcal{X} = [U/R]$ (see above). Then the image of $|R| \to |U| \times |U|$ is an equivalence relation and $|\mathcal{X}|$ is the quotient of $|U|$ by this equivalence relation. \end{lemma} 
\begin{lemma} \label{lemma-slice} Let $\mathcal{X}$ be an algebraic stack. Consider a cartesian diagram $$ \xymatrix{ U \ar[d] & F \ar[l]^p \ar[d] \\ \mathcal{X} & \Spec(k) \ar[l] } $$ where $U$ is an algebraic space, $k$ is a field, and $U \to \mathcal{X}$ is flat and locally of finite presentation. Let $f_1, \ldots, f_r \in \Gamma(U, \mathcal{O}_U)$ and $z \in |F|$ such that $f_1, \ldots, f_r$ map to a regular sequence in the local ring $\mathcal{O}_{F, \overline{z}}$. Then, after replacing $U$ by an open subspace containing $p(z)$, the morphism $$ V(f_1, \ldots, f_r) \longrightarrow \mathcal{X} $$ is flat and locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-quasi-finite-at-point} Let $\mathcal{X}$ be an algebraic stack. Consider a cartesian diagram $$ \xymatrix{ U \ar[d] & F \ar[l]^p \ar[d] \\ \mathcal{X} & \Spec(k) \ar[l] } $$ where $U$ is an algebraic space, $k$ is a field, and $U \to \mathcal{X}$ is locally of finite type. Let $z \in |F|$ be such that $\dim_z(F) = 0$. Then, after replacing $U$ by an open subspace containing $p(z)$, the morphism $$ U \longrightarrow \mathcal{X} $$ is locally quasi-finite. \end{lemma} 
\begin{theorem} \label{theorem-quasi-DM} Let $\mathcal{X}$ be an algebraic stack. The following are equivalent \begin{enumerate} \item $\mathcal{X}$ is quasi-DM, and \item there exists a scheme $W$ and a surjective, flat, locally finitely presented, locally quasi-finite morphism $W \to \mathcal{X}$. \end{enumerate} \end{theorem} 
\begin{lemma} \label{lemma-DM-residual-gerbe} Let $\mathcal{Z}$ be a DM, locally Noetherian, reduced algebraic stack with $|\mathcal{Z}|$ a singleton. Then there exists a field $k$ and a surjective \'etale morphism $\Spec(k) \to \mathcal{Z}$. \end{lemma} 
\begin{lemma} \label{lemma-etale-at-point} Let $\mathcal{X}$ be an algebraic stack. Consider a cartesian diagram $$ \xymatrix{ U \ar[d] & F \ar[l]^p \ar[d] \\ \mathcal{X} & \Spec(k) \ar[l] } $$ where $U$ is an algebraic space, $k$ is a field, and $U \to \mathcal{X}$ is flat and locally of finite presentation. Let $z \in |F|$ be such that $F \to \Spec(k)$ is unramified at $z$. Then, after replacing $U$ by an open subspace containing $p(z)$, the morphism $$ U \longrightarrow \mathcal{X} $$ is \'etale. \end{lemma} 
\begin{theorem} \label{theorem-DM} Let $\mathcal{X}$ be an algebraic stack. The following are equivalent \begin{enumerate} \item $\mathcal{X}$ is DM, \item $\mathcal{X}$ is Deligne-Mumford, and \item there exists a scheme $W$ and a surjective \'etale morphism $W \to \mathcal{X}$. \end{enumerate} \end{theorem} 
\begin{lemma} \label{lemma-DM} Let $f : \mathcal{X} \to \mathcal{Y}$ be a DM morphism of algebraic stacks. Then \begin{enumerate} \item For every DM algebraic stack $\mathcal{Z}$ and morphism $\mathcal{Z} \to \mathcal{Y}$ there exists a scheme and a surjective \'etale morphism $U \to \mathcal{X} \times_\mathcal{Y} \mathcal{Z}$. \item For every algebraic space $Z$ and morphism $Z \to \mathcal{Y}$ there exists a scheme and a surjective \'etale morphism $U \to \mathcal{X} \times_\mathcal{Y} Z$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-open-DM-locus} Let $\mathcal{X}$ be an algebraic stack. There exist open substacks $$ \mathcal{X}'' \subset \mathcal{X}' \subset \mathcal{X} $$ such that $\mathcal{X}''$ is DM, $\mathcal{X}'$ is quasi-DM, and such that these are the largest open substacks with these properties. \end{lemma} 
\begin{lemma} \label{lemma-points-DM-locus} Let $\mathcal{X}$ be an algebraic stack. Let $x \in |\mathcal{X}|$ correspond to $x : \Spec(k) \to \mathcal{X}$. Let $G_x/k$ be the automorphism group algebraic space of $x$. Then \begin{enumerate} \item  $x$ is in the DM locus of $\mathcal{X}$ if and only if $G_x \to \Spec(k)$ is unramified, and \item $x$ is in the quasi-DM locus of $\mathcal{X}$ if and only if $G_x \to \Spec(k)$ is locally quasi-finite. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-representable-by-spaces-quasi-finite} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Assume $f$ is representable by algebraic spaces. The following are equivalent \begin{enumerate} \item $f$ is locally quasi-finite (as in Properties of Stacks, Section \ref{stacks-properties-section-properties-morphisms}), and \item $f$ is locally of finite type and for every morphism $\Spec(k) \to \mathcal{Y}$ where $k$ is a field the space $|\Spec(k) \times_\mathcal{Y} \mathcal{X}|$ is discrete. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-locally-quasi-finite} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $f$ is {\it locally quasi-finite} if $f$ is quasi-DM, locally of finite type, and for every morphism $\Spec(k) \to \mathcal{Y}$ where $k$ is a field the space $|\mathcal{X}_k|$ is discrete. \end{definition} 
\begin{lemma} \label{lemma-base-change-locally-quasi-finite} A base change of a locally quasi-finite morphism is locally quasi-finite. \end{lemma} 
\begin{lemma} \label{lemma-locally-quasi-finite-over-field} Let $\mathcal{X} \to \Spec(k)$ be a locally quasi-finite morphism where $\mathcal{X}$ is an algebraic stack and $k$ is a field. Let $f : V \to \mathcal{X}$ be a locally quasi-finite morphism where $V$ is a scheme. Then $V \to \Spec(k)$ is locally quasi-finite. \end{lemma} 
\begin{lemma} \label{lemma-composition-locally-quasi-finite} A composition of a locally quasi-finite morphisms is locally quasi-finite. \end{lemma} 
\begin{lemma} \label{lemma-characterize-quasi-DM} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. The following are equivalent \begin{enumerate} \item $f$ is quasi-DM, \item for any morphism $V \to \mathcal{Y}$ with $V$ an algebraic space there exists a surjective, flat, locally finitely presented, locally quasi-finite morphism $U \to \mathcal{X} \times_\mathcal{Y} V$ where $U$ is an algebraic space, and \item there exist algebraic spaces $U$, $V$ and a morphism $V \to \mathcal{Y}$ which is surjective, flat, and locally of finite presentation, and a morphism $U \to \mathcal{X} \times_\mathcal{Y} V$ which is surjective, flat, locally of finite presentation, and locally quasi-finite. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-characterize-locally-quasi-finite} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. The following are equivalent \begin{enumerate} \item $f$ is locally quasi-finite, \item $f$ is quasi-DM and for any morphism $V \to \mathcal{Y}$ with $V$ an algebraic space and any locally quasi-finite morphism $U \to \mathcal{X} \times_\mathcal{Y} V$ where $U$ is an algebraic space the morphism $U \to V$ is locally quasi-finite, \item for any morphism $V \to \mathcal{Y}$ from an algebraic space $V$ there exists a surjective, flat, locally finitely presented, and locally quasi-finite morphism $U \to \mathcal{X} \times_\mathcal{Y} V$ where $U$ is an algebraic space such that $U \to V$ is locally quasi-finite, \item there exists algebraic spaces $U$, $V$, a surjective, flat, and locally of finite presentation morphism $V \to \mathcal{Y}$, and a morphism $U \to \mathcal{X} \times_\mathcal{Y} V$ which is surjective, flat, locally of finite presentation, and locally quasi-finite such that $U \to V$ is locally quasi-finite. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-locally-quasi-finite-permanence} Let $\mathcal{X} \to \mathcal{Y} \to \mathcal{Z}$ be morphisms of algebraic stacks. Assume that $\mathcal{X} \to \mathcal{Z}$ is locally quasi-finite and $\mathcal{Y} \to \mathcal{Z}$ is quasi-DM. Then $\mathcal{X} \to \mathcal{Y}$ is locally quasi-finite. \end{lemma} 
\begin{definition} \label{definition-quasi-finite} \begin{reference} \cite{rydh_approx} \end{reference} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $f$ is {\it quasi-finite} if $f$ is locally quasi-finite (Definition \ref{definition-locally-quasi-finite}) and quasi-compact (Definition \ref{definition-quasi-compact}). \end{definition} 
\begin{lemma} \label{lemma-composition-quasi-finite} The composition of quasi-finite morphisms is quasi-finite. \end{lemma} 
\begin{lemma} \label{lemma-base-change-quasi-finite} A base change of a quasi-finite morphism is quasi-finite. \end{lemma} 
\begin{lemma} \label{lemma-quasi-finite-permanence} Let $f : \mathcal{X} \to \mathcal{Y}$ and $g : \mathcal{Y} \to \mathcal{Z}$ be morphisms of algebraic stacks. If $g \circ f$ is quasi-finite and $g$ is quasi-separated and quasi-DM then $f$ is quasi-finite. \end{lemma} 
\begin{definition} \label{definition-flat} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $f$ is {\it flat} if the equivalent conditions of Lemma \ref{lemma-local-source-target} hold with $\mathcal{P} = \text{flat}$. \end{definition} 
\begin{lemma} \label{lemma-composition-flat} The composition of flat morphisms is flat. \end{lemma} 
\begin{lemma} \label{lemma-base-change-flat} A base change of a flat morphism is flat. \end{lemma} 
\begin{lemma} \label{lemma-descent-flat} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $\mathcal{Z} \to \mathcal{Y}$ be a surjective flat morphism of algebraic stacks. If the base change $\mathcal{Z} \times_\mathcal{Y} \mathcal{X} \to \mathcal{Z}$ is flat, then $f$ is flat. \end{lemma} 
\begin{lemma} \label{lemma-flat-permanence} Let $\mathcal{X} \to \mathcal{Y} \to \mathcal{Z}$ be morphisms of algebraic stacks. If $\mathcal{X} \to \mathcal{Z}$ is flat and $\mathcal{X} \to \mathcal{Y}$ is surjective and flat, then $\mathcal{Y} \to \mathcal{Z}$ is flat. \end{lemma} 
\begin{lemma} \label{lemma-lift-valuation-ring-through-flat-morphism} Let $f : \mathcal{X} \to \mathcal{Y}$ be a flat morphism of algebraic stacks. Let $\Spec(A) \to \mathcal{Y}$ be a morphism where $A$ is a valuation ring. If the closed point of $\Spec(A)$ maps to a point of $|\mathcal{Y}|$ in the image of $|\mathcal{X|} \to |\mathcal{Y}|$, then there exists a commutative diagram $$ \xymatrix{ \Spec(A') \ar[r] \ar[d] & \mathcal{X} \ar[d] \\ \Spec(A) \ar[r] & \mathcal{Y} } $$ where $A \to A'$ is an extension of valuation rings (More on Algebra, Definition \ref{more-algebra-definition-extension-valuation-rings}). \end{lemma} 
\begin{lemma} \label{lemma-flat-at-point} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $x \in |\mathcal{X}|$. Consider commutative diagrams $$ \vcenter{ \xymatrix{ U \ar[d]_a \ar[r]_h & V \ar[d]^b \\ \mathcal{X} \ar[r]^f & \mathcal{Y} } } \quad\text{with points} \vcenter{ \xymatrix{ u \in |U| \ar[d] \\ x \in |\mathcal{X}| } } $$ where $U$ and $V$ are algebraic spaces, $b$ is flat, and $(a, h) : U \to \mathcal{X} \times_\mathcal{Y} V$ is flat. The following are equivalent \begin{enumerate} \item $h$ is flat at $u$ for one diagram as above, \item $h$ is flat at $u$ for every diagram as above. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-flat-at-point} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $x \in |\mathcal{X}|$. We say $f$ is {\it flat at $x$} if the equivalent conditions of Lemma \ref{lemma-flat-at-point} hold. \end{definition} 
\begin{definition} \label{definition-locally-finite-presentation} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. \begin{enumerate} \item We say $f$ {\it locally of finite presentation} if the equivalent conditions of Lemma \ref{lemma-local-source-target} hold with $\mathcal{P} = \text{locally of finite presentation}$. \item We say $f$ is {\it of finite presentation} if it is locally of finite presentation, quasi-compact, and quasi-separated. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-composition-finite-presentation} The composition of finitely presented morphisms is of finite presentation. The same holds for morphisms which are locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-base-change-finite-presentation} A base change of a finitely presented morphism is of finite presentation. The same holds for morphisms which are locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-finite-presentation-finite-type} A morphism which is locally of finite presentation is locally of finite type. A morphism of finite presentation is of finite type. \end{lemma} 
\begin{lemma} \label{lemma-noetherian-finite-type-finite-presentation} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. \begin{enumerate} \item If $\mathcal{Y}$ is locally Noetherian and $f$ locally of finite type then $f$ is locally of finite presentation. \item If $\mathcal{Y}$ is locally Noetherian and $f$ of finite type and quasi-separated then $f$ is of finite presentation. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-finite-presentation-permanence} Let $f : \mathcal{X} \to \mathcal{Y}$ and $g : \mathcal{Y} \to \mathcal{Z}$ be morphisms of algebraic stacks If $g \circ f$ is locally of finite presentation and $g$ is locally of finite type, then $f$ is locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-diagonal-morphism-finite-type} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks with diagonal $\Delta : \mathcal{X} \to \mathcal{X} \times_\mathcal{Y} \mathcal{X}$. If $f$ is locally of finite type then $\Delta$ is locally of finite presentation. If $f$ is quasi-separated and locally of finite type, then $\Delta$ is of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-open-immersion-locally-finite-presentation} An open immersion is locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-check-property-after-fppf-base-change} Let $P$ be a property of morphisms of algebraic spaces which is fppf local on the target and preserved by arbitrary base change. Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks representable by algebraic spaces. Let $\mathcal{Z} \to \mathcal{Y}$ be a morphism of algebraic stacks which is surjective, flat, and locally of finite presentation. Set $\mathcal{W} = \mathcal{Z} \times_\mathcal{Y} \mathcal{X}$. Then $$ (f\text{ has }P) \Leftrightarrow (\text{the projection }\mathcal{W} \to \mathcal{Z}\text{ has }P). $$ For the meaning of this statement see Properties of Stacks, Section \ref{stacks-properties-section-properties-morphisms}. \end{lemma} 
\begin{lemma} \label{lemma-descent-property} Let $\mathcal{P}$ be a property of morphisms of algebraic spaces which is smooth local on the source-and-target and fppf local on the target. Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $\mathcal{Z} \to \mathcal{Y}$ be a surjective, flat, locally finitely presented morphism of algebraic stacks. If the base change $\mathcal{Z} \times_\mathcal{Y} \mathcal{X} \to \mathcal{Z}$ has $\mathcal{P}$, then $f$ has $\mathcal{P}$. \end{lemma} 
\begin{lemma} \label{lemma-descent-finite-presentation} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $\mathcal{Z} \to \mathcal{Y}$ be a surjective, flat, locally finitely presented morphism of algebraic stacks. If the base change $\mathcal{Z} \times_\mathcal{Y} \mathcal{X} \to \mathcal{Z}$ is locally of finite presentation, then $f$ is locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-flat-finite-presentation-permanence} Let $\mathcal{X} \to \mathcal{Y} \to \mathcal{Z}$ be morphisms of algebraic stacks. If $\mathcal{X} \to \mathcal{Z}$ is locally of finite presentation and $\mathcal{X} \to \mathcal{Y}$ is surjective, flat, and locally of finite presentation, then $\mathcal{Y} \to \mathcal{Z}$ is locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-surjective-flat-locally-finite-presentation} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks which is surjective, flat, and locally of finite presentation. Then for every scheme $U$ and object $y$ of $\mathcal{Y}$ over $U$ there exists an fppf covering $\{U_i \to U\}$ and objects $x_i$ of $\mathcal{X}$ over $U_i$ such that $f(x_i) \cong y|_{U_i}$ in $\mathcal{Y}_{U_i}$. \end{lemma} 
\begin{lemma} \label{lemma-surjective-family-flat-locally-finite-presentation} Let $f_j : \mathcal{X}_j \to \mathcal{X}$, $j \in J$ be a family of morphisms of algebraic stacks which are each flat and locally of finite presentation and which are jointly surjective, i.e., $|\mathcal{X}| = \bigcup |f_j|(|\mathcal{X}_j|)$. Then for every scheme $U$ and object $x$ of $\mathcal{X}$ over $U$ there exists an fppf covering $\{U_i \to U\}_{i \in I}$, a map $a : I \to J$, and objects $x_i$ of $\mathcal{X}_{a(i)}$ over $U_i$ such that $f_{a(i)}(x_i) \cong y|_{U_i}$ in $\mathcal{X}_{U_i}$. \end{lemma} 
\begin{lemma} \label{lemma-fppf-open} Let $f : \mathcal{X} \to \mathcal{Y}$ be flat and locally of finite presentation. Then $|f| : |\mathcal{X}| \to |\mathcal{Y}|$ is open. \end{lemma} 
\begin{lemma} \label{lemma-descent-quasi-compact} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $\mathcal{Z} \to \mathcal{Y}$ be a surjective, flat, locally finitely presented morphism of algebraic stacks. If the base change $\mathcal{Z} \times_\mathcal{Y} \mathcal{X} \to \mathcal{Z}$ is quasi-compact, then $f$ is quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-check-separated-on-ui-cover} Let $f : \mathcal{X} \to \mathcal{Y}$, $g : \mathcal{Y} \to \mathcal{Z}$ be composable morphisms of algebraic stacks with composition $h = g \circ f : \mathcal{X} \to \mathcal{Z}$. If $f$ is surjective, flat, locally of finite presentation, and universally injective and if $h$ is separated, then $g$ is separated. \end{lemma} 
\begin{definition} \label{definition-gerbe} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $\mathcal{X}$ is a {\it gerbe over} $\mathcal{Y}$ if $\mathcal{X}$ is a gerbe over $\mathcal{Y}$ as stacks in groupoids over $(\Sch/S)_{fppf}$, see Stacks, Definition \ref{stacks-definition-gerbe-over-stack-in-groupoids}. We say an algebraic stack $\mathcal{X}$ is a {\it gerbe} if there exists a morphism $\mathcal{X} \to X$ where $X$ is an algebraic space which turns $\mathcal{X}$ into a gerbe over $X$. \end{definition} 
\begin{lemma} \label{lemma-gerbe-over-iso-classes} Let $\mathcal{X}$ be an algebraic stack. If $\mathcal{X}$ is a gerbe, then the sheafification of the presheaf $$ (\Sch/S)_{fppf}^{opp} \to \textit{Sets}, \quad U \mapsto \Ob(\mathcal{X}_U)/\!\!\cong $$ is an algebraic space and $\mathcal{X}$ is a gerbe over it. \end{lemma} 
\begin{lemma} \label{lemma-base-change-gerbe} Let $$ \xymatrix{ \mathcal{X}' \ar[r] \ar[d] & \mathcal{X} \ar[d] \\ \mathcal{Y}' \ar[r] & \mathcal{Y} } $$ be a fibre product of algebraic stacks. If $\mathcal{X}$ is a gerbe over $\mathcal{Y}$, then $\mathcal{X}'$ is a gerbe over $\mathcal{Y}'$. \end{lemma} 
\begin{lemma} \label{lemma-composition-gerbe} Let $\mathcal{X} \to \mathcal{Y}$ and $\mathcal{Y} \to \mathcal{Z}$ be morphisms of algebraic stacks. If $\mathcal{X}$ is a gerbe over $\mathcal{Y}$ and $\mathcal{Y}$ is a gerbe over $\mathcal{Z}$, then $\mathcal{X}$ is a gerbe over $\mathcal{Z}$. \end{lemma} 
\begin{lemma} \label{lemma-gerbe-descent} Let $$ \xymatrix{ \mathcal{X}' \ar[r] \ar[d] & \mathcal{X} \ar[d] \\ \mathcal{Y}' \ar[r] & \mathcal{Y} } $$ be a fibre product of algebraic stacks. If $\mathcal{Y}' \to \mathcal{Y}$ is surjective, flat, and locally of finite presentation and $\mathcal{X}'$ is a gerbe over $\mathcal{Y}'$, then $\mathcal{X}$ is a gerbe over $\mathcal{Y}$. \end{lemma} 
\begin{lemma} \label{lemma-gerbe-with-section} Let $\pi : \mathcal{X} \to U$ be a morphism from an algebraic stack to an algebraic space and let $x : U \to \mathcal{X}$ be a section of $\pi$. Set $G = \mathit{Isom}_\mathcal{X}(x, x)$, see Definition \ref{definition-isom}. If $\mathcal{X}$ is a gerbe over $U$, then \begin{enumerate} \item there is a canonical equivalence of stacks in groupoids $$ x_{can} : [U/G] \longrightarrow \mathcal{X}. $$ where $[U/G]$ is the quotient stack for the trivial action of $G$ on $U$, \item $G \to U$ is flat and locally of finite presentation, and \item $U \to \mathcal{X}$ is surjective, flat, and locally of finite presentation. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-local-structure-gerbe} Let $\pi : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. The following are equivalent \begin{enumerate} \item $\mathcal{X}$ is a gerbe over $\mathcal{Y}$, and \item there exists an algebraic space $U$, a group algebraic space $G$ flat and locally of finite presentation over $U$, and a surjective, flat, and locally finitely presented morphism $U \to \mathcal{Y}$ such that $\mathcal{X} \times_\mathcal{Y} U \cong [U/G]$ over $U$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-gerbe-fppf} Let $\pi : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. If $\mathcal{X}$ is a gerbe over $\mathcal{Y}$, then $\pi$ is surjective, flat, and locally of finite presentation. \end{lemma} 
\begin{proposition} \label{proposition-when-gerbe} Let $\mathcal{X}$ be an algebraic stack. The following are equivalent \begin{enumerate} \item $\mathcal{X}$ is a gerbe, and \item $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is flat and locally of finite presentation. \end{enumerate} \end{proposition} 
\begin{lemma} \label{lemma-gerbe-isom-fppf} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks which makes $\mathcal{X}$ a gerbe over $\mathcal{Y}$. Then \begin{enumerate} \item $\mathcal{I}_{\mathcal{X}/\mathcal{Y}} \to \mathcal{X}$ is flat and locally of finite presentation, \item $\mathcal{X} \to \mathcal{X} \times_\mathcal{Y} \mathcal{X}$ is surjective, flat, and locally of finite presentation, \item given algebraic spaces $T_i$, $i = 1, 2$ and morphisms $x_i : T_i \to \mathcal{X}$, with $y_i = f \circ x_i$ the morphism $$ T_1 \times_{x_1, \mathcal{X}, x_2} T_2 \longrightarrow T_1 \times_{y_1, \mathcal{Y}, y_2} T_2 $$ is surjective, flat, and locally of finite presentation, \item given an algebraic space $T$ and morphisms $x_i : T \to \mathcal{X}$, $i = 1, 2$, with $y_i = f \circ x_i$ the morphism $$ \mathit{Isom}_\mathcal{X}(x_1, x_2) \longrightarrow \mathit{Isom}_\mathcal{Y}(y_1, y_2) $$ is surjective, flat, and locally of finite presentation. \end{enumerate} \end{lemma} 
\begin{proposition} \label{proposition-when-gerbe-over} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. The following are equivalent \begin{enumerate} \item $\mathcal{X}$ is a gerbe over $\mathcal{Y}$, and \item $f : \mathcal{X} \to \mathcal{Y}$ and $\Delta : \mathcal{X} \to \mathcal{X} \times_\mathcal{Y} \mathcal{X}$ are surjective, flat, and locally of finite presentation. \end{enumerate} \end{proposition} 
\begin{lemma} \label{lemma-noetherian-singleton-stack-gerbe} Let $\mathcal{Z}$ be a reduced, locally Noetherian algebraic stack such that $|\mathcal{Z}|$ is a singleton. Then $\mathcal{Z}$ is a gerbe over a reduced, locally Noetherian algebraic space $Z$ with $|Z|$ a singleton. \end{lemma} 
\begin{lemma} \label{lemma-gerbe-bijection-points} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. If $\mathcal{X}$ is a gerbe over $\mathcal{Y}$ then $f$ is a universal homeomorphism. \end{lemma} 
\begin{lemma} \label{lemma-gerbe-diagonal-quasi-compact} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks such that $\mathcal{X}$ is a gerbe over $\mathcal{Y}$. If $\Delta_\mathcal{X}$ is quasi-compact, so is $\Delta_\mathcal{Y}$. \end{lemma} 
\begin{lemma} \label{lemma-gerbe-residual-gerbe-exists} Let $\mathcal{X}$ be an algebraic stack. If $\mathcal{X}$ is a gerbe then for every $x \in |\mathcal{X}|$ the residual gerbe of $\mathcal{X}$ at $x$ exists. \end{lemma} 
\begin{proposition} \label{proposition-open-stratum} Let $\mathcal{X}$ be a reduced algebraic stack such that $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is quasi-compact. Then there exists a dense open substack $\mathcal{U} \subset \mathcal{X}$ which is a gerbe. \end{proposition} 
\begin{lemma} \label{lemma-every-point-in-a-stratum} Let $\mathcal{X}$ be an algebraic stack such that $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is quasi-compact. Then there exists a well-ordered index set $I$ and for every $i \in I$ a reduced locally closed substack $\mathcal{U}_i \subset \mathcal{X}$ such that \begin{enumerate} \item each $\mathcal{U}_i$ is a gerbe, \item we have $|\mathcal{X}| = \bigcup_{i \in I} |\mathcal{U}_i|$, \item $T_i = |\mathcal{X}| \setminus \bigcup_{i' < i} |\mathcal{U}_{i'}|$ is closed in $|\mathcal{X}|$ for all $i \in I$, and \item $|\mathcal{U}_i|$ is open in $T_i$. \end{enumerate} We can moreover arrange it so that either (a) $|\mathcal{U}_i| \subset T_i$ is dense, or (b) $\mathcal{U}_i$ is quasi-compact. In case (a), if we choose $\mathcal{U}_i$ as large as possible (see proof for details), then the stratification is canonical. \end{lemma} 
\begin{lemma} \label{lemma-spectral-qc-diagonal-qc} Let $\mathcal{X}$ be a quasi-compact algebraic stack whose diagonal $\Delta$ is quasi-compact. Then $|\mathcal{X}|$ is a spectral topological space. \end{lemma} 
\begin{lemma} \label{lemma-spectral-qcqs} Let $\mathcal{X}$ be a quasi-compact and quasi-separated algebraic stack. Then $|\mathcal{X}|$ is a spectral topological space. \end{lemma} 
\begin{lemma} \label{lemma-sober-qs} Let $\mathcal{X}$ be an algebraic stack whose diagonal is quasi-compact (for example if $\mathcal{X}$ is quasi-separated). Then there is an open covering $|\mathcal{X}| = \bigcup U_i$ with $U_i$ spectral. In particular $|\mathcal{X}|$ is a sober topological space. \end{lemma} 
\begin{lemma} \label{lemma-every-point-residual-gerbe} Let $\mathcal{X}$ be an algebraic stack such that $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is quasi-compact. Then the residual gerbe of $\mathcal{X}$ at $x$ exists for every $x \in |\mathcal{X}|$. \end{lemma} 
\begin{lemma} \label{lemma-every-point-residual-gerbe-quasi-DM} Let $\mathcal{X}$ be a quasi-DM algebraic stack. Then the residual gerbe of $\mathcal{X}$ at $x$ exists for every $x \in |\mathcal{X}|$. \end{lemma} 
\begin{lemma} \label{lemma-every-point-residual-gerbe-locally-Noetherian} Let $\mathcal{X}$ be a locally Noetherian algebraic stack. Then the residual gerbe of $\mathcal{X}$ at $x$ exists for every $x \in |\mathcal{X}|$. \end{lemma} 
\begin{lemma} \label{lemma-quotient-etale} Let $Y$ be an algebraic space. Let $(U, R, s, t, c)$ be a groupoid in algebraic spaces over $Y$. Assume $U \to Y$ is flat and locally of finite presentation and $R \to U \times_Y U$ an open immersion. Then $X = [U/R] = U/R$ is an algebraic space and $X \to Y$ is \'etale. \end{lemma} 
\begin{lemma} \label{lemma-quasi-splitting-etale} Let $S$ be a scheme. Let $(U, R, s, t, c)$ be a groupoid in algebraic spaces over $S$. Assume $s, t$ are flat and locally of finite presentation. Let $P \subset R$ be an open subspace such that $(U, P, s|_P, t|_P, c|_{P \times_{s, U, t} P})$ is a groupoid in algebraic spaces over $S$. Then $$ [U/P] \longrightarrow [U/R] $$ is a morphism of algebraic stacks which is representable by algebraic spaces, surjective, and \'etale. \end{lemma} 
\begin{lemma} \label{lemma-etale-local-quasi-DM} Let $\mathcal{X}$ be an algebraic stack. Assume $\mathcal{X}$ is quasi-DM with separated diagonal (equivalently $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is locally quasi-finite and separated). Let $x \in |\mathcal{X}|$. Then there exists a morphism of algebraic stacks $$ \mathcal{U} \longrightarrow \mathcal{X} $$ with the following properties \begin{enumerate} \item there exists a point $u \in |\mathcal{U}|$ mapping to $x$, \item $\mathcal{U} \to \mathcal{X}$ is representable by algebraic spaces and \'etale, \item $\mathcal{U} = [U/R]$ where $(U, R, s, t, c)$ is a groupoid scheme with $U$, $R$ affine, and $s, t$ finite, flat, and locally of finite presentation. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-etale-local-quasi-DM-at-x} Let $\mathcal{X}$ be an algebraic stack. Assume $\mathcal{X}$ is quasi-DM with separated diagonal (equivalently $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is locally quasi-finite and separated). Let $x \in |\mathcal{X}|$. Assume the automorphism group of $\mathcal{X}$ at $x$ is finite (Remark \ref{remark-property-automorphism-groups}). Then there exists a morphism of algebraic stacks $$ g : \mathcal{U} \longrightarrow \mathcal{X} $$ with the following properties \begin{enumerate} \item there exists a point $u \in |\mathcal{U}|$ mapping to $x$ and $g$ induces an isomorphism between automorphism groups at $u$ and $x$ (Remark \ref{remark-identify-automorphism-groups}), \item $\mathcal{U} \to \mathcal{X}$ is representable by algebraic spaces and \'etale, \item $\mathcal{U} = [U/R]$ where $(U, R, s, t, c)$ is a groupoid scheme with $U$, $R$ affine, and $s, t$ finite, flat, and locally of finite presentation. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-etale-local-quasi-DM-at-x-inertia} Let $\mathcal{X}$ be an algebraic stack. Assume $\mathcal{X}$ is quasi-DM with separated diagonal (equivalently $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is locally quasi-finite and separated). Let $x \in |\mathcal{X}|$. Assume $x$ can be represented by a quasi-compact morphism $\Spec(k) \to \mathcal{X}$. Then there exists a morphism of algebraic stacks $$ g : \mathcal{U} \longrightarrow \mathcal{X} $$ with the following properties \begin{enumerate} \item there exists a point $u \in |\mathcal{U}|$ mapping to $x$ and $g$ induces an isomorphism between the residual gerbes at $u$ and $x$, \item $\mathcal{U} \to \mathcal{X}$ is representable by algebraic spaces and \'etale, \item $\mathcal{U} = [U/R]$ where $(U, R, s, t, c)$ is a groupoid scheme with $U$, $R$ affine, and $s, t$ finite, flat, and locally of finite presentation. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-smooth} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $f$ is {\it smooth} if the equivalent conditions of Lemma \ref{lemma-local-source-target} hold with $\mathcal{P} = \text{smooth}$. \end{definition} 
\begin{lemma} \label{lemma-composition-smooth} The composition of smooth morphisms is smooth. \end{lemma} 
\begin{lemma} \label{lemma-base-change-smooth} A base change of a smooth morphism is smooth. \end{lemma} 
\begin{lemma} \label{lemma-descent-smooth} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $\mathcal{Z} \to \mathcal{Y}$ be a surjective, flat, locally finitely presented morphism of algebraic stacks. If the base change $\mathcal{Z} \times_\mathcal{Y} \mathcal{X} \to \mathcal{Z}$ is smooth, then $f$ is smooth. \end{lemma} 
\begin{lemma} \label{lemma-smooth-locally-finite-presentation} A smooth morphism of algebraic stacks is locally of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-where-smooth} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. There is a maximal open substack $\mathcal{U} \subset \mathcal{X}$ such that $f|_\mathcal{U} : \mathcal{U} \to \mathcal{Y}$ is smooth. Moreover, formation of this open commutes with \begin{enumerate} \item precomposing by smooth morphisms, \item base change by morphisms which are flat and locally of finite presentation, \item base change by flat morphisms provided $f$ is locally of finite presentation. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-smooth-quotient-stack} Let $X \to Y$ be a smooth morphism of algebraic spaces. Let $G$ be a group algebraic space over $Y$ which is flat and locally of finite presentation over $Y$. Let $G$ act on $X$ over $Y$. Then the quotient stack $[X/G]$ is smooth over $Y$. \end{lemma} 
\begin{lemma} \label{lemma-gerbe-smooth} Let $\pi : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. If $\mathcal{X}$ is a gerbe over $\mathcal{Y}$, then $\pi$ is surjective and smooth. \end{lemma} 
\begin{lemma} \label{lemma-etale-smooth-local-source-target} Let $\mathcal{P}$ be a property of morphisms of algebraic spaces which is \'etale-smooth local on the source-and-target. Let $f : \mathcal{X} \to \mathcal{Y}$ be a DM morphism of algebraic stacks. Consider commutative diagrams $$ \xymatrix{ U \ar[d]_a \ar[r]_h & V \ar[d]^b \\ \mathcal{X} \ar[r]^f & \mathcal{Y} } $$ where $U$ and $V$ are algebraic spaces, $V \to \mathcal{Y}$ is smooth, and $U \to \mathcal{X} \times_\mathcal{Y} V$ is \'etale. The following are equivalent \begin{enumerate} \item for any diagram as above the morphism $h$ has property $\mathcal{P}$, and \item for some diagram as above with $a : U \to \mathcal{X}$ surjective the morphism $h$ has property $\mathcal{P}$. \end{enumerate} If $\mathcal{X}$ and $\mathcal{Y}$ are representable by algebraic spaces, then this is also equivalent to $f$ (as a morphism of algebraic spaces) having property $\mathcal{P}$. If $\mathcal{P}$ is also preserved under any base change, and fppf local on the base, then for morphisms $f$ which are representable by algebraic spaces this is also equivalent to $f$ having property $\mathcal{P}$ in the sense of Properties of Stacks, Section \ref{stacks-properties-section-properties-morphisms}. \end{lemma} 
\begin{definition} \label{definition-etale-smooth-P} Let $\mathcal{P}$ be a property of morphisms of algebraic spaces which is \'etale-smooth local on the source-and-target. We say a DM morphism $f : \mathcal{X} \to \mathcal{Y}$ of algebraic stacks {\it has property $\mathcal{P}$} if the equivalent conditions of Lemma \ref{lemma-local-source-target} hold. \end{definition} 
\begin{definition} \label{definition-etale} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $f$ is {\it \'etale} if $f$ is DM and the equivalent conditions of Lemma \ref{lemma-etale-smooth-local-source-target} hold with $\mathcal{P} = \etale$. \end{definition} 
\begin{lemma} \label{lemma-composition-etale} The composition of \'etale morphisms is \'etale. \end{lemma} 
\begin{lemma} \label{lemma-base-change-etale} A base change of an \'etale morphism is \'etale. \end{lemma} 
\begin{lemma} \label{lemma-open-immersion-etale} An open immersion is \'etale. \end{lemma} 
\begin{lemma} \label{lemma-etale} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. The following are equivalent \begin{enumerate} \item $f$ is \'etale, \item $f$ is DM and for any morphism $V \to \mathcal{Y}$ where $V$ is an algebraic space and any \'etale morphism $U \to V \times_\mathcal{Y} \mathcal{X}$ where $U$ is an algebraic space, the morphism $U \to V$ is \'etale, \item there exists some surjective, locally of finite presentation, and flat morphism $W \to \mathcal{Y}$ where $W$ is an algebraic space and some surjective \'etale morphism $T \to W \times_\mathcal{Y} \mathcal{X}$ where $T$ is an algebraic space such that the morphism $T \to W$ is \'etale. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-etale-permanence} Let $\mathcal{X}, \mathcal{Y}$ be algebraic stacks \'etale over an algebraic stack $\mathcal{Z}$. Any morphism $\mathcal{X} \to \mathcal{Y}$ over $\mathcal{Z}$ is \'etale. \end{lemma} 
\begin{definition} \label{definition-unramified} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $f$ is {\it unramified} if $f$ is DM and the equivalent conditions of Lemma \ref{lemma-etale-smooth-local-source-target} hold with $\mathcal{P} =$``unramified''. \end{definition} 
\begin{lemma} \label{lemma-composition-unramified} The composition of unramified morphisms is unramified. \end{lemma} 
\begin{lemma} \label{lemma-base-change-unramified} A base change of an unramified morphism is unramified. \end{lemma} 
\begin{lemma} \label{lemma-etale-unramified} An \'etale morphism is unramified. \end{lemma} 
\begin{lemma} \label{lemma-immersion-unramified} An immersion is unramified. \end{lemma} 
\begin{lemma} \label{lemma-unramified} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. The following are equivalent \begin{enumerate} \item $f$ is unramified, \item $f$ is DM and for any morphism $V \to \mathcal{Y}$ where $V$ is an algebraic space and any \'etale morphism $U \to V \times_\mathcal{Y} \mathcal{X}$ where $U$ is an algebraic space, the morphism $U \to V$ is unramified, \item there exists some surjective, locally of finite presentation, and flat morphism $W \to \mathcal{Y}$ where $W$ is an algebraic space and some surjective \'etale morphism $T \to W \times_\mathcal{Y} \mathcal{X}$ where $T$ is an algebraic space such that the morphism $T \to W$ is unramified. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-unramified-quasi-finite} An unramified morphism of algebraic stacks is locally quasi-finite. \end{lemma} 
\begin{lemma} \label{lemma-permanence-unramified} Let $\mathcal{X} \to \mathcal{Y} \to \mathcal{Z}$ be morphisms of algebraic stacks. If $\mathcal{X} \to \mathcal{Z}$ is unramified and $\mathcal{Y} \to \mathcal{Z}$ is DM, then $\mathcal{X} \to \mathcal{Y}$ is unramified. \end{lemma} 
\begin{lemma} \label{lemma-characterize-unramified} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. The following are equivalent \begin{enumerate} \item $f$ is unramified, and \item $f$ is locally of finite type and its diagonal is \'etale. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-characterize-etale} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. The following are equivalent \begin{enumerate} \item $f$ is \'etale, and \item $f$ is locally of finite presentation, flat, and unramified, \item $f$ is locally of finite presentation, flat, and its diagonal is \'etale. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-proper} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $f$ is {\it proper} if $f$ is separated, finite type, and universally closed. \end{definition} 
\begin{lemma} \label{lemma-base-change-proper} A base change of a proper morphism is proper. \end{lemma} 
\begin{lemma} \label{lemma-composition-proper} A composition of proper morphisms is proper. \end{lemma} 
\begin{lemma} \label{lemma-closed-immersion-proper} A closed immersion of algebraic stacks is a proper morphism of algebraic stacks. \end{lemma} 
\begin{lemma} \label{lemma-universally-closed-permanence} Consider a commutative diagram $$ \xymatrix{ \mathcal{X} \ar[rr] \ar[rd] & & \mathcal{Y} \ar[ld] \\ & \mathcal{Z} & } $$ of algebraic stacks. \begin{enumerate} \item If $\mathcal{X} \to \mathcal{Z}$ is universally closed and $\mathcal{Y} \to \mathcal{Z}$ is separated, then the morphism $\mathcal{X} \to \mathcal{Y}$ is universally closed. In particular, the image of $|\mathcal{X}|$ in $|\mathcal{Y}|$ is closed. \item If $\mathcal{X} \to \mathcal{Z}$ is proper and $\mathcal{Y} \to \mathcal{Z}$ is separated, then the morphism $\mathcal{X} \to \mathcal{Y}$ is proper. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-image-proper-is-proper} Let $\mathcal{Z}$ be an algebraic stack. Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks over $\mathcal{Z}$. If $\mathcal{X}$ is universally closed over $\mathcal{Z}$ and $f$ is surjective then $\mathcal{Y}$ is universally closed over $\mathcal{Z}$. In particular, if also $\mathcal{Y}$ is separated and of finite type over $\mathcal{Z}$, then $\mathcal{Y}$ is proper over $\mathcal{Z}$. \end{lemma} 
\begin{definition} \label{definition-scheme-theoretic-image} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. The {\it scheme theoretic image} of $f$ is the smallest closed substack $\mathcal{Z} \subset \mathcal{Y}$ through which $f$ factors\footnote{We will see in Lemma \ref{lemma-scheme-theoretic-image-existence} that the scheme theoretic image always exists.}. \end{definition} 
\begin{lemma} \label{lemma-cover-upstairs} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $g : \mathcal{W} \to \mathcal{X}$ be a morphism of algebraic stacks which is surjective, flat, and locally of finite presentation. Then the scheme theoretic image of $f$ exists if and only if the scheme theoretic image of $f \circ g$ exists and if so then these scheme theoretic images are the same. \end{lemma} 
\begin{lemma} \label{lemma-scheme-theoretic-image-existence} Let $f : \mathcal{Y} \to \mathcal{X}$ be a morphism of algebraic stacks. Then the scheme theoretic image of $f$ exists. \end{lemma} 
\begin{lemma} \label{lemma-factor-factor} Let $$ \xymatrix{ \mathcal{X}_1 \ar[d] \ar[r]_{f_1} & \mathcal{Y}_1 \ar[d] \\ \mathcal{X}_2 \ar[r]^{f_2} & \mathcal{Y}_2 } $$ be a commutative diagram of algebraic stacks. Let $\mathcal{Z}_i \subset \mathcal{Y}_i$, $i = 1, 2$ be the scheme theoretic image of $f_i$. Then the morphism $\mathcal{Y}_1 \to \mathcal{Y}_2$ induces a morphism $\mathcal{Z}_1 \to \mathcal{Z}_2$ and a commutative diagram $$ \xymatrix{ \mathcal{X}_1 \ar[r] \ar[d] & \mathcal{Z}_1 \ar[d] \ar[r] & \mathcal{Y}_1 \ar[d] \\ \mathcal{X}_2 \ar[r] & \mathcal{Z}_2 \ar[r] & \mathcal{Y}_2 } $$ \end{lemma} 
\begin{lemma} \label{lemma-existence-plus-flat-base-change} Let $f : \mathcal{X} \to \mathcal{Y}$ be a quasi-compact morphism of algebraic stacks. Then formation of the scheme theoretic image commutes with flat base change. \end{lemma} 
\begin{lemma} \label{lemma-topology-scheme-theoretic-image} Let $f : \mathcal{X} \to \mathcal{Y}$ be a quasi-compact morphism of algebraic stacks. Let $\mathcal{Z} \subset \mathcal{Y}$ be the scheme theoretic image of $f$. Then $|\mathcal{Z}|$ is the closure of the image of $|f|$. \end{lemma} 
\begin{lemma} \label{lemma-scheme-theoretic-image-of-partial-section} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks which is representable by algebraic spaces and separated. Let $\mathcal{V} \subset \mathcal{Y}$ be an open substack such that $\mathcal{V} \to \mathcal{Y}$ is quasi-compact. Let $s : \mathcal{V} \to \mathcal{X}$ be a morphism such that $f \circ s = \text{id}_\mathcal{V}$. Let $\mathcal{Y}'$ be the scheme theoretic image of $s$. Then $\mathcal{Y}' \to \mathcal{Y}$ is an isomorphism over $\mathcal{V}$. \end{lemma} 
\begin{definition} \label{definition-fill-in-diagram} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Consider a $2$-commutative solid diagram \begin{equation} \label{equation-diagram} \vcenter{ \xymatrix{ \Spec(K) \ar[r]_-x \ar[d]_j & \mathcal{X} \ar[d]^f \\ \Spec(A) \ar[r]^-y \ar@{..>}[ru] & \mathcal{Y} } } \end{equation} where $A$ is a valuation ring with field of fractions $K$. Let $$ \gamma : y \circ j \longrightarrow f \circ x $$ be a $2$-morphism witnessing the $2$-commutativity of the diagram. (Notation as in Categories, Sections \ref{categories-section-formal-cat-cat} and \ref{categories-section-2-categories}.) Given (\ref{equation-diagram}) and $\gamma$ a {\it dotted arrow} is a triple $(a, \alpha, \beta)$ consisting of a morphism $a : \Spec(A) \to \mathcal{X}$ and $2$-arrows $\alpha : a \circ j \to x$, $\beta : y \to f \circ a$ such that $\gamma = (\text{id}_f \star \alpha) \circ (\beta \star \text{id}_j)$, in other words such that $$ \xymatrix{ & f \circ a \circ j \ar[rd]^{\text{id}_f \star \alpha} \\ y \circ j \ar[ru]^{\beta \star \text{id}_j} \ar[rr]^\gamma & & f \circ x } $$ is commutative. A {\it morphism of dotted arrows} $(a, \alpha, \beta) \to (a', \alpha', \beta')$ is a $2$-arrow $\theta : a \to a'$ such that $\alpha = \alpha' \circ (\theta \star \text{id}_j)$ and $\beta' = (\text{id}_f \star \theta) \circ \beta$. \end{definition} 
\begin{lemma} \label{lemma-cat-dotted-arrows} In the situation of Definition \ref{definition-fill-in-diagram} the category of dotted arrows is a groupoid. If $\Delta_f$ is separated, then it is a setoid. \end{lemma} 
\begin{lemma} \label{lemma-cat-dotted-arrows-independent} In Definition \ref{definition-fill-in-diagram} assume $\mathcal{I}_\mathcal{Y} \to \mathcal{Y}$ is proper (for example if $\mathcal{Y}$ is separated or if $\mathcal{Y}$ is separated over an algebraic space). Then the category of dotted arrows is independent (up to noncanonical equivalence) of the choice of $\gamma$ and the existence of a dotted arrow (for some and hence equivalently all $\gamma$) is equivalent to the existence of a diagram $$ \xymatrix{ \Spec(K) \ar[r]_-x \ar[d]_j & \mathcal{X} \ar[d]^f \\ \Spec(A) \ar[r]^-y \ar[ru]_a & \mathcal{Y} } $$ with $2$-commutative triangles (without checking the $2$-morphisms compose correctly). \end{lemma} 
\begin{lemma} \label{lemma-cat-dotted-arrows-base-change} Assume given a $2$-commutative diagram $$ \xymatrix{ \Spec(K) \ar[r]_-{x'} \ar[d]_j & \mathcal{X}' \ar[d]^p \ar[r]_q & \mathcal{X} \ar[d]^f \\ \Spec(A) \ar[r]^-{y'} & \mathcal{Y}' \ar[r]^g & \mathcal{Y} } $$ with the right square $2$-cartesian. Choose a $2$-arrow $\gamma' : y' \circ j \to p \circ x'$. Set $x = q \circ x'$, $y = g \circ y'$ and let $\gamma : y \circ j \to f \circ x$ be the composition of $\gamma'$ with the $2$-arrow implicit in the $2$-commutativity of the right square. Then the category of dotted arrows for the left square and $\gamma'$ is equivalent to the category of dotted arrows for the outer rectangle and $\gamma$. \end{lemma} 
\begin{lemma} \label{lemma-cat-dotted-arrows-composition} Assume given a $2$-commutative diagram $$ \xymatrix{ \Spec(K) \ar[r]_-x \ar[dd]_j & \mathcal{X} \ar[d]^f \\ & \mathcal{Y} \ar[d]^g \\ \Spec(A) \ar[r]^-z & \mathcal{Z} } $$ Choose a $2$-arrow $\gamma : z \circ j \to g \circ f \circ x$. Let $\mathcal{C}$ be the category of dotted arrows for the outer rectangle and $\gamma$. Let $\mathcal{C}'$ be the category of dotted arrows for the square $$ \xymatrix{ \Spec(K) \ar[r]_-{f \circ x} \ar[d]_j & \mathcal{Y} \ar[d]^g \\ \Spec(A) \ar[r]^-z & \mathcal{Z} } $$ and $\gamma$. Then $\mathcal{C}$ is equivalent to a category $\mathcal{C}''$  which has the following property: there is  a functor $\mathcal{C}'' \to \mathcal{C}'$ which turns $\mathcal{C}''$ into a category fibred in groupoids over $\mathcal{C}'$ and whose fibre categories are categories of dotted arrows for certain squares of the form $$ \xymatrix{ \Spec(K) \ar[r]_-x \ar[d]_j & \mathcal{X} \ar[d]^f \\ \Spec(A) \ar[r]^-y & \mathcal{Y} } $$ and some choices of $y \circ j \to f \circ x$. \end{lemma} 
\begin{definition} \label{definition-uniqueness} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $f$ satisfies the {\it uniqueness part of the valuative criterion} if for every diagram (\ref{equation-diagram}) and $\gamma$ as in Definition \ref{definition-fill-in-diagram} the category of dotted arrows is either empty or a setoid with exactly one isomorphism class. \end{definition} 
\begin{lemma} \label{lemma-base-change-uniqueness} The base change of a morphism of algebraic stacks which satisfies the uniqueness part of the valuative criterion by any morphism of algebraic stacks is a morphism of algebraic stacks which satisfies the uniqueness part of the valuative criterion. \end{lemma} 
\begin{lemma} \label{lemma-composition-uniqueness} The composition of morphisms of algebraic stacks which satisfy the uniqueness part of the valuative criterion is another morphism of algebraic stacks which satisfies the uniqueness part of the valuative criterion. \end{lemma} 
\begin{lemma} \label{lemma-uniqueness-representable} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks which is representable by algebraic spaces. Then the following are equivalent \begin{enumerate} \item $f$ satisfies the uniqueness part of the valuative criterion, \item for every scheme $T$ and morphism $T \to \mathcal{Y}$ the morphism $\mathcal{X} \times_\mathcal{Y} T \to T$ satisfies the uniqueness part of the valuative criterion as a morphism of algebraic spaces. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-existence} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $f$ satisfies the {\it existence part of the valuative criterion} if for every diagram (\ref{equation-diagram}) and $\gamma$ as in Definition \ref{definition-fill-in-diagram} there exists an extension $K'/K$ of fields, a valuation ring $A' \subset K'$ dominating $A$ such that the category of dotted arrows for the outer rectangle of the diagram $$ \xymatrix{ \Spec(K') \ar[r] \ar@/^2em/[rr]_{x'} \ar[d]_{j'} & \Spec(K) \ar[d]_j \ar[r]_-x & \mathcal{X} \ar[d]^f \\ \Spec(A') \ar[r] \ar@/_2em/[rr]^{y'} & \Spec(A) \ar[r]^-y & \mathcal{Y} } $$ with induced $2$-arrow $\gamma' : y' \circ j' \to f \circ x'$ is nonempty. \end{definition} 
\begin{lemma} \label{lemma-base-change-existence} The base change of a morphism of algebraic stacks which satisfies the existence part of the valuative criterion by any morphism of algebraic stacks is a morphism of algebraic stacks which satisfies the existence part of the valuative criterion. \end{lemma} 
\begin{lemma} \label{lemma-composition-existence} The composition of morphisms of algebraic stacks which satisfy the existence part of the valuative criterion is another morphism of algebraic stacks which satisfies the existence part of the valuative criterion. \end{lemma} 
\begin{lemma} \label{lemma-existence-representable} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks which is representable by algebraic spaces. Then the following are equivalent \begin{enumerate} \item $f$ satisfies the existence part of the valuative criterion, \item for every scheme $T$ and morphism $T \to \mathcal{Y}$ the morphism $\mathcal{X} \times_\mathcal{Y} T \to T$ satisfies the existence part of the valuative criterion as a morphism of algebraic spaces. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-closed-immersion-valuative-criteria} A closed immersion of algebraic stacks satisfies both the existence and uniqueness part of the valuative criterion. \end{lemma} 
\begin{lemma} \label{lemma-setoids-and-diagonal} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. If $\Delta_f$ is quasi-separated and if for every diagram (\ref{equation-diagram}) and choice of $\gamma$ as in Definition \ref{definition-fill-in-diagram} the category of dotted arrows is a setoid, then $\Delta_f$ is separated. \end{lemma} 
\begin{lemma} \label{lemma-helper-diagonal} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Consider a $2$-commutative solid diagram $$ \xymatrix{ \Spec(K) \ar[rr]_-x \ar[d]_j & & \mathcal{X} \ar[d]^{\Delta_f} \\ \Spec(A) \ar[rr]^{(a_1, a_2, \varphi)} \ar@{..>}[rru] & & \mathcal{X} \times_\mathcal{Y} \mathcal{X} } $$ where $A$ is a valuation ring with field of fractions $K$. Let $\gamma : (a_1, a_2, \varphi) \circ j \longrightarrow \Delta_f \circ x$ be a $2$-morphism witnessing the $2$-commutativity of the diagram. Then \begin{enumerate} \item Writing $\gamma = (\alpha_1, \alpha_2)$ with $\alpha_i : a_i \circ j \to x$ we obtain two dotted arrows $(a_1, \alpha_1, \text{id})$ and $(a_2, \alpha_2, \varphi)$ in the diagram $$ \xymatrix{ \Spec(K) \ar[r]_-x \ar[d]_j & \mathcal{X} \ar[d]^f \\ \Spec(A) \ar[r]^-{f \circ a_1} \ar@{..>}[ru] & \mathcal{Y} } $$ \item The category of dotted arrows for the original diagram and $\gamma$ is a setoid whose set of isomorphism classes of objects equal to the set of morphisms $(a_1, \alpha_1, \text{id}) \to (a_2, \alpha_2, \varphi)$ in the category of dotted arrows. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-uniqueness-and-diagonal} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Assume $f$ is quasi-separated. If $f$ satisfies the uniqueness part of the valuative criterion, then $f$ is separated. \end{lemma} 
\begin{lemma} \label{lemma-converse-uniqueness-and-diagonal} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. If $f$ is separated, then $f$ satisfies the uniqueness part of the valuative criterion. \end{lemma} 
\begin{lemma} \label{lemma-quasi-compact-existence-universally-closed} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Assume \begin{enumerate} \item $f$ is quasi-compact, and \item $f$ satisfies the existence part of the valuative criterion. \end{enumerate} Then $f$ is universally closed. \end{lemma} 
\begin{lemma} \label{lemma-converse-existence-universally-closed} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Assume \begin{enumerate} \item $f$ is quasi-separated, and \item $f$ is universally closed. \end{enumerate} Then $f$ satisfies the existence part of the valuative criterion. \end{lemma} 
\begin{lemma} \label{lemma-criterion-proper} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Assume $f$ is of finite type and quasi-separated. Then the following are equivalent \begin{enumerate} \item $f$ is proper, and \item $f$ satisfies both the uniqueness and existence parts of the valuative criterion. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-lci} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. We say $f$ is a {\it local complete intersection morphism} or {\it Koszul} if the equivalent conditions of Lemma \ref{lemma-local-source-target} hold with $\mathcal{P} = \text{local complete intersection}$. \end{definition} 
\begin{lemma} \label{lemma-composition-lci} The composition of local complete intersection morphisms is a local complete intersection. \end{lemma} 
\begin{lemma} \label{lemma-flat-base-change-lci} A flat base change of a local complete intersection morphism is a local complete intersection morphism. \end{lemma} 
\begin{lemma} \label{lemma-lci-permanence} Let $$ \xymatrix{ \mathcal{X} \ar[rr]_f \ar[rd] & & \mathcal{Y} \ar[ld] \\ & \mathcal{Z} } $$ be a commutative diagram of morphisms of algebraic stacks. Assume $\mathcal{Y} \to \mathcal{Z}$ is smooth and $\mathcal{X} \to \mathcal{Z}$ is a local complete intersection morphism. Then $f : \mathcal{X} \to \mathcal{Y}$ is a local complete intersection morphism. \end{lemma} 
\begin{lemma} \label{lemma-stabilizer-preserving} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. If $\mathcal{I}_\mathcal{X} \to \mathcal{X} \times_\mathcal{Y} \mathcal{I}_\mathcal{Y}$ is an isomorphism, then $f$ is representable by algebraic spaces. \end{lemma} 
\begin{lemma} \label{lemma-aut-iso-unramified} Let $f : \mathcal{X} \to \mathcal{Y}$ be an unramified morphism of algebraic stacks. The following are equivalent \begin{enumerate} \item $\mathcal{I}_\mathcal{X} \to \mathcal{X} \times_\mathcal{Y} \mathcal{I}_\mathcal{Y}$ is an isomorphism, and \item $f$ induces an isomorphism between automorphism groups at $x$ and $f(x)$ (Remark \ref{remark-identify-automorphism-groups}) for all $x \in |\mathcal{X}|$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-stabilizer-preserving-unramified} \begin{reference} \cite[Proposition 3.5]{rydh_quotients} and \cite[Proposition 2.5]{alper_quotient} \end{reference} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Assume \begin{enumerate} \item $f$ is representable by algebraic spaces and unramified, and \item $\mathcal{I}_\mathcal{Y} \to \mathcal{Y}$ is proper. \end{enumerate} Then the set of $x \in |\mathcal{X}|$ such that $f$ induces an isomorphism between automorphism groups at $x$ and $f(x)$ (Remark \ref{remark-identify-automorphism-groups}) is open. Letting $\mathcal{U} \subset \mathcal{X}$ be the corresponding open substack, the morphism $\mathcal{I}_\mathcal{U} \to \mathcal{U} \times_\mathcal{Y} \mathcal{I}_\mathcal{Y}$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-base-change-stabilizer-preserving} Let $$ \xymatrix{ \mathcal{X}' \ar[r] \ar[d]_{f'} & \mathcal{X} \ar[d]^f \\ \mathcal{Y}' \ar[r] & \mathcal{Y} } $$ be a cartesian diagram of algebraic stacks. \begin{enumerate} \item Let $x' \in |\mathcal{X}'|$ with image $x \in |\mathcal{X}|$. If $f$ induces an isomorphism between automorphism groups at $x$ and $f(x)$ (Remark \ref{remark-identify-automorphism-groups}), then $f'$ induces an isomorphism between automorphism groups at $x'$ and $f(x')$. \item If $\mathcal{I}_\mathcal{X} \to \mathcal{X} \times_\mathcal{Y} \mathcal{I}_\mathcal{Y}$ is an isomorphism, then $\mathcal{I}_{\mathcal{X}'} \to \mathcal{X}' \times_{\mathcal{Y}'} \mathcal{I}_{\mathcal{Y}'}$ is an isomorphism. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-stabilizer-preserving-points-cartesian} Let $$ \xymatrix{ \mathcal{X}' \ar[r] \ar[d]_{f'} & \mathcal{X} \ar[d]^f \\ \mathcal{Y}' \ar[r]^g & \mathcal{Y} } $$ be a cartesian diagram of algebraic stacks. If $f$ induces an isomorphism between automorphism groups at points (Remark \ref{remark-identify-automorphism-groups}), then $$ \Mor(\Spec(k), \mathcal{X}') \longrightarrow \Mor(\Spec(k), \mathcal{Y}') \times \Mor(\Spec(k), \mathcal{X}) $$ is injective on isomorphism classes for any field $k$. \end{lemma} 
\begin{lemma} \label{lemma-etale-iso} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Assume $f$ is \'etale, $f$ induces an isomorphism between automorphism groups at points (Remark \ref{remark-identify-automorphism-groups}), and for every algebraically closed field $k$ the functor $$ f : \Mor(\Spec(k), \mathcal{X}) \longrightarrow \Mor(\Spec(k), \mathcal{Y}) $$ is an equivalence. Then $f$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-prepare-normalization} Let $\mathcal{X}$ be an algebraic stack. The following are equivalent \begin{enumerate} \item there is a surjective smooth morphism $U \to \mathcal{X}$ where $U$ is a scheme such that every quasi-compact open of $U$ has finitely many irreducible components, \item for every scheme $U$ and every smooth morphism $U \to \mathcal{X}$ every quasi-compact open of $U$ has finitely many irreducible components, \item for every algebraic space $Y$ and smooth morphism $Y \to \mathcal{X}$ the space $Y$ satisfies the equivalent conditions of Morphisms of Spaces, Lemma \ref{spaces-morphisms-lemma-prepare-normalization}, and \item for every quasi-compact algebraic stack $\mathcal{Y}$ smooth over $\mathcal{X}$ the space $|\mathcal{Y}|$ has finitely many irreducible components. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-normalization} Let $\mathcal{X}$ be an algebraic stack satisfying the equivalent conditions of Lemma \ref{lemma-prepare-normalization}. Then there exists an integral morphism of algebraic stacks $$ \mathcal{X}^\nu \longrightarrow \mathcal{X} $$ such that for every scheme $U$ and smooth morphism $U \to \mathcal{X}$ the fibre product $\mathcal{X}^\nu \times_\mathcal{X} U$ is the normalization of $U$. \end{lemma} 
\begin{definition} \label{definition-normalization} Let $\mathcal{X}$ be an algebraic stack satisfying the equivalent conditions of Lemma \ref{lemma-prepare-normalization}. We define the {\it normalization} of $\mathcal{X}$ as the morphism $$ \nu : \mathcal{X}^\nu \longrightarrow \mathcal{X} $$ constructed in Lemma \ref{lemma-normalization}. \end{definition} 
\begin{lemma} \label{lemma-specialization} Let $\mathcal{X}$ be an algebraic stack. Let $f : U \to \mathcal{X}$ be a smooth morphism where $U$ is an algebraic space. Let $x' \leadsto x$ be a specialization of points of $|\mathcal{X}|$. Let $u \in |U|$ with $f(u) = x$. If $(\mathcal{X}, x')$ satisfy the equivalent conditions of Properties of Stacks, Lemma \ref{stacks-properties-lemma-UR-quasi-compact-above-x}, then there exists a specialization $u' \leadsto u$ in $|U|$ with $f(u') = x'$. \end{lemma} 
\begin{definition} \label{definition-decent} Let $\mathcal{X}$ be an algebraic stack. We say $\mathcal{X}$ is {\it decent} if for every $x \in |\mathcal{X}|$ the equivalent conditions of Properties of Stacks, Lemma \ref{stacks-properties-lemma-UR-quasi-compact-above-x} are satisfied. \end{definition} 
\begin{lemma} \label{lemma-quasi-separated-decent} A quasi-separated algebraic stack $\mathcal{X}$ is decent. More generally, if $\Delta : \mathcal{X} \to \mathcal{X} \times \mathcal{X}$ is quasi-compact, then $\mathcal{X}$ is decent. \end{lemma} 
\begin{lemma} \label{lemma-representable-decent} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Assume $Y$ is decent and $f$ is representable (by schemes) or $f$ is representable by algebraic spaces and quasi-separated. Then $\mathcal{X}$ is decent. \end{lemma} 
\begin{lemma} \label{lemma-qc-decent} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. If $f$ is quasi-compact and surjective and $\mathcal{X}$ is decent, then $\mathcal{Y}$ is decent. \end{lemma} 
\begin{lemma} \label{lemma-gerbe-decent} Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. If $\mathcal{X}$ is a gerbe over $\mathcal{Y}$ and $\mathcal{X}$ is decent, then $\mathcal{Y}$ is decent. \end{lemma} 
\begin{lemma} \label{lemma-kolmogorov} Let $\mathcal{X}$ be a decent algebraic stack. Then $|\mathcal{X}|$ is Kolmogorov (see Topology, Definition \ref{topology-definition-generic-point}). \end{lemma} 
\begin{lemma} \label{lemma-decent-locally-noetherian-sober} Let $\mathcal{X}$ be a decent, locally Noetherian algebraic stack. Then $|\mathcal{X}|$ is a sober locally Noetherian topological space. \end{lemma} 
\begin{proposition} \label{proposition-decent-sober} Let $\mathcal{X}$ be a decent algebraic stack such that $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is quasi-compact. Then $|\mathcal{X}|$ is sober. \end{proposition} 
\begin{definition} \label{definition-integral-algebraic-stack} We say an algebraic stack $\mathcal{X}$ is {\it integral} if it is reduced, decent, $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is quasi-compact, and $|\mathcal{X}|$ is irreducible. \end{definition} 
\begin{lemma} \label{lemma-structure-integral-stack} Let $\mathcal{X}$ be an integral algebraic stack. Then \begin{enumerate} \item $|\mathcal{X}|$ is sober, irreducible, and has a unique generic point, \item there exists an open substack $\mathcal{U} \subset \mathcal{X}$  which is a gerbe over an integral scheme $U$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-totaro-case} Let $\mathcal{X}$ be an algebraic stack which is reduced and quasi-separated and whose associated topological space $|\mathcal{X}|$ is irreducible. Then $\mathcal{X}$ is integral. \end{lemma} 
\begin{lemma} \label{lemma-decent-irreducible-closed} Let $\mathcal{X}$ be a decent algebraic stack such that $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is quasi-compact. There are canonical bijections between the following sets: \begin{enumerate} \item the set of points of $\mathcal{X}$, i.e., $|\mathcal{X}|$, \item the set of irreducible closed subsets of $|\mathcal{X}|$, \item the set of integral closed substacks of $\mathcal{X}$. \end{enumerate} The bijection from (1) to (2) sends $x$ to $\overline{\{x\}}$. The bijection from (3) to (2) sends $\mathcal{Z}$ to $|\mathcal{Z}|$. \end{lemma} 
\begin{lemma} \label{lemma-gerbe-residual-gerbe} Let $\pi : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks. Let $x \in |\mathcal{X}|$ with image $y \in |\mathcal{Y}|$. Assume the residual gerbe $\mathcal{Z}_y \subset \mathcal{Y}$ of $\mathcal{Y}$ at $y$ exists and that $\mathcal{X}$ is a gerbe over $\mathcal{Y}$. Then $\mathcal{Z}_x = \mathcal{Z}_y \times_\mathcal{Y} \mathcal{X}$ is the residual gerbe of $\mathcal{X}$ at $x$. \end{lemma} 
\begin{lemma} \label{lemma-factor-through-residual-space} Let $f : \mathcal{Y} \to \mathcal{X}$ be a morphism of algebraic stacks. Let $x \in |\mathcal{X}|$ be a point. Assume \begin{enumerate} \item $\mathcal{X}$ is decent or locally Noetherian (or both), \item $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is quasi-compact, \item $|f|(|\mathcal{Y}|)$ is contained in $\{x\} \subset |\mathcal{X}|$, and \item $\mathcal{Y}$ is reduced. \end{enumerate} Then $f$ factors through the residual gerbe $\mathcal{Z}_x$ of $\mathcal{X}$ at $x$ (whose existence is guaranteed by Lemma \ref{lemma-every-point-residual-gerbe} or \ref{lemma-every-point-residual-gerbe-locally-Noetherian}). \end{lemma} 
\begin{lemma} \label{lemma-residual-space-closed} Let $\mathcal{X}$ be a locally Noetherian algebraic stack. Let $x \in |\mathcal{X}|$ with residual gerbe $\mathcal{Z}_x \subset \mathcal{X}$ (Lemma \ref{lemma-every-point-residual-gerbe-locally-Noetherian}). Then $x$ is a closed point of $|\mathcal{X}|$ if and only if the morphism $\mathcal{Z}_x \to \mathcal{X}$ is a closed immersion. \end{lemma} 
