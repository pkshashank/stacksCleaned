\begin{definition} \label{definition-torsor} Let $\mathcal{C}$ be a site. Let $\mathcal{G}$ be a sheaf of (possibly non-commutative) groups on $\mathcal{C}$. A {\it pseudo torsor}, or more precisely a {\it pseudo $\mathcal{G}$-torsor}, is a sheaf of sets $\mathcal{F}$ on $\mathcal{C}$ endowed with an action $\mathcal{G} \times \mathcal{F} \to \mathcal{F}$ such that \begin{enumerate} \item whenever $\mathcal{F}(U)$ is nonempty the action $\mathcal{G}(U) \times \mathcal{F}(U) \to \mathcal{F}(U)$ is simply transitive. \end{enumerate} A {\it morphism of pseudo $\mathcal{G}$-torsors} $\mathcal{F} \to \mathcal{F}'$ is simply a morphism of sheaves of sets compatible with the $\mathcal{G}$-actions. A {\it torsor}, or more precisely a {\it $\mathcal{G}$-torsor}, is a pseudo $\mathcal{G}$-torsor such that in addition \begin{enumerate} \item[(2)] for every $U \in \Ob(\mathcal{C})$ there exists a covering $\{U_i \to U\}_{i \in I}$ of $U$ such that $\mathcal{F}(U_i)$ is nonempty for all $i \in I$. \end{enumerate} A {\it morphism of $\mathcal{G}$-torsors} is simply a morphism of pseudo $\mathcal{G}$-torsors. The {\it trivial $\mathcal{G}$-torsor} is the sheaf $\mathcal{G}$ endowed with the obvious left $\mathcal{G}$-action. \end{definition} 
\begin{lemma} \label{lemma-trivial-torsor} Let $\mathcal{C}$ be a site. Let $\mathcal{G}$ be a sheaf of (possibly non-commutative) groups on $\mathcal{C}$. A $\mathcal{G}$-torsor $\mathcal{F}$ is trivial if and only if $\Gamma(\mathcal{C}, \mathcal{F}) \not = \emptyset$. \end{lemma} 
\begin{lemma} \label{lemma-torsors-h1} Let $\mathcal{C}$ be a site. Let $\mathcal{H}$ be an abelian sheaf on $\mathcal{C}$. There is a canonical bijection between the set of isomorphism classes of $\mathcal{H}$-torsors and $H^1(\mathcal{C}, \mathcal{H})$. \end{lemma} 
\begin{lemma} \label{lemma-h1-extensions} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}$-modules on $\mathcal{C}$. There is a canonical bijection $$ \Ext^1_{\textit{Mod}(\mathcal{O})}(\mathcal{O}, \mathcal{F}) \longrightarrow H^1(\mathcal{C}, \mathcal{F}) $$ which associates to the extension $$ 0 \to \mathcal{F} \to \mathcal{E} \to \mathcal{O} \to 0 $$ the image of $1 \in \Gamma(\mathcal{C}, \mathcal{O})$ in $H^1(\mathcal{C}, \mathcal{F})$. \end{lemma} 
\begin{lemma} \label{lemma-h1-mod-ab-agree} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}$-modules on $\mathcal{C}$. Let $\mathcal{F}_{ab}$ denote the underlying sheaf of abelian groups. Then there is a functorial isomorphism $$ H^1(\mathcal{C}, \mathcal{F}_{ab}) = H^1(\mathcal{C}, \mathcal{F}) $$ where the left hand side is cohomology computed in $\textit{Ab}(\mathcal{C})$ and the right hand side is cohomology computed in $\textit{Mod}(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-h1-invertible} Let $(\mathcal{C}, \mathcal{O})$ be a locally ringed site. There is a canonical isomorphism $$ H^1(\mathcal{C}, \mathcal{O}^*) = \Pic(\mathcal{O}). $$ of abelian groups. \end{lemma} 
\begin{lemma} \label{lemma-cohomology-of-open} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $U$ be an object of $\mathcal{C}$. \begin{enumerate} \item If $\mathcal{I}$ is an injective $\mathcal{O}$-module then $\mathcal{I}|_U$ is an injective $\mathcal{O}_U$-module. \item For any sheaf of $\mathcal{O}$-modules $\mathcal{F}$ we have $H^p(U, \mathcal{F}) = H^p(\mathcal{C}/U, \mathcal{F}|_U)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-cohomology-bigger-site} Let $\mathcal{C}$ and $\mathcal{D}$ be sites. Let $u : \mathcal{C} \to \mathcal{D}$ be a functor. Assume $u$ satisfies the hypotheses of Sites, Lemma \ref{sites-lemma-bigger-site}. Let $g : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$ be the associated morphism of topoi. For any abelian sheaf $\mathcal{F}$ on $\mathcal{D}$ we have isomorphisms $$ R\Gamma(\mathcal{C}, g^{-1}\mathcal{F}) = R\Gamma(\mathcal{D}, \mathcal{F}), $$ in particular $H^p(\mathcal{C}, g^{-1}\mathcal{F}) = H^p(\mathcal{D}, \mathcal{F})$ and for any $U \in \Ob(\mathcal{C})$ we have isomorphisms $$ R\Gamma(U, g^{-1}\mathcal{F}) = R\Gamma(u(U), \mathcal{F}), $$ in particular $H^p(U, g^{-1}\mathcal{F}) = H^p(u(U), \mathcal{F})$. All of these isomorphisms are functorial in $\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-kill-cohomology-class-on-covering} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}$-modules. Let $U$ be an object of $\mathcal{C}$. Let $n > 0$ and let $\xi \in H^n(U, \mathcal{F})$. Then there exists a covering $\{U_i \to U\}$ of $\mathcal{C}$ such that $\xi|_{U_i} = 0$ for all $i \in I$. \end{lemma} 
\begin{lemma} \label{lemma-higher-direct-images} Let $f : (\mathcal{C}, \mathcal{O}_\mathcal{C}) \to (\mathcal{D}, \mathcal{O}_\mathcal{D})$ be a morphism of ringed sites corresponding to the continuous functor $u : \mathcal{D} \to \mathcal{C}$. For any $\mathcal{F} \in \Ob(\textit{Mod}(\mathcal{O}_\mathcal{C}))$ the sheaf $R^if_*\mathcal{F}$ is the sheaf associated to the presheaf $$ V \longmapsto H^i(u(V), \mathcal{F}) $$ \end{lemma} 
\begin{definition} \label{definition-cech-complex} Let $\mathcal{C}$ be a category. Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a family of morphisms with fixed target such that all fibre products $U_{i_0} \times_U \ldots \times_U U_{i_p}$ exist in $\mathcal{C}$. Let $\mathcal{F}$ be an abelian presheaf on $\mathcal{C}$. The complex $\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F})$ is the {\it {\v C}ech complex} associated to $\mathcal{F}$ and the family $\mathcal{U}$. Its cohomology groups $H^i(\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F}))$ are called the {\it {\v C}ech cohomology groups} of $\mathcal{F}$ with respect to $\mathcal{U}$. They are denoted $\check H^i(\mathcal{U}, \mathcal{F})$. \end{definition} 
\begin{lemma} \label{lemma-cech-h0} Let $\mathcal{C}$ be a site. Let $\mathcal{F}$ be an abelian presheaf on $\mathcal{C}$. The following are equivalent \begin{enumerate} \item $\mathcal{F}$ is an abelian sheaf on $\mathcal{C}$ and \item for every covering $\mathcal{U} = \{U_i \to U\}_{i \in I}$ of the site $\mathcal{C}$ the natural map $$ \mathcal{F}(U) \to \check{H}^0(\mathcal{U}, \mathcal{F}) $$ (see Sites, Section \ref{sites-section-sheafification}) is bijective. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-cech-exact-presheaves} The functor given by Equation (\ref{equation-cech-functor}) is an exact functor (see Homology, Lemma \ref{homology-lemma-exact-functor}). \end{lemma} 
\begin{lemma} \label{lemma-cech-cohomology-delta-functor-presheaves} Let $\mathcal{C}$ be a category. Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a family of morphisms with fixed target such that all fibre products $U_{i_0} \times_U \ldots \times_U U_{i_p}$ exist in $\mathcal{C}$. The functors $\mathcal{F} \mapsto \check{H}^n(\mathcal{U}, \mathcal{F})$ form a $\delta$-functor from the abelian category $\textit{PAb}(\mathcal{C})$ to the category of $\mathbf{Z}$-modules (see Homology, Definition \ref{homology-definition-cohomological-delta-functor}). \end{lemma} 
\begin{lemma} \label{lemma-cech-map-into} Let $\mathcal{C}$ be a category. Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a family of morphisms with fixed target such that all fibre products $U_{i_0} \times_U \ldots \times_U U_{i_p}$ exist in $\mathcal{C}$. Consider the chain complex $\mathbf{Z}_{\mathcal{U}, \bullet}$ of abelian presheaves $$ \ldots \to \bigoplus_{i_0i_1i_2} \mathbf{Z}_{U_{i_0} \times_U U_{i_1} \times_U U_{i_2}} \to \bigoplus_{i_0i_1} \mathbf{Z}_{U_{i_0} \times_U U_{i_1}} \to \bigoplus_{i_0} \mathbf{Z}_{U_{i_0}} \to 0 \to \ldots $$ where the last nonzero term is placed in degree $0$ and where the map $$ \mathbf{Z}_{U_{i_0} \times_U \ldots \times_u U_{i_{p + 1}}} \longrightarrow \mathbf{Z}_{U_{i_0} \times_U \ldots \widehat{U_{i_j}} \ldots \times_U U_{i_{p + 1}}} $$ is given by $(-1)^j$ times the canonical map. Then there is an isomorphism $$ \Hom_{\textit{PAb}(\mathcal{C})}(\mathbf{Z}_{\mathcal{U}, \bullet}, \mathcal{F}) = \check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F}) $$ functorial in $\mathcal{F} \in \Ob(\textit{PAb}(\mathcal{C}))$. \end{lemma} 
\begin{lemma} \label{lemma-homology-complex} Let $\mathcal{C}$ be a category. Let $\mathcal{U} = \{f_i : U_i \to U\}_{i \in I}$ be a family of morphisms with fixed target such that all fibre products $U_{i_0} \times_U \ldots \times_U U_{i_p}$ exist in $\mathcal{C}$. The chain complex $\mathbf{Z}_{\mathcal{U}, \bullet}$ of presheaves of Lemma \ref{lemma-cech-map-into} above is exact in positive degrees, i.e., the homology presheaves $H_i(\mathbf{Z}_{\mathcal{U}, \bullet})$ are zero for $i > 0$. \end{lemma} 
\begin{lemma} \label{lemma-complex-tensored-still-exact} \begin{slogan} The integral presheaf {\v C}ech complex is a flat resolution of the constant presheaf of integers. \end{slogan} Let $\mathcal{C}$ be a category. Let $\mathcal{U} = \{f_i : U_i \to U\}_{i \in I}$ be a family of morphisms with fixed target such that all fibre products $U_{i_0} \times_U \ldots \times_U U_{i_p}$ exist in $\mathcal{C}$. Let $\mathcal{O}$ be a presheaf of rings on $\mathcal{C}$. The chain complex $$ \mathbf{Z}_{\mathcal{U}, \bullet} \otimes_{p, \mathbf{Z}} \mathcal{O} $$ is exact in positive degrees. Here $\mathbf{Z}_{\mathcal{U}, \bullet}$ is the chain complex of Lemma \ref{lemma-cech-map-into}, and the tensor product is over the constant presheaf of rings with value $\mathbf{Z}$. \end{lemma} 
\begin{lemma} \label{lemma-cech-cohomology-derived-presheaves} Let $\mathcal{C}$ be a category. Let $\mathcal{U} = \{f_i : U_i \to U\}_{i \in I}$ be a family of morphisms with fixed target such that all fibre products $U_{i_0} \times_U \ldots \times_U U_{i_p}$ exist in $\mathcal{C}$. The {\v C}ech cohomology functors $\check{H}^p(\mathcal{U}, -)$ are canonically isomorphic as a $\delta$-functor to the right derived functors of the functor $$ \check{H}^0(\mathcal{U}, -) : \textit{PAb}(\mathcal{C}) \longrightarrow \textit{Ab}. $$ Moreover, there is a functorial quasi-isomorphism $$ \check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F}) \longrightarrow R\check{H}^0(\mathcal{U}, \mathcal{F}) $$ where the right hand side indicates the derived functor $$ R\check{H}^0(\mathcal{U}, -) : D^{+}(\textit{PAb}(\mathcal{C})) \longrightarrow D^{+}(\mathbf{Z}) $$ of the left exact functor $\check{H}^0(\mathcal{U}, -)$. \end{lemma} 
\begin{lemma} \label{lemma-injective-abelian-sheaf-injective-presheaf} Let $\mathcal{C}$ be a site. An injective abelian sheaf is also injective as an object in the category $\textit{PAb}(\mathcal{C})$. \end{lemma} 
\begin{lemma} \label{lemma-injective-trivial-cech} Let $\mathcal{C}$ be a site. Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a covering of $\mathcal{C}$. Let $\mathcal{I}$ be an injective abelian sheaf, i.e., an injective object of $\textit{Ab}(\mathcal{C})$. Then $$ \check{H}^p(\mathcal{U}, \mathcal{I}) = \left\{ \begin{matrix} \mathcal{I}(U) & \text{if} & p = 0 \\ 0 & \text{if} & p > 0 \end{matrix} \right. $$ \end{lemma} 
\begin{lemma} \label{lemma-cech-cohomology} Let $\mathcal{C}$ be a site. Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a covering of $\mathcal{C}$. There is a transformation $$ \check{\mathcal{C}}^\bullet(\mathcal{U}, -) \longrightarrow R\Gamma(U, -) $$ of functors $\textit{Ab}(\mathcal{C}) \to D^{+}(\mathbf{Z})$. In particular this gives a transformation of functors $\check{H}^p(U, \mathcal{F}) \to H^p(U, \mathcal{F})$ for $\mathcal{F}$ ranging over $\textit{Ab}(\mathcal{C})$. \end{lemma} 
\begin{lemma} \label{lemma-cech-h1} Let $\mathcal{C}$ be a site. Let $\mathcal{G}$ be an abelian sheaf on $\mathcal{C}$. Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a covering of $\mathcal{C}$. The map $$ \check{H}^1(\mathcal{U}, \mathcal{G}) \longrightarrow H^1(U, \mathcal{G}) $$ is injective and identifies $\check{H}^1(\mathcal{U}, \mathcal{G})$ via the bijection of Lemma \ref{lemma-torsors-h1} with the set of isomorphism classes of $\mathcal{G}|_U$-torsors which restrict to trivial torsors over each $U_i$. \end{lemma} 
\begin{lemma} \label{lemma-include} Let $\mathcal{C}$ be a site. Consider the functor $i : \textit{Ab}(\mathcal{C}) \to \textit{PAb}(\mathcal{C})$. It is a left exact functor with right derived functors given by $$ R^pi(\mathcal{F}) = \underline{H}^p(\mathcal{F}) : U \longmapsto H^p(U, \mathcal{F}) $$ see discussion in Section \ref{section-locality}. \end{lemma} 
\begin{lemma} \label{lemma-cech-spectral-sequence} Let $\mathcal{C}$ be a site. Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a covering of $\mathcal{C}$. For any abelian sheaf $\mathcal{F}$ there is a spectral sequence $(E_r, d_r)_{r \geq 0}$ with $$ E_2^{p, q} = \check{H}^p(\mathcal{U}, \underline{H}^q(\mathcal{F})) $$ converging to $H^{p + q}(U, \mathcal{F})$. This spectral sequence is functorial in $\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-cech-spectral-sequence-application} Let $\mathcal{C}$ be a site. Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a covering. Let $\mathcal{F} \in \Ob(\textit{Ab}(\mathcal{C}))$. Assume that $H^i(U_{i_0} \times_U \ldots \times_U U_{i_p}, \mathcal{F}) = 0$ for all $i > 0$, all $p \geq 0$ and all $i_0, \ldots, i_p \in I$. Then $\check{H}^p(\mathcal{U}, \mathcal{F}) = H^p(U, \mathcal{F})$. \end{lemma} 
\begin{lemma} \label{lemma-ses-cech-h1} Let $\mathcal{C}$ be a site. Let $$ 0 \to \mathcal{F} \to \mathcal{G} \to \mathcal{H} \to 0 $$ be a short exact sequence of abelian sheaves on $\mathcal{C}$. Let $U$ be an object of $\mathcal{C}$. If there exists a cofinal system of coverings $\mathcal{U}$ of $U$ such that $\check{H}^1(\mathcal{U}, \mathcal{F}) = 0$, then the map $\mathcal{G}(U) \to \mathcal{H}(U)$ is surjective. \end{lemma} 
\begin{lemma} \label{lemma-cech-vanish-collection} (Variant of Cohomology, Lemma \ref{cohomology-lemma-cech-vanish}.) Let $\mathcal{C}$ be a site. Let $\text{Cov}_\mathcal{C}$ be the set of coverings of $\mathcal{C}$ (see Sites, Definition \ref{sites-definition-site}). Let $\mathcal{B} \subset \Ob(\mathcal{C})$, and $\text{Cov} \subset \text{Cov}_\mathcal{C}$ be subsets. Let $\mathcal{F}$ be an abelian sheaf on $\mathcal{C}$. Assume that \begin{enumerate} \item For every $\mathcal{U} \in \text{Cov}$, $\mathcal{U} = \{U_i \to U\}_{i \in I}$ we have $U, U_i \in \mathcal{B}$ and every $U_{i_0} \times_U \ldots \times_U U_{i_p} \in \mathcal{B}$. \item For every $U \in \mathcal{B}$ the coverings of $U$ occurring in $\text{Cov}$ is a cofinal system of coverings of $U$. \item For every $\mathcal{U} \in \text{Cov}$ we have $\check{H}^p(\mathcal{U}, \mathcal{F}) = 0$ for all $p > 0$. \end{enumerate} Then $H^p(U, \mathcal{F}) = 0$ for all $p > 0$ and any $U \in \mathcal{B}$. \end{lemma} 
\begin{lemma} \label{lemma-existence} Let $\mathcal{C}$ be a site. Let $p : \mathcal{S} \to \mathcal{C}$ be a gerbe over a site whose automorphism sheaves are abelian. Let $\mathcal{G}$ be the sheaf of abelian groups constructed in Stacks, Lemma \ref{stacks-lemma-gerbe-abelian-auts}. Let $U$ be an object of $\mathcal{C}$ such that \begin{enumerate} \item there exists a cofinal system of coverings $\{U_i \to U\}$ of $U$ in $\mathcal{C}$ such that $H^1(U_i, \mathcal{G}) = 0$ and $H^1(U_i \times_U U_j, \mathcal{G}) = 0$ for all $i, j$, and \item $H^2(U, \mathcal{G}) = 0$. \end{enumerate} Then there exists an object of $\mathcal{S}$ lying over $U$. \end{lemma} 
\begin{lemma} \label{lemma-injective-module-injective-presheaf} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. An injective sheaf of modules is also injective as an object in the category $\textit{PMod}(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-include-modules} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Consider the functor $i : \textit{Mod}(\mathcal{C}) \to \textit{PMod}(\mathcal{C})$. It is a left exact functor with right derived functors given by $$ R^pi(\mathcal{F}) = \underline{H}^p(\mathcal{F}) : U \longmapsto H^p(U, \mathcal{F}) $$ see discussion in Section \ref{section-locality}. \end{lemma} 
\begin{lemma} \label{lemma-injective-module-trivial-cech} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a covering of $\mathcal{C}$. Let $\mathcal{I}$ be an injective $\mathcal{O}$-module, i.e., an injective object of $\textit{Mod}(\mathcal{O})$. Then $$ \check{H}^p(\mathcal{U}, \mathcal{I}) = \left\{ \begin{matrix} \mathcal{I}(U) & \text{if} & p = 0 \\ 0 & \text{if} & p > 0 \end{matrix} \right. $$ \end{lemma} 
\begin{lemma} \label{lemma-cohomology-modules-abelian-agree} Let $\mathcal{C}$ be a site. Let $\mathcal{O}$ be a sheaf of rings on $\mathcal{C}$. Let $\mathcal{F}$ be an $\mathcal{O}$-module, and denote $\mathcal{F}_{ab}$ the underlying sheaf of abelian groups. Then we have $$ H^i(\mathcal{C}, \mathcal{F}_{ab}) = H^i(\mathcal{C}, \mathcal{F}) $$ and for any object $U$ of $\mathcal{C}$ we also have $$ H^i(U, \mathcal{F}_{ab}) = H^i(U, \mathcal{F}). $$ Here the left hand side is cohomology computed in $\textit{Ab}(\mathcal{C})$ and the right hand side is cohomology computed in $\textit{Mod}(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-cohomology-products} Let $\mathcal{C}$ be a site. Let $I$ be a set. For $i \in I$ let  $\mathcal{F}_i$ be an abelian sheaf on $\mathcal{C}$. Let $U \in \Ob(\mathcal{C})$. The canonical map $$ H^p(U, \prod\nolimits_{i \in I} \mathcal{F}_i) \longrightarrow \prod\nolimits_{i \in I} H^p(U, \mathcal{F}_i) $$ is an isomorphism for $p = 0$ and injective for $p = 1$. \end{lemma} 
\begin{lemma} \label{lemma-restriction-along-monomorphism-surjective} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $a : U' \to U$ be a monomorphism in $\mathcal{C}$. Then for any injective $\mathcal{O}$-module $\mathcal{I}$ the restriction mapping $\mathcal{I}(U) \to \mathcal{I}(U')$ is surjective. \end{lemma} 
\begin{lemma} \label{lemma-compute-cohomology-on-sheaf-sets} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $K$ be a presheaf of sets on $\mathcal{C}$. Let $\mathcal{F}$ be an $\mathcal{O}$-module and denote $\mathcal{F}_{ab}$ the underlying sheaf of abelian groups. Then $H^p(K, \mathcal{F}) = H^p(K, \mathcal{F}_{ab})$. \end{lemma} 
\begin{lemma} \label{lemma-cech-to-cohomology-sheaf-sets} Let $\mathcal{C}$ be a site. Let $K' \to K$ be a map of presheaves of sets on $\mathcal{C}$ whose sheafification is surjective. Set $K'_p = K' \times_K \ldots \times_K K'$ ($p + 1$-factors). For every abelian sheaf $\mathcal{F}$ there is a spectral sequence with $E_1^{p, q} = H^q(K'_p, \mathcal{F})$ converging to $H^{p + q}(K, \mathcal{F})$. \end{lemma} 
\begin{lemma} \label{lemma-cohomology-on-sheaf-sets} Let $\mathcal{C}$ be a site. Let $K$ be a sheaf of sets on $\mathcal{C}$. Consider the morphism of topoi $j : \Sh(\mathcal{C}/K) \to \Sh(\mathcal{C})$, see Sites, Lemma \ref{sites-lemma-localize-topos-site}. Then $j^{-1}$ preserves injectives and $H^p(K, \mathcal{F}) = H^p(\mathcal{C}/K, j^{-1}\mathcal{F})$ for any abelian sheaf $\mathcal{F}$ on $\mathcal{C}$. \end{lemma} 
\begin{definition} \label{definition-limp} Let $\mathcal{C}$ be a site. We say an abelian sheaf $\mathcal{F}$ is {\it totally acyclic}\footnote{Although this terminology is is used in \cite[Vbis, Proposition 1.3.10]{SGA4} this is probably nonstandard notation. In \cite[V, Definition 4.1]{SGA4} this property is dubbed ``flasque'', but we cannot use this because it would clash with our definition of flasque sheaves on topological spaces. Please email \href{mailto:stacks.project@gmail.com}{stacks.project@gmail.com} if you have a better suggestion.} if for every sheaf of sets $K$ we have $H^p(K, \mathcal{F}) = 0$ for all $p \geq 1$. \end{definition} 
\begin{lemma} \label{lemma-characterize-limp} Let $\mathcal{C}$ be a site. Let $\mathcal{F}$ be an abelian sheaf. If \begin{enumerate} \item $H^p(U, \mathcal{F}) = 0$ for $p > 0$ and $U \in \Ob(\mathcal{C})$, and \item for every surjection $K' \to K$ of sheaves of sets the extended {\v C}ech complex $$ 0 \to H^0(K, \mathcal{F}) \to H^0(K', \mathcal{F}) \to H^0(K' \times_K K', \mathcal{F}) \to \ldots $$ is exact, \end{enumerate} then $\mathcal{F}$ is totally acyclic (and the converse holds too). \end{lemma} 
\begin{lemma} \label{lemma-direct-image-injective-sheaf} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ be a morphism of ringed topoi. Then for any injective object $\mathcal{I}$ in $\textit{Mod}(\mathcal{O}_\mathcal{C})$ the pushforward $f_*\mathcal{I}$ is totally acyclic. \end{lemma} 
\begin{lemma} \label{lemma-pushforward-injective-flat} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ be a morphism of ringed topoi. If $f$ is flat, then $f_*\mathcal{I}$ is an injective $\mathcal{O}_\mathcal{D}$-module for any injective $\mathcal{O}_\mathcal{C}$-module $\mathcal{I}$. \end{lemma} 
\begin{lemma} \label{lemma-limp-acyclic} Let $(\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C})$ be a ringed topos. A totally acyclic sheaf is right acyclic for the following functors: \begin{enumerate} \item the functor $H^0(U, -)$ for any object $U$ of $\mathcal{C}$, \item the functor $\mathcal{F} \mapsto \mathcal{F}(K)$ for any presheaf of sets $K$, \item the functor $\Gamma(\mathcal{C}, -)$ of global sections, \item the functor $f_*$ for any morphism $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ of ringed topoi. \end{enumerate} \end{lemma} 
\begin{lemma}[Leray spectral sequence] \label{lemma-Leray} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ be a morphism of ringed topoi. Let $\mathcal{F}^\bullet$ be a bounded below complex of $\mathcal{O}_\mathcal{C}$-modules. There is a spectral sequence $$ E_2^{p, q} = H^p(\mathcal{D}, R^qf_*(\mathcal{F}^\bullet)) $$ converging to $H^{p + q}(\mathcal{C}, \mathcal{F}^\bullet)$. \end{lemma} 
\begin{lemma} \label{lemma-apply-Leray} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ be a morphism of ringed topoi. Let $\mathcal{F}$ be an $\mathcal{O}_\mathcal{C}$-module. \begin{enumerate} \item If $R^qf_*\mathcal{F} = 0$ for $q > 0$, then $H^p(\mathcal{C}, \mathcal{F}) = H^p(\mathcal{D}, f_*\mathcal{F})$ for all $p$. \item If $H^p(\mathcal{D}, R^qf_*\mathcal{F}) = 0$ for all $q$ and $p > 0$, then $H^q(\mathcal{C}, \mathcal{F}) = H^0(\mathcal{D}, R^qf_*\mathcal{F})$ for all $q$. \end{enumerate} \end{lemma} 
\begin{lemma}[Relative Leray spectral sequence] \label{lemma-relative-Leray} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ and $g : (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D}) \to (\Sh(\mathcal{E}), \mathcal{O}_\mathcal{E})$ be morphisms of ringed topoi. Let $\mathcal{F}$ be an $\mathcal{O}_\mathcal{C}$-module. There is a spectral sequence with $$ E_2^{p, q} = R^pg_*(R^qf_*\mathcal{F}) $$ converging to $R^{p + q}(g \circ f)_*\mathcal{F}$. This spectral sequence is functorial in $\mathcal{F}$, and there is a version for bounded below complexes of $\mathcal{O}_\mathcal{C}$-modules. \end{lemma} 
\begin{lemma} \label{lemma-base-change-map-flat-case} Let $$ \xymatrix{ (\Sh(\mathcal{C}'), \mathcal{O}_{\mathcal{C}'}) \ar[r]_{g'} \ar[d]_{f'} & (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \ar[d]^f \\ (\Sh(\mathcal{D}'), \mathcal{O}_{\mathcal{D}'}) \ar[r]^g & (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D}) } $$ be a commutative diagram of ringed topoi. Let $\mathcal{F}^\bullet$ be a bounded below complex of $\mathcal{O}_\mathcal{C}$-modules. Assume both $g$ and $g'$ are flat. Then there exists a canonical base change map $$ g^*Rf_*\mathcal{F}^\bullet \longrightarrow R(f')_*(g')^*\mathcal{F}^\bullet $$ in $D^{+}(\mathcal{O}_{\mathcal{D}'})$. \end{lemma} 
\begin{lemma} \label{lemma-colim-works-over-collection} Let $\mathcal{C}$ be a site. Let $\text{Cov}_\mathcal{C}$ be the set of coverings of $\mathcal{C}$ (see Sites, Definition \ref{sites-definition-site}). Let $\mathcal{B} \subset \Ob(\mathcal{C})$, and $\text{Cov} \subset \text{Cov}_\mathcal{C}$ be subsets. Assume that \begin{enumerate} \item For every $\mathcal{U} \in \text{Cov}$ we have $\mathcal{U} = \{U_i \to U\}_{i \in I}$ with $I$ finite, $U, U_i \in \mathcal{B}$ and every $U_{i_0} \times_U \ldots \times_U U_{i_p} \in \mathcal{B}$. \item For every $U \in \mathcal{B}$ the coverings of $U$ occurring in $\text{Cov}$ is a cofinal system of coverings of $U$. \end{enumerate} Then the map $$ \colim_i H^p(U, \mathcal{F}_i) \longrightarrow H^p(U, \colim_i \mathcal{F}_i) $$ is an isomorphism for every $p \geq 0$, every $U \in \mathcal{B}$, and every filtered diagram $\mathcal{I} \to \textit{Ab}(\mathcal{C})$. \end{lemma} 
\begin{lemma} \label{lemma-colim-global} Let $\mathcal{C}$ be a site. Let $S \subset \Ob(\Sh(\mathcal{C}))$ be a subset. Denote $*$ the final object of $\Sh(\mathcal{C})$. Assume \begin{enumerate} \item for some $K \in S$ the map $K \to *$ is surjective, \item given a surjective map of sheaves $\mathcal{F} \to K$ with $K \in S$ there exists a $K' \in S$ and a map $K' \to \mathcal{F}$ such that the composition $K' \to K$ is surjective, \item given $K, K' \in S$ there is a surjection $K'' \to K \times K'$ with $K'' \in S$, \item given $a, b : K \to K'$ with $K, K' \in S$ there exists a surjection $K'' \to \text{Equalizer}(a, b)$ with $K'' \in S$, and \item every $K \in S$ is quasi-compact (Sites, Definition \ref{sites-definition-quasi-compact-topos}). \end{enumerate} Then for all $p \geq 0$ the map $$ \colim_\lambda H^p(\mathcal{C}, \mathcal{F}_\lambda) \longrightarrow H^p(\mathcal{C}, \colim_\lambda \mathcal{F}_\lambda) $$ is an isomorphism for every filtered diagram $\Lambda \to \textit{Ab}(\mathcal{C})$, $\lambda \mapsto \mathcal{F}_\lambda$. \end{lemma} 
\begin{lemma} \label{lemma-higher-direct-image-colimit} Let $f : \mathcal{C} \to \mathcal{D}$ be a morphism of sites corresponding to the continuous functor $u : \mathcal{D} \to \mathcal{C}$. Let $(\mathcal{F}_i, \varphi_{ii'})$ be a system of abelian sheaves on $\mathcal{C}$. Set $\mathcal{F} = \colim \mathcal{F}_i$. Let $p \geq 0$ be an integer. Denote $\mathcal{B}$ the set of $V \in \Ob(\mathcal{D})$ such that $H^p(u(V), \mathcal{F}) = \colim H^p(u(V), \mathcal{F}_i)$. If every object of $\mathcal{D}$ has a covering by elements of $\mathcal{B}$, then $R^pf_*\mathcal{F} = \colim R^pf_*\mathcal{F}_i$. \end{lemma} 
\begin{lemma} \label{lemma-colim-sites-injective} Let $\mathcal{I}$ be a cofiltered index category and let $(\mathcal{C}_i, f_a)$ be an inverse system of sites over $\mathcal{I}$ as in Sites, Situation \ref{sites-situation-inverse-limit-sites}. Set $\mathcal{C} = \colim \mathcal{C}_i$ as in Sites, Lemmas \ref{sites-lemma-colimit-sites} and \ref{sites-lemma-compute-pullback-to-limit}. Moreover, assume given \begin{enumerate} \item an abelian sheaf $\mathcal{F}_i$ on $\mathcal{C}_i$ for all $i \in \Ob(\mathcal{I})$, \item for $a : j \to i$ a map $\varphi_a : f_a^{-1}\mathcal{F}_i \to \mathcal{F}_j$ of abelian sheaves on $\mathcal{C}_j$ \end{enumerate} such that $\varphi_c = \varphi_b \circ f_b^{-1}\varphi_a$ whenever $c = a \circ b$. Then there exists a map of systems $(\mathcal{F}_i, \varphi_a) \to (\mathcal{G}_i, \psi_a)$ such that $\mathcal{F}_i \to \mathcal{G}_i$ is injective and $\mathcal{G}_i$ is an injective abelian sheaf. \end{lemma} 
\begin{lemma} \label{lemma-colimit} In the situation of Lemma \ref{lemma-colim-sites-injective} set $\mathcal{F} = \colim f_i^{-1}\mathcal{F}_i$. Let $i \in \Ob(\mathcal{I})$, $X_i \in \text{Ob}(\mathcal{C}_i)$. Then $$ \colim_{a : j \to i} H^p(u_a(X_i), \mathcal{F}_j) = H^p(u_i(X_i), \mathcal{F}) $$ for all $p \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-derived-tor-exact} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{G}^\bullet$ be a complex of $\mathcal{O}$-modules. The functors $$ K(\textit{Mod}(\mathcal{O})) \longrightarrow K(\textit{Mod}(\mathcal{O})), \quad \mathcal{F}^\bullet \longmapsto \text{Tot}(\mathcal{G}^\bullet \otimes_\mathcal{O} \mathcal{F}^\bullet) $$ and $$ K(\textit{Mod}(\mathcal{O})) \longrightarrow K(\textit{Mod}(\mathcal{O})), \quad \mathcal{F}^\bullet \longmapsto \text{Tot}(\mathcal{F}^\bullet \otimes_\mathcal{O} \mathcal{G}^\bullet) $$ are exact functors of triangulated categories. \end{lemma} 
\begin{definition} \label{definition-K-flat} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. A complex $\mathcal{K}^\bullet$ of $\mathcal{O}$-modules is called {\it K-flat} if for every acyclic complex $\mathcal{F}^\bullet$ of $\mathcal{O}$-modules the complex $$ \text{Tot}(\mathcal{F}^\bullet \otimes_\mathcal{O} \mathcal{K}^\bullet) $$ is acyclic. \end{definition} 
\begin{lemma} \label{lemma-K-flat-quasi-isomorphism} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{K}^\bullet$ be a K-flat complex. Then the functor $$ K(\textit{Mod}(\mathcal{O})) \longrightarrow K(\textit{Mod}(\mathcal{O})), \quad \mathcal{F}^\bullet \longmapsto \text{Tot}(\mathcal{F}^\bullet \otimes_\mathcal{O} \mathcal{K}^\bullet) $$ transforms quasi-isomorphisms into quasi-isomorphisms. \end{lemma} 
\begin{lemma} \label{lemma-restriction-K-flat} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $U$ be an object of $\mathcal{C}$. If $\mathcal{K}^\bullet$ is a K-flat complex of $\mathcal{O}$-modules, then $\mathcal{K}^\bullet|_U$ is a K-flat complex of $\mathcal{O}_U$-modules. \end{lemma} 
\begin{lemma} \label{lemma-tensor-product-K-flat} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. If $\mathcal{K}^\bullet$, $\mathcal{L}^\bullet$ are K-flat complexes of $\mathcal{O}$-modules, then $\text{Tot}(\mathcal{K}^\bullet \otimes_\mathcal{O} \mathcal{L}^\bullet)$ is a K-flat complex of $\mathcal{O}$-modules. \end{lemma} 
\begin{lemma} \label{lemma-K-flat-two-out-of-three} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $(\mathcal{K}_1^\bullet, \mathcal{K}_2^\bullet, \mathcal{K}_3^\bullet)$ be a distinguished triangle in $K(\textit{Mod}(\mathcal{O}))$. If two out of three of $\mathcal{K}_i^\bullet$ are K-flat, so is the third. \end{lemma} 
\begin{lemma} \label{lemma-K-flat-two-out-of-three-ses} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $0 \to \mathcal{K}_1^\bullet \to \mathcal{K}_2^\bullet \to \mathcal{K}_3^\bullet \to 0$ be a short exact sequence of complexes such that the terms of $\mathcal{K}_3^\bullet$ are flat $\mathcal{O}$-modules. If two out of three of $\mathcal{K}_i^\bullet$ are K-flat, so is the third. \end{lemma} 
\begin{lemma} \label{lemma-bounded-flat-K-flat} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. A bounded above complex of flat $\mathcal{O}$-modules is K-flat. \end{lemma} 
\begin{lemma} \label{lemma-colimit-K-flat} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{K}_1^\bullet \to \mathcal{K}_2^\bullet \to \ldots$ be a system of K-flat complexes. Then $\colim_i \mathcal{K}_i^\bullet$ is K-flat. \end{lemma} 
\begin{lemma} \label{lemma-resolution-by-direct-sums-extensions-by-zero} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. For any complex $\mathcal{G}^\bullet$ of $\mathcal{O}$-modules there exists a commutative diagram of complexes of $\mathcal{O}$-modules $$ \xymatrix{ \mathcal{K}_1^\bullet \ar[d] \ar[r] & \mathcal{K}_2^\bullet \ar[d] \ar[r] & \ldots \\ \tau_{\leq 1}\mathcal{G}^\bullet \ar[r] & \tau_{\leq 2}\mathcal{G}^\bullet \ar[r] & \ldots } $$ with the following properties: (1) the vertical arrows are quasi-isomorphisms and termwise surjective, (2) each $\mathcal{K}_n^\bullet$ is a bounded above complex whose terms are direct sums of $\mathcal{O}$-modules of the form $j_{U!}\mathcal{O}_U$, and (3) the maps $\mathcal{K}_n^\bullet \to \mathcal{K}_{n + 1}^\bullet$ are termwise split injections whose cokernels are direct sums of $\mathcal{O}$-modules of the form $j_{U!}\mathcal{O}_U$. Moreover, the map $\colim \mathcal{K}_n^\bullet \to \mathcal{G}^\bullet$ is a quasi-isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-K-flat-resolution} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. For any complex $\mathcal{G}^\bullet$ there exists a $K$-flat complex $\mathcal{K}^\bullet$ whose terms are flat $\mathcal{O}$-modules and a quasi-isomorphism $\mathcal{K}^\bullet \to \mathcal{G}^\bullet$ which is termwise surjective. \end{lemma} 
\begin{lemma} \label{lemma-derived-tor-quasi-isomorphism-other-side} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\alpha : \mathcal{P}^\bullet \to \mathcal{Q}^\bullet$ be a quasi-isomorphism of K-flat complexes of $\mathcal{O}$-modules. For every complex $\mathcal{F}^\bullet$ of $\mathcal{O}$-modules the induced map $$ \text{Tot}(\text{id}_{\mathcal{F}^\bullet} \otimes \alpha) : \text{Tot}(\mathcal{F}^\bullet \otimes_\mathcal{O} \mathcal{P}^\bullet) \longrightarrow \text{Tot}(\mathcal{F}^\bullet \otimes_\mathcal{O} \mathcal{Q}^\bullet) $$ is a quasi-isomorphism. \end{lemma} 
\begin{definition} \label{definition-derived-tor} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{F}^\bullet$ be an object of $D(\mathcal{O})$. The {\it derived tensor product} $$ - \otimes_\mathcal{O}^{\mathbf{L}} \mathcal{F}^\bullet : D(\mathcal{O}) \longrightarrow D(\mathcal{O}) $$ is the exact functor of triangulated categories described above. \end{definition} 
\begin{definition} \label{definition-tor} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{F}$, $\mathcal{G}$ be $\mathcal{O}$-modules. The {\it Tor}'s of $\mathcal{F}$ and $\mathcal{G}$ are defined by the formula $$ \text{Tor}_p^\mathcal{O}(\mathcal{F}, \mathcal{G}) = H^{-p}(\mathcal{F} \otimes_\mathcal{O}^\mathbf{L} \mathcal{G}) $$ with derived tensor product as defined above. \end{definition} 
\begin{lemma} \label{lemma-flat-tor-zero} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{F}$ be an $\mathcal{O}$-module. The following are equivalent \begin{enumerate} \item $\mathcal{F}$ is a flat $\mathcal{O}$-module, and \item $\text{Tor}_1^\mathcal{O}(\mathcal{F}, \mathcal{G}) = 0$ for every $\mathcal{O}$-module $\mathcal{G}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-K-flat-flat-acyclic} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{K}^\bullet$ be a K-flat, acyclic complex with flat terms. Then $\mathcal{F} = \Ker(\mathcal{K}^n \to \mathcal{K}^{n + 1})$ is a flat $\mathcal{O}$-module. \end{lemma} 
\begin{lemma} \label{lemma-factor-through-K-flat} Let $(\mathcal{C}, \mathcal{O})$ be a ringed space. Let $a : \mathcal{K}^\bullet \to \mathcal{L}^\bullet$ be a map of complexes of $\mathcal{O}$-modules. If $\mathcal{K}^\bullet$ is K-flat, then there exist a complex $\mathcal{N}^\bullet$ and maps of complexes $b : \mathcal{K}^\bullet \to \mathcal{N}^\bullet$ and $c : \mathcal{N}^\bullet \to \mathcal{L}^\bullet$ such that \begin{enumerate} \item $\mathcal{N}^\bullet$ is K-flat, \item $c$ is a quasi-isomorphism, \item $a$ is homotopic to $c \circ b$. \end{enumerate} If the terms of $\mathcal{K}^\bullet$ are flat, then we may choose $\mathcal{N}^\bullet$, $b$, and $c$ such that the same is true for $\mathcal{N}^\bullet$. \end{lemma} 
\begin{lemma} \label{lemma-pullback-K-flat} Let $f : (\Sh(\mathcal{C}'), \mathcal{O}') \to (\Sh(\mathcal{C}), \mathcal{O})$ be a morphism of ringed topoi. Let $\mathcal{K}^\bullet$ be a K-flat complex of $\mathcal{O}$-modules whose terms are flat $\mathcal{O}$-modules. Then $f^*\mathcal{K}^\bullet$ is a K-flat complex of $\mathcal{O}'$-modules whose terms are flat $\mathcal{O}'$-modules. \end{lemma} 
\begin{lemma} \label{lemma-derived-base-change} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{C}'), \mathcal{O}')$ be a morphism of ringed topoi. There exists an exact functor $$ Lf^* : D(\mathcal{O}') \longrightarrow D(\mathcal{O}) $$ of triangulated categories so that $Lf^*\mathcal{K}^\bullet = f^*\mathcal{K}^\bullet$ for any K-flat complex $\mathcal{K}^\bullet$ with flat terms and in particular for any bounded above complex of flat $\mathcal{O}'$-modules. \end{lemma} 
\begin{lemma} \label{lemma-derived-pullback-composition} Consider morphisms of ringed topoi $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ and $g : (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D}) \to (\Sh(\mathcal{E}), \mathcal{O}_\mathcal{E})$. Then $Lf^* \circ Lg^* = L(g \circ f)^*$ as functors $D(\mathcal{O}_\mathcal{E}) \to D(\mathcal{O}_\mathcal{C})$. \end{lemma} 
\begin{lemma} \label{lemma-pullback-tensor-product} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{D}), \mathcal{O}')$ be a morphism of ringed topoi. There is a canonical bifunctorial isomorphism $$ Lf^*( \mathcal{F}^\bullet \otimes_{\mathcal{O}'}^{\mathbf{L}} \mathcal{G}^\bullet ) = Lf^*\mathcal{F}^\bullet  \otimes_{\mathcal{O}}^{\mathbf{L}} Lf^*\mathcal{G}^\bullet  $$ for $\mathcal{F}^\bullet, \mathcal{G}^\bullet \in \Ob(D(\mathcal{O}'))$. \end{lemma} 
\begin{lemma} \label{lemma-variant-derived-pullback} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{C}'), \mathcal{O}')$ be a morphism of ringed topoi. There is a canonical bifunctorial isomorphism $$ \mathcal{F}^\bullet \otimes_\mathcal{O}^{\mathbf{L}} Lf^*\mathcal{G}^\bullet = \mathcal{F}^\bullet  \otimes_{f^{-1}\mathcal{O}_Y}^{\mathbf{L}} f^{-1}\mathcal{G}^\bullet  $$ for $\mathcal{F}^\bullet$ in $D(\mathcal{O})$ and $\mathcal{G}^\bullet$ in $D(\mathcal{O}')$. \end{lemma} 
\begin{lemma} \label{lemma-check-K-flat-stalks} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{K}^\bullet$ be a complex of $\mathcal{O}$-modules. \begin{enumerate} \item If $\mathcal{K}^\bullet$ is K-flat, then for every point $p$ of the site $\mathcal{C}$ the complex of $\mathcal{O}_p$-modules $\mathcal{K}_p^\bullet$ is K-flat in the sense of More on Algebra, Definition \ref{more-algebra-definition-K-flat} \item If $\mathcal{C}$ has enough points, then the converse is true. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-pullback-K-flat-points} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{C}'), \mathcal{O}')$ be a morphism of ringed topoi. If $\mathcal{C}$ has enough points, then the pullback of a K-flat complex of $\mathcal{O}'$-modules is a K-flat complex of $\mathcal{O}$-modules. \end{lemma} 
\begin{lemma} \label{lemma-tensor-pull-compatibility} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ be a morphism of ringed topoi. Let $\mathcal{K}^\bullet$ and $\mathcal{M}^\bullet$ be complexes of $\mathcal{O}_\mathcal{D}$-modules. The diagram $$ \xymatrix{ Lf^*(\mathcal{K}^\bullet \otimes_{\mathcal{O}_\mathcal{D}}^\mathbf{L} \mathcal{M}^\bullet) \ar[r] \ar[d] & Lf^*\text{Tot}(\mathcal{K}^\bullet \otimes_{\mathcal{O}_\mathcal{D}} \mathcal{M}^\bullet) \ar[d] \\ Lf^*\mathcal{K}^\bullet \otimes_{\mathcal{O}_\mathcal{C}}^\mathbf{L} Lf^*\mathcal{M}^\bullet \ar[d] & f^*\text{Tot}(\mathcal{K}^\bullet \otimes_{\mathcal{O}_\mathcal{D}} \mathcal{M}^\bullet) \ar[d] \\ f^*\mathcal{K}^\bullet \otimes_{\mathcal{O}_\mathcal{C}}^\mathbf{L} f^*\mathcal{M}^\bullet \ar[r] & \text{Tot}(f^*\mathcal{K}^\bullet \otimes_{\mathcal{O}_\mathcal{C}} f^*\mathcal{M}^\bullet) } $$ commutes. \end{lemma} 
\begin{lemma} \label{lemma-adjoint} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{D}), \mathcal{O}')$ be a morphism of ringed topoi. The functor $Rf_*$ defined above and the functor $Lf^*$ defined in Lemma \ref{lemma-derived-base-change} are adjoint: $$ \Hom_{D(\mathcal{O})}(Lf^*\mathcal{G}^\bullet, \mathcal{F}^\bullet) = \Hom_{D(\mathcal{O}')}(\mathcal{G}^\bullet, Rf_*\mathcal{F}^\bullet) $$ bifunctorially in $\mathcal{F}^\bullet \in \Ob(D(\mathcal{O}))$ and $\mathcal{G}^\bullet \in \Ob(D(\mathcal{O}'))$. \end{lemma} 
\begin{lemma} \label{lemma-derived-pushforward-composition} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ and $g : (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D}) \to (\Sh(\mathcal{E}), \mathcal{O}_\mathcal{E})$ be morphisms of ringed topoi. Then $Rg_* \circ Rf_* = R(g \circ f)_*$ as functors $D(\mathcal{O}_\mathcal{C}) \to D(\mathcal{O}_\mathcal{E})$. \end{lemma} 
\begin{lemma} \label{lemma-adjoints-push-pull-compatibility} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ be a morphism of ringed topoi. Let $\mathcal{K}^\bullet$ be a complex of $\mathcal{O}_\mathcal{C}$-modules. The diagram $$ \xymatrix{ Lf^*f_*\mathcal{K}^\bullet \ar[r] \ar[d] & f^*f_*\mathcal{K}^\bullet \ar[d] \\ Lf^*Rf_*\mathcal{K}^\bullet \ar[r] & \mathcal{K}^\bullet } $$ coming from $Lf^* \to f^*$ on complexes, $f_* \to Rf_*$ on complexes, and adjunction $Lf^* \circ Rf_* \to \text{id}$ commutes in $D(\mathcal{O}_\mathcal{C})$. \end{lemma} 
\begin{lemma} \label{lemma-torsion} Let $\mathcal{C}$ be a site. Let $\mathcal{A} \subset \textit{Ab}(\mathcal{C})$ denote the Serre subcategory consisting of torsion abelian sheaves. Then the functor $D(\mathcal{A}) \to D_\mathcal{A}(\mathcal{C})$ is an equivalence. \end{lemma} 
\begin{lemma} \label{lemma-restrict-K-injective-to-open} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $U$ be an object of $\mathcal{C}$. The restriction of a K-injective complex of $\mathcal{O}$-modules to $\mathcal{C}/U$ is a K-injective complex of $\mathcal{O}_U$-modules. \end{lemma} 
\begin{lemma} \label{lemma-unbounded-cohomology-of-open} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $U \in \Ob(\mathcal{C})$. For $K$ in $D(\mathcal{O})$ we have $H^p(U, K) = H^p(\mathcal{C}/U, K|_{\mathcal{C}/U})$. \end{lemma} 
\begin{lemma} \label{lemma-sheafification-cohomology} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $K$ be an object of $D(\mathcal{O})$. The sheafification of $$ U \mapsto H^q(U, K) = H^q(\mathcal{C}/U, K|_{\mathcal{C}/U}) $$ is the $q$th cohomology sheaf $H^q(K)$ of $K$. \end{lemma} 
\begin{lemma} \label{lemma-restrict-direct-image-open} Let $f : (\mathcal{C}, \mathcal{O}_\mathcal{C}) \to (\mathcal{D}, \mathcal{O}_\mathcal{D})$ be a morphism of ringed sites corresponding to the continuous functor $u : \mathcal{D} \to \mathcal{C}$. Given $V \in \mathcal{D}$, set $U = u(V)$ and denote $g : (\mathcal{C}/U, \mathcal{O}_U) \to (\mathcal{D}/V, \mathcal{O}_V)$ the induced morphism of ringed sites (Modules on Sites, Lemma \ref{sites-modules-lemma-localize-morphism-ringed-sites}). Then $(Rf_*E)|_{\mathcal{D}/V} = Rg_*(E|_{\mathcal{C}/U})$ for $E$ in $D(\mathcal{O}_\mathcal{C})$. \end{lemma} 
\begin{lemma} \label{lemma-Leray-unbounded} Let $f : (\mathcal{C}, \mathcal{O}_\mathcal{C}) \to (\mathcal{D}, \mathcal{O}_\mathcal{D})$ be a morphism of ringed sites corresponding to the continuous functor $u : \mathcal{D} \to \mathcal{C}$. Then $R\Gamma(\mathcal{D}, -) \circ Rf_* = R\Gamma(\mathcal{C}, -)$ as functors $D(\mathcal{O}_\mathcal{C}) \to D(\Gamma(\mathcal{O}_\mathcal{D}))$. More generally, for $V \in \mathcal{D}$ with $U = u(V)$ we have $R\Gamma(U, -) = R\Gamma(V, -) \circ Rf_*$. \end{lemma} 
\begin{lemma} \label{lemma-unbounded-describe-higher-direct-images} Let $f : (\mathcal{C}, \mathcal{O}_\mathcal{C}) \to (\mathcal{D}, \mathcal{O}_\mathcal{D})$ be a morphism of ringed sites corresponding to the continuous functor $u : \mathcal{D} \to \mathcal{C}$. Let $K$ be in $D(\mathcal{O}_\mathcal{C})$. Then $H^i(Rf_*K)$ is the sheaf associated to the presheaf $$ V \mapsto H^i(u(V), K) = H^i(V, Rf_*K) $$ \end{lemma} 
\begin{lemma} \label{lemma-modules-abelian-unbounded} Let $(\mathcal{C}, \mathcal{O}_\mathcal{C})$ be a ringed site. Let $K$ be an object of $D(\mathcal{O}_\mathcal{C})$ and denote $K_{ab}$ its image in $D(\underline{\mathbf{Z}}_\mathcal{C})$. \begin{enumerate} \item There is a canonical map $R\Gamma(\mathcal{C}, K) \to R\Gamma(\mathcal{C}, K_{ab})$ which is an isomorphism in $D(\textit{Ab})$. \item For any $U \in \mathcal{C}$ there is a canonical map $R\Gamma(U, K) \to R\Gamma(U, K_{ab})$ which is an isomorphism in $D(\textit{Ab})$. \item Let $f : (\mathcal{C}, \mathcal{O}_\mathcal{C}) \to (\mathcal{D}, \mathcal{O}_\mathcal{D})$ be a morphism of ringed sites. There is a canonical map $Rf_*K \to Rf_*(K_{ab})$ which is an isomorphism in $D(\underline{\mathbf{Z}}_\mathcal{D})$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-adjoint-lower-shriek-restrict} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $U$ be an object of $\mathcal{C}$. Denote $j : (\Sh(\mathcal{C}/U), \mathcal{O}_U) \to (\Sh(\mathcal{C}), \mathcal{O})$ the corresponding localization morphism. The restriction functor $D(\mathcal{O}) \to D(\mathcal{O}_U)$ is a right adjoint to extension by zero $j_! : D(\mathcal{O}_U) \to D(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-j-shriek-and-tensor} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $U \in \Ob(\mathcal{C})$. For $L$ in $D(\mathcal{O}_U)$ and $K$ in $D(\mathcal{O})$ we have $j_!L \otimes_\mathcal{O}^\mathbf{L} K = j_!(L \otimes_{\mathcal{O}_U}^\mathbf{L} K|_U)$. \end{lemma} 
\begin{lemma} \label{lemma-K-injective-flat} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ be a flat morphism of ringed topoi. If $\mathcal{I}^\bullet$ is a K-injective complex of $\mathcal{O}_\mathcal{C}$-modules, then $f_*\mathcal{I}^\bullet$ is K-injective as a complex of $\mathcal{O}_\mathcal{D}$-modules. \end{lemma} 
\begin{lemma} \label{lemma-hom-K-injective} Let $\mathcal{C}$ be a site. Let $\mathcal{O} \to \mathcal{O}'$ be a map of sheaves of rings. If $\mathcal{I}^\bullet$ is a K-injective complex of $\mathcal{O}$-modules, then $\SheafHom_\mathcal{O}(\mathcal{O}', \mathcal{I}^\bullet)$ is a K-injective complex of $\mathcal{O}'$-modules. \end{lemma} 
\begin{lemma} \label{lemma-localize-cartesian-square} Let $\mathcal{C}$ be a site. Let $$ \xymatrix{ X' \ar[d] \ar[r] & X \ar[d] \\ Y' \ar[r] & Y } $$ be a cartesian diagram of $\mathcal{C}$. Then we have $j_{Y'/Y}^{-1} \circ Rj_{X/Y, *} = Rj_{X'/Y', *} \circ j_{X'/X}^{-1}$ as functors $D(\mathcal{C}/X) \to D(\mathcal{C}/Y')$. \end{lemma} 
\begin{lemma} \label{lemma-localize-cartesian-square-modules} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $$ \xymatrix{ X' \ar[d] \ar[r] & X \ar[d] \\ Y' \ar[r] & Y } $$ be a cartesian diagram of $\mathcal{C}$. Then we have $j_{Y'/Y}^* \circ Rj_{X/Y, *} = Rj_{X'/Y', *} \circ j_{X'/X}^*$ as functors $D(\mathcal{O}_X) \to D(\mathcal{O}_{Y'})$. \end{lemma} 
\begin{lemma} \label{lemma-ML-general} Let $I$ be an ideal of a ring $A$. Let $\mathcal{C}$ be a site. Let $$ \ldots \to \mathcal{F}_3 \to \mathcal{F}_2 \to \mathcal{F}_1 $$ be an inverse system of sheaves of $A$-modules on $\mathcal{C}$ such that $\mathcal{F}_n = \mathcal{F}_{n + 1}/I^n\mathcal{F}_{n + 1}$. Let $p \geq 0$. Assume $$ \bigoplus\nolimits_{n \geq 0} H^{p + 1}(\mathcal{C}, I^n\mathcal{F}_{n + 1}) $$ satisfies the ascending chain condition as a graded $\bigoplus_{n \geq 0} I^n/I^{n + 1}$-module. Then the inverse system $M_n = H^p(\mathcal{C}, \mathcal{F}_n)$ satisfies the Mittag-Leffler condition\footnote{In fact, there exists a $c \geq 0$ such that $\Im(M_n \to M_{n - c})$ is the stable image for all $n \geq c$.}. \end{lemma} 
\begin{lemma} \label{lemma-ML-general-better} Let $I$ be an ideal of a ring $A$. Let $\mathcal{C}$ be a site. Let $$ \ldots \to \mathcal{F}_3 \to \mathcal{F}_2 \to \mathcal{F}_1 $$ be an inverse system of $A$-modules on $\mathcal{C}$ such that $\mathcal{F}_n = \mathcal{F}_{n + 1}/I^n\mathcal{F}_{n + 1}$. Let $p \geq 0$. Given $n$ define $$ N_n = \bigcap\nolimits_{m \geq n} \Im\left( H^{p + 1}(\mathcal{C}, I^n\mathcal{F}_{m + 1}) \to H^{p + 1}(\mathcal{C}, I^n\mathcal{F}_{n + 1}) \right) $$ If $\bigoplus N_n$ satisfies the ascending chain condition as a graded $\bigoplus_{n \geq 0} I^n/I^{n + 1}$-module, then the inverse system $M_n = H^p(\mathcal{C}, \mathcal{F}_n)$ satisfies the Mittag-Leffler condition\footnote{In fact, there exists a $c \geq 0$ such that $\Im(M_n \to M_{n - c})$ is the stable image for all $n \geq c$.}. \end{lemma} 
\begin{lemma} \label{lemma-topology-I-adic-general} Let $I$ be an ideal of a ring $A$. Let $\mathcal{C}$ be a site. Let $$ \ldots \to \mathcal{F}_3 \to \mathcal{F}_2 \to \mathcal{F}_1 $$ be an inverse system of sheaves of $A$-modules on $\mathcal{C}$ such that $\mathcal{F}_n = \mathcal{F}_{n + 1}/I^n\mathcal{F}_{n + 1}$. Let $p \geq 0$. Assume $$ \bigoplus\nolimits_{n \geq 0} H^p(\mathcal{C}, I^n\mathcal{F}_{n + 1}) $$ satisfies the ascending chain condition as a graded $\bigoplus_{n \geq 0} I^n/I^{n + 1}$-module. Then the limit topology on $M = \lim H^p(\mathcal{C}, \mathcal{F}_n)$ is the $I$-adic topology. \end{lemma} 
\begin{lemma} \label{lemma-topology-I-adic-general-better} Let $I$ be an ideal of a ring $A$. Let $\mathcal{C}$ be a site. Let $$ \ldots \to \mathcal{F}_3 \to \mathcal{F}_2 \to \mathcal{F}_1 $$ be an inverse system of sheaves of $A$-modules on $\mathcal{C}$ such that $\mathcal{F}_n = \mathcal{F}_{n + 1}/I^n\mathcal{F}_{n + 1}$. Let $p \geq 0$. Given $n$ define $$ N_n = \bigcap\nolimits_{m \geq n} \Im\left( H^p(\mathcal{C}, I^n\mathcal{F}_{m + 1}) \to H^p(\mathcal{C}, I^n\mathcal{F}_{n + 1}) \right) $$ If $\bigoplus N_n$ satisfies the ascending chain condition as a graded $\bigoplus_{n \geq 0} I^n/I^{n + 1}$-module, then the limit topology on $M = \lim H^p(\mathcal{C}, \mathcal{F}_n)$ is the $I$-adic topology. \end{lemma} 
\begin{lemma} \label{lemma-derived-limit-is-ok} Let $\mathcal{C}$ be a site. Let $K$ be an object of $D(\mathcal{C} \times \mathbf{N})$. Set $K_n = i_n^{-1}K$ as above. Then $$ R\lim K \cong R\lim K_n $$ in $D(\mathcal{C})$. \end{lemma} 
\begin{lemma} \label{lemma-RGamma-commutes-with-Rlim} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. The functors $R\Gamma(\mathcal{C}, -)$ and $R\Gamma(U, -)$ for $U \in \Ob(\mathcal{C})$ commute with $R\lim$. Moreover, there are short exact sequences $$ 0 \to R^1\lim H^{m - 1}(U, K_n) \to H^m(U, R\lim K_n) \to \lim H^m(U, K_n) \to 0 $$ for any inverse system $(K_n)$ in $D(\mathcal{O})$ and $m \in \mathbf{Z}$. Similar for $H^m(\mathcal{C}, R\lim K_n)$. \end{lemma} 
\begin{lemma} \label{lemma-Rf-commutes-with-Rlim} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{C}'), \mathcal{O}')$ be a morphism of ringed topoi. Then $Rf_*$ commutes with $R\lim$, i.e., $Rf_*$ commutes with derived limits. \end{lemma} 
\begin{lemma} \label{lemma-inverse-limit-is-derived-limit} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $(\mathcal{F}_n)$ be an inverse system of $\mathcal{O}$-modules. Let $\mathcal{B} \subset \Ob(\mathcal{C})$ be a subset. Assume \begin{enumerate} \item every object of $\mathcal{C}$ has a covering whose members are elements of $\mathcal{B}$, \item $H^p(U, \mathcal{F}_n) = 0$ for $p > 0$ and $U \in \mathcal{B}$, \item the inverse system $\mathcal{F}_n(U)$ has vanishing $R^1\lim$ for $U \in \mathcal{B}$. \end{enumerate} Then $R\lim \mathcal{F}_n = \lim \mathcal{F}_n$ and we have $H^p(U, \lim \mathcal{F}_n) = 0$ for $p > 0$ and $U \in \mathcal{B}$. \end{lemma} 
\begin{lemma} \label{lemma-cohomology-derived-limit-injective} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $(K_n)$ be an inverse system in $D(\mathcal{O})$. Let $V \in \Ob(\mathcal{C})$ and $m \in \mathbf{Z}$. Assume there exist an integer $n(V)$ and a cofinal system $\text{Cov}_V$ of coverings of $V$ such that for $\{V_i \to V\} \in \text{Cov}_V$ \begin{enumerate} \item $R^1\lim H^{m - 1}(V_i, K_n) = 0$, and \item $H^m(V_i, K_n) \to H^m(V_i, K_{n(V)})$ is injective for $n \geq n(V)$. \end{enumerate} Then the map on sections $H^m(R\lim K_n)(V) \to H^m(K_{n(V)})(V)$ is injective. \end{lemma} 
\begin{lemma} \label{lemma-is-limit-per-object} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $E \in D(\mathcal{O})$. Let $\mathcal{B} \subset \Ob(\mathcal{C})$ be a subset. Assume \begin{enumerate} \item every object of $\mathcal{C}$ has a covering whose members are elements of $\mathcal{B}$, and \item for every $V \in \mathcal{B}$ there exist a function $p(V, -) : \mathbf{Z} \to \mathbf{Z}$ and a cofinal system $\text{Cov}_V$ of coverings of $V$ such that $$ H^p(V_i, H^{m - p}(E)) = 0 $$ for all $\{V_i \to V\} \in \text{Cov}_V$ and all integers $p, m$ satisfying $p > p(V, m)$. \end{enumerate} Then the map $E \to R\lim \tau_{\geq -n} E$ of Derived Categories, Remark \ref{derived-remark-map-into-derived-limit-truncations} is an isomorphism in $D(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-is-limit-spaltenstein} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $E \in D(\mathcal{O})$. Let $\mathcal{B} \subset \Ob(\mathcal{C})$ be a subset. Assume \begin{enumerate} \item every object of $\mathcal{C}$ has a covering whose members are elements of $\mathcal{B}$, and \item for every $V \in \mathcal{B}$ there exist an integer $d_V \geq 0$ and a cofinal system $\text{Cov}_V$ of coverings of $V$ such that $$ H^p(V_i, H^q(E)) = 0 \text{ for } \{V_i \to V\} \in \text{Cov}_V,\ p > d_V, \text{ and }q < 0 $$ \end{enumerate} Then the map $E \to R\lim \tau_{\geq -n} E$ of Derived Categories, Remark \ref{derived-remark-map-into-derived-limit-truncations} is an isomorphism in $D(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-is-limit} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $E \in D(\mathcal{O})$. Assume there exists a function $p(-) : \mathbf{Z} \to \mathbf{Z}$ and a subset $\mathcal{B} \subset \Ob(\mathcal{C})$ such that \begin{enumerate} \item every object of $\mathcal{C}$ has a covering whose members are elements of $\mathcal{B}$, \item $H^p(V, H^{m - p}(E)) = 0$ for $p > p(m)$ and $V \in \mathcal{B}$. \end{enumerate} Then the map $E \to R\lim \tau_{\geq -n} E$ of Derived Categories, Remark \ref{derived-remark-map-into-derived-limit-truncations} is an isomorphism in $D(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-is-limit-dimension} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $E \in D(\mathcal{O})$. Assume there exists an integer $d \geq 0$ and a subset $\mathcal{B} \subset \Ob(\mathcal{C})$ such that \begin{enumerate} \item every object of $\mathcal{C}$ has a covering whose members are elements of $\mathcal{B}$, \item $H^p(V, H^q(E)) = 0$ for $p > d$, $q < 0$, and $V \in \mathcal{B}$. \end{enumerate} Then the map $E \to R\lim \tau_{\geq -n} E$ of Derived Categories, Remark \ref{derived-remark-map-into-derived-limit-truncations} is an isomorphism in $D(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-cohomology-over-U-trivial} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $K$ be an object of $D(\mathcal{O})$. Let $\mathcal{B} \subset \Ob(\mathcal{C})$ be a subset. Assume \begin{enumerate} \item every object of $\mathcal{C}$ has a covering whose members are elements of $\mathcal{B}$, \item $H^p(U, H^q(K)) = 0$ for all $p > 0$, $q \in \mathbf{Z}$, and $U \in \mathcal{B}$. \end{enumerate} Then $H^q(U, K) = H^0(U, H^q(K))$ for $q \in \mathbf{Z}$ and $U \in \mathcal{B}$. \end{lemma} 
\begin{lemma} \label{lemma-derived-limit-suitable-system} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $(K_n)$ be an inverse system of objects of $D(\mathcal{O})$. Let $\mathcal{B} \subset \Ob(\mathcal{C})$ be a subset. Assume \begin{enumerate} \item every object of $\mathcal{C}$ has a covering whose members are elements of $\mathcal{B}$, \item for all $U \in \mathcal{B}$ and all $q \in \mathbf{Z}$ we have \begin{enumerate} \item $H^p(U, H^q(K_n)) = 0$ for $p > 0$, \item the inverse system $H^0(U, H^q(K_n))$ has vanishing $R^1\lim$. \end{enumerate} \end{enumerate} Then $H^q(R\lim K_n) = \lim H^q(K_n)$ for $q \in \mathbf{Z}$. \end{lemma} 
\begin{lemma} \label{lemma-K-injective} In the situation described above. Denote $\mathcal{H}^m = H^m(\mathcal{F}^\bullet)$ the $m$th cohomology sheaf. Let $\mathcal{B} \subset \Ob(\mathcal{C})$ be a subset. Let $d \in \mathbf{N}$. Assume \begin{enumerate} \item every object of $\mathcal{C}$ has a covering whose members are elements of $\mathcal{B}$, \item for every $U \in \mathcal{B}$ we have $H^p(U, \mathcal{H}^q) = 0$ for $p > d$ and $q < 0$\footnote{It suffices if $\forall m$, $\exists p(m)$, $H^p(U. \mathcal{H}^{m - p}) = 0$ for $p > p(m)$, see Lemma \ref{lemma-is-limit}.}. \end{enumerate} Then (\ref{equation-into-candidate-K-injective}) is a quasi-isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-inverse-limit-complexes} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $(\mathcal{F}_n^\bullet)$ be an inverse system of complexes of $\mathcal{O}$-modules. Let $m \in \mathbf{Z}$. Suppose given $\mathcal{B} \subset \Ob(\mathcal{C})$ and an integer $n_0$ such that \begin{enumerate} \item every object of $\mathcal{C}$ has a covering whose members are elements of $\mathcal{B}$, \item for every $U \in \mathcal{B}$ \begin{enumerate} \item the systems of abelian groups $\mathcal{F}_n^{m - 2}(U)$ and $\mathcal{F}_n^{m - 1}(U)$ have vanishing $R^1\lim$ (for example these have the Mittag-Leffler property), \item the system of abelian groups $H^{m - 1}(\mathcal{F}_n^\bullet(U))$ has vanishing $R^1\lim$ (for example it has the Mittag-Leffler property), and \item we have $H^m(\mathcal{F}_n^\bullet(U)) = H^m(\mathcal{F}_{n_0}^\bullet(U))$ for all $n \geq n_0$. \end{enumerate} \end{enumerate} Then the maps $H^m(\mathcal{F}^\bullet) \to \lim H^m(\mathcal{F}_n^\bullet) \to H^m(\mathcal{F}_{n_0}^\bullet)$ are isomorphisms of sheaves where $\mathcal{F}^\bullet = \lim \mathcal{F}_n^\bullet$ is the termwise inverse limit.  \end{lemma} 
\begin{lemma} \label{lemma-olsson-laszlo} \begin{reference} This is \cite[Proposition 2.1.4]{six-I} with slightly changed hypotheses; it is the analogue of \cite[Proposition 3.13]{Spaltenstein} for sites. \end{reference} In Situation \ref{situation-olsson-laszlo} for any $E \in D_\mathcal{A}(\mathcal{O})$ the map $E \to R\lim \tau_{\geq -n} E$ of Derived Categories, Remark \ref{derived-remark-map-into-derived-limit-truncations} is an isomorphism in $D(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-olsson-laszlo-modified} In Situation \ref{situation-olsson-laszlo} let $(K_n)$ be an inverse system in $D_\mathcal{A}^+(\mathcal{O})$. Assume that for every $j$ the inverse system $(H^j(K_n))$ in $\mathcal{A}$ is eventually constant with value $\mathcal{H}^j$. Then $H^j(R\lim K_n) = \mathcal{H}^j$ for all $j$. \end{lemma} 
\begin{lemma} \label{lemma-olsson-laszlo-map-version-one} \begin{reference} This is a version of \cite[Lemma 2.1.10]{six-I} with slightly changed hypotheses. \end{reference} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{C}'), \mathcal{O}')$ be a morphism of ringed topoi. Let $\mathcal{A} \subset \textit{Mod}(\mathcal{O})$ and $\mathcal{A}' \subset \textit{Mod}(\mathcal{O}')$ be weak Serre subcategories. Assume there is an integer $N$ such that \begin{enumerate} \item $\mathcal{C}, \mathcal{O}, \mathcal{A}$ satisfy the assumption of Situation \ref{situation-olsson-laszlo}, \item $\mathcal{C}', \mathcal{O}', \mathcal{A}'$ satisfy the assumption of Situation \ref{situation-olsson-laszlo}, \item $R^pf_*\mathcal{F} \in \Ob(\mathcal{A}')$ for $p \geq 0$ and $\mathcal{F} \in \Ob(\mathcal{A})$, \item $R^pf_*\mathcal{F} = 0$ for $p > N$ and $\mathcal{F} \in \Ob(\mathcal{A})$, \end{enumerate} Then for $K$ in $D_\mathcal{A}(\mathcal{O})$ we have \begin{enumerate} \item[(a)] $Rf_*K$ is in $D_{\mathcal{A}'}(\mathcal{O}')$, \item[(b)] the map $H^j(Rf_*K) \to H^j(Rf_*(\tau_{\geq -n}K))$ is an isomorphism for $j \geq N - n$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-olsson-laszlo-map-version-two} \begin{reference} This is a version of \cite[Lemma 2.1.10]{six-I} with slightly changed hypotheses. \end{reference} Let $f : (\mathcal{C}, \mathcal{O}) \to (\mathcal{C}', \mathcal{O}')$ be a morphism of ringed sites. assume moreover there is an integer $N$ such that \begin{enumerate} \item $\mathcal{C}, \mathcal{O}, \mathcal{A}$ satisfy the assumption of Situation \ref{situation-olsson-laszlo}, \item $f : (\mathcal{C}, \mathcal{O}) \to (\mathcal{C}', \mathcal{O}')$ and $\mathcal{A}$ satisfy the assumption of Situation \ref{situation-olsson-laszlo-prime}, \item $R^pf_*\mathcal{F} = 0$ for $p > N$ and $\mathcal{F} \in \Ob(\mathcal{A})$, \end{enumerate} Then for $K$ in $D_\mathcal{A}(\mathcal{O})$ the map $H^j(Rf_*K) \to H^j(Rf_*(\tau_{\geq -n}K))$ is an isomorphism for $j \geq N - n$. \end{lemma} 
\begin{lemma} \label{lemma-c-square} In the situation above, choose a K-injective complex $\mathcal{I}^\bullet$ of $\mathcal{O}$-modules representing $K$. Using $-1$ times the canonical map for one of the four arrows we get maps of complexes $$ \mathcal{I}^\bullet(X) \xrightarrow{\alpha} \mathcal{I}^\bullet(Z) \oplus \mathcal{I}^\bullet(Y) \xrightarrow{\beta} \mathcal{I}^\bullet(E) $$ with $\beta \circ \alpha = 0$. Thus a canonical map $$ c^K_{X, Z, Y, E} : \mathcal{I}^\bullet(X) \longrightarrow C(\beta)^\bullet[-1] $$ This map is canonical in the sense that a different choice of K-injective complex representing $K$ determines an isomorphic arrow in the derived category of abelian groups. If $c^K_{X, Z, Y, E}$ is an isomorphism, then using its inverse we obtain a canonical distinguished triangle $$ R\Gamma(X, K) \to R\Gamma(Z, K) \oplus R\Gamma(Y, K) \to R\Gamma(E, K) \to R\Gamma(X, K)[1] $$ All of these constructions are functorial in $K$. \end{lemma} 
\begin{lemma} \label{lemma-two-out-of-three-blow-up-square} In the situation above, let $K_1 \to K_2 \to K_3 \to K_1[1]$ be a distinguished triangle in $D(\mathcal{O})$. If $c^{K_i}_{X, Z, Y, E}$ is a quasi-isomorphism for two $i$ out of $\{1, 2, 3\}$, then it is a quasi-isomorphism for the third $i$. \end{lemma} 
\begin{lemma} \label{lemma-square-triangle} In the situation above assume \begin{enumerate} \item $h_X^\# = h_Y^\# \amalg_{h_E^\#} h_Z^\#$, and \item $h_E^\# \to h_Y^\#$ is injective. \end{enumerate} Then the construction of Lemma \ref{lemma-c-square} produces a distinguished triangle $$ R\Gamma(X, K) \to R\Gamma(Z, K) \oplus R\Gamma(Y, K) \to R\Gamma(E, K) \to R\Gamma(X, K)[1] $$ functorial for $K$ in $D(\mathcal{C})$. \end{lemma} 
\begin{lemma} \label{lemma-square-triangle-general} Let $\mathcal{C}$ be a site. Consider a commutative diagram $$ \xymatrix{ \mathcal{D} \ar[r] \ar[d] & \mathcal{F} \ar[d] \\ \mathcal{E} \ar[r] & \mathcal{G} } $$ of presheaves of sets on $\mathcal{C}$ and assume that \begin{enumerate} \item $\mathcal{G}^\# = \mathcal{E}^\# \amalg_{\mathcal{D}^\#} \mathcal{F}^\#$, and \item $\mathcal{D}^\# \to \mathcal{F}^\#$ is injective. \end{enumerate} Then there is a canonical distinguished triangle $$ R\Gamma(\mathcal{G}, K) \to R\Gamma(\mathcal{E}, K) \oplus R\Gamma(\mathcal{F}, K) \to R\Gamma(\mathcal{D}, K) \to R\Gamma(\mathcal{G}, K)[1] $$ functorial in $K \in D(\mathcal{C})$ where $R\Gamma(\mathcal{G}, -)$ is the cohomology discussed in Section \ref{section-limp}. \end{lemma} 
\begin{lemma} \label{lemma-downstairs} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ be a morphism of ringed topoi. Consider the full subcategory $D' \subset D(\mathcal{O}_\mathcal{D})$ consisting of objects $K$ such that $$ K \longrightarrow Rf_*Lf^*K $$ is an isomorphism. Then $D'$ is a saturated triangulated strictly full subcategory of $D(\mathcal{O}_\mathcal{D})$ and the functor $Lf^* : D' \to D(\mathcal{O}_\mathcal{C})$ is fully faithful. \end{lemma} 
\begin{lemma} \label{lemma-upstairs} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ be a morphism of ringed topoi. Consider the full subcategory $D' \subset D(\mathcal{O}_\mathcal{C})$ consisting of objects $K$ such that $$ Lf^*Rf_*K \longrightarrow K $$ is an isomorphism. Then $D'$ is a saturated triangulated strictly full subcategory of $D(\mathcal{O}_\mathcal{C})$ and the functor $Rf_* : D' \to D(\mathcal{O}_\mathcal{D})$ is fully faithful. \end{lemma} 
\begin{lemma} \label{lemma-bounded-in-image-upstairs} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ be a morphism of ringed topoi. Let $K$ be an object of $D(\mathcal{O}_\mathcal{C})$. Assume \begin{enumerate} \item $f$ is flat, \item $K$ is bounded below, \item $f^*Rf_*H^q(K) \to H^q(K)$ is an isomorphism. \end{enumerate} Then $f^*Rf_*K \to K$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-bounded-in-image-downstairs} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ be a morphism of ringed topoi. Let $K$ be an object of $D(\mathcal{O}_\mathcal{D})$. Assume \begin{enumerate} \item $f$ is flat, \item $K$ is bounded below, \item $H^q(K) \to Rf_*f^*H^q(K)$ is an isomorphism. \end{enumerate} Then $K \to Rf_*f^*K$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-equivalence-bounded} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{C}'), \mathcal{O}')$ be a morphism of ringed topoi. Let $\mathcal{A} \subset \textit{Mod}(\mathcal{O})$ and $\mathcal{A}' \subset \textit{Mod}(\mathcal{O}')$ be weak Serre subcategories. Assume \begin{enumerate} \item $f$ is flat, \item $f^*$ induces an equivalence of categories $\mathcal{A}' \to \mathcal{A}$, \item $\mathcal{F}' \to Rf_*f^*\mathcal{F}'$ is an isomorphism for $\mathcal{F}' \in \Ob(\mathcal{A}')$. \end{enumerate} Then $f^* : D_{\mathcal{A}'}^+(\mathcal{O}') \to D_\mathcal{A}^+(\mathcal{O})$ is an equivalence of categories with quasi-inverse given by $Rf_* : D_\mathcal{A}^+(\mathcal{O}) \to D_{\mathcal{A}'}^+(\mathcal{O}')$. \end{lemma} 
\begin{lemma} \label{lemma-equivalence-unbounded-one} \begin{reference} This is analogous to \cite[Theorem 2.2.3]{six-I}. \end{reference} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{C}'), \mathcal{O}')$ be a morphism of ringed topoi. Let $\mathcal{A} \subset \textit{Mod}(\mathcal{O})$ and $\mathcal{A}' \subset \textit{Mod}(\mathcal{O}')$ be weak Serre subcategories. Assume \begin{enumerate} \item $f$ is flat, \item $f^*$ induces an equivalence of categories $\mathcal{A}' \to \mathcal{A}$, \item $\mathcal{F}' \to Rf_*f^*\mathcal{F}'$ is an isomorphism for $\mathcal{F}' \in \Ob(\mathcal{A}')$, \item $\mathcal{C}, \mathcal{O}, \mathcal{A}$ satisfy the assumption of Situation \ref{situation-olsson-laszlo}, \item $\mathcal{C}', \mathcal{O}', \mathcal{A}'$ satisfy the assumption of Situation \ref{situation-olsson-laszlo}. \end{enumerate} Then $f^* : D_{\mathcal{A}'}(\mathcal{O}') \to D_\mathcal{A}(\mathcal{O})$ is an equivalence of categories with quasi-inverse given by $Rf_* : D_\mathcal{A}(\mathcal{O}) \to D_{\mathcal{A}'}(\mathcal{O}')$. \end{lemma} 
\begin{lemma} \label{lemma-equivalence-unbounded-two} \begin{reference} This is analogous to \cite[Theorem 2.2.3]{six-I}. \end{reference} Let $f : (\mathcal{C}, \mathcal{O}) \to (\mathcal{C}', \mathcal{O}')$ be a morphism of ringed sites. Let $\mathcal{A} \subset \textit{Mod}(\mathcal{O})$ and $\mathcal{A}' \subset \textit{Mod}(\mathcal{O}')$ be weak Serre subcategories. Assume \begin{enumerate} \item $f$ is flat, \item $f^*$ induces an equivalence of categories $\mathcal{A}' \to \mathcal{A}$, \item $\mathcal{F}' \to Rf_*f^*\mathcal{F}'$ is an isomorphism for $\mathcal{F}' \in \Ob(\mathcal{A}')$, \item $\mathcal{C}, \mathcal{O}, \mathcal{A}$ satisfy the assumption of Situation \ref{situation-olsson-laszlo}, \item $f : (\mathcal{C}, \mathcal{O}) \to (\mathcal{C}', \mathcal{O}')$ and $\mathcal{A}$ satisfy the assumption of Situation \ref{situation-olsson-laszlo-prime}. \end{enumerate} Then $f^* : D_{\mathcal{A}'}(\mathcal{O}') \to D_\mathcal{A}(\mathcal{O})$ is an equivalence of categories with quasi-inverse given by $Rf_* : D_\mathcal{A}(\mathcal{O}) \to D_{\mathcal{A}'}(\mathcal{O}')$. \end{lemma} 
\begin{lemma} \label{lemma-compare-topologies-derived-adequate-modules} With $\epsilon : (\mathcal{C}_\tau, \mathcal{O}_\tau) \to (\mathcal{C}_{\tau'}, \mathcal{O}_{\tau'})$ as above. Let $\mathcal{B} \subset \Ob(\mathcal{C})$ be a subset. Let $\mathcal{A} \subset \textit{PMod}(\mathcal{O})$ be a full subcategory. Assume \begin{enumerate} \item every object of $\mathcal{A}$ is a sheaf for the $\tau$-topology, \item $\mathcal{A}$ is a weak Serre subcategory of $\textit{Mod}(\mathcal{O}_\tau)$, \item every object of $\mathcal{C}$ has a $\tau'$-covering whose members are elements of $\mathcal{B}$, and \item for every $U \in \mathcal{B}$ we have $H^p_\tau(U, \mathcal{F}) = 0$, $p > 0$ for all $\mathcal{F} \in \mathcal{A}$. \end{enumerate} Then $\mathcal{A}$ is a weak Serre subcategory of $\textit{Mod}(\mathcal{O}_{\tau'})$ and there is an equivalence of triangulated categories $D_\mathcal{A}(\mathcal{O}_\tau) = D_\mathcal{A}(\mathcal{O}_{\tau'})$ given by $\epsilon^*$ and $R\epsilon_*$. \end{lemma} 
\begin{lemma} \label{lemma-descent-squares} With $\epsilon : (\mathcal{C}_\tau, \mathcal{O}_\tau) \to (\mathcal{C}_{\tau'}, \mathcal{O}_{\tau'})$ as above. Let $A$ be a set and for $\alpha \in A$ let $$ \xymatrix{ E_\alpha \ar[d] \ar[r] & Y_\alpha \ar[d] \\ Z_\alpha \ar[r] & X_\alpha } $$ be a commutative diagram in the category $\mathcal{C}$. Assume that \begin{enumerate} \item a $\tau'$-sheaf $\mathcal{F}'$ is a $\tau$-sheaf if $\mathcal{F}'(X_\alpha) = \mathcal{F}'(Z_\alpha) \times_{\mathcal{F}'(E_\alpha)}  \mathcal{F}'(Y_\alpha)$ for all $\alpha$, \item for $K'$ in $D(\mathcal{O}_{\tau'})$ in the essential image of $R\epsilon_*$ the maps $c^{K'}_{X_\alpha, Z_\alpha, Y_\alpha, E_\alpha}$ of Lemma \ref{lemma-c-square} are isomorphisms for all $\alpha$. \end{enumerate} Then $K' \in D^+(\mathcal{O}_{\tau'})$ is in the essential image of $R\epsilon_*$ if and only if the maps $c^{K'}_{X_\alpha, Z_\alpha, Y_\alpha, E_\alpha}$ are isomorphisms for all $\alpha$. \end{lemma} 
\begin{lemma} \label{lemma-descent-squares-helper} With $\epsilon : (\mathcal{C}_\tau, \mathcal{O}_\tau) \to (\mathcal{C}_{\tau'}, \mathcal{O}_{\tau'})$ as above. Let $$ \xymatrix{ E \ar[d] \ar[r] & Y \ar[d] \\ Z \ar[r] & X } $$ be a commutative diagram in the category $\mathcal{C}$ such that \begin{enumerate} \item $h_X^\# = h_Y^\# \amalg_{h_E^\#} h_Z^\#$, and \item $h_E^\# \to h_Y^\#$ is injective \end{enumerate} where ${}^\#$ denotes $\tau$-sheafification. Then for $K' \in D(\mathcal{O}_{\tau'})$ in the essential image of $R\epsilon_*$ the map $c^{K'}_{X, Z, Y, E}$ of Lemma \ref{lemma-c-square} (using the $\tau'$-topology) is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-A} In Situation \ref{situation-compare} for $X$ in $\mathcal{C}$ denote $\mathcal{A}_X$ the objects of $\textit{Ab}(\mathcal{C}_\tau/X)$ of the form $\epsilon_X^{-1}\mathcal{F}'$ with $\mathcal{F}'$ in $\mathcal{A}'_X$. Then \begin{enumerate} \item for $\mathcal{F}$ in $\textit{Ab}(\mathcal{C}_\tau/X)$ we have $\mathcal{F} \in \mathcal{A}_X \Leftrightarrow \epsilon_{X, *}\mathcal{F} \in \mathcal{A}'_X$, and \item $f_\tau^{-1}$ sends $\mathcal{A}_Y$ into $\mathcal{A}_X$ for any morphism $f : X \to Y$ of $\mathcal{C}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-V-implies-C-general} In Situation \ref{situation-compare} assume $(V_n)$ holds. For $f : X \to Y$ in $\mathcal{P}$ and $\mathcal{F}$ in $\mathcal{A}_X$ we have $R^if_{\tau', *}\epsilon_{X, *}\mathcal{F} = \epsilon_{Y, *}R^if_{\tau, *}\mathcal{F}$ for $i \leq n$. \end{lemma} 
\begin{lemma} \label{lemma-V-implies-cohomology-general} In Situation \ref{situation-compare} if $(V_n)$ holds, then for $X$ in $\mathcal{C}$ and $L \in D(\mathcal{C}_{\tau'}/X)$ with $H^i(L) = 0$ for $i < 0$ and $H^i(L)$ in $\mathcal{A}'_X$ for $0 \leq i \leq n$ we have $H^n_{\tau'}(X, L) = H^n_\tau(X, \epsilon_X^{-1}L)$. \end{lemma} 
\begin{lemma} \label{lemma-V-implies-cohomology-extra-general} In Situation \ref{situation-compare} if $(V_n)$ holds, then for $X$ in $\mathcal{C}$ and $\mathcal{F}$ in $\mathcal{A}_X$ the map $H^{n + 1}_{\tau'}(X, \epsilon_{X, *}\mathcal{F}) \to H^{n + 1}_\tau(X, \mathcal{F})$ is injective with image those classes which become trivial on a $\tau'$-covering of $X$. \end{lemma} 
\begin{lemma} \label{lemma-make-class-zero-general} In Situation \ref{situation-compare} let $f : X \to Y$ be in $\mathcal{P}$ such that $\{X \to Y\}$ is a $\tau$-covering. Let $\mathcal{F}'$ be in $\mathcal{A}'_Y$. If $n \geq 0$ and $$ \theta \in \text{Equalizer}\left( \xymatrix{ H^{n + 1}_{\tau'}(X, \mathcal{F}') \ar@<1ex>[r] \ar@<-1ex>[r] & H^{n + 1}_{\tau'}(X \times_Y X, \mathcal{F}') } \right) $$ then there exists a $\tau'$-covering $\{Y_i \to Y\}$ such that $\theta$ restricts to zero in $H^{n + 1}_{\tau'}(Y_i \times_Y X, \mathcal{F}')$. \end{lemma} 
\begin{lemma} \label{lemma-induction-step-V-C-general} In Situation \ref{situation-compare} we have $(V_n) \Rightarrow (V_{n + 1})$. \end{lemma} 
\begin{lemma} \label{lemma-V-C-all-n-general} In Situation \ref{situation-compare} we have that $(V_n)$ is true for all $n$. Moreover: \begin{enumerate} \item For $X$ in $\mathcal{C}$ and $K' \in D^+_{\mathcal{A}'_X}(\mathcal{C}_{\tau'}/X)$ the map $K' \to R\epsilon_{X, *}(\epsilon_X^{-1}K')$ is an isomorphism. \item For $f : X \to Y$ in $\mathcal{P}$ and $K' \in D^+_{\mathcal{A}'_X}(\mathcal{C}_{\tau'}/X)$ we have $Rf_{\tau', *}K' \in D^+_{\mathcal{A}'_X}(\mathcal{C}_{\tau'}/Y)$ and $\epsilon_Y^{-1}(Rf_{\tau', *}K') = Rf_{\tau, *}(\epsilon_X^{-1}K')$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-cohomological-descent-general} In Situation \ref{situation-compare}. For any $X$ in $\mathcal{C}$ the category $\mathcal{A}_X \subset \textit{Ab}(\mathcal{C}_\tau/X)$ is a weak Serre subcategory and the functor $$ R\epsilon_{X, *} : D^+_{\mathcal{A}_X}(\mathcal{C}_\tau/X) \longrightarrow D^+_{\mathcal{A}'_X}(\mathcal{C}_{\tau'}/X) $$ is an equivalence with quasi-inverse given by $\epsilon_X^{-1}$. \end{lemma} 
\begin{lemma} \label{lemma-compare-cohomology-general} In Situation \ref{situation-compare}. Let $X$ be in $\mathcal{C}$. \begin{enumerate} \item for $\mathcal{F}'$ in $\mathcal{A}'_X$ we have $H^n_{\tau'}(X, \mathcal{F}') = H^n_\tau(X, \epsilon_X^{-1}\mathcal{F}')$, \item for $K' \in D^+_{\mathcal{A}'_X}(\mathcal{C}_{\tau'}/X)$ we have $H^n_{\tau'}(X, K') = H^n_\tau(X, \epsilon_X^{-1}K')$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-LC-basic} The category $\textit{LC}$ has fibre products and a final object and hence has arbitrary finite limits. Given morphisms $X \to Z$ and $Y \to Z$ in $\textit{LC}$ with $X$ and $Y$ quasi-compact, then $X \times_Z Y$ is quasi-compact. \end{lemma} 
\begin{definition} \label{definition-covering-LC} Let $\{f_i : X_i \to X\}$ be a family of morphisms with fixed target in the category $\textit{LC}$. We say this family is a {\it qc covering}\footnote{This is nonstandard notation. We chose it to remind the reader of fpqc coverings of schemes.} if for every $x \in X$ there exist $i_1, \ldots, i_n \in I$ and quasi-compact subsets $E_j \subset X_{i_j}$ such that $\bigcup f_{i_j}(E_j)$ is a neighbourhood of $x$. \end{definition} 
\begin{lemma} \label{lemma-qc} Let $X$ be a Hausdorff and locally quasi-compact space, in other words, an object of $\textit{LC}$. \begin{enumerate} \item If $X' \to X$ is an isomorphism in $\textit{LC}$ then $\{X' \to X\}$ is a qc covering. \item If $\{f_i : X_i \to X\}_{i\in I}$ is a qc covering and for each $i$ we have a qc covering $\{g_{ij} : X_{ij} \to X_i\}_{j\in J_i}$, then $\{X_{ij} \to X\}_{i \in I, j\in J_i}$ is a qc covering. \item If $\{X_i \to X\}_{i\in I}$ is a qc covering and $X' \to X$ is a morphism of $\textit{LC}$ then $\{X' \times_X X_i \to X'\}_{i\in I}$ is a qc covering. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-proper-surjective-is-qc-covering} Let $f : X \to Y$ be a morphism of $\textit{LC}$. If $f$ is proper and surjective, then $\{f : X \to Y\}$ is a qc covering. \end{lemma} 
\begin{lemma} \label{lemma-describe-pullback-pi} Let $X$ be an object of $\textit{LC}_{qc}$. Let $\mathcal{F}$ be a sheaf on $X$. The rule $$ \textit{LC}_{qc}/X \longrightarrow \textit{Sets},\quad (f : Y \to X) \longmapsto \Gamma(Y, f^{-1}\mathcal{F}) $$ is a sheaf and a fortiori also a sheaf on $\textit{LC}_{Zar}/X$. This sheaf is equal to $\pi_X^{-1}\mathcal{F}$ on $\textit{LC}_{Zar}/X$ and $\epsilon_X^{-1}\pi_X^{-1}\mathcal{F}$ on $\textit{LC}_{qc}/X$. \end{lemma} 
\begin{lemma} \label{lemma-collect-true-things-Zar} Let $X$ be an object of $\textit{LC}_{Zar}$. Then \begin{enumerate} \item for $\mathcal{F} \in \textit{Ab}(X)$ we have $H^n_{Zar}(X, \pi_X^{-1}\mathcal{F}) = H^n(X, \mathcal{F})$, \item $\pi_{X, *} : \textit{Ab}(\textit{LC}_{Zar}/X) \to \textit{Ab}(X)$ is exact, \item the unit $\text{id} \to \pi_{X, *} \circ \pi_X^{-1}$ of the adjunction is an isomorphism, and \item for $K \in D(X)$ the canonical map $K \to R\pi_{X, *} \pi_X^{-1}K$ is an isomorphism. \end{enumerate} Let $f : X \to Y$ be a morphism of $\textit{LC}_{Zar}$. Then \begin{enumerate} \item[(5)] there is a commutative diagram $$ \xymatrix{ \Sh(\textit{LC}_{Zar}/X) \ar[r]_{f_{Zar}} \ar[d]_{\pi_X} & \Sh(\textit{LC}_{Zar}/Y) \ar[d]^{\pi_Y} \\ \Sh(X_{Zar}) \ar[r]^f & \Sh(Y_{Zar}) } $$ of topoi, \item[(6)] for $L \in D^+(Y)$ we have $H^n_{Zar}(X, \pi_Y^{-1}L) = H^n(X, f^{-1}L)$, \item[(7)] if $f$ is proper, then we have \begin{enumerate} \item $\pi_Y^{-1} \circ f_* = f_{Zar, *} \circ \pi_X^{-1}$ as functors $\Sh(X) \to \Sh(\textit{LC}_{Zar}/Y)$, \item $\pi_Y^{-1} \circ Rf_* = Rf_{Zar, *} \circ \pi_X^{-1}$ as functors $D^+(X) \to D^+(\textit{LC}_{Zar}/Y)$. \end{enumerate} \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-push-pull-LC} Let $f : X \to Y$ be a morphism of $\textit{LC}_{qc}$. Then there are commutative diagrams of topoi $$ \vcenter{ \xymatrix{ \Sh(\textit{LC}_{qc}/X) \ar[r]_{f_{qc}} \ar[d]_{\epsilon_X} & \Sh(\textit{LC}_{qc}/Y) \ar[d]^{\epsilon_Y} \\ \Sh(\textit{LC}_{Zar}/X) \ar[r]^{f_{Zar}} & \Sh(\textit{LC}_{Zar}/Y) } } \quad\text{and}\quad \vcenter{ \xymatrix{ \Sh(\textit{LC}_{qc}/X) \ar[r]_{f_{qc}} \ar[d]_{a_X} & \Sh(\textit{LC}_{qc}/Y) \ar[d]^{a_Y} \\ \Sh(X) \ar[r]^f & \Sh(Y) } } $$ with $a_X = \pi_X \circ \epsilon_X$, $a_Y = \pi_X \circ \epsilon_X$. If $f$ is proper, then $a_Y^{-1} \circ f_* = f_{qc, *} \circ a_X^{-1}$. \end{lemma} 
\begin{lemma} \label{lemma-compare-qc-zar} Consider the comparison morphism $\epsilon : \textit{LC}_{qc} \to \textit{LC}_{Zar}$. Let $\mathcal{P}$ denote the class of proper maps of topological spaces. For $X$ in $\textit{LC}_{Zar}$ denote $\mathcal{A}'_X \subset \textit{Ab}(\textit{LC}_{Zar}/X)$ the full subcategory consisting of sheaves of the form $\pi_X^{-1}\mathcal{F}$ with $\mathcal{F}$ in $\textit{Ab}(X)$. Then (\ref{item-base-change-P}), (\ref{item-restriction-A}), (\ref{item-A-sheaf}), (\ref{item-A-and-P}), and (\ref{item-refine-tau-by-P}) of Situation \ref{situation-compare} hold. \end{lemma} 
\begin{lemma} \label{lemma-V-C-all-n} With notation as above. \begin{enumerate} \item For $X \in \Ob(\textit{LC}_{qc})$ and an abelian sheaf $\mathcal{F}$ on $X$ we have $\epsilon_{X, *}a_X^{-1}\mathcal{F} = \pi_X^{-1}\mathcal{F}$ and $R^i\epsilon_{X, *}(a_X^{-1}\mathcal{F}) = 0$ for $i > 0$. \item For a proper morphism $f : X \to Y$ in $\textit{LC}_{qc}$ and abelian sheaf $\mathcal{F}$ on $X$ we have $a_Y^{-1}(R^if_*\mathcal{F}) = R^if_{qc, *}(a_X^{-1}\mathcal{F})$ for all $i$. \item For $X \in \Ob(\textit{LC}_{qc})$ and $K$ in $D^+(X)$ the map $\pi_X^{-1}K \to R\epsilon_{X, *}(a_X^{-1}K)$ is an isomorphism. \item For a proper morphism $f : X \to Y$ in $\textit{LC}_{qc}$ and $K$ in $D^+(X)$ we have $a_Y^{-1}(Rf_*K) = Rf_{qc, *}(a_X^{-1}K)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-cohomological-descent-LC} Let $X$ be an object of $\textit{LC}_{qc}$. For $K \in D^+(X)$ the map $$ K \longrightarrow Ra_{X, *}a_X^{-1}K $$ is an isomorphism with $a_X : \Sh(\textit{LC}_{qc}/X) \to \Sh(X)$ as above. \end{lemma} 
\begin{lemma} \label{lemma-compare-cohomology-LC} With $X \in \Ob(\textit{LC}_{qc})$ and $a_X : \Sh(\textit{LC}_{qc}/X) \to \Sh(X)$ as above: \begin{enumerate} \item for an abelian sheaf $\mathcal{F}$ on $X$ we have $H^n(X, \mathcal{F}) = H^n_{qc}(X, a_X^{-1}\mathcal{F})$, \item for $K \in D^+(X)$ we have $H^n(X, K) = H^n_{qc}(X, a_X^{-1}K)$. \end{enumerate} For example, if $A$ is an abelian group, then we have $H^n(X, \underline{A}) = H^n_{qc}(X, \underline{A})$. \end{lemma} 
\begin{lemma} \label{lemma-cup-compatible-with-naive} In the situation above the following diagram commutes $$ \xymatrix{ f_*\mathcal{K}^\bullet \otimes_{\mathcal{O}_\mathcal{D}}^\mathbf{L} f_*\mathcal{M}^\bullet \ar[r] \ar[d] & Rf_*\mathcal{K}^\bullet \otimes_{\mathcal{O}_\mathcal{D}}^\mathbf{L} Rf_*\mathcal{M}^\bullet \ar[d]^{\text{Remark \ref{remark-cup-product}}} \\ \text{Tot}( f_*\mathcal{K}^\bullet \otimes_{\mathcal{O}_\mathcal{D}} f_*\mathcal{M}^\bullet) \ar[d]_{\text{naive cup product}} & Rf_*(\mathcal{K}^\bullet \otimes_{\mathcal{O}_\mathcal{C}}^\mathbf{L} \mathcal{M}^\bullet) \ar[d] \\ f_*\text{Tot}(\mathcal{K}^\bullet \otimes_{\mathcal{O}_\mathcal{C}} \mathcal{M}^\bullet) \ar[r] & Rf_*\text{Tot}(\mathcal{K}^\bullet \otimes_{\mathcal{O}_\mathcal{C}} \mathcal{M}^\bullet) } $$ \end{lemma} 
\begin{lemma} \label{lemma-cup-product-associative} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{C}'), \mathcal{O}')$ be a morphism of ringed topoi. The relative cup product of Remark \ref{remark-cup-product} is associative in the sense that the diagram $$ \xymatrix{ Rf_*K \otimes_{\mathcal{O}'}^\mathbf{L} Rf_*L \otimes_{\mathcal{O}'}^\mathbf{L} Rf_*M \ar[r] \ar[d] & Rf_*(K \otimes_\mathcal{O}^\mathbf{L} L) \otimes_{\mathcal{O}'}^\mathbf{L} Rf_*M \ar[d] \\ Rf_*K \otimes_{\mathcal{O}'}^\mathbf{L} Rf_*(L \otimes_\mathcal{O}^\mathbf{L} M) \ar[r] & Rf_*(K \otimes_\mathcal{O}^\mathbf{L}  L \otimes_\mathcal{O}^\mathbf{L} M) } $$ is commutative in $D(\mathcal{O}')$ for all $K, L, M$ in $D(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-cup-product-commutative} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{C}'), \mathcal{O}')$ be a morphism of ringed topoi. The relative cup product of Remark \ref{remark-cup-product} is commutative in the sense that the diagram $$ \xymatrix{ Rf_*K \otimes_{\mathcal{O}'}^\mathbf{L} Rf_*L \ar[r] \ar[d]_\psi & Rf_*(K \otimes_\mathcal{O}^\mathbf{L} L) \ar[d]^{Rf_*\psi} \\ Rf_*L \otimes_{\mathcal{O}'}^\mathbf{L} Rf_*K \ar[r] & Rf_*(L \otimes_\mathcal{O}^\mathbf{L} K) } $$ is commutative in $D(\mathcal{O}')$ for all $K, L$ in $D(\mathcal{O})$. Here $\psi$ is the commutativity constraint on the derived category (Lemma \ref{lemma-symmetric-monoidal-derived}). \end{lemma} 
\begin{lemma} \label{lemma-compose-cup-product} Let $f : (\Sh(\mathcal{C}), \mathcal{O}) \to (\Sh(\mathcal{C}'), \mathcal{O}')$ and $f' : (\Sh(\mathcal{C}'), \mathcal{O}') \to (\Sh(\mathcal{C}''), \mathcal{O}'')$ be morphisms of ringed topoi. The relative cup product of Remark \ref{remark-cup-product} is compatible with compositions in the sense that the diagram $$ \xymatrix{ R(f' \circ f)_*K \otimes_{\mathcal{O}''}^\mathbf{L} R(f' \circ f)_*L \ar@{=}[rr] \ar[d] & & Rf'_*Rf_*K \otimes_{\mathcal{O}''}^\mathbf{L} Rf'_*Rf_*L \ar[d] \\ R(f' \circ f)_*(K \otimes_\mathcal{O}^\mathbf{L} L) \ar@{=}[r] & Rf'_*Rf_*(K \otimes_\mathcal{O}^\mathbf{L} L) & Rf'_*(Rf_*K \otimes_{\mathcal{O}'}^\mathbf{L}  Rf_*L) \ar[l] } $$ is commutative in $D(\mathcal{O}'')$ for all $K, L$ in $D(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-compose} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Given complexes $\mathcal{K}^\bullet, \mathcal{L}^\bullet, \mathcal{M}^\bullet$ of $\mathcal{O}$-modules there is an isomorphism $$ \SheafHom^\bullet(\mathcal{K}^\bullet, \SheafHom^\bullet(\mathcal{L}^\bullet, \mathcal{M}^\bullet)) = \SheafHom^\bullet(\text{Tot}(\mathcal{K}^\bullet \otimes_\mathcal{O} \mathcal{L}^\bullet), \mathcal{M}^\bullet) $$ of complexes of $\mathcal{O}$-modules functorial in $\mathcal{K}^\bullet, \mathcal{L}^\bullet, \mathcal{M}^\bullet$. \end{lemma} 
\begin{lemma} \label{lemma-composition} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Given complexes $\mathcal{K}^\bullet, \mathcal{L}^\bullet, \mathcal{M}^\bullet$ of $\mathcal{O}$-modules there is a canonical morphism $$ \text{Tot}\left( \SheafHom^\bullet(\mathcal{L}^\bullet, \mathcal{M}^\bullet) \otimes_\mathcal{O} \SheafHom^\bullet(\mathcal{K}^\bullet, \mathcal{L}^\bullet) \right) \longrightarrow \SheafHom^\bullet(\mathcal{K}^\bullet, \mathcal{M}^\bullet) $$ of complexes of $\mathcal{O}$-modules. \end{lemma} 
\begin{lemma} \label{lemma-diagonal-better} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Given complexes $\mathcal{K}^\bullet, \mathcal{L}^\bullet, \mathcal{M}^\bullet$ of $\mathcal{O}$-modules there is a canonical morphism $$ \text{Tot}\left( \mathcal{K}^\bullet \otimes_\mathcal{O} \SheafHom^\bullet(\mathcal{M}^\bullet, \mathcal{L}^\bullet) \right) \longrightarrow \SheafHom^\bullet(\mathcal{M}^\bullet, \text{Tot}(\mathcal{K}^\bullet \otimes_\mathcal{O} \mathcal{L}^\bullet)) $$ of complexes of $\mathcal{O}$-modules functorial in all three complexes. \end{lemma} 
\begin{lemma} \label{lemma-diagonal} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Given complexes $\mathcal{K}^\bullet, \mathcal{L}^\bullet, \mathcal{M}^\bullet$ of $\mathcal{O}$-modules there is a canonical morphism $$ \mathcal{K}^\bullet \longrightarrow \SheafHom^\bullet(\mathcal{L}^\bullet, \text{Tot}(\mathcal{K}^\bullet \otimes_\mathcal{O} \mathcal{L}^\bullet)) $$ of complexes of $\mathcal{O}$-modules functorial in both complexes. \end{lemma} 
\begin{lemma} \label{lemma-evaluate-and-more} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Given complexes $\mathcal{K}^\bullet, \mathcal{L}^\bullet, \mathcal{M}^\bullet$ of $\mathcal{O}$-modules there is a canonical morphism $$ \text{Tot}(\SheafHom^\bullet(\mathcal{L}^\bullet, \mathcal{M}^\bullet) \otimes_\mathcal{O} \mathcal{K}^\bullet) \longrightarrow \SheafHom^\bullet(\SheafHom^\bullet(\mathcal{K}^\bullet, \mathcal{L}^\bullet), \mathcal{M}^\bullet) $$ of complexes of $\mathcal{O}$-modules functorial in all three complexes. \end{lemma} 
\begin{lemma} \label{lemma-RHom-into-K-injective} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $L$ and $M$ be objects of $D(\mathcal{O})$. Let $\mathcal{I}^\bullet$ be a K-injective complex of $\mathcal{O}$-modules representing $M$. Let $\mathcal{L}^\bullet$ be a complex of $\mathcal{O}$-modules representing $L$. Then $$ H^0(\Gamma(U, \SheafHom^\bullet(\mathcal{L}^\bullet, \mathcal{I}^\bullet))) = \Hom_{D(\mathcal{O}_U)}(L|_U, M|_U) $$ for all $U \in \Ob(\mathcal{C})$. Similarly, $H^0(\Gamma(\mathcal{C}, \SheafHom^\bullet(\mathcal{L}^\bullet, \mathcal{I}^\bullet))) = \Hom_{D(\mathcal{O})}(L, M)$. \end{lemma} 
\begin{lemma} \label{lemma-RHom-well-defined} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $(\mathcal{I}')^\bullet \to \mathcal{I}^\bullet$ be a quasi-isomorphism of K-injective complexes of $\mathcal{O}$-modules. Let $(\mathcal{L}')^\bullet \to \mathcal{L}^\bullet$ be a quasi-isomorphism of complexes of $\mathcal{O}$-modules. Then $$ \SheafHom^\bullet(\mathcal{L}^\bullet, (\mathcal{I}')^\bullet) \longrightarrow \SheafHom^\bullet((\mathcal{L}')^\bullet, \mathcal{I}^\bullet) $$ is a quasi-isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-RHom-from-K-flat-into-K-injective} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{I}^\bullet$ be a K-injective complex of $\mathcal{O}$-modules. Let $\mathcal{L}^\bullet$ be a K-flat complex of $\mathcal{O}$-modules. Then $\SheafHom^\bullet(\mathcal{L}^\bullet, \mathcal{I}^\bullet)$ is a K-injective complex of $\mathcal{O}$-modules. \end{lemma} 
\begin{lemma} \label{lemma-section-RHom-over-U} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $K, L$ be objects of $D(\mathcal{O})$. For every object $U$ of $\mathcal{C}$ we have $$ H^0(U, R\SheafHom(L, M)) = \Hom_{D(\mathcal{O}_U)}(L|_U, M|_U) $$ and we have $H^0(\mathcal{C}, R\SheafHom(L, M)) = \Hom_{D(\mathcal{O})}(L, M)$. \end{lemma} 
\begin{lemma} \label{lemma-internal-hom} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $K, L, M$ be objects of $D(\mathcal{O})$. With the construction as described above there is a canonical isomorphism $$ R\SheafHom(K, R\SheafHom(L, M)) = R\SheafHom(K \otimes_\mathcal{O}^\mathbf{L} L, M) $$ in $D(\mathcal{O})$ functorial in $K, L, M$ which recovers (\ref{equation-internal-hom}) on taking $H^0(\mathcal{C}, -)$. \end{lemma} 
\begin{lemma} \label{lemma-restriction-RHom-to-U} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $K, L$ be objects of $D(\mathcal{O})$. The construction of $R\SheafHom(K, L)$ commutes with restrictions, i.e., for every object $U$ of $\mathcal{C}$ we have $R\SheafHom(K|_U, L|_U) = R\SheafHom(K, L)|_U$. \end{lemma} 
\begin{lemma} \label{lemma-RHom-triangulated} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. The bifunctor $R\SheafHom(- , -)$ transforms distinguished triangles into distinguished triangles in both variables. \end{lemma} 
\begin{lemma} \label{lemma-internal-hom-evaluate} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $K, L, M$ be objects of $D(\mathcal{O})$. There is a canonical morphism $$ R\SheafHom(L, M) \otimes_\mathcal{O}^\mathbf{L} K \longrightarrow R\SheafHom(R\SheafHom(K, L), M) $$ in $D(\mathcal{O})$ functorial in $K, L, M$. \end{lemma} 
\begin{lemma} \label{lemma-internal-hom-composition} \begin{slogan} Composition on RSheafHom. \end{slogan} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Given $K, L, M$ in $D(\mathcal{O})$ there is a canonical morphism $$ R\SheafHom(L, M) \otimes_\mathcal{O}^\mathbf{L} R\SheafHom(K, L) \longrightarrow R\SheafHom(K, M) $$ in $D(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-internal-hom-diagonal-better} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Given $K, L, M$ in $D(\mathcal{O})$ there is a canonical morphism $$ K \otimes_\mathcal{O}^\mathbf{L} R\SheafHom(M, L) \longrightarrow R\SheafHom(M, K \otimes_\mathcal{O}^\mathbf{L} L) $$ in $D(\mathcal{O})$ functorial in $K, L, M$. \end{lemma} 
\begin{lemma} \label{lemma-internal-hom-diagonal} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Given $K, L$ in $D(\mathcal{O})$ there is a canonical morphism $$ K \longrightarrow R\SheafHom(L, K \otimes_\mathcal{O}^\mathbf{L} L) $$ in $D(\mathcal{O})$ functorial in both $K$ and $L$. \end{lemma} 
\begin{lemma} \label{lemma-dual} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $L$ be an object of $D(\mathcal{O})$. Set $L^\vee = R\SheafHom(L, \mathcal{O})$. For $M$ in $D(\mathcal{O})$ there is a canonical map \begin{equation} \label{equation-eval} M \otimes^\mathbf{L}_\mathcal{O} L^\vee \longrightarrow R\SheafHom(L, M) \end{equation} which induces a canonical map $$ H^0(\mathcal{C}, M \otimes_\mathcal{O}^\mathbf{L} L^\vee) \longrightarrow \Hom_{D(\mathcal{O})}(L, M) $$ functorial in $M$ in $D(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-pullback-injective-pre-limp} Let $u : \mathcal{C} \to \mathcal{D}$ be a continuous and cocontinuous functor of sites. Let $g : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$ be the corresponding morphism of topoi. Let $\mathcal{O}_\mathcal{D}$ be a sheaf of rings and let $\mathcal{I}$ be an injective $\mathcal{O}_\mathcal{D}$-module. Then $H^p(U, g^{-1}\mathcal{I}) = 0$ for all $p > 0$ and $U \in \Ob(\mathcal{C})$. \end{lemma} 
\begin{lemma} \label{lemma-existence-derived-lower-shriek} Let $u : \mathcal{C} \to \mathcal{D}$ be a continuous and cocontinuous functor of sites. Let $g : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$ be the corresponding morphism of topoi. Let $\mathcal{O}_\mathcal{D}$ be a sheaf of rings and set $\mathcal{O}_\mathcal{C} = g^{-1}\mathcal{O}_\mathcal{D}$. The functor $g_! : \textit{Mod}(\mathcal{O}_\mathcal{C}) \to \textit{Mod}(\mathcal{O}_\mathcal{D})$ (see Modules on Sites, Lemma \ref{sites-modules-lemma-lower-shriek-modules}) has a left derived functor $$ Lg_! : D(\mathcal{O}_\mathcal{C}) \longrightarrow D(\mathcal{O}_\mathcal{D}) $$ which is left adjoint to $g^*$. Moreover, for $U \in \Ob(\mathcal{C})$ we have $$ Lg_!(j_{U!}\mathcal{O}_U) = g_!j_{U!}\mathcal{O}_U = j_{u(U)!} \mathcal{O}_{u(U)}. $$ where $j_{U!}$ and $j_{u(U)!}$ are extension by zero associated to the localization morphism $j_U : \mathcal{C}/U \to \mathcal{C}$ and $j_{u(U)} : \mathcal{D}/u(U) \to \mathcal{D}$. \end{lemma} 
\begin{lemma} \label{lemma-pullback-injective-limp} Let $u : \mathcal{C} \to \mathcal{D}$ be a continuous and cocontinuous functor of sites. Let $g : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$ be the corresponding morphism of topoi. Let $\mathcal{O}_\mathcal{D}$ be a sheaf of rings and let $\mathcal{I}$ be an injective $\mathcal{O}_\mathcal{D}$-module. If $g_!^{Sh} : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$ commutes with fibre products\footnote{Holds if $\mathcal{C}$ has finite connected limits and $u$ commutes with them, see Sites, Lemma \ref{sites-lemma-preserve-equalizers}.}, then $g^{-1}\mathcal{I}$ is totally acyclic. \end{lemma} 
\begin{lemma} \label{lemma-pullback-same-cohomology} Let $u : \mathcal{C} \to \mathcal{D}$ be a continuous and cocontinuous functor of sites. Let $g : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$ be the corresponding morphism of topoi. Let $U \in \Ob(\mathcal{C})$. \begin{enumerate} \item For $M$ in $D(\mathcal{D})$ we have $R\Gamma(U, g^{-1}M) = R\Gamma(u(U), M)$. \item If $\mathcal{O}_\mathcal{D}$ is a sheaf of rings and $\mathcal{O}_\mathcal{C} = g^{-1}\mathcal{O}_\mathcal{D}$, then for $M$ in $D(\mathcal{O}_\mathcal{D})$ we have $R\Gamma(U, g^*M) = R\Gamma(u(U), M)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-special-square-cocontinuous} Assume given a commutative diagram $$ \xymatrix{ (\Sh(\mathcal{C}'), \mathcal{O}_{\mathcal{C}'}) \ar[r]_{(g', (g')^\sharp)} \ar[d]_{(f', (f')^\sharp)} & (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \ar[d]^{(f, f^\sharp)} \\ (\Sh(\mathcal{D}'), \mathcal{O}_{\mathcal{D}'}) \ar[r]^{(g, g^\sharp)} & (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D}) } $$ of ringed topoi. Assume \begin{enumerate} \item $f$, $f'$, $g$, and $g'$ correspond to cocontinuous functors $u$, $u'$, $v$, and $v'$ as in Sites, Lemma \ref{sites-lemma-cocontinuous-morphism-topoi}, \item $v \circ u' = u \circ v'$, \item $v$ and $v'$ are continuous as well as cocontinuous, \item for any object $V'$ of $\mathcal{D}'$ the functor ${}^{u'}_{V'}\mathcal{I} \to {}^{\ \ \ u}_{v(V')}\mathcal{I}$ given by $v$ is cofinal, \item $g^{-1}\mathcal{O}_{\mathcal{D}} = \mathcal{O}_{\mathcal{D}'}$ and $(g')^{-1}\mathcal{O}_{\mathcal{C}} = \mathcal{O}_{\mathcal{C}'}$, and \item $g'_! : \textit{Ab}(\mathcal{C}') \to \textit{Ab}(\mathcal{C})$ is exact\footnote{Holds if fibre products and equalizers exist in $\mathcal{C}'$ and $v'$ commutes with them, see Modules on Sites, Lemma \ref{sites-modules-lemma-exactness-lower-shriek}.}. \end{enumerate} Then we have $Rf'_* \circ (g')^* = g^* \circ Rf_*$ as functors $D(\mathcal{O}_\mathcal{C}) \to D(\mathcal{O}_{\mathcal{D}'})$. \end{lemma} 
\begin{lemma} \label{lemma-special-square-continuous} Consider a commutative diagram $$ \xymatrix{ (\Sh(\mathcal{C}'), \mathcal{O}_{\mathcal{C}'} \ar[r]_{(g', (g')^\sharp)} \ar[d]_{(f', (f')^\sharp)} & (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \ar[d]^{(f, f^\sharp)} \\ (\Sh(\mathcal{D}'), \mathcal{O}_{\mathcal{D}'}) \ar[r]^{(g, g^\sharp)} & (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D}) } $$ of ringed topoi and suppose we have functors $$ \xymatrix{ \mathcal{C}' \ar[r]_{v'} & \mathcal{C} \\ \mathcal{D}' \ar[r]^v \ar[u]^{u'} & \mathcal{D} \ar[u]_u } $$ such that (with notation as in Sites, Sections \ref{sites-section-morphism-sites} and \ref{sites-section-cocontinuous-morphism-topoi}) we have \begin{enumerate} \item $u$ and $u'$ are continuous and give rise to the morphisms $f$ and $f'$, \item $v$ and $v'$ are cocontinuous giving rise to the morphisms $g$ and $g'$, \item $u \circ v = v' \circ u'$, \item $v$ and $v'$ are continuous as well as cocontinuous, and \item $g^{-1}\mathcal{O}_{\mathcal{D}} = \mathcal{O}_{\mathcal{D}'}$ and $(g')^{-1}\mathcal{O}_{\mathcal{C}} = \mathcal{O}_{\mathcal{C}'}$. \end{enumerate} Then $Rf'_* \circ (g')^* = g^* \circ Rf_*$ as functors $D^+(\mathcal{O}_\mathcal{C}) \to D^+(\mathcal{O}_{\mathcal{D}'})$. If in addition \begin{enumerate} \item[(6)] $g'_! : \textit{Ab}(\mathcal{C}') \to \textit{Ab}(\mathcal{C})$ is exact\footnote{Holds if fibre products and equalizers exist in $\mathcal{C}'$ and $v'$ commutes with them, see Modules on Sites, Lemma \ref{sites-modules-lemma-exactness-lower-shriek}.}, \end{enumerate} then $Rf'_* \circ (g')^* = g^* \circ Rf_*$ as functors $D(\mathcal{O}_\mathcal{C}) \to D(\mathcal{O}_{\mathcal{D}'})$. \end{lemma} 
\begin{lemma} \label{lemma-fibred-category-with-object} Assumptions and notation as in Situation \ref{situation-fibred-category}. For $U \in \Ob(\mathcal{C})$ consider the induced morphism of topoi $$ \pi_U : \Sh(\mathcal{C}/U) \longrightarrow \Sh(\mathcal{D}/p(U)) $$ Then there exists a morphism of topoi $$ \sigma : \Sh(\mathcal{D}/p(U)) \to \Sh(\mathcal{C}/U) $$ such that $\pi_U \circ \sigma = \text{id}$ and $\sigma^{-1} = \pi_{U, *}$. \end{lemma} 
\begin{lemma} \label{lemma-morphism-fibred-categories-with-object} Assumptions and notation as in Situation \ref{situation-morphism-fibred-categories}. For $U' \in \Ob(\mathcal{C}')$ set $U = u(U')$ and $V = p'(U')$ and consider the induced morphisms of ringed topoi $$ \xymatrix{ (\Sh(\mathcal{C}'/U'), \mathcal{O}_{U'}) \ar[rd]_{\pi'_{U'}} \ar[rr]_{g'} & & (\Sh(\mathcal{C}), \mathcal{O}_U) \ar[ld]^{\pi_U} \\ & (\Sh(\mathcal{D}/V), \mathcal{O}_V) } $$ Then there exists a morphism of topoi $$ \sigma' : \Sh(\mathcal{D}/V) \to \Sh(\mathcal{C}'/U'), $$ such that setting $\sigma = g' \circ \sigma'$ we have $\pi'_{U'} \circ \sigma' = \text{id}$, $\pi_U \circ \sigma = \text{id}$, $(\sigma')^{-1} = \pi'_{U', *}$, and $\sigma^{-1} = \pi_{U, *}$. \end{lemma} 
\begin{lemma} \label{lemma-properties-lower-shriek-fibred-category} Assumption and notation as in Situation \ref{situation-morphism-fibred-categories}. \begin{enumerate} \item There are left adjoints $g_! : \textit{Mod}(\mathcal{O}_{\mathcal{C}'}) \to \textit{Mod}(\mathcal{O}_\mathcal{C})$ and $g_!^{\textit{Ab}} : \textit{Ab}(\mathcal{C}') \to \textit{Ab}(\mathcal{C})$ to $g^* = g^{-1}$ on modules and on abelian sheaves. \item The diagram $$ \xymatrix{ \textit{Mod}(\mathcal{O}_{\mathcal{C}'}) \ar[d] \ar[r]_{g_!} & \textit{Mod}(\mathcal{O}_\mathcal{C}) \ar[d] \\ \textit{Ab}(\mathcal{C}') \ar[r]^{g_!^{\textit{Ab}}} & \textit{Ab}(\mathcal{C}) } $$ commutes. \item There are left adjoints $Lg_! : D(\mathcal{O}_{\mathcal{C}'}) \to D(\mathcal{O}_\mathcal{C})$ and $Lg_!^{\textit{Ab}} : D(\mathcal{C}') \to D(\mathcal{C})$ to $g^* = g^{-1}$ on derived categories of modules and abelian sheaves. \item The diagram $$ \xymatrix{ D(\mathcal{O}_{\mathcal{C}'}) \ar[d] \ar[r]_{Lg_!} & D(\mathcal{O}_\mathcal{C}) \ar[d] \\ D(\mathcal{C}') \ar[r]^{Lg_!^{\textit{Ab}}} & D(\mathcal{C}) } $$ commutes. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-compute-pi-shriek} Assumptions and notation as in Situation \ref{situation-fibred-category}. For $\mathcal{F}$ in $\textit{Ab}(\mathcal{C})$ the sheaf $\pi_!\mathcal{F}$ is the sheaf associated to the presheaf $$ V \longmapsto \colim_{\mathcal{C}_V^{opp}} \mathcal{F}|_{\mathcal{C}_V} $$ with restriction maps as indicated in the proof. \end{lemma} 
\begin{lemma} \label{lemma-initial-final} Notation and assumptions as in Example \ref{example-category-to-point}. If $\mathcal{C}$ has either an initial or a final object, then $L\pi_! \circ \pi^{-1} = \text{id}$ on $D(\textit{Ab})$, resp.\ $D(B)$. \end{lemma} 
\begin{lemma} \label{lemma-change-of-rings} Notation and assumptions as in Example \ref{example-category-to-point}. Let $B \to B'$ be a ring map. Consider the commutative diagram of ringed topoi $$ \xymatrix{ (\Sh(\mathcal{C}), \underline{B}) \ar[d]_\pi & (\Sh(\mathcal{C}), \underline{B'}) \ar[d]^{\pi'} \ar[l]^h \\ (*, B) & (*, B') \ar[l]_f } $$ Then $L\pi_! \circ Lh^* = Lf^* \circ L\pi'_!$. \end{lemma} 
\begin{lemma} \label{lemma-compute-by-cosimplicial-resolution} Notation and assumptions as in Example \ref{example-category-to-point}. Let $U_\bullet$ be a cosimplicial object in $\mathcal{C}$ such that for every $U \in \Ob(\mathcal{C})$ the simplicial set $\Mor_\mathcal{C}(U_\bullet, U)$ is homotopy equivalent to the constant simplicial set on a singleton. Then $$ L\pi_!(\mathcal{F}) = \mathcal{F}(U_\bullet) $$ in $D(\textit{Ab})$, resp.\ $D(B)$ functorially in $\mathcal{F}$ in $\textit{Ab}(\mathcal{C})$, resp.\ $\textit{Mod}(\underline{B})$. \end{lemma} 
\begin{lemma} \label{lemma-get-it-now} Notation and assumptions as in Example \ref{example-morphism-categories}. If there exists a cosimplicial object $U'_\bullet$ of $\mathcal{C}'$ such that Lemma \ref{lemma-compute-by-cosimplicial-resolution} applies to both $U'_\bullet$ in $\mathcal{C}'$ and $u(U'_\bullet)$ in $\mathcal{C}$, then we have $L\pi'_! \circ g^{-1} = L\pi_!$ as functors $D(\mathcal{C}) \to D(\textit{Ab})$, resp.\ $D(\mathcal{C}, \underline{B}) \to D(B)$. \end{lemma} 
\begin{lemma} \label{lemma-product-categories} Let $\mathcal{C}_i$, $i = 1, 2$ be categories. Let $u_i : \mathcal{C}_1 \times \mathcal{C}_2 \to \mathcal{C}_i$ be the projection functors. Let $B$ be a ring. Let $g_i : (\Sh(\mathcal{C}_1 \times \mathcal{C}_2), \underline{B}) \to (\Sh(\mathcal{C}_i), \underline{B})$ be the corresponding morphisms of ringed topoi, see Example \ref{example-morphism-categories}. For $K_i \in D(\mathcal{C}_i, B)$ we have $$ L(\pi_1 \times \pi_2)_!( g_1^{-1}K_1 \otimes_{\underline{B}}^\mathbf{L} g_2^{-1}K_2) = L\pi_{1, !}(K_1) \otimes_B^\mathbf{L} L\pi_{2, !}(K_2) $$ in $D(B)$ with obvious notation. \end{lemma} 
\begin{lemma} \label{lemma-eilenberg-zilber} Notation and assumptions as in Example \ref{example-category-to-point}. If there exists a cosimplicial object $U_\bullet$ of $\mathcal{C}$ such that Lemma \ref{lemma-compute-by-cosimplicial-resolution} applies, then $$ L\pi_!(K_1 \otimes^\mathbf{L}_{\underline{B}} K_2) = L\pi_!(K_1) \otimes^\mathbf{L}_B L\pi_!(K_2) $$ for all $K_i \in D(\underline{B})$. \end{lemma} 
\begin{lemma} \label{lemma-O-homology-qis} Let $\mathcal{C}$ be a category (endowed with chaotic topology). Let $\mathcal{O} \to \mathcal{O}'$ be a map of sheaves of rings on $\mathcal{C}$. Assume \begin{enumerate} \item there exists a cosimplicial object $U_\bullet$ in $\mathcal{C}$ as in Lemma \ref{lemma-compute-by-cosimplicial-resolution}, and \item $L\pi_!\mathcal{O} \to L\pi_!\mathcal{O}'$ is an isomorphism. \end{enumerate} For $K$ in $D(\mathcal{O})$ we have $$ L\pi_!(K) = L\pi_!(K \otimes_\mathcal{O}^\mathbf{L} \mathcal{O}') $$ in $D(\textit{Ab})$. \end{lemma} 
\begin{lemma} \label{lemma-compute-left-derived-pi-shriek-pre} Assumptions and notation as in Situation \ref{situation-fibred-category}. For $\mathcal{F}$ in $\textit{PAb}(\mathcal{C})$ and $n \geq 0$ consider the abelian sheaf $L_n(\mathcal{F})$ on $\mathcal{D}$ which is the sheaf associated to the presheaf $$ V \longmapsto H_n(\mathcal{C}_V, \mathcal{F}|_{\mathcal{C}_V}) $$ with restriction maps as indicated in the proof. Then $L_n(\mathcal{F}) = L_n(\mathcal{F}^\#)$. \end{lemma} 
\begin{lemma} \label{lemma-compute-left-derived-pi-shriek} Assumptions and notation as in Situation \ref{situation-fibred-category}. For $\mathcal{F}$ in $\textit{Ab}(\mathcal{C})$ and $n \geq 0$ the sheaf $L_n\pi_!(\mathcal{F})$ is equal to the sheaf $L_n(\mathcal{F})$ constructed in Lemma \ref{lemma-compute-left-derived-pi-shriek-pre}. \end{lemma} 
\begin{lemma} \label{lemma-compute-left-derived-g-shriek} Assumptions and notation as in Situation \ref{situation-morphism-fibred-categories}. For an abelian sheaf $\mathcal{F}'$ on $\mathcal{C}'$ the sheaf $L_ng_!(\mathcal{F}')$ is the sheaf associated to the presheaf $$ U \longmapsto H_n(\mathcal{I}_U, \mathcal{F}'_U) $$ For notation and restriction maps see proof. \end{lemma} 
\begin{definition} \label{definition-simplicial-module} Let $\mathcal{C}$ be a site. Let $\mathcal{A}_\bullet$ be a simplicial sheaf of rings on $\mathcal{C}$. A {\it simplicial $\mathcal{A}_\bullet$-module} $\mathcal{F}_\bullet$ (sometimes called a {\it simplicial sheaf of $\mathcal{A}_\bullet$-modules}) is a sheaf of modules over the sheaf of rings on $\Delta \times \mathcal{C}$ associated to $\mathcal{A}_\bullet$. \end{definition} 
\begin{lemma} \label{lemma-base-change-by-qis} Let $\mathcal{C}$ be a site. Let $\mathcal{A}_\bullet \to \mathcal{B}_\bullet$ be a homomorphism of simplicial sheaves of rings on $\mathcal{C}$. If $L\pi_!\mathcal{A}_\bullet \to L\pi_!\mathcal{B}_\bullet$ is an isomorphism in $D(\mathcal{C})$, then we have $$ L\pi_!(K) = L\pi_!(K \otimes^\mathbf{L}_{\mathcal{A}_\bullet} \mathcal{B}_\bullet) $$ for all $K$ in $D(\mathcal{A}_\bullet)$. \end{lemma} 
\begin{definition} \label{definition-cartesian} In the situation above, we denote $\mathit{QC}(\mathcal{C}, \mathcal{O})$ or simply {\it $\mathit{QC}(\mathcal{O})$} the full subcategory of $D(\mathcal{O}) = D(\mathcal{C}, \mathcal{O})$ consisting of objects $K$ such that for all $U \to V$ in $\mathcal{C}$ the canonical map $$ R\Gamma(V, K) \otimes_{\mathcal{O}(V)}^\mathbf{L} \mathcal{O}(U) \longrightarrow R\Gamma(U, K) $$ is an isomorphism in $D(\mathcal{O}(U))$. \end{definition} 
\begin{lemma} \label{lemma-cartesian-good-sub} In the situation above, the subcategory $\mathit{QC}(\mathcal{O})$ is a strictly full, saturated, triangulated subcategory of $D(\mathcal{O})$ preserved by arbitrary direct sums. \end{lemma} 
\begin{lemma} \label{lemma-QC-bounded-above} In the situation above, suppose that $M$ is an object of $\mathit{QC}(\mathcal{O})$ and $b \in \mathbf{Z}$ such that $H^i(M) = 0$ for all $i > b$. Then $H^b(M)$ is a quasi-coherent module on $(\mathcal{C}, \mathcal{O})$ in the sense of Modules on Sites, Definition \ref{sites-modules-definition-site-local}. \end{lemma} 
\begin{lemma} \label{lemma-QC-final-object} In the situation above, suppose that $\mathcal{C}$ has a final object $X$. Set $R = \mathcal{O}(X)$ and denote $f : (\mathcal{C}, \mathcal{O}) \to (pt, R)$ the obvious morphism of sites. Then $\mathit{QC}(\mathcal{O}) = D(R)$ given by $Lf^*$ and $Rf_*$. \end{lemma} 
\begin{lemma} \label{lemma-QC-hom-out-of} In the situation above, suppose that $K$ is an object of $\mathit{QC}(\mathcal{O})$ and $M$ arbitrary in $D(\mathcal{O})$. For every object $U$ of $\mathcal{C}$ we have $$ \Hom_{D(\mathcal{O}_U)}(K|_U, M|_U) = R\Hom_{\mathcal{O}(U)}(R\Gamma(U, K), R\Gamma(U, M)) $$ \end{lemma} 
\begin{lemma} \label{lemma-build-from} In the situation above, there exists a cardinal $\kappa$ with the following property: given a complex $\mathcal{F}^\bullet$ of $\mathcal{O}$-modules and subsets $\Omega^i_U \subset \mathcal{F}^i(U)$ there exists a subcomplex $\mathcal{H}^\bullet \subset \mathcal{F}^\bullet$ with $\Omega^i_U \subset \mathcal{H}^i(U)$ and $|\mathcal{H}^\bullet| \leq \max(\kappa, |\bigcup \Omega^i_U|)$. \end{lemma} 
\begin{lemma} \label{lemma-qis-small} In the situation above, there exists a cardinal $\kappa$ with the following property: given a complex $\mathcal{F}^\bullet$ of $\mathcal{O}$-modules representing an object $K$ of $D(\mathcal{O})$ there exists a subcomplex $\mathcal{H}^\bullet \subset \mathcal{F}^\bullet$ such that $\mathcal{H}^\bullet$ represents $K$ and such that $|\mathcal{H}^\bullet| \leq \max(\kappa, |K|)$. \end{lemma} 
\begin{lemma} \label{lemma-cartesian-colimit-kappa} In the situation above, there exists a cardinal $\kappa$ with the following properties: \begin{enumerate} \item for every nonzero object $K$ of $\mathit{QC}(\mathcal{O})$ there exists a nonzero morphism $E \to K$ of $\mathit{QC}(\mathcal{O})$ such that $|E| \leq \kappa$, \item for every morphism $\alpha : E \to \bigoplus_n K_n$ of $\mathit{QC}(\mathcal{O})$ such that $|E| \leq \kappa$, there exist morphisms $E_n \to K_n$ in $\mathit{QC}(\mathcal{O})$ with $|E_n| \leq \kappa$ such that $\alpha$ factors through $\bigoplus E_n \to \bigoplus K_n$. \end{enumerate} \end{lemma} 
\begin{proposition} \label{proposition-cartesian-brown} Let $\mathcal{C}$ be a category viewed as a site with the chaotic topology. Let $\mathcal{O}$ be a sheaf of rings on $\mathcal{C}$. With $\mathit{QC}(\mathcal{O})$ as in Definition \ref{definition-cartesian} we have \begin{enumerate} \item $\mathit{QC}(\mathcal{O})$ is a strictly full, saturated, triangulated subcategory of $D(\mathcal{O})$ preserved by arbitrary direct sums, \item any contravariant cohomological functor $H : \mathit{QC}(\mathcal{O}) \to \textit{Ab}$ which transforms direct sums into products is representable, \item any exact functor $F : \mathit{QC}(\mathcal{O}) \to \mathcal{D}$ of triangulated categories which transforms direct sums into direct sums has an exact right adjoint, and \item the inclusion functor $\mathit{QC}(\mathcal{O}) \to D(\mathcal{O})$ has an exact right adjoint. \end{enumerate} \end{proposition} 
\begin{lemma} \label{lemma-cartesian-functorial} Let $g : (\Sh(\mathcal{C}'), \mathcal{O}') \to (\Sh(\mathcal{C}), \mathcal{O})$ be as above. Then the functor $Lg^* : D(\mathcal{O}) \to D(\mathcal{O}')$ maps $\mathit{QC}(\mathcal{O})$ into $\mathit{QC}(\mathcal{O}')$. \end{lemma} 
\begin{lemma} \label{lemma-cartesian-flat-quasi-coherent} Let $\mathcal{C}$ be a category viewed as a site with the chaotic topology. Let $\mathcal{O}$ be a sheaf of rings on $\mathcal{C}$. Assume for all $U \to V$ in $\mathcal{C}$ the restriction map $\mathcal{O}(V) \to \mathcal{O}(U)$ is a flat ring map. Then $\mathit{QC}(\mathcal{O})$ agrees with the subcategory $D_\QCoh(\mathcal{O}) \subset D(\mathcal{O})$ of complexes whose cohomology sheaves are quasi-coherent. \end{lemma} 
\begin{lemma} \label{lemma-cartesion-plus-topology} Let $\epsilon : (\mathcal{C}_\tau, \mathcal{O}_\tau) \to (\mathcal{C}_{\tau'}, \mathcal{O}_{\tau'})$ be as in Section \ref{section-compare}. Assume \begin{enumerate} \item $\tau'$ is the chaotic topology on the category $\mathcal{C}$, \item for all $U \in \Ob(\mathcal{C})$ and all K-flat complexes of $\mathcal{O}(U)$-modules $M^\bullet$ the map $$ M^\bullet \longrightarrow R\Gamma((\mathcal{C}/U)_\tau, (M^\bullet \otimes_{\mathcal{O}(U)} \mathcal{O}_U)^\#) $$ is a quasi-isomorphism (see proof for an explanation). \end{enumerate} Then $\epsilon^*$ and $R\epsilon_*$ define mutually quasi-inverse equivalences between $\mathit{QC}(\mathcal{O})$ and the full subcategory of $D(\mathcal{C}_\tau, \mathcal{O}_\tau)$ consisting of objects $K$ such that $R\epsilon_*K$ is in $\mathit{QC}(\mathcal{O})$\footnote{This means that $R\Gamma(V, K) \otimes_{\mathcal{O}(V)}^\mathbf{L} \mathcal{O}(U) \to R\Gamma(U, K)$ is an isomorphism for all $U \to V$ in $\mathcal{C}$.}. \end{lemma} 
\begin{lemma} \label{lemma-QC-hom-out-of-plus-topology} Notation and assumptions as in Lemma \ref{lemma-cartesion-plus-topology}. Suppose that $K$ is an object of $\mathit{QC}(\mathcal{O})$ and $M$ arbitrary in $D(\mathcal{O}_\tau)$. For every object $U$ of $\mathcal{C}$ we have $$ \Hom_{D((\mathcal{O}_U)_\tau)}(\epsilon^*K|_U, M|_U) = R\Hom_{\mathcal{O}(U)}(R\Gamma(U, K), R\Gamma(U, M)) $$ \end{lemma} 
\begin{definition} \label{definition-strictly-perfect} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{E}^\bullet$ be a complex of $\mathcal{O}$-modules. We say $\mathcal{E}^\bullet$ is {\it strictly perfect} if $\mathcal{E}^i$ is zero for all but finitely many $i$ and $\mathcal{E}^i$ is a direct summand of a finite free $\mathcal{O}$-module for all $i$. \end{definition} 
\begin{lemma} \label{lemma-cone} The cone on a morphism of strictly perfect complexes is strictly perfect. \end{lemma} 
\begin{lemma} \label{lemma-tensor} The total complex associated to the tensor product of two strictly perfect complexes is strictly perfect. \end{lemma} 
\begin{lemma} \label{lemma-strictly-perfect-pullback} Let $(f, f^\sharp) : (\mathcal{C}, \mathcal{O}_\mathcal{C}) \to (\mathcal{D}, \mathcal{O}_\mathcal{D})$ be a morphism of ringed topoi. If $\mathcal{F}^\bullet$ is a strictly perfect complex of $\mathcal{O}_\mathcal{D}$-modules, then $f^*\mathcal{F}^\bullet$ is a strictly perfect complex of $\mathcal{O}_\mathcal{C}$-modules. \end{lemma} 
\begin{lemma} \label{lemma-local-lift-map} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $U$ be an object of $\mathcal{C}$. Given a solid diagram of $\mathcal{O}_U$-modules $$ \xymatrix{ \mathcal{E} \ar@{..>}[dr] \ar[r] & \mathcal{F} \\ & \mathcal{G} \ar[u]_p } $$ with $\mathcal{E}$ a direct summand of a finite free $\mathcal{O}_U$-module and $p$ surjective, then there exists a covering $\{U_i \to U\}$ such that a dotted arrow making the diagram commute exists over each $U_i$. \end{lemma} 
\begin{lemma} \label{lemma-local-homotopy} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $U$ be an object of $\mathcal{C}$. \begin{enumerate} \item Let $\alpha : \mathcal{E}^\bullet \to \mathcal{F}^\bullet$ be a morphism of complexes of $\mathcal{O}_U$-modules with $\mathcal{E}^\bullet$ strictly perfect and $\mathcal{F}^\bullet$ acyclic. Then there exists a covering $\{U_i \to U\}$ such that each $\alpha|_{U_i}$ is homotopic to zero. \item Let $\alpha : \mathcal{E}^\bullet \to \mathcal{F}^\bullet$ be a morphism of complexes of $\mathcal{O}_U$-modules with $\mathcal{E}^\bullet$ strictly perfect, $\mathcal{E}^i = 0$ for $i < a$, and $H^i(\mathcal{F}^\bullet) = 0$ for $i \geq a$. Then there exists a covering $\{U_i \to U\}$ such that each $\alpha|_{U_i}$ is homotopic to zero. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-lift-through-quasi-isomorphism} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $U$ be an object of $\mathcal{C}$. Given a solid diagram of complexes of $\mathcal{O}_U$-modules $$ \xymatrix{ \mathcal{E}^\bullet \ar@{..>}[dr] \ar[r]_\alpha & \mathcal{F}^\bullet \\ & \mathcal{G}^\bullet \ar[u]_f } $$ with $\mathcal{E}^\bullet$ strictly perfect, $\mathcal{E}^j = 0$ for $j < a$ and $H^j(f)$ an isomorphism for $j > a$ and surjective for $j = a$, then there exists a covering $\{U_i \to U\}$ and for each $i$ a dotted arrow over $U_i$ making the diagram commute up to homotopy. \end{lemma} 
\begin{lemma} \label{lemma-local-actual} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $U$ be an object of $\mathcal{C}$. Let $\mathcal{E}^\bullet$, $\mathcal{F}^\bullet$ be complexes of $\mathcal{O}_U$-modules with $\mathcal{E}^\bullet$ strictly perfect. \begin{enumerate} \item For any element $\alpha \in \Hom_{D(\mathcal{O}_U)}(\mathcal{E}^\bullet, \mathcal{F}^\bullet)$ there exists a covering $\{U_i \to U\}$ such that $\alpha|_{U_i}$ is given by a morphism of complexes $\alpha_i : \mathcal{E}^\bullet|_{U_i} \to \mathcal{F}^\bullet|_{U_i}$. \item Given a morphism of complexes $\alpha : \mathcal{E}^\bullet \to \mathcal{F}^\bullet$ whose image in the group $\Hom_{D(\mathcal{O}_U)}(\mathcal{E}^\bullet, \mathcal{F}^\bullet)$ is zero, there exists a covering $\{U_i \to U\}$ such that $\alpha|_{U_i}$ is homotopic to zero. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-Rhom-strictly-perfect} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{E}^\bullet$, $\mathcal{F}^\bullet$ be complexes of $\mathcal{O}$-modules with $\mathcal{E}^\bullet$ strictly perfect. Then the internal hom $R\SheafHom(\mathcal{E}^\bullet, \mathcal{F}^\bullet)$ is represented by the complex $\mathcal{H}^\bullet$ with terms $$ \mathcal{H}^n = \bigoplus\nolimits_{n = p + q} \SheafHom_\mathcal{O}(\mathcal{E}^{-q}, \mathcal{F}^p) $$ and differential as described in Section \ref{section-internal-hom}. \end{lemma} 
\begin{lemma} \label{lemma-Rhom-complex-of-direct-summands-finite-free} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{E}^\bullet$, $\mathcal{F}^\bullet$ be complexes of $\mathcal{O}$-modules with \begin{enumerate} \item $\mathcal{F}^n = 0$ for $n \ll 0$, \item $\mathcal{E}^n = 0$ for $n \gg 0$, and \item $\mathcal{E}^n$ isomorphic to a direct summand of a finite free $\mathcal{O}$-module. \end{enumerate} Then the internal hom $R\SheafHom(\mathcal{E}^\bullet, \mathcal{F}^\bullet)$ is represented by the complex $\mathcal{H}^\bullet$ with terms $$ \mathcal{H}^n = \bigoplus\nolimits_{n = p + q} \SheafHom_\mathcal{O}(\mathcal{E}^{-q}, \mathcal{F}^p) $$ and differential as described in Section \ref{section-internal-hom}. \end{lemma} 
\begin{definition} \label{definition-pseudo-coherent} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{E}^\bullet$ be a complex of $\mathcal{O}$-modules. Let $m \in \mathbf{Z}$. \begin{enumerate} \item We say $\mathcal{E}^\bullet$ is {\it $m$-pseudo-coherent} if for every object $U$ of $\mathcal{C}$ there exists a covering $\{U_i \to U\}$ and for each $i$ a morphism of complexes $\alpha_i : \mathcal{E}_i^\bullet \to \mathcal{E}^\bullet|_{U_i}$ where $\mathcal{E}_i^\bullet$ is a strictly perfect complex of $\mathcal{O}_{U_i}$-modules and $H^j(\alpha_i)$ is an isomorphism for $j > m$ and $H^m(\alpha_i)$ is surjective. \item We say $\mathcal{E}^\bullet$ is {\it pseudo-coherent} if it is $m$-pseudo-coherent for all $m$. \item We say an object $E$ of $D(\mathcal{O})$ is {\it $m$-pseudo-coherent} (resp.\ {\it pseudo-coherent}) if and only if it can be represented by a $m$-pseudo-coherent (resp.\ pseudo-coherent) complex of $\mathcal{O}$-modules. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-pseudo-coherent-independent-representative} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $E$ be an object of $D(\mathcal{O})$. \begin{enumerate} \item If $\mathcal{C}$ has a final object $X$ and if there exist a covering $\{U_i \to X\}$, strictly perfect complexes $\mathcal{E}_i^\bullet$ of $\mathcal{O}_{U_i}$-modules, and maps $\alpha_i : \mathcal{E}_i^\bullet \to E|_{U_i}$ in $D(\mathcal{O}_{U_i})$ with $H^j(\alpha_i)$ an isomorphism for $j > m$ and $H^m(\alpha_i)$ surjective, then $E$ is $m$-pseudo-coherent. \item If $E$ is $m$-pseudo-coherent, then any complex of $\mathcal{O}$-modules representing $E$ is $m$-pseudo-coherent. \item If for every object $U$ of $\mathcal{C}$ there exists a covering $\{U_i \to U\}$ such that $E|_{U_i}$ is $m$-pseudo-coherent, then $E$ is $m$-pseudo-coherent. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-pseudo-coherent-pullback} Let $(f, f^\sharp) : (\mathcal{C}, \mathcal{O}_\mathcal{C}) \to (\mathcal{D}, \mathcal{O}_\mathcal{D})$ be a morphism of ringed sites. Let $E$ be an object of $D(\mathcal{O}_\mathcal{C})$. If $E$ is $m$-pseudo-coherent, then $Lf^*E$ is $m$-pseudo-coherent. \end{lemma} 
\begin{lemma} \label{lemma-cone-pseudo-coherent} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site and $m \in \mathbf{Z}$. Let $(K, L, M, f, g, h)$ be a distinguished triangle in $D(\mathcal{O})$. \begin{enumerate} \item If $K$ is $(m + 1)$-pseudo-coherent and $L$ is $m$-pseudo-coherent then $M$ is $m$-pseudo-coherent. \item If $K$ and $M$ are $m$-pseudo-coherent, then $L$ is $m$-pseudo-coherent. \item If $L$ is $(m + 1)$-pseudo-coherent and $M$ is $m$-pseudo-coherent, then $K$ is $(m + 1)$-pseudo-coherent. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-tensor-pseudo-coherent} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $K, L$ be objects of $D(\mathcal{O})$. \begin{enumerate} \item If $K$ is $n$-pseudo-coherent and $H^i(K) = 0$ for $i > a$ and $L$ is $m$-pseudo-coherent and $H^j(L) = 0$ for $j > b$, then $K \otimes_\mathcal{O}^\mathbf{L} L$ is $t$-pseudo-coherent with $t = \max(m + a, n + b)$. \item If $K$ and $L$ are pseudo-coherent, then $K \otimes_\mathcal{O}^\mathbf{L} L$ is pseudo-coherent. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-summands-pseudo-coherent} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $m \in \mathbf{Z}$. If $K \oplus L$ is $m$-pseudo-coherent (resp.\ pseudo-coherent) in $D(\mathcal{O})$ so are $K$ and $L$. \end{lemma} 
\begin{lemma} \label{lemma-finite-cohomology} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $K$ be an object of $D(\mathcal{O})$. Let $m \in \mathbf{Z}$. \begin{enumerate} \item If $K$ is $m$-pseudo-coherent and $H^i(K) = 0$ for $i > m$, then $H^m(K)$ is a finite type $\mathcal{O}$-module. \item If $K$ is $m$-pseudo-coherent and $H^i(K) = 0$ for $i > m + 1$, then $H^{m + 1}(K)$ is a finitely presented $\mathcal{O}$-module. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-tor-amplitude} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $E$ be an object of $D(\mathcal{O})$. Let $a, b \in \mathbf{Z}$ with $a \leq b$. \begin{enumerate} \item We say $E$ has {\it tor-amplitude in $[a, b]$} if $H^i(E \otimes_\mathcal{O}^\mathbf{L} \mathcal{F}) = 0$ for all $\mathcal{O}$-modules $\mathcal{F}$ and all $i \not \in [a, b]$. \item We say $E$ has {\it finite tor dimension} if it has tor-amplitude in $[a, b]$ for some $a, b$. \item We say $E$ {\it locally has finite tor dimension} if for any object $U$ of $\mathcal{C}$ there exists a covering $\{U_i \to U\}$ such that $E|_{U_i}$ has finite tor dimension for all $i$. \end{enumerate} An $\mathcal{O}$-module $\mathcal{F}$ has {\it tor dimension $\leq d$} if $\mathcal{F}[0]$ viewed as an object of $D(\mathcal{O})$ has tor-amplitude in $[-d, 0]$. \end{definition} 
\begin{lemma} \label{lemma-last-one-flat} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{E}^\bullet$ be a bounded above complex of flat $\mathcal{O}$-modules with tor-amplitude in $[a, b]$. Then $\Coker(d_{\mathcal{E}^\bullet}^{a - 1})$ is a flat $\mathcal{O}$-module. \end{lemma} 
\begin{lemma} \label{lemma-tor-amplitude} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $E$ be an object of $D(\mathcal{O})$. Let $a, b \in \mathbf{Z}$ with $a \leq b$. The following are equivalent \begin{enumerate} \item $E$ has tor-amplitude in $[a, b]$. \item $E$ is represented by a complex $\mathcal{E}^\bullet$ of flat $\mathcal{O}$-modules with $\mathcal{E}^i = 0$ for $i \not \in [a, b]$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-bounded-below-tor-amplitude} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $E$ be an object of $D(\mathcal{O})$. Let $a \in \mathbf{Z}$. The following are equivalent \begin{enumerate} \item $E$ has tor-amplitude in $[a, \infty]$. \item $E$ can be represented by a K-flat complex $\mathcal{E}^\bullet$ of flat $\mathcal{O}$-modules with $\mathcal{E}^i = 0$ for $i \not \in [a, \infty]$. \end{enumerate} Moreover, we can choose $\mathcal{E}^\bullet$ such that any pullback by a morphism of ringed sites is a K-flat complex with flat terms. \end{lemma} 
\begin{lemma} \label{lemma-tor-amplitude-pullback} Let $(f, f^\sharp) : (\mathcal{C}, \mathcal{O}_\mathcal{C}) \to (\mathcal{D}, \mathcal{O}_\mathcal{D})$ be a morphism of ringed sites. Let $E$ be an object of $D(\mathcal{O}_\mathcal{D})$. If $E$ has tor amplitude in $[a, b]$, then $Lf^*E$ has tor amplitude in $[a, b]$. \end{lemma} 
\begin{lemma} \label{lemma-cone-tor-amplitude} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $(K, L, M, f, g, h)$ be a distinguished triangle in $D(\mathcal{O})$. Let $a, b \in \mathbf{Z}$. \begin{enumerate} \item If $K$ has tor-amplitude in $[a + 1, b + 1]$ and $L$ has tor-amplitude in $[a, b]$ then $M$ has tor-amplitude in $[a, b]$. \item If $K$ and $M$ have tor-amplitude in $[a, b]$, then $L$ has tor-amplitude in $[a, b]$. \item If $L$ has tor-amplitude in $[a + 1, b + 1]$ and $M$ has tor-amplitude in $[a, b]$, then $K$ has tor-amplitude in $[a + 1, b + 1]$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-tensor-tor-amplitude} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $K, L$ be objects of $D(\mathcal{O})$. If $K$ has tor-amplitude in $[a, b]$ and $L$ has tor-amplitude in $[c, d]$ then $K \otimes_\mathcal{O}^\mathbf{L} L$ has tor amplitude in $[a + c, b + d]$. \end{lemma} 
\begin{lemma} \label{lemma-summands-tor-amplitude} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $a, b \in \mathbf{Z}$. For $K$, $L$ objects of $D(\mathcal{O})$ if $K \oplus L$ has tor amplitude in $[a, b]$ so do $K$ and $L$. \end{lemma} 
\begin{lemma} \label{lemma-bounded} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{I} \subset \mathcal{O}$ be a sheaf of ideals. Let $K$ be an object of $D(\mathcal{O})$. \begin{enumerate} \item If $K \otimes_\mathcal{O}^\mathbf{L} \mathcal{O}/\mathcal{I}$ is bounded above, then $K \otimes_\mathcal{O}^\mathbf{L} \mathcal{O}/\mathcal{I}^n$ is uniformly bounded above for all $n$. \item If $K \otimes_\mathcal{O}^\mathbf{L} \mathcal{O}/\mathcal{I}$ as an object of $D(\mathcal{O}/\mathcal{I})$ has tor amplitude in $[a, b]$, then $K \otimes_\mathcal{O}^\mathbf{L} \mathcal{O}/\mathcal{I}^n$ as an object of $D(\mathcal{O}/\mathcal{I}^n)$ has tor amplitude in $[a, b]$ for all $n$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-tor-amplitude-stalk} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $E$ be an object of $D(\mathcal{O})$. Let $a, b \in \mathbf{Z}$. \begin{enumerate} \item If $E$ has tor amplitude in $[a, b]$, then for every point $p$ of the site $\mathcal{C}$ the object $E_p$ of $D(\mathcal{O}_p)$ has tor amplitude in $[a, b]$. \item If $\mathcal{C}$ has enough points, then the converse is true. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-perfect} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{E}^\bullet$ be a complex of $\mathcal{O}$-modules. We say $\mathcal{E}^\bullet$ is {\it perfect} if for every object $U$ of $\mathcal{C}$ there exists a covering $\{U_i \to U\}$ such that for each $i$ there exists a morphism of complexes $\mathcal{E}_i^\bullet \to \mathcal{E}^\bullet|_{U_i}$ which is a quasi-isomorphism with $\mathcal{E}_i^\bullet$ strictly perfect. An object $E$ of $D(\mathcal{O})$ is {\it perfect} if it can be represented by a perfect complex of $\mathcal{O}$-modules. \end{definition} 
\begin{lemma} \label{lemma-perfect-independent-representative} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $E$ be an object of $D(\mathcal{O})$. \begin{enumerate} \item If $\mathcal{C}$ has a final object $X$ and there exist a covering $\{U_i \to X\}$, strictly perfect complexes $\mathcal{E}_i^\bullet$ of $\mathcal{O}_{U_i}$-modules, and isomorphisms  $\alpha_i : \mathcal{E}_i^\bullet \to E|_{U_i}$ in $D(\mathcal{O}_{U_i})$, then $E$ is perfect. \item If $E$ is perfect, then any complex representing $E$ is perfect. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-perfect-precise} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $E$ be an object of $D(\mathcal{O})$. Let $a \leq b$ be integers. If $E$ has tor amplitude in $[a, b]$ and is $(a - 1)$-pseudo-coherent, then $E$ is perfect. \end{lemma} 
\begin{lemma} \label{lemma-perfect} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $E$ be an object of $D(\mathcal{O})$. The following are equivalent \begin{enumerate} \item $E$ is perfect, and \item $E$ is pseudo-coherent and locally has finite tor dimension. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-perfect-pullback} Let $(f, f^\sharp) : (\mathcal{C}, \mathcal{O}_\mathcal{C}) \to (\mathcal{D}, \mathcal{O}_\mathcal{D})$ be a morphism of ringed sites. Let $E$ be an object of $D(\mathcal{O}_\mathcal{D})$. If $E$ is perfect in $D(\mathcal{O}_\mathcal{D})$, then $Lf^*E$ is perfect in $D(\mathcal{O}_\mathcal{C})$. \end{lemma} 
\begin{lemma} \label{lemma-two-out-of-three-perfect} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $(K, L, M, f, g, h)$ be a distinguished triangle in $D(\mathcal{O})$. If two out of three of $K, L, M$ are perfect then the third is also perfect. \end{lemma} 
\begin{lemma} \label{lemma-tensor-perfect} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. If $K, L$ are perfect objects of $D(\mathcal{O})$, then so is $K \otimes_\mathcal{O}^\mathbf{L} L$. \end{lemma} 
\begin{lemma} \label{lemma-summands-perfect} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. If $K \oplus L$ is a perfect object of $D(\mathcal{O})$, then so are $K$ and $L$. \end{lemma} 
\begin{lemma} \label{lemma-symmetric-monoidal-cat-complexes} Let $(\mathcal{C}, \mathcal{O})$ be a ringed space. The category of complexes of $\mathcal{O}$-modules with tensor product defined by $\mathcal{F}^\bullet \otimes \mathcal{G}^\bullet = \text{Tot}(\mathcal{F}^\bullet \otimes_\mathcal{O} \mathcal{G}^\bullet)$ is a symmetric monoidal category. \end{lemma} 
\begin{lemma} \label{lemma-left-dual-complex} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{F}^\bullet$ be a complex of $\mathcal{O}$-modules. If $\mathcal{F}^\bullet$ has a left dual in the monoidal category of complexes of $\mathcal{O}$-modules (Categories, Definition \ref{categories-definition-dual}) then for every object $U$ of $\mathcal{C}$ there exists a covering $\{U_i \to U\}$ such that $\mathcal{F}^\bullet|_{U_i}$ is strictly perfect and the left dual is as constructed in Example \ref{example-dual}. \end{lemma} 
\begin{lemma} \label{lemma-dual-perfect-complex} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $K$ be a perfect object of $D(\mathcal{O})$. Then $K^\vee = R\SheafHom(K, \mathcal{O})$ is a perfect object too and $(K^\vee)^\vee \cong K$. There are functorial isomorphisms $$ M \otimes^\mathbf{L}_\mathcal{O} K^\vee = R\SheafHom_\mathcal{O}(K, M) $$ and $$ H^0(\mathcal{C}, M \otimes^\mathbf{L}_\mathcal{O} K^\vee) = \Hom_{D(\mathcal{O})}(K, M) $$ for $M$ in $D(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-symmetric-monoidal-derived} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. The derived category $D(\mathcal{O})$ is a symmetric monoidal category with tensor product given by derived tensor product with usual associativity and commutativity constraints (for sign rules, see More on Algebra, Section \ref{more-algebra-section-sign-rules}). \end{lemma} 
\begin{lemma} \label{lemma-left-dual-derived} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $M$ be an object of $D(\mathcal{O})$. If $M$ has a left dual in the monoidal category $D(\mathcal{O})$ (Categories, Definition \ref{categories-definition-dual}) then $M$ is perfect and the left dual is as constructed in Example \ref{example-dual-derived}. \end{lemma} 
\begin{lemma} \label{lemma-colim-and-lim-of-duals} \begin{slogan} Trivial duality for systems of perfect objects. \end{slogan} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $(K_n)_{n \in \mathbf{N}}$ be a system of perfect objects of $D(\mathcal{O})$. Let $K = \text{hocolim} K_n$ be the derived colimit (Derived Categories, Definition \ref{derived-definition-derived-colimit}). Then for any object $E$ of $D(\mathcal{O})$ we have $$ R\SheafHom(K, E) = R\lim E \otimes^\mathbf{L}_\mathcal{O} K_n^\vee $$ where $(K_n^\vee)$ is the inverse system of dual perfect complexes. \end{lemma} 
\begin{lemma} \label{lemma-category-summands-finite-free} Let $(\mathcal{C}, \mathcal{O})$ be a ringed space. Set $R = \Gamma(\mathcal{C}, \mathcal{O})$. The category of $\mathcal{O}$-modules which are summands of finite free $\mathcal{O}$-modules is equivalent to the category of finite projective $R$-modules. \end{lemma} 
\begin{lemma} \label{lemma-invertible-derived} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $M$ be an object of $D(\mathcal{O})$. The following are equivalent \begin{enumerate} \item $M$ is invertible in $D(\mathcal{O})$, see Categories, Definition \ref{categories-definition-invertible}, and \item there is a locally finite\footnote{This means that for every object $U$ of $\mathcal{C}$ there is a covering $\{U_i \to U\}$ such that for every $i$ the sheaf $\mathcal{O}_n|_{U_i}$ is nonzero for only a finite number of $n$.} direct product decomposition $$ \mathcal{O} = \prod\nolimits_{n \in \mathbf{Z}} \mathcal{O}_n $$ and for each $n$ there is an invertible $\mathcal{O}_n$-module $\mathcal{H}^n$ (Modules on Sites, Definition \ref{sites-modules-definition-invertible-sheaf}) and $M = \bigoplus \mathcal{H}^n[-n]$ in $D(\mathcal{O})$. \end{enumerate} If (1) and (2) hold, then $M$ is a perfect object of $D(\mathcal{O})$. If $(\mathcal{C}, \mathcal{O})$ is a locally ringed site these condition are also equivalent to \begin{enumerate} \item[(3)] for every object $U$ of $\mathcal{C}$ there exists a covering $\{U_i \to U\}$ and for each $i$ an integer $n_i$ such that $M|_{U_i}$ is represented by an invertible $\mathcal{O}_{U_i}$-module placed in degree $n_i$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-projection-formula} Let $f : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C}) \to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$ be a morphism of ringed topoi. Let $E \in D(\mathcal{O}_\mathcal{C})$ and $K \in D(\mathcal{O}_\mathcal{D})$. If $K$ is perfect, then $$ Rf_*E \otimes^\mathbf{L}_{\mathcal{O}_\mathcal{D}} K = Rf_*(E \otimes^\mathbf{L}_{\mathcal{O}_\mathcal{C}} Lf^*K) $$ in $D(\mathcal{O}_\mathcal{D})$. \end{lemma} 
\begin{lemma} \label{lemma-w-contractible} Let $\mathcal{C}$ be a site. Let $U$ be a weakly contractible object of $\mathcal{C}$. Then \begin{enumerate} \item the functor $\mathcal{F} \mapsto \mathcal{F}(U)$ is an exact functor $\textit{Ab}(\mathcal{C}) \to \textit{Ab}$, \item $H^p(U, \mathcal{F}) = 0$ for every abelian sheaf $\mathcal{F}$ and all $p \geq 1$, and \item for any sheaf of groups $\mathcal{G}$ any $\mathcal{G}$-torsor has a section over $U$. \end{enumerate} \end{lemma} 
\begin{proposition} \label{proposition-enough-weakly-contractibles} Let $\mathcal{C}$ be a site. Let $\mathcal{B} \subset \Ob(\mathcal{C})$ such that every $U \in \mathcal{B}$ is weakly contractible and every object of $\mathcal{C}$ has a covering by elements of $\mathcal{B}$. Let $\mathcal{O}$ be a sheaf of rings on $\mathcal{C}$. Then \begin{enumerate} \item A complex $\mathcal{F}_1 \to \mathcal{F}_2 \to \mathcal{F}_3$ of $\mathcal{O}$-modules is exact, if and only if $\mathcal{F}_1(U) \to \mathcal{F}_2(U) \to \mathcal{F}_3(U)$ is exact for all $U \in \mathcal{B}$. \item Every object $K$ of $D(\mathcal{O})$ is a derived limit of its canonical truncations: $K = R\lim \tau_{\geq -n} K$. \item Given an inverse system $\ldots \to \mathcal{F}_3 \to \mathcal{F}_2 \to \mathcal{F}_1$ with surjective transition maps, the projection $\lim \mathcal{F}_n \to \mathcal{F}_1$ is surjective. \item Products are exact on $\textit{Mod}(\mathcal{O})$. \item Products on $D(\mathcal{O})$ can be computed by taking products of any representative complexes. \item If $(\mathcal{F}_n)$ is an inverse system of $\mathcal{O}$-modules, then $R^p\lim \mathcal{F}_n = 0$ for all $p > 1$ and $$ R^1\lim \mathcal{F}_n  = \Coker(\prod \mathcal{F}_n \to \prod \mathcal{F}_n) $$ where the map is $(x_n) \mapsto (x_n - f(x_{n + 1}))$. \item If $(K_n)$ is an inverse system of objects of $D(\mathcal{O})$, then there are short exact sequences $$ 0 \to R^1\lim H^{p - 1}(K_n) \to H^p(R\lim K_n) \to \lim H^p(K_n) \to 0 $$ \end{enumerate} \end{proposition} 
\begin{lemma} \label{lemma-compact-in-terms-of-generators} Let $\mathcal{A}$ be a Grothendieck abelian category. Let $S \subset \Ob(\mathcal{A})$ be a set of objects such that \begin{enumerate} \item any object of $\mathcal{A}$ is a quotient of a direct sum of elements of $S$, and \item for any $E \in S$ the functor $\Hom_\mathcal{A}(E, -)$ commutes with direct sums. \end{enumerate} Then every compact object of $D(\mathcal{A})$ is a direct summand in $D(\mathcal{A})$ of a finite complex of finite direct sums of elements of $S$. \end{lemma} 
\begin{lemma} \label{lemma-compact-objects-if-enough-qc} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Assume every object of $\mathcal{C}$ has a covering by quasi-compact objects. Then every compact object of $D(\mathcal{O})$ is a direct summand in $D(\mathcal{O})$ of a finite complex whose terms are finite direct sums of $\mathcal{O}$-modules of the form $j_!\mathcal{O}_U$ where $U$ is a quasi-compact object of $\mathcal{C}$. \end{lemma} 
\begin{lemma} \label{lemma-when-jshriek-lower-compact} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $U$ be an object of $\mathcal{C}$. Assume the functors $\mathcal{F} \mapsto H^p(U, \mathcal{F})$ commute with direct sums. Then $\mathcal{O}$-module $j_!\mathcal{O}_U$ is a compact object of $D^+(\mathcal{O})$ in the following sense: if $M = \bigoplus_{i \in I} M_i$ in $D(\mathcal{O})$ is bounded below, then $\Hom(j_{U!}\mathcal{O}_U, M) = \bigoplus_{i \in I} \Hom(j_{U!}\mathcal{O}_U, M_i)$. \end{lemma} 
\begin{lemma} \label{lemma-when-jshriek-lower-compact-worked-out} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site with set of coverings $\text{Cov}_\mathcal{C}$. Let $\mathcal{B} \subset \Ob(\mathcal{C})$, and $\text{Cov} \subset \text{Cov}_\mathcal{C}$ be subsets. Assume that \begin{enumerate} \item For every $\mathcal{U} \in \text{Cov}$ we have $\mathcal{U} = \{U_i \to U\}_{i \in I}$ with $I$ finite, $U, U_i \in \mathcal{B}$ and every $U_{i_0} \times_U \ldots \times_U U_{i_p} \in \mathcal{B}$. \item For every $U \in \mathcal{B}$ the coverings of $U$ occurring in $\text{Cov}$ is a cofinal system of coverings of $U$. \end{enumerate} Then for $U \in \mathcal{B}$ the object $j_{U!}\mathcal{O}_U$ is a compact object of $D^+(\mathcal{O})$ in the following sense: if $M = \bigoplus_{i \in I} M_i$ in $D(\mathcal{O})$ is bounded below, then $\Hom(j_{U!}\mathcal{O}_U, M) = \bigoplus_{i \in I} \Hom(j_{U!}\mathcal{O}_U, M_i)$. \end{lemma} 
\begin{lemma} \label{lemma-when-jshriek-compact} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $U$ be an object of $\mathcal{C}$. The $\mathcal{O}$-module $j_!\mathcal{O}_U$ is a compact object of $D(\mathcal{O})$ if there exists an integer $d$ such that \begin{enumerate} \item $H^p(U, \mathcal{F}) = 0$ for all $p > d$, and \item the functors $\mathcal{F} \mapsto H^p(U, \mathcal{F})$ commute with direct sums. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-quasi-compact-weakly-contractible-compact} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $U$ be an object of $\mathcal{C}$ which is quasi-compact and weakly contractible. Then $j_!\mathcal{O}_U$ is a compact object of $D(\mathcal{O})$. \end{lemma} 
\begin{lemma} \label{lemma-perfect-is-compact} Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Assume $\mathcal{C}$ has the following properties \begin{enumerate} \item $\mathcal{C}$ has a quasi-compact final object $X$, \item every quasi-compact object of $\mathcal{C}$ has a cofinal system of coverings which are finite and consist of quasi-compact objects, \item for a finite covering $\{U_i \to U\}_{i \in I}$ with $U$, $U_i$ quasi-compact the fibre products $U_i \times_U U_j$ are quasi-compact. \end{enumerate} Let $K$ be a perfect object of $D(\mathcal{O})$. Then \begin{enumerate} \item[(a)] $K$ is a compact object of $D^+(\mathcal{O})$ in the following sense: if $M = \bigoplus_{i \in I} M_i$ is bounded below, then $\Hom(K, M) = \bigoplus_{i \in I} \Hom(K, M_i)$. \item[(b)] If $(\mathcal{C}, \mathcal{O})$ has finite cohomological dimension, i.e., if there exists a $d$ such that $H^i(X, \mathcal{F}) = 0$ for $i > d$ for any $\mathcal{O}$-module $\mathcal{F}$, then $K$ is a compact object of $D(\mathcal{O})$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-locally-constant} Let $\mathcal{C}$ be a site with final object $X$. Let $\Lambda$ be a Noetherian ring. Let $K \in D^b(\mathcal{C}, \Lambda)$ with $H^i(K)$ locally constant sheaves of $\Lambda$-modules of finite type. Then there exists a covering $\{U_i \to X\}$ such that each $K|_{U_i}$ is represented by a complex of locally constant sheaves of $\Lambda$-modules of finite type. \end{lemma} 
\begin{lemma} \label{lemma-map-out-of-locally-constant} Let $\mathcal{C}$ be a site with final object $X$. Let $\Lambda$ be a ring. Let \begin{enumerate} \item $K$ a perfect object of $D(\Lambda)$, \item a finite complex $K^\bullet$ of finite projective $\Lambda$-modules representing $K$, \item $\mathcal{L}^\bullet$ a complex of sheaves of $\Lambda$-modules, and \item $\varphi : \underline{K} \to \mathcal{L}^\bullet$ a map in $D(\mathcal{C}, \Lambda)$. \end{enumerate} Then there exists a covering $\{U_i \to X\}$ and maps of complexes $\alpha_i : \underline{K}^\bullet|_{U_i} \to \mathcal{L}^\bullet|_{U_i}$ representing $\varphi|_{U_i}$. \end{lemma} 
\begin{lemma} \label{lemma-locally-constant-map} Let $\mathcal{C}$ be a site with final object $X$. Let $\Lambda$ be a ring. Let $K, L$ be objects of $D(\Lambda)$ with $K$ perfect. Let $\varphi : \underline{K} \to \underline{L}$ be map in $D(\mathcal{C}, \Lambda)$. There exists a covering $\{U_i \to X\}$ such that $\varphi|_{U_i}$ is equal to $\underline{\alpha_i}$ for some map $\alpha_i : K \to L$ in $D(\Lambda)$. \end{lemma} 
\begin{lemma} \label{lemma-locally-constant-tensor-product} Let $\mathcal{C}$ be a site. Let $\Lambda$ be a Noetherian ring. Let $K, L \in D^-(\mathcal{C}, \Lambda)$. If the cohomology sheaves of $K$ and $L$ are locally constant sheaves of $\Lambda$-modules of finite type, then the cohomology sheaves of $K \otimes_\Lambda^\mathbf{L} L$ are locally constant sheaves of $\Lambda$-modules of finite type. \end{lemma} 
\begin{lemma} \label{lemma-locally-constant-bounded} Let $\mathcal{C}$ be a site. Let $\Lambda$ be a Noetherian ring. Let $I \subset \Lambda$ be an ideal. Let $K \in D^-(\mathcal{C}, \Lambda)$. If the cohomology sheaves of $K \otimes_\Lambda^\mathbf{L} \underline{\Lambda/I}$ are locally constant sheaves of $\Lambda/I$-modules of finite type, then the cohomology sheaves of $K \otimes_\Lambda^\mathbf{L} \underline{\Lambda/I^n}$ are locally constant sheaves of $\Lambda/I^n$-modules of finite type for all $n \geq 1$. \end{lemma} 
