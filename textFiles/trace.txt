\begin{lemma} \label{lemma-baffling} Let $X$ be a scheme and $g : X \to X$ a morphism. Assume that for all $\varphi : U \to X$ \'etale, there is an isomorphism $$ \xymatrix{ U \ar[rd]_\varphi \ar[rr]^-\sim & & {U \times_{\varphi, X, g} X} \ar[ld]^{\text{pr}_2} \\ & X } $$ functorial in $U$. Then $g$ induces the identity on cohomology (for any sheaf). \end{lemma} 
\begin{theorem}[The Baffling Theorem] \label{theorem-baffling} Let $X$ be a scheme in characteristic $p > 0$. Then the absolute frobenius induces (by pullback) the trivial map on cohomology, i.e., for all integers $j\geq 0$, $$ F_X^* : H^j (X, \underline{\mathbf{Z}/n\mathbf{Z}}) \longrightarrow H^j (X, \underline{\mathbf{Z}/n\mathbf{Z}}) $$ is the identity. \end{theorem} 
\begin{definition} \label{definition-geometric-frobenius} Let $k$ be a finite field with $q = p^f$ elements. Let $X$ be a scheme over $k$. The {\it geometric frobenius} of $X$ is the morphism $\pi_X : X \to X$ over $\Spec(k)$ which equals $F_X^f$. \end{definition} 
\begin{lemma} \label{lemma-sheaf-over-finite-field-has-frobenius-descent} Let $\mathcal{F}$ be a sheaf on $X_\etale$. Then there are canonical isomorphisms $\pi_X^{-1} \mathcal{F} \cong \mathcal{F}$ and $\mathcal{F} \cong {\pi_X}_*\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-two-actions-agree} In the situation above denote $\alpha : X \to \Spec(k)$ the structure morphism. Consider the stalk $(R^j\alpha_*\mathcal{F})_{\Spec(\bar k)}$ endowed with its natural Galois action as in \'Etale Cohomology, Section \ref{etale-cohomology-section-galois-action-stalks}. Then the identification $$ (R^j\alpha_*\mathcal{F})_{\Spec(\bar k)} \cong H^j (X_{\bar k}, \mathcal{F}|_{X_{\bar k}}) $$ from \'Etale Cohomology, Theorem \ref{etale-cohomology-theorem-higher-direct-images} is an isomorphism of $G_k$-modules. \end{lemma} 
\begin{definition} \label{definition-arithmetic-frobenius} The {\it arithmetic frobenius} is the map $\text{frob}_k : \bar k \to \bar k$, $x \mapsto x^q$ of $G_k$. \end{definition} 
\begin{theorem} \label{theorem-geometric-arithmetic-inverse} Let $\mathcal{F}$ be an abelian sheaf on $X_\etale$. Then for all $j\geq 0$, $\text{frob}_k$ acts on the cohomology group $H^j(X_{\bar k}, \mathcal{F}|_{X_{\bar k}})$ as the inverse of the map $\pi_X^*$. \end{theorem} 
\begin{definition} \label{definition-geometric-frobenius-on-stalk} If $x \in X(k)$ is a rational point and $\bar x : \Spec(\bar k) \to X$ the geometric point lying over $x$, we let $\pi_x : \mathcal{F}_{\bar x} \to \mathcal{F}_{\bar x}$ denote the action by $\text{frob}_k^{-1}$ and call it the {\it geometric frobenius}\footnote{This notation is not standard. This operator is denoted $F_x$ in \cite{SGA4.5}. We will likely change this notation in the future.} \end{definition} 
\begin{definition} \label{definition-trace} The {\it trace} of the endomorphism $a$ is the sum of the diagonal entries of a matrix representing it. This defines an additive map $\text{Tr} : \text{End}_\Lambda(\Lambda^{\oplus m}) \to \Lambda^\natural$. \end{definition} 
\begin{lemma} \label{lemma-when-in-bounded} An object $E$ of $D(\mathcal{A})$ is contained in $D^+(\mathcal{A})$ if and only if $H^i(E) =0 $ for all $i \ll 0$. Similar statements hold for $D^-$ and $D^b$. \end{lemma} 
\begin{lemma} \label{lemma-derived-categories} Morphisms between objects in the derived category. \begin{enumerate} \item Let $I^\bullet \in \text{Comp}^+(\mathcal{A})$ with $I^n$ injective for all $n \in \mathbf{Z}$. Then $$ \Hom_{D(\mathcal{A})}(K^\bullet, I^\bullet) = \Hom_{K(\mathcal{A})}(K^\bullet, I^\bullet). $$ \item Let $P^\bullet \in \text{Comp}^-(\mathcal{A})$ with $P^n$ is projective for all $n \in \mathbf{Z}$. Then $$ \Hom_{D(\mathcal{A})}(P^\bullet, K^\bullet) = \Hom_{K(\mathcal{A})}(P^\bullet, K^\bullet). $$ \item If $\mathcal{A}$ has enough injectives and $\mathcal{I} \subset \mathcal{A}$ is the additive subcategory of injectives, then $ D^+(\mathcal{A})\cong K^+(\mathcal{I}) $ (as triangulated categories). \item If $\mathcal{A}$ has enough projectives and $\mathcal{P} \subset \mathcal{A}$ is the additive subcategory of projectives, then $ D^-(\mathcal{A}) \cong K^-(\mathcal{P}). $ \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-derived-functor} Let $F: \mathcal{A} \to \mathcal{B}$ be a left exact functor and assume that $\mathcal{A}$ has enough injectives. We define the {\it total right derived functor of $F$} as the functor $RF: D^+(\mathcal{A}) \to D^+(\mathcal{B})$ fitting into the diagram $$ \xymatrix{ D^+(\mathcal{A}) \ar[r]^{RF} & D^+(\mathcal{B}) \\ K^+(\mathcal I) \ar[u] \ar[r]^F & K^+(\mathcal{B}). \ar[u] } $$ This is possible since the left vertical arrow is invertible by the previous lemma. Similarly, let $G: \mathcal{A} \to \mathcal{B}$ be a right exact functor and assume that $\mathcal{A}$ has enough projectives. We define the {\it total left derived functor of $G$} as the functor $LG: D^-(\mathcal{A}) \to D^-(\mathcal{B})$ fitting into the diagram $$ \xymatrix{ D^-(\mathcal{A}) \ar[r]^{LG} & D^-(\mathcal{B}) \\ K^-(\mathcal{P}) \ar[u] \ar[r]^G & K^-(\mathcal{B}). \ar[u] } $$ This is possible since the left vertical arrow is invertible by the previous lemma. \end{definition} 
\begin{definition} \label{definition-filtered} Let $\mathcal{A}$ be an abelian category. \begin{enumerate} \item Let $\text{Fil}(\mathcal{A})$ be the category of filtered objects $(A, F)$ of $\mathcal{A}$, where $F$ is a filtration of the form $$ A \supset \ldots \supset F^n A \supset F^{n+1}A \supset \ldots \supset 0. $$ This is an additive category. \item We denote $\text{Fil}^f(\mathcal{A})$ the full subcategory of $\text{Fil}(\mathcal{A})$ whose objects $(A, F)$ have finite filtration. This is also an additive category. \item An object $I \in \text{Fil}^f(\mathcal{A})$ is called {\it filtered injective} (respectively {\it projective}) provided that $\text{gr}^p(I) = \text{gr}_F^p(I) = F^pI/F^{p+1}I$ is injective (resp. projective) in $\mathcal{A}$ for all $p$. \item The category of complexes $\text{Comp}(\text{Fil}^f(\mathcal{A})) \supset \text{Comp}^+(\text{Fil}^f(\mathcal{A}))$ and its homotopy category $K(\text{Fil}^f(\mathcal{A})) \supset K^+(\text{Fil}^f(\mathcal A))$ are defined as before. \item A morphism $\alpha : K^\bullet \to L^\bullet$ of complexes in $\text{Comp}(\text{Fil}^f(\mathcal{A}))$ is called a {\it filtered quasi-isomorphism} provided that $$ \text{gr}^p(\alpha): \text{gr}^p(K^\bullet) \to \text{gr}^p(L^\bullet) $$ is a quasi-isomorphism for all $p \in \mathbf{Z}$. \item We define $DF(\mathcal{A})$ (resp. $DF^+(\mathcal{A})$) by inverting the filtered quasi-isomorphisms in $K(\text{Fil}^f(\mathcal{A}))$ (resp. $K^+(\text{Fil}^f(\mathcal{A}))$). \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-filtered-derived-category} If $\mathcal{A}$ has enough injectives, then $DF^+(\mathcal{A}) \cong K^+(\mathcal{I})$, where $\mathcal{I}$ is the full additive subcategory of $\text{Fil}^f(\mathcal{A})$ consisting of filtered injective objects. Similarly, if $\mathcal{A}$ has enough projectives, then $DF^-(\mathcal{A}) \cong K^-(\mathcal{P})$, where $\mathcal P$ is the full additive subcategory of $\text{Fil}^f(\mathcal{A})$ consisting of filtered projective objects. \end{lemma} 
\begin{definition} \label{definition-filtered-derived-functors} Let $T: \mathcal{A} \to \mathcal{B}$ be a left exact functor and assume that $\mathcal{A}$ has enough injectives. Define $RT: DF^+(\mathcal{A}) \to D F^+(\mathcal{B})$ to fit in the diagram $$ \xymatrix{ DF^+(\mathcal{A}) \ar[r]^{RT} & DF^+(\mathcal{B}) \\ K^+(\mathcal{I}) \ar[u] \ar[r]^{T \quad} & K^+(\text{Fil}^f(\mathcal{B})). \ar[u]} $$ This is well-defined by the previous lemma. Let $G: \mathcal{A} \to \mathcal{B}$ be a right exact functor and assume that $\mathcal{A}$ has enough projectives. Define $LG: DF^-(\mathcal{A}) \to DF^-(\mathcal{B})$ to fit in the diagram $$ \xymatrix{ DF^-(\mathcal{A}) \ar[r]^{LG} & DF^-(\mathcal{B}) \\ K^-(\mathcal{P}) \ar[u] \ar[r]^{G \quad} & K^-(\text{Fil}^f(\mathcal{B})). \ar[u]} $$ Again, this is well-defined by the previous lemma. The functors $RT$, resp.\ $LG$, are called the {\it filtered derived functor} of $T$, resp.\ $G$. \end{definition} 
\begin{proposition} \label{proposition-compare-filtered-graded} In the situation above, we have $$ \text{gr}^p \circ RT = RT \circ \text{gr}^p $$ where the $RT$ on the left is the filtered derived functor while the one on the right is the total derived functor. That is, there is a commuting diagram $$ \xymatrix{ DF^+(\mathcal{A}) \ar[r]^{RT} \ar[d]_{\text{gr}^p} & DF^+(\mathcal{B}) \ar[d]^{\text{gr}^p}\\ D^+(\mathcal{A}) \ar[r]^{RT} & D^+(\mathcal{B}).} $$ \end{proposition} 
\begin{definition} \label{definition-perfect} We denote by $K_{perf}(\Lambda)$ the category whose objects are bounded complexes of finite projective $\Lambda$-modules, and whose morphisms are morphisms of complexes up to homotopy. The functor $K_{perf}(\Lambda)\to D(\Lambda)$ is fully faithful (Derived Categories, Lemma \ref{derived-lemma-morphisms-from-projective-complex}). Denote $D_{perf}(\Lambda)$ its essential image. An object of $D(\Lambda)$ is called {\it perfect} if it is in $D_{perf}(\Lambda)$. \end{definition} 
\begin{proposition} \label{proposition-trace-well-defined} Let $K\in D_{perf}(\Lambda)$ and $f\in \text{End}_{D(\Lambda)}(K)$. Then the trace $\text{Tr}(f)\in \Lambda^\natural$ is well defined. \end{proposition} 
\begin{lemma}[Additivity] \label{lemma-additivity} Let $K\in DF_{\text{perf}}(\Lambda)$ and $f\in \text{End}_{DF}(K)$. Then $$ \text{Tr}(f|_K) = \sum\nolimits_{p\in \mathbf{Z}} \text{Tr}(f|_{\text{gr}^p K}). $$ \end{lemma} 
\begin{lemma} \label{lemma-additive-filtered-finite-projective} Let $P \in \text{Fil}^f(\text{Mod}_\Lambda)$ be filtered finite projective, and $f : P \to P$ an endomorphism in $\text{Fil}^f(\text{Mod}_\Lambda)$. Then $$ \text{Tr}(f|_P) = \sum\nolimits_p \text{Tr}(f|_{\text{gr}^p(P)}). $$ \end{lemma} 
\begin{definition} \label{definition-finite-tor-dimension} Let $\Lambda$ be a (possibly noncommutative) ring. An object $K\in D(\Lambda)$ has {\it finite $\text{Tor}$-dimension} if there exist $a, b \in \mathbf{Z}$ such that for any right $\Lambda$-module $N$, we have $H^i(N \otimes_{\Lambda}^\mathbf{L} K) = 0$ for all $i \not \in [a, b]$. \end{definition} 
\begin{lemma} \label{lemma-characterize-perfect} Let $\Lambda$ be a left Noetherian ring and $K\in D(\Lambda)$. Then $K$ is perfect if and only if the two following conditions hold: \begin{enumerate} \item $K$ has finite $\text{Tor}$-dimension, and \item for all $i \in \mathbf{Z}$, $H^i(K)$ is a finite $\Lambda$-module. \end{enumerate} \end{lemma} 
\begin{proposition} \label{proposition-projective-curve-constructible-cohomology} Let $X$ be a projective curve over a field $k$, $\Lambda$ a finite ring and $K\in D_{ctf}(X, \Lambda)$. Then $R\Gamma(X_{\bar k}, K)\in D_{perf}(\Lambda)$. \end{proposition} 
\begin{definition} \label{definition-global-lefschetz-number} Let $\Lambda$ be a finite ring, $X$ a projective curve over a finite field $k$ and $K \in D_{ctf}(X, \Lambda)$ (for instance $K = \underline\Lambda$). There is a canonical map $c_K : \pi_X^{-1}K \to K$, and its base change $c_K|_{X_{\bar k}}$ induces an action denoted $\pi_X^*$ on the perfect complex $R\Gamma(X_{\bar k}, K|_{X_{\bar k}})$. The {\it global Lefschetz number} of $K$ is the trace $\text{Tr}(\pi_X^* |_{R\Gamma(X_{\bar k}, K)})$ of that action. It is an element of $\Lambda^\natural$. \end{definition} 
\begin{definition} \label{definition-local-lefschetz-number} With $\Lambda, X, k, K$ as in Definition \ref{definition-global-lefschetz-number}. Since $K\in D_{ctf}(X, \Lambda)$, for any geometric point $\bar x$ of $X$, the complex $K_{\bar x}$ is a perfect complex (in $D_{perf}(\Lambda)$). As we have seen in Section \ref{section-frobenii}, the Frobenius $\pi_X$ acts on $K_{\bar x}$. The {\it local Lefschetz number} of $K$ is the sum $$ \sum\nolimits_{x\in X(k)} \text{Tr}(\pi_x |_{K_{\overline{x}}}) $$ which is again an element of $\Lambda^\natural$. \end{definition} 
\begin{theorem}[Lefschetz Trace Formula] \label{theorem-trace} Let $X$ be a projective curve over a finite field $k$, $\Lambda$ a finite ring and $K \in D_{ctf}(X, \Lambda)$. Then the global and local Lefschetz numbers of $K$ are equal, i.e., \begin{equation} \label{equation-trace-formula} \text{Tr}(\pi^*_X |_{R\Gamma(X_{\bar k}, K)}) = \sum\nolimits_{x\in X(k)} \text{Tr}(\pi_X |_{K_{\bar x}}) \end{equation} in $\Lambda^\natural$. \end{theorem} 
\begin{theorem}[Weil] \label{theorem-weil-trace-formula} Let $C$ be a nonsingular projective curve over an algebraically closed field $k$, and $\varphi : C \to C$ a $k$-endomorphism of $C$ distinct from the identity. Let $V(\varphi) = \Delta_C \cdot \Gamma_\varphi$, where $\Delta_C$ is the diagonal, $\Gamma_\varphi$ is the graph of $\varphi$, and the intersection number is taken on $C \times C$. Let $J = \underline{\Picardfunctor}^0_{C/k}$ be the jacobian of $C$ and denote $\varphi^* : J \to J$ the action induced by $\varphi$ by taking pullbacks. Then $$ V(\varphi) = 1 - \text{Tr}_J(\varphi^*) + \deg \varphi. $$ \end{theorem} 
\begin{lemma} \label{lemma-weil-mod} Consider the situation of Theorem \ref{theorem-weil-trace-formula} and let $\ell$ be a prime number invertible in $k$. Then $$ \sum\nolimits_{i = 0}^2 (-1)^i \text{Tr}(\varphi^* |_{H^i (C, \underline{\mathbf{Z}/\ell^n \mathbf{Z}})}) = V(\varphi) \mod \ell^n. $$ \end{lemma} 
\begin{lemma} \label{lemma-epsilon} Let $e\in G$ denote the neutral element. The map $$ \begin{matrix} \Lambda[G] & \longrightarrow & \Lambda^{\natural}\\ \sum \lambda_g\cdot g & \longmapsto & \lambda_e \end{matrix} $$ factors through $\Lambda[G]^\natural$. We denote $\varepsilon : \Lambda[G]^\natural\to \Lambda^\natural$ the induced map. \end{lemma} 
\begin{definition} \label{definition-trace-G} Let $f : P\to P$ be an endomorphism of a finite projective $\Lambda[G]$-module $P$. We define $$ \text{Tr}_{\Lambda}^G(f; P) := \varepsilon\left(\text{Tr}_{\Lambda[G]}(f; P)\right) $$ to be the {\it $G$-trace of $f$ on $P$}. \end{definition} 
\begin{lemma} \label{lemma-lambda-trace} Let $f : P\to P$ be an endomorphism of the finite projective $\Lambda[G]$-module $P$. Then $$ \text{Tr}_{\Lambda}(f; P) = \# G \cdot \text{Tr}_\Lambda^G(f; P). $$ \end{lemma} 
\begin{lemma} \label{lemma-A-module-structure} The map $A\to \Lambda$ defines an $A$-module structure on $\Lambda^\natural$. \end{lemma} 
\begin{lemma} \label{lemma-diagonal-action-projective-module} Let $P$ be a finite projective $A[G]$-module and $M$ a $\Lambda[G]$-module, finite projective as a $\Lambda$-module. Then $P \otimes_A M$ is a finite projective $\Lambda[G]$-module, for the structure induced by the diagonal action of $G$. \end{lemma} 
\begin{lemma} \label{lemma-multiplicative-trace} With assumptions as in Lemma \ref{lemma-diagonal-action-projective-module}, let $u\in \text{End}_{A[G]}(P)$ and $v\in \text{End}_{\Lambda[G]}(M)$. Then $$ \text{Tr}_\Lambda^G \left(u \otimes v; P \otimes_A M\right) = \text{Tr}_A^G(u; P)\cdot \text{Tr}_\Lambda(v;M). $$ \end{lemma} 
\begin{lemma} \label{lemma-gamma-z-gamma-trace} Let $P$ be a $\Lambda[\Gamma]$-module, finite and projective as a $\Lambda[G]$-module, and $\gamma \in \Gamma$. Then $$ \text{Tr}_{\Lambda}(\gamma, P) = \# Z_\gamma \cdot \text{Tr}_\Lambda^{Z_\gamma}\left(\gamma, P\right). $$ \end{lemma} 
\begin{lemma} \label{lemma-weak-trace} Let $P$ be an $A[\Gamma]$-module, finite projective as $A[G]$-module. Let $M$ be a $\Lambda[\Gamma]$-module, finite projective as a $\Lambda$-module. Then $$ \text{Tr}_{\Lambda}^{Z_\gamma}(\gamma, P \otimes_A M) = \text{Tr}_A^{Z_\gamma}(\gamma, P)\cdot \text{Tr}_\Lambda(\gamma, M). $$ \end{lemma} 
\begin{lemma} \label{lemma-trivial-trace} Let $P$ be a $\Lambda[\Gamma]$-module, finite projective as $\Lambda[G]$-module. Then the coinvariants $P_G = \Lambda \otimes_{\Lambda[G]} P$ form a finite projective $\Lambda$-module, endowed with an action of $\Gamma/G = \mathbf{N}$. Moreover, we have $$ \text{Tr}_\Lambda(1; P_G) = \sum\nolimits'_{\gamma \mapsto 1} \text{Tr}_\Lambda^{Z_\gamma}(\gamma, P) $$ where $\sum_{\gamma\mapsto 1}'$ means taking the sum over the $G$-conjugacy classes in $\Gamma$. \end{lemma} 
\begin{theorem} \label{theorem-trace-formula-again} Let $k$ be a finite field and $X$ a finite type, separated scheme of dimension at most 1 over $k$. Let $\Lambda$ be a finite ring whose cardinality is prime to that of $k$, and $K\in D_{ctf}(X, \Lambda)$. Then \begin{equation} \label{equation-trace-formula-again} \text{Tr}(\pi_X^* |_{R\Gamma_c(X_{\bar k}, K)}) = \sum\nolimits_{x\in X(k)} \text{Tr}(\pi_x |_{K_{\bar x}}) \end{equation} in $\Lambda^{\natural}$. \end{theorem} 
\begin{definition} \label{definition-l-adic-sheaf} Let $X$ be a Noetherian scheme. A {\it $\mathbf{Z}_\ell$-sheaf} on $X$, or simply an {\it $\ell$-adic sheaf} $\mathcal{F}$ is an inverse system $\left\{\mathcal{F}_n\right\}_{n\geq 1}$ where \begin{enumerate} \item $\mathcal{F}_n$ is a constructible $\mathbf{Z}/\ell^n\mathbf{Z}$-module on $X_\etale$, and \item the transition maps $\mathcal{F}_{n+1}\to \mathcal{F}_n$ induce isomorphisms $\mathcal{F}_{n+1} \otimes_{\mathbf{Z}/\ell^{n+1}\mathbf{Z}} \mathbf{Z}/\ell^n\mathbf{Z} \cong \mathcal{F}_n$. \end{enumerate} We say that $\mathcal{F}$ is {\it lisse} if each $\mathcal{F}_n$ is locally constant. A {\it morphism} of such is merely a morphism of inverse systems. \end{definition} 
\begin{lemma} \label{lemma-eventually-constant} Let $\{\mathcal{G}_n\}_{n\geq 1}$ be an inverse system of constructible $\mathbf{Z}/\ell^n\mathbf{Z}$-modules. Suppose that for all $k\geq 1$, the maps $$ \mathcal{G}_{n+1}/\ell^k \mathcal{G}_{n+1}\to \mathcal{G}_n /\ell^k \mathcal{G}_n $$ are isomorphisms for all $n\gg 0$ (where the bound possibly depends on $k$). In other words, assume that the system $\{\mathcal{G}_n/\ell^k\mathcal{G}_n\}_{n\geq 1}$ is eventually constant, and call $\mathcal{F}_k$ the corresponding sheaf. Then the system $\left\{\mathcal{F}_k\right\}_{k\geq 1}$ forms a $\mathbf{Z}_\ell$-sheaf on $X$. \end{lemma} 
\begin{lemma} \label{lemma-l-adic-abelian} The category of $\mathbf{Z}_\ell$-sheaves on $X$ is abelian. \end{lemma} 
\begin{definition} \label{definition-torsion-l-adic-sheaf} A $\mathbf{Z}_\ell$-sheaf $\mathcal{F}$ is {\it torsion} if $\ell^n : \mathcal{F} \to \mathcal{F}$ is the zero map for some $n$. The abelian category of $\mathbf{Q}_\ell$-sheaves on $X$ is the quotient of the abelian category of $\mathbf{Z}_\ell$-sheaves by the Serre subcategory of torsion sheaves. In other words, its objects are $\mathbf{Z}_\ell$-sheaves on $X$, and if $\mathcal{F}, \mathcal{G}$ are two such, then $$ \Hom_{\mathbf{Q}_\ell} \left(\mathcal{F}, \mathcal{G} \right) = \Hom_{\mathbf{Z}_\ell} \left(\mathcal{F}, \mathcal{G}\right) \otimes_{\mathbf{Z}_\ell} \mathbf{Q}_\ell. $$ We denote by $\mathcal{F} \mapsto \mathcal{F} \otimes \mathbf{Q}_\ell$ the quotient functor (right adjoint to the inclusion). If $\mathcal{F} = \mathcal{F}' \otimes \mathbf{Q}_\ell$ where $\mathcal{F}'$ is a $\mathbf{Z}_\ell$-sheaf and $\bar x$ is a geometric point, then the {\it stalk} of $\mathcal{F}$ at $\bar x$ is $\mathcal{F}_{\bar x} = \mathcal{F}'_{\bar x} \otimes \mathbf{Q}_\ell$. \end{definition} 
\begin{definition} \label{definition-cohomology-l-adic} If $X$ is a separated scheme of finite type over an algebraically closed field $k$ and $\mathcal{F} = \left\{\mathcal{F}_n\right\}_{n\geq 1}$ is a $\mathbf{Z}_\ell$-sheaf on $X$, then we define $$ H^i(X, \mathcal{F}) := \lim_n H^i(X, \mathcal{F}_n) \quad\text{and}\quad H_c^i(X, \mathcal{F}) := \lim_n H_c^i(X, \mathcal{F}_n). $$ If $\mathcal{F} = \mathcal{F}'\otimes \mathbf{Q}_\ell$ for a $\mathbf{Z}_\ell$-sheaf $\mathcal{F}'$ then we set $$ H_c^i(X , \mathcal{F}) := H_c^i(X, \mathcal{F}')\otimes_{\mathbf{Z}_\ell}\mathbf{Q}_\ell. $$ We call these the {\it $\ell$-adic cohomology} of $X$ with coefficients $\mathcal{F}$. \end{definition} 
\begin{definition} \label{definition-L-function-finite-ring} Let $X$ be a scheme of finite type over a finite field $k$. Let $\Lambda$ be a finite ring of order prime to the characteristic of $k$ and $\mathcal{F}$ a constructible flat $\Lambda$-module on $X_\etale$. Then we set $$ L(X, \mathcal{F}) := \prod\nolimits_{x\in |X|} \det(1 - \pi_x^*T^{\deg x} |_{\mathcal{F}_{\bar x}})^{-1} \in \Lambda [[ T ]] $$ where $|X|$ is the set of closed points of $X$, $\deg x = [\kappa(x): k]$ and $\bar x$ is a geometric point lying over $x$. This definition clearly generalizes to the case where $\mathcal{F}$ is replaced by a $K \in D_{ctf}(X, \Lambda)$. We call this the {\it $L$-function of $\mathcal{F}$}. \end{definition} 
\begin{definition} \label{definition-L-function-l-adic} Now assume that $\mathcal{F}$ is a $\mathbf{Q}_\ell$-sheaf on $X$. In this case we define $$ L(X, \mathcal{F}) := \prod\nolimits_{x \in |X|} \det(1 - \pi_x^*T^{\deg x} |_{\mathcal{F}_{\bar x}})^{-1} \in \mathbf{Q}_\ell[[T]]. $$ Note that this product converges since there are finitely many points of a given degree. We call this the {\it $L$-function of $\mathcal{F}$}. \end{definition} 
\begin{theorem}[Finite Coefficients] \label{theorem-A} Let $X$ be a scheme of finite type over a finite field $k$. Let $\Lambda$ be a finite ring of order prime to the characteristic of $k$ and $\mathcal{F}$ a constructible flat $\Lambda$-module on $X_\etale$. Then $$ L(X, \mathcal{F}) = \det(1 - \pi_X^*\ T |_{R\Gamma_c(X_{\bar k}, \mathcal{F})})^{-1} \in \Lambda[[T]]. $$ \end{theorem} 
\begin{theorem}[Adic sheaves] \label{theorem-B} Let $X$ be a scheme of finite type over a finite field $k$, and $\mathcal{F}$ a $\mathbf{Q}_\ell$-sheaf on $X$. Then $$ L(X, \mathcal{F}) = \prod\nolimits_i \det(1 - \pi_X^*T |_{H_c^i(X_{\bar k} , \mathcal{F})})^{(-1)^{i + 1}} \in \mathbf{Q}_\ell[[T]]. $$ \end{theorem} 
\begin{theorem} \label{theorem-D} Let $X/k$ be as above, let $\Lambda$ be a finite ring with $\#\Lambda \in k^*$ and $K\in D_{ctf}(X, \Lambda)$. Then $R\Gamma_c(X_{\bar k}, K)\in D_{perf}(\Lambda)$ and $$ \sum_{x\in X(k)}\text{Tr}\left(\pi_x |_{K_{\bar x}}\right) = \text{Tr}\left(\pi_X^* |_{R\Gamma_c(X_{\bar k}, K )}\right). $$ \end{theorem} 
\begin{theorem} \label{theorem-C} Let $X$ be a separated scheme of finite type over a finite field $k$ and $\mathcal{F}$ be a $\mathbf{Q}_\ell$-sheaf on $X$. Then $\dim_{\mathbf{Q}_\ell}H_c^i(X_{\bar k}, \mathcal{F})$ is finite for all $i$, and is nonzero for $0\leq i \leq 2 \dim X$ only. Furthermore, we have $$ \sum_{x\in X(k)} \text{Tr}\left(\pi_x |_{\mathcal{F}_{\bar x}}\right) = \sum_i (-1)^i\text{Tr}\left(\pi_X^* |_{H_c^i(X_{\bar k}, \mathcal{F})}\right). $$ \end{theorem} 
\begin{lemma} \label{lemma-piece-together} Suppose we have $K_n\in D_{perf}(\mathbf{Z}/\ell^n\mathbf{Z})$, $\pi_n : K_n\to K_n$ and isomorphisms $\varphi_n : K_{n+1} \otimes^\mathbf{L}_{\mathbf{Z}/\ell^{n+1}\mathbf{Z}} \mathbf{Z}/\ell^n\mathbf{Z} \to K_n$ compatible with $\pi_{n+1}$ and $\pi_n$. Then \begin{enumerate} \item the elements $t_n = \text{Tr}(\pi_n |_{K_n})\in \mathbf{Z}/\ell^n\mathbf{Z}$ form an element $t_\infty = \{t_n\}$ of $\mathbf{Z}_\ell$, \item the $\mathbf{Z}_\ell$-module $H_\infty^i = \lim_n H^i(k_n)$ is finite and is nonzero for finitely many $i$ only, and \item the operators $H^i(\pi_n): H^i(K_n)\to H^i(K_n)$ are compatible and define $\pi_\infty^i : H_\infty^i\to H_\infty^i$ satisfying $$ \sum (-1)^i \text{Tr}( \pi_\infty^i |_{H_\infty^i \otimes_{\mathbf{Z}_\ell}\mathbf{Q}_\ell}) = t_\infty. $$ \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-count-points-projective} Let $X$ be a smooth, projective, geometrically irreducible curve over a finite field $k$. Then \begin{enumerate} \item the $L$-function $L(X, \mathbf{Q}_\ell)$ is a rational function, \item the eigenvalues $\alpha_1, \ldots, \alpha_{2g}$ of $\pi_X^*$ on $H^1(X_{\bar k}, \mathbf{Q}_\ell)$ are algebraic integers independent of $\ell$, \item the number of rational points of $X$ on $k_n$, where $[k_n : k] = n$, is $$ \# X(k_n) = 1 - \sum\nolimits_{i = 1}^{2g}\alpha_i^n + q^n, $$ \item for each $i$, $|\alpha_i| < q$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-open} A subgroup of the form $\text{Stab}(\overline y\in F_{\overline{x}}(Y))\subset \pi_1(X, \overline{x})$ is called {\it open}. \end{definition} 
\begin{theorem}[Grothendieck] \label{theorem-fundamental-group} Let $X$ be a connected scheme. \begin{enumerate} \item There is a topology on $\pi_1(X, \overline{x})$ such that the open subgroups form a fundamental system of open nbhds of $e\in \pi_1(X, \overline x)$. \item With topology of (1) the group $\pi_1(X, \overline{x})$ is a profinite group. \item The functor $$ \begin{matrix} \text{ schemes finite } \atop \text{ \'etale over }X & \to & \text{ finite discrete continuous } \atop \pi_1(X, \overline{x})\text{-sets}\\ Y / X& \mapsto & F_{\overline{x}}(Y) \text{ with its natural action} \end{matrix} $$ is an equivalence of categories. \end{enumerate} \end{theorem} 
\begin{proposition} \label{proposition-integral-normal-fundamental-group} Let $X$ be an integral normal Noetherian scheme. Let $\overline y\to X$ be an algebraic geometric point lying over the generic point $\eta\in X$. Then $$ \pi_x(X, \overline \eta) = Gal(M/\kappa(\eta)) $$ ($\kappa(\eta)$, function field of $X$) where $$ \kappa(\overline \eta)\supset M\supset \kappa(\eta) = k(X) $$ is the max sub-extension such that for every finite sub extension $M\supset L\supset \kappa(\eta)$ the normalization of $X$ in $L$ is finite \'etale over $X$. \end{proposition} 
\begin{theorem}[Deligne, Weil II] \label{theorem-weil-II} For a sheaf $\mathcal{F}_\rho$ with $\rho$ satisfying the conclusions of the conjecture above then the eigenvalues of $\pi_X^*$ on $H_c^i(X_{\overline{k}}, \mathcal{F}_{\rho})$ are algebraic numbers $\alpha$ with absolute values $$ |\alpha|=q^{w/2}, \text{ for }w\in \mathbf{Z},\ w\leq i $$ Moreover, if $X$ smooth and proj. then $w = i$. \end{theorem} 
\begin{lemma} \label{lemma-identify-h2c} There is a canonical isomorphism $$ H_c^2(X_{\overline{k}}, \mathcal{F}_\rho)=(M)_{\pi_1(X_{\overline{k}}, \overline\eta)}(-1) $$ as $\text{Gal}(k^{^{sep}}/k)$-modules. \end{lemma} 
\begin{proposition} \label{proposition-curve-kpi1} Let $X/k$ as before but $X_{\overline{k}}\neq \mathbf{P}^1_{\overline{k}}$ The functors $ (M, \rho)\mapsto H_c^{2-i}(X_{\overline{k}}, \mathcal{F}_\rho) $ are the left derived functor of $(M, \rho)\mapsto H_c^2(X_{\overline{k}}, \mathcal{F}_\rho)$ so $$ H_c^{2-i}(X_{\overline{k}}, \mathcal{F}_\rho) = H_i(\pi_1(X_{\overline{k}}, \overline \eta), M)(-1) $$ Moreover, there is a derived version, namely $$ R\Gamma_c(X_{\overline{k}}, \mathcal{F}_\rho) = LH_0(\pi_1(X_{\overline{k}}, \overline \eta), M(-1)) = M(-1) \otimes_{\Lambda[[\pi_1(X_{\overline{k}}, \overline \eta)]]}^\mathbf{L} \Lambda $$ in $D(\Lambda[[\widehat{\mathbf{Z}}]])$. Similarly, the functors $(M, \rho)\mapsto H^i(X_{\overline{k}}, \mathcal{F}_\rho)$ are the right derived functor of $(M, \rho)\mapsto M^{\pi_1(X_{\overline{k}}, \overline \eta)}$ so $$ H^i(X_{\overline{k}}, \mathcal{F}_\rho) = H^i(\pi_1(X_{\overline{k}}, \overline \eta), M) $$ Moreover, in this case there is a derived version too. \end{proposition} 
\begin{definition} \label{definition-unramified} An {\it unramified cusp form on $\text{GL}_2(\mathbf{A})$ with values in $\Lambda$}\footnote{This is likely nonstandard notation.} is a function $$ f : \text{GL}_2(\mathbf{A}) \to \Lambda $$ such that \begin{enumerate} \item $f(x\gamma) = f(x)$ for all $x\in \text{GL}_2(\mathbf{A})$ and all $\gamma\in \text{GL}_2(K)$ \item $f(ux) = f(x)$ for all $x\in \text{GL}_2(\mathbf{A})$ and all $u\in \text{GL}_2(O)$ \item for all $x\in \text{GL}_2(\mathbf{A})$, $$ \int_{\mathbf{A} \mod K} f \left(x \left( \begin{matrix} 1 & z \\ 0 & 1 \end{matrix} \right) \right) dz = 0 $$ see \cite[Section 4.1]{dJ-conjecture} for an explanation of how to make sense out of this for a general ring $\Lambda$ in which $p$ is invertible. \end{enumerate} \end{definition} 
\begin{theorem} \label{theorem-drinfeld-make-rho} Given an eigenform $f$ with values in $\overline{\mathbf{Q}}_l$ and eigenvalues $u_v\in \overline{\mathbf{Z}}_l^*$ then there exists $$ \rho : \pi_1(X)\to \text{GL}_2(E) $$ continuous, absolutely irreducible where $E$ is a finite extension of $\mathbf{Q}_\ell$ contained in $\overline{\mathbf{Q}}_l$ such that $t_v = \text{Tr}(\rho(F_v))$, and $u_v = q_v^{-1}\det\left(\rho(F_v)\right)$ for all places $v$. \end{theorem} 
\begin{theorem} \label{theorem-drinfeld-make-f} Suppose $\mathbf{Q}_l \subset E$ finite, and $$ \rho : \pi_1(X)\to \text{GL}_2(E) $$ absolutely irreducible, continuous. Then there exists an eigenform $f$ with values in $\overline{\mathbf{Q}}_l$ whose eigenvalues $t_v$, $u_v$ satisfy the equalities $t_v = \text{Tr}(\rho(F_v))$ and $u_v = q_v^{-1}\det(\rho(F_v))$. \end{theorem} 
\begin{proposition} \label{proposition-cusp-forms-finite} If $\Lambda$ is Noetherian then $C(\Lambda)$ is a finitely generated $\Lambda$-module. Moreover, if $\Lambda$ is a field with prime subfield $\mathbf{F} \subset \Lambda$ then $$ C(\Lambda)=(C(\mathbf{F}))\otimes_{\mathbf{F}}\Lambda $$ compatibly with $T_v$ acting. \end{proposition} 
\begin{lemma} \label{lemma-eigenvalues-algebraic} Algebraicity of eigenvalues. If $\Lambda$ is a field then the eigenvalues $t_v$ for $f\in C(\Lambda)$ are algebraic over the prime subfield $\mathbf{F} \subset \Lambda$. \end{lemma} 
\begin{lemma} \label{lemma-switch-l} Switching $l$. Let $E$ be a number field. Start with $$ \rho : \pi_1(X)\to SL_2(E_\lambda) $$ absolutely irreducible continuous, where $\lambda$ is a place of $E$ not lying above $p$. Then for any second place $\lambda'$ of $E$ not lying above $p$ there exists a finite extension $E'_{\lambda'}$ and a absolutely irreducible continuous representation $$ \rho': \pi_1(X)\to SL_2(E'_{\lambda'}) $$ which is compatible with $\rho$ in the sense that the characteristic polynomials of all Frobenii are the same. \end{lemma} 
\begin{theorem} \label{theorem-conjecture-n-2} The Conjecture holds if $n\leq 2$. \end{theorem} 
\begin{theorem} \label{theorem-conjecture-l-bigger-2n} Conjecture holds if $l > 2n$ modulo some unproven things. \end{theorem} 
\begin{theorem} \label{theorem-deformation-rings} (See \cite[Theorem 3.5]{dJ-conjecture}) Suppose $$ \rho_0: \pi_1(X)\to \text{GL}_n(\mathbf{F}_l) $$ is a continuous, $l\neq p$. Assume \begin{enumerate} \item Conj. holds for $X$, \item $\rho_0 |_{\pi_1(X_{\overline{k}})}$ abs. irred., and \item $l$ does not divide $n$. \end{enumerate} Then the universal deformation ring $R_{\text{univ}}$ of $\rho_0$ is finite flat over $\mathbf{Z}_l$. \end{theorem} 
\begin{proposition} \label{proposition-finite-set-frobenii-generate-topologically} There exists a finite set $x_1, \ldots, x_n$ of closed points of $X$ such that set of {\bf all} frobenius elements corresponding to these points topologically generate $\pi_1(X)$. \end{proposition} 
