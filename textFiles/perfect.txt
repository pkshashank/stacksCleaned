\begin{lemma} \label{lemma-quasi-coherence-direct-sums} Let $X$ be a scheme. Then $D_\QCoh(\mathcal{O}_X)$ has direct sums. \end{lemma} 
\begin{lemma} \label{lemma-Rlim-quasi-coherent} Let $X$ be a scheme. Let $(K_n)$ be an inverse system of $D_\QCoh(\mathcal{O}_X)$ with derived limit $K = R\lim K_n$ in $D(\mathcal{O}_X)$. Assume $H^q(K_{n + 1}) \to H^q(K_n)$ is surjective for all $q \in \mathbf{Z}$ and $n \geq 1$. Then \begin{enumerate} \item $H^q(K) = \lim H^q(K_n)$, \item $R\lim H^q(K_n) = \lim H^q(K_n)$, and \item for every affine open $U \subset X$ we have $H^p(U, \lim H^q(K_n)) = 0$ for $p > 0$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-nice-K-injective} Let $X$ be a scheme. Let $E$ be an object of $D_\QCoh(\mathcal{O}_X)$. Then the map $E \to R\lim \tau_{\geq -n}E$ of Derived Categories, Remark \ref{derived-remark-map-into-derived-limit-truncations} is an isomorphism\footnote{In particular, $E$ has a K-injective representative by Derived Categories, Lemma \ref{derived-lemma-difficulty-K-injectives}.}. \end{lemma} 
\begin{lemma} \label{lemma-application-nice-K-injective} Let $X$ be a scheme. Let $F : \textit{Mod}(\mathcal{O}_X) \to \textit{Ab}$ be an additive functor and $N \geq 0$ an integer. Assume that \begin{enumerate} \item $F$ commutes with countable direct products, \item $R^pF(\mathcal{F}) = 0$ for all $p \geq N$ and $\mathcal{F}$ quasi-coherent. \end{enumerate} Then for $E \in D_\QCoh(\mathcal{O}_X)$ \begin{enumerate} \item $H^i(RF(\tau_{\leq a}E)) \to H^i(RF(E))$ is an isomorphism for $i \leq a$, \item $H^i(RF(E)) \to H^i(RF(\tau_{\geq b - N + 1}E))$ is an isomorphism for $i \geq b$, \item if $H^i(E) = 0$ for $i \not \in [a, b]$ for some $-\infty \leq a \leq b \leq \infty$, then $H^i(RF(E)) = 0$ for $i \not \in [a, b + N - 1]$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-affine-compare-bounded} Let $X = \Spec(A)$ be an affine scheme. All the functors in the diagram $$ \xymatrix{ D(\QCoh(\mathcal{O}_X)) \ar[rr]_{(\ref{equation-compare})} & & D_\QCoh(\mathcal{O}_X) \ar[ld]^{R\Gamma(X, -)} \\ & D(A) \ar[lu]^{\widetilde{\ \ }} } $$ are equivalences of triangulated categories. Moreover, for $E$ in $D_\QCoh(\mathcal{O}_X)$ we have $H^0(X, E) = H^0(X, H^0(E))$. \end{lemma} 
\begin{lemma} \label{lemma-affine-K-flat} Let $X = \Spec(A)$ be an affine scheme. If $K^\bullet$ is a K-flat complex of $A$-modules, then $\widetilde{K^\bullet}$ is a K-flat complex of $\mathcal{O}_X$-modules. \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherence-pushforward} If $f : X \to Y$ is a morphism of affine schemes given by the ring map $A \to B$, then the diagram $$ \xymatrix{ D(B) \ar[d] \ar[r] & D_\QCoh(\mathcal{O}_X) \ar[d]^{Rf_*} \\ D(A) \ar[r] & D_\QCoh(\mathcal{O}_Y) } $$ commutes. \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherence-pullback} Let $f : Y \to X$ be a morphism of schemes. \begin{enumerate} \item The functor $Lf^*$ sends $D_\QCoh(\mathcal{O}_X)$ into $D_\QCoh(\mathcal{O}_Y)$. \item If $X$ and $Y$ are affine and $f$ is given by the ring map $A \to B$, then the diagram $$ \xymatrix{ D(B) \ar[r] & D_\QCoh(\mathcal{O}_Y) \\ D(A) \ar[r] \ar[u]^{- \otimes_A^\mathbf{L} B} & D_\QCoh(\mathcal{O}_X) \ar[u]_{Lf^*} } $$ commutes. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherence-tensor-product} Let $X$ be a scheme. \begin{enumerate} \item For objects $K, L$ of $D_\QCoh(\mathcal{O}_X)$ the derived tensor product $K \otimes^\mathbf{L}_{\mathcal{O}_X} L$ is in $D_\QCoh(\mathcal{O}_X)$. \item If $X = \Spec(A)$ is affine then $$ \widetilde{M^\bullet} \otimes_{\mathcal{O}_X}^\mathbf{L} \widetilde{K^\bullet} = \widetilde{M^\bullet \otimes_A^\mathbf{L} K^\bullet} $$ for any pair of complexes of $A$-modules $K^\bullet$, $M^\bullet$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherence-direct-image} Let $f : X \to S$ be a morphism of schemes. Assume that $f$ is quasi-separated and quasi-compact. \begin{enumerate} \item The functor $Rf_*$ sends $D_\QCoh(\mathcal{O}_X)$ into $D_\QCoh(\mathcal{O}_S)$. \item If $S$ is quasi-compact, there exists an integer $N = N(X, S, f)$ such that for an object $E$ of $D_\QCoh(\mathcal{O}_X)$ with $H^m(E) = 0$ for $m > 0$ we have $H^m(Rf_*E) = 0$ for $m \geq N$. \item In fact, if $S$ is quasi-compact we can find $N = N(X, S, f)$ such that for every morphism of schemes $S' \to S$ the same conclusion holds for the functor $R(f')_*$ where $f' : X' \to S'$ is the base change of $f$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-acyclicity-lemma} Let $f : X \to S$ be a quasi-separated and quasi-compact morphism of schemes. Let $\mathcal{F}^\bullet$ be a complex of quasi-coherent $\mathcal{O}_X$-modules each of which is right acyclic for $f_*$. Then $f_*\mathcal{F}^\bullet$ represents $Rf_*\mathcal{F}^\bullet$ in $D(\mathcal{O}_S)$. \end{lemma} 
\begin{lemma} \label{lemma-acyclicity-lemma-global} Let $X$ be a quasi-separated and quasi-compact scheme. Let $\mathcal{F}^\bullet$ be a complex of quasi-coherent $\mathcal{O}_X$-modules each of which is right acyclic for $\Gamma(X, -)$. Then $\Gamma(X, \mathcal{F}^\bullet)$ represents $R\Gamma(X, \mathcal{F}^\bullet)$ in $D(\Gamma(X, \mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-spectral-sequence} Let $X$ be a quasi-separated and quasi-compact scheme. For any object $K$ of $D_\QCoh(\mathcal{O}_X)$ the spectral sequence $$ E_2^{i, j} = H^i(X, H^j(K)) \Rightarrow H^{i + j}(X, K) $$ of Cohomology, Example \ref{cohomology-example-spectral-sequence} is bounded and converges. \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherence-pushforward-direct-sums} Let $f : X \to S$ be a quasi-separated and quasi-compact morphism of schemes. Then $Rf_* : D_\QCoh(\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_S)$ commutes with direct sums. \end{lemma} 
\begin{lemma} \label{lemma-pushforward-affine-morphism} Let $f : X \to S$ be an affine morphism of schemes. Let $\mathcal{F}^\bullet$ be a complex of quasi-coherent $\mathcal{O}_X$-modules. Then $f_*\mathcal{F}^\bullet = Rf_*\mathcal{F}^\bullet$. \end{lemma} 
\begin{lemma} \label{lemma-affine-morphism} Let $f : X \to S$ be an affine morphism of schemes. Then $Rf_* : D_\QCoh(\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_S)$ reflects isomorphisms. \end{lemma} 
\begin{lemma} \label{lemma-affine-morphism-pull-push} Let $f : X \to S$ be an affine morphism of schemes. For $E$ in $D_\QCoh(\mathcal{O}_S)$ we have $Rf_* Lf^* E = E \otimes^\mathbf{L}_{\mathcal{O}_S} f_*\mathcal{O}_X$. \end{lemma} 
\begin{lemma} \label{lemma-affine-morphism-equivalence} Let $f : X \to Y$ be an affine morphism of schemes. Then $f_*$ induces an equivalence $$ \Phi : D_\QCoh(\mathcal{O}_X) \longrightarrow D_\QCoh(f_*\mathcal{O}_X) $$ whose composition with $D_\QCoh(f_*\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_Y)$ is $Rf_* : D_\QCoh(\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_Y)$. \end{lemma} 
\begin{definition} \label{definition-supported-on} Let $X$ be a scheme. Let $E$ be an object of $D(\mathcal{O}_X)$. Let $T \subset X$ be a closed subset. We say $E$ is {\it supported on $T$} if the cohomology sheaves $H^i(E)$ are supported on $T$. \end{definition} 
\begin{lemma} \label{lemma-support-quasi-coherent} Let $X$ be a scheme. Let $T \subset X$ be a closed subset such that $X \setminus T$ is a retrocompact open of $X$. Let $i : T \to X$ be the inclusion. \begin{enumerate} \item For $E$ in $D_\QCoh(\mathcal{O}_X)$ we have $i_*R\mathcal{H}_T(E)$ in $D_{\QCoh, T}(\mathcal{O}_X)$. \item The functor $i_* \circ R\mathcal{H}_T : D_\QCoh(\mathcal{O}_X) \to D_{\QCoh, T}(\mathcal{O}_X)$ is right adjoint to the inclusion functor $D_{\QCoh, T}(\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_X)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-support-direct-sums} Let $X$ be a scheme. Let $T \subset X$ be a closed subset such that $X \setminus T$ is a retrocompact open of $X$. Then for a family of objects $E_i$, $i \in I$ of $D_\QCoh(\mathcal{O}_X)$ we have $R\mathcal{H}_T(\bigoplus E_i) = \bigoplus R\mathcal{H}_T(E_i)$. \end{lemma} 
\begin{lemma} \label{lemma-extended-alternating-zero} With $X$, $f_1, \ldots, f_c \in \Gamma(X, \mathcal{O}_X)$, and $\mathcal{F}$ as in Remark \ref{remark-support-c-equations} the complex (\ref{equation-extended-alternating}) restricts to an acyclic complex over $X \setminus Z$. \end{lemma} 
\begin{lemma} \label{lemma-extended-alternating-represented} With $X$, $f_1, \ldots, f_c \in \Gamma(X, \mathcal{O}_X)$, and $\mathcal{F}$ as in Remark \ref{remark-support-c-equations}. If $\mathcal{F}$ is quasi-coherent, then the complex (\ref{equation-extended-alternating}) represents $i_* R\mathcal{H}_Z(\mathcal{F})$ in $D_Z(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-supported-trivial-vanishing} Let $X$ be a scheme. Let $T \subset X$ be a closed subset which can locally be cut out by at most $c$ elements of the structure sheaf. Then $\mathcal{H}^i_Z(\mathcal{F}) = 0$ for $i > c$ and any quasi-coherent $\mathcal{O}_X$-module $\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-supported-vanishing} Let $X$ be a scheme. Let $T \subset X$ be a closed subset which can locally be cut out by a Koszul regular sequence having $c$ elements. Then $\mathcal{H}^i_Z(\mathcal{F}) = 0$ for $i \not = c$ for every flat, quasi-coherent $\mathcal{O}_X$-module $\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-supported-map-determinant} With $X$, $f_1, \ldots, f_c \in \Gamma(X, \mathcal{O}_X)$, and $\mathcal{F}$ as in Remark \ref{remark-support-c-equations}. Let $a_{ji} \in \Gamma(X, \mathcal{O}_X)$ for $1 \leq i, j \leq c$ and set $g_j = \sum_{i = 1, \ldots, c} a_{ji}f_i$. Assume $g_1, \ldots, g_c$ scheme theoretically cut out $Z$. If $\mathcal{F}$ is quasi-coherent, then $$ c_{f_1, \ldots, f_c} = \det(a_{ji}) c_{g_1, \ldots, g_c} $$ where $c_{f_1, \ldots, f_c}$ and $c_{g_1, \ldots, g_c}$ are as in Remark \ref{remark-supported-map-c-equations}. \end{lemma} 
\begin{lemma} \label{lemma-supported-map-global} Let $X$ be a scheme. Let $Z \to X$ be a closed immersion of finite presentation whose conormal sheaf $\mathcal{C}_{Z/X}$ is locally free of rank $c$. Then there is a canonical map $$ c : \wedge^c(\mathcal{C}_{Z/X})^\vee \otimes_{\mathcal{O}_Z} i^*\mathcal{F} \longrightarrow \mathcal{H}_Z^c(\mathcal{F}) $$ functorial in the quasi-coherent module $\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-affine-pushforward} Let $f : X \to Y$ be an affine morphism of schemes. Then $f_*$ defines a derived functor $f_* : D(\QCoh(\mathcal{O}_X)) \to D(\QCoh(\mathcal{O}_Y))$. This functor has the property that $$ \xymatrix{ D(\QCoh(\mathcal{O}_X)) \ar[d]_{f_*} \ar[r] & D_\QCoh(\mathcal{O}_X) \ar[d]^{Rf_*} \\ D(\QCoh(\mathcal{O}_Y)) \ar[r] & D_\QCoh(\mathcal{O}_Y) } $$ commutes. \end{lemma} 
\begin{lemma} \label{lemma-flat-pushforward-coherator} Let $f : X \to Y$ be a morphism of schemes. Assume $f$ is quasi-compact, quasi-separated, and flat. Then, denoting $$ \Phi : D(\QCoh(\mathcal{O}_X)) \to D(\QCoh(\mathcal{O}_Y)) $$ the right derived functor of $f_* : \QCoh(\mathcal{O}_X) \to \QCoh(\mathcal{O}_Y)$ we have $RQ_Y \circ Rf_* = \Phi \circ RQ_X$. \end{lemma} 
\begin{lemma} \label{lemma-affine-coherator} Let $X = \Spec(A)$ be an affine scheme. Then \begin{enumerate} \item $Q_X : \textit{Mod}(\mathcal{O}_X) \to \QCoh(\mathcal{O}_X)$ is the functor which sends $\mathcal{F}$ to the quasi-coherent $\mathcal{O}_X$-module associated to the $A$-module $\Gamma(X, \mathcal{F})$, \item $RQ_X : D(\mathcal{O}_X) \to D(\QCoh(\mathcal{O}_X))$ is the functor which sends $E$ to the complex of quasi-coherent $\mathcal{O}_X$-modules associated to the object $R\Gamma(X, E)$ of $D(A)$, \item restricted to $D_\QCoh(\mathcal{O}_X)$ the functor $RQ_X$ defines a quasi-inverse to (\ref{equation-compare}). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-argument-proves} Let $X$ be a quasi-compact and quasi-separated scheme. Suppose that for every affine open $U \subset X$ the right derived functor $$ \Phi : D(\QCoh(\mathcal{O}_U)) \to D(\QCoh(\mathcal{O}_X)) $$ of the left exact functor $j_* : \QCoh(\mathcal{O}_U) \to \QCoh(\mathcal{O}_X)$ fits into a commutative diagram $$ \xymatrix{ D(\QCoh(\mathcal{O}_U)) \ar[d]_\Phi \ar[r]_{i_U} & D_\QCoh(\mathcal{O}_U) \ar[d]^{Rj_*} \\ D(\QCoh(\mathcal{O}_X)) \ar[r]^{i_X} & D_\QCoh(\mathcal{O}_X) } $$ Then the functor (\ref{equation-compare}) $$ D(\QCoh(\mathcal{O}_X)) \longrightarrow D_\QCoh(\mathcal{O}_X) $$ is an equivalence with quasi-inverse given by $RQ_X$. \end{lemma} 
\begin{proposition} \label{proposition-quasi-compact-affine-diagonal} Let $X$ be a quasi-compact scheme with affine diagonal. Then the functor (\ref{equation-compare}) $$ D(\QCoh(\mathcal{O}_X)) \longrightarrow D_\QCoh(\mathcal{O}_X) $$ is an equivalence with quasi-inverse given by $RQ_X$. \end{proposition} 
\begin{lemma} \label{lemma-direct-image-coherator} Let $f : X \to Y$ be a morphism of schemes. Assume $X$ and $Y$ are quasi-compact and have affine diagonal. Then, denoting $$ \Phi : D(\QCoh(\mathcal{O}_X)) \to D(\QCoh(\mathcal{O}_Y)) $$ the right derived functor of $f_* : \QCoh(\mathcal{O}_X) \to \QCoh(\mathcal{O}_Y)$ the diagram $$ \xymatrix{ D(\QCoh(\mathcal{O}_X)) \ar[d]_\Phi \ar[r] & D_\QCoh(\mathcal{O}_X) \ar[d]^{Rf_*} \\ D(\QCoh(\mathcal{O}_Y)) \ar[r] & D_\QCoh(\mathcal{O}_Y) } $$ is commutative. \end{lemma} 
\begin{lemma} \label{lemma-injective-quasi-coherent-sheaf-Noetherian} Let $X$ be a Noetherian scheme. Let $\mathcal{J}$ be an injective object of $\QCoh(\mathcal{O}_X)$. Then $\mathcal{J}$ is a flasque sheaf of $\mathcal{O}_X$-modules. \end{lemma} 
\begin{lemma} \label{lemma-Noetherian-pushforward} Let $f : X \to Y$ be a morphism of Noetherian schemes. Then $f_*$ on quasi-coherent sheaves has a right derived extension $\Phi : D(\QCoh(\mathcal{O}_X)) \to D(\QCoh(\mathcal{O}_Y))$ such that the diagram $$ \xymatrix{ D(\QCoh(\mathcal{O}_X)) \ar[d]_{\Phi} \ar[r] & D_\QCoh(\mathcal{O}_X) \ar[d]^{Rf_*} \\ D(\QCoh(\mathcal{O}_Y)) \ar[r] & D_\QCoh(\mathcal{O}_Y) } $$ commutes. \end{lemma} 
\begin{proposition} \label{proposition-Noetherian} Let $X$ be a Noetherian scheme. Then the functor (\ref{equation-compare}) $$ D(\QCoh(\mathcal{O}_X)) \longrightarrow D_\QCoh(\mathcal{O}_X) $$ is an equivalence with quasi-inverse given by $RQ_X$. \end{proposition} 
\begin{lemma} \label{lemma-alternating-cech-complex} In Situation \ref{situation-complex}. Let $M$ be an $A$-module and denote $\mathcal{F}$ the associated $\mathcal{O}_X$-module. Then there is a canonical isomorphism of complexes $$ \Psi : \colim_e \Hom_A(I^\bullet(f_1^e, \ldots, f_r^e), M) \longrightarrow \check{\mathcal{C}}_{alt}^\bullet(\mathcal{U}, \mathcal{F}) $$ functorial in $M$ where the differentials on the $\Hom$-complex are the contragredients of the differentials on $I^\bullet(f_1^e, \ldots, f_r^e)$. \end{lemma} 
\begin{lemma} \label{lemma-alternating-cech-complex-complex} In Situation \ref{situation-complex}. Let $M^\bullet$ be a complex of $A$-modules and denote $\mathcal{F}^\bullet$ the associated complex of $\mathcal{O}_X$-modules. Then there is a canonical isomorphism of complexes $$ \colim_e \Hom^\bullet(I^\bullet(f_1^e, \ldots, f_r^e), M^\bullet) \longrightarrow \text{Tot}(\check{\mathcal{C}}_{alt}^\bullet(\mathcal{U}, \mathcal{F}^\bullet)) $$ functorial in $M^\bullet$. \end{lemma} 
\begin{lemma} \label{lemma-alternating-cech-complex-complex-computes-cohomology} In Situation \ref{situation-complex}. Let $\mathcal{F}^\bullet$ be a complex of quasi-coherent $\mathcal{O}_X$-modules. Then there is a canonical isomorphism $$ \text{Tot}(\check{\mathcal{C}}_{alt}^\bullet(\mathcal{U}, \mathcal{F}^\bullet)) \longrightarrow R\Gamma(U, \mathcal{F}^\bullet) $$ in $D(A)$ functorial in $\mathcal{F}^\bullet$. \end{lemma} 
\begin{proposition} \label{proposition-represent-cohomology-class-on-open} In Situation \ref{situation-complex}. For every object $E$ of $D_\QCoh(\mathcal{O}_X)$ the map (\ref{equation-comparison}) is an isomorphism. \end{proposition} 
\begin{lemma} \label{lemma-represent-cohomology-class-on-closed} In Situation \ref{situation-complex}. Let $E$ be an object of $D_\QCoh(\mathcal{O}_X)$. Assume that $H^i(E)|_U = 0$ for $i = - r + 1, \ldots, 0$. Then given $s \in H^0(X, E)$ there exists an $e \geq 0$ and a morphism $K_e \to E$ such that $s$ is in the image of $H^0(X, K_e) \to H^0(X, E)$. \end{lemma} 
\begin{lemma} \label{lemma-pseudo-coherent} Let $X$ be a scheme. If $E$ is an $m$-pseudo-coherent object of $D(\mathcal{O}_X)$, then $H^i(E)$ is a quasi-coherent $\mathcal{O}_X$-module for $i > m$ and $H^m(E)$ is a quotient of a quasi-coherent $\mathcal{O}_X$-module. If $E$ is pseudo-coherent, then $E$ is an object of $D_\QCoh(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-pseudo-coherent-affine} Let $X = \Spec(A)$ be an affine scheme. Let $M^\bullet$ be a complex of $A$-modules and let $E$ be the corresponding object of $D(\mathcal{O}_X)$. Then $E$ is an $m$-pseudo-coherent (resp.\ pseudo-coherent) as an object of $D(\mathcal{O}_X)$ if and only if $M^\bullet$ is $m$-pseudo-coherent (resp.\ pseudo-coherent) as a complex of $A$-modules. \end{lemma} 
\begin{lemma} \label{lemma-identify-pseudo-coherent-noetherian} Let $X$ be a Noetherian scheme. Let $E$ be an object of $D_\QCoh(\mathcal{O}_X)$. For $m \in \mathbf{Z}$ the following are equivalent \begin{enumerate} \item $H^i(E)$ is coherent for $i \geq m$ and zero for $i \gg 0$, and \item $E$ is $m$-pseudo-coherent. \end{enumerate} In particular, $E$ is pseudo-coherent if and only if $E$ is an object of $D^-_{\textit{Coh}}(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-tor-dimension-affine} Let $X = \Spec(A)$ be an affine scheme. Let $M^\bullet$ be a complex of $A$-modules and let $E$ be the corresponding object of $D(\mathcal{O}_X)$. Then \begin{enumerate} \item $E$ has tor amplitude in $[a, b]$ if and only if $M^\bullet$ has tor amplitude in $[a, b]$. \item $E$ has finite tor dimension if and only if $M^\bullet$ has finite tor dimension. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-tor-dimension-rel-affine} Let $f : X \to S$ be a morphism of affine schemes corresponding to the ring map $R \to A$. Let $M^\bullet$ be a complex of $A$-modules and let $E$ be the corresponding object of $D(\mathcal{O}_X)$. Then \begin{enumerate} \item $E$ as an object of $D(f^{-1}\mathcal{O}_S)$ has tor amplitude in $[a, b]$ if and only if $M^\bullet$ has tor amplitude in $[a, b]$ as an object of $D(R)$. \item $E$ locally has finite tor dimension as an object of $D(f^{-1}\mathcal{O}_S)$ if and only if $M^\bullet$ has finite tor dimension as an object of $D(R)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-tor-qc-qs} Let $X$ be a quasi-separated scheme. Let $E$ be an object of $D_\QCoh(\mathcal{O}_X)$. Let $a \leq b$. The following are equivalent \begin{enumerate} \item $E$ has tor amplitude in $[a, b]$, and \item for all $\mathcal{F}$ in $\QCoh(\mathcal{O}_X)$ we have $H^i(E \otimes_{\mathcal{O}_X}^\mathbf{L} \mathcal{F}) = 0$ for $i \not \in [a, b]$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-perfect-affine} Let $X = \Spec(A)$ be an affine scheme. Let $M^\bullet$ be a complex of $A$-modules and let $E$ be the corresponding object of $D(\mathcal{O}_X)$. Then $E$ is a perfect object of $D(\mathcal{O}_X)$ if and only if $M^\bullet$ is perfect as an object of $D(A)$. \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherence-internal-hom} Let $X$ be a scheme. \begin{enumerate} \item If $L$ is in $D^+_\QCoh(\mathcal{O}_X)$ and $K$ in $D(\mathcal{O}_X)$ is pseudo-coherent, then $R\SheafHom(K, L)$ is in $D_\QCoh(\mathcal{O}_X)$ and locally bounded below. \item If $L$ is in $D_\QCoh(\mathcal{O}_X)$ and $K$ in $D(\mathcal{O}_X)$ is perfect, then $R\SheafHom(K, L)$ is in $D_\QCoh(\mathcal{O}_X)$. \item If $X = \Spec(A)$ is affine and $K, L \in D(A)$ then $$ R\SheafHom(\widetilde{K}, \widetilde{L}) = \widetilde{R\Hom_A(K, L)} $$ in the following two cases \begin{enumerate} \item $K$ is pseudo-coherent and $L$ is bounded below, \item $K$ is perfect and $L$ arbitrary. \end{enumerate} \item If $X = \Spec(A)$ and $K, L$ are in $D(A)$, then the $n$th cohomology sheaf of $R\SheafHom(\widetilde{K}, \widetilde{L})$ is the sheaf associated to the presheaf $$ X \supset D(f) \longmapsto \Ext^n_{A_f}(K \otimes_A A_f, L \otimes_A A_f) $$ for $f \in A$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-internal-hom-evaluate-tensor-isomorphism} Let $X$ be a scheme. Let $K, L, M$ be objects of $D_\QCoh(\mathcal{O}_X)$. The map $$ K \otimes_{\mathcal{O}_X}^\mathbf{L} R\SheafHom(M, L) \longrightarrow R\SheafHom(M, K \otimes_{\mathcal{O}_X}^\mathbf{L} L) $$ of Cohomology, Lemma \ref{cohomology-lemma-internal-hom-diagonal-better} is an isomorphism in the following cases \begin{enumerate} \item $M$ perfect, or \item $K$ is perfect, or \item $M$ is pseudo-coherent, $L \in D^+(\mathcal{O}_X)$, and $K$ has finite tor dimension. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-coh-to-qcoh} Let $X$ be a Noetherian scheme. Then the functor $$ D^-(\textit{Coh}(\mathcal{O}_X)) \longrightarrow D^-_{\textit{Coh}(\mathcal{O}_X)}(\QCoh(\mathcal{O}_X)) $$ is an equivalence. \end{lemma} 
\begin{proposition} \label{proposition-DCoh} Let $X$ be a Noetherian scheme. Then the functors $$ D^-(\textit{Coh}(\mathcal{O}_X)) \longrightarrow D^-_{\textit{Coh}}(\mathcal{O}_X) \quad\text{and}\quad D^b(\textit{Coh}(\mathcal{O}_X)) \longrightarrow D^b_{\textit{Coh}}(\mathcal{O}_X) $$ are equivalences. \end{proposition} 
\begin{lemma} \label{lemma-direct-image-coherent} Let $S$ be a Noetherian scheme. Let $f : X \to S$ be a morphism of schemes which is locally of finite type. Let $E$ be an object of $D^b_{\textit{Coh}}(\mathcal{O}_X)$ such that the support of $H^i(E)$ is proper over $S$ for all $i$. Then $Rf_*E$ is an object of $D^b_{\textit{Coh}}(\mathcal{O}_S)$. \end{lemma} 
\begin{lemma} \label{lemma-direct-image-coherent-bdd-below} Let $S$ be a Noetherian scheme. Let $f : X \to S$ be a morphism of schemes which is locally of finite type. Let $E$ be an object of $D^+_{\textit{Coh}}(\mathcal{O}_X)$ such that the support of $H^i(E)$ is proper over $S$ for all $i$. Then $Rf_*E$ is an object of $D^+_{\textit{Coh}}(\mathcal{O}_S)$. \end{lemma} 
\begin{lemma} \label{lemma-coherent-internal-hom} Let $X$ be a locally Noetherian scheme. If $L$ is in $D^+_{\textit{Coh}}(\mathcal{O}_X)$ and $K$ in $D^-_{\textit{Coh}}(\mathcal{O}_X)$, then $R\SheafHom(K, L)$ is in $D^+_{\textit{Coh}}(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-perfect-on-noetherian} Let $X$ be a Noetherian scheme. Let $E$ in $D(\mathcal{O}_X)$ be perfect. Then \begin{enumerate} \item $E$ is in $D^b_{\textit{Coh}}(\mathcal{O}_X)$, \item if $L$ is in $D_{\textit{Coh}}(\mathcal{O}_X)$ then $E \otimes_{\mathcal{O}_X}^\mathbf{L} L$ and $R\SheafHom_{\mathcal{O}_X}(E, L)$ are in $D_{\textit{Coh}}(\mathcal{O}_X)$, \item if $L$ is in $D^b_{\textit{Coh}}(\mathcal{O}_X)$ then $E \otimes_{\mathcal{O}_X}^\mathbf{L} L$ and $R\SheafHom_{\mathcal{O}_X}(E, L)$ are in $D^b_{\textit{Coh}}(\mathcal{O}_X)$, \item if $L$ is in $D^+_{\textit{Coh}}(\mathcal{O}_X)$ then $E \otimes_{\mathcal{O}_X}^\mathbf{L} L$ and $R\SheafHom_{\mathcal{O}_X}(E, L)$ are in $D^+_{\textit{Coh}}(\mathcal{O}_X)$, \item if $L$ is in $D^-_{\textit{Coh}}(\mathcal{O}_X)$ then $E \otimes_{\mathcal{O}_X}^\mathbf{L} L$ and $R\SheafHom_{\mathcal{O}_X}(E, L)$ are in $D^-_{\textit{Coh}}(\mathcal{O}_X)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-ext-finite} Let $A$ be a Noetherian ring. Let $X$ be a proper scheme over $A$. For $L$ in $D^+_{\textit{Coh}}(\mathcal{O}_X)$ and $K$ in $D^-_{\textit{Coh}}(\mathcal{O}_X)$, the $A$-modules $\Ext_{\mathcal{O}_X}^n(K, L)$ are finite. \end{lemma} 
\begin{lemma} \label{lemma-perfect-on-regular} Let $X$ be a locally Noetherian regular scheme. Then every object of $D^b_{\textit{Coh}}(\mathcal{O}_X)$ is perfect. If $X$ is quasi-compact, i.e., Noetherian regular, then conversely every perfect object of $D(\mathcal{O}_X)$ is in $D^b_{\textit{Coh}}(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-tor-amplitude-descends} Let $f : X \to Y$ be a surjective flat morphism of schemes (or more generally locally ringed spaces). Let $E \in D(\mathcal{O}_Y)$. Let $a, b \in \mathbf{Z}$. Then $E$ has tor-amplitude in $[a, b]$ if and only if $Lf^*E$ has tor-amplitude in $[a, b]$. \end{lemma} 
\begin{lemma} \label{lemma-pseudo-coherent-descends-fpqc} Let $\{f_i : X_i \to X\}$ be an fpqc covering of schemes. Let $E \in D_\QCoh(\mathcal{O}_X)$. Let $m \in \mathbf{Z}$. Then $E$ is $m$-pseudo-coherent if and only if each $Lf_i^*E$ is $m$-pseudo-coherent. \end{lemma} 
\begin{lemma} \label{lemma-pseudo-coherent-descends-fppf} Let $\{f_i : X_i \to X\}$ be an fppf covering of schemes. Let $E \in D(\mathcal{O}_X)$. Let $m \in \mathbf{Z}$. Then $E$ is $m$-pseudo-coherent if and only if each $Lf_i^*E$ is $m$-pseudo-coherent. \end{lemma} 
\begin{lemma} \label{lemma-perfect-descends-fpqc} Let $\{f_i : X_i \to X\}$ be an fpqc covering of schemes. Let $E \in D(\mathcal{O}_X)$. Then $E$ is perfect if and only if each $Lf_i^*E$ is perfect. \end{lemma} 
\begin{lemma} \label{lemma-closed-push-pseudo-coherent} Let $i : Z \to X$ be a morphism of ringed spaces such that $i$ is a closed immersion of underlying topological spaces and such that $i_*\mathcal{O}_Z$ is pseudo-coherent as an $\mathcal{O}_X$-module. Let $E \in D(\mathcal{O}_Z)$. Then $E$ is $m$-pseudo-coherent if and only if $Ri_*E$ is $m$-pseudo-coherent. \end{lemma} 
\begin{lemma} \label{lemma-finite-push-pseudo-coherent} Let $f : X \to Y$ be a finite morphism of schemes such that $f_*\mathcal{O}_X$ is pseudo-coherent as an $\mathcal{O}_Y$-module\footnote{This means that $f$ is pseudo-coherent, see More on Morphisms, Lemma \ref{more-morphisms-lemma-finite-pseudo-coherent}.}. Let $E \in D_\QCoh(\mathcal{O}_X)$. Then $E$ is $m$-pseudo-coherent if and only if $Rf_*E$ is $m$-pseudo-coherent. \end{lemma} 
\begin{lemma} \label{lemma-lift-quasi-coherent} Let $X$ be a scheme and let $j : U \to X$ be a quasi-compact open immersion. The functors $$ D_\QCoh(\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_U) \quad\text{and}\quad D^+_\QCoh(\mathcal{O}_X) \to D^+_\QCoh(\mathcal{O}_U) $$ are essentially surjective. If $X$ is quasi-compact, then the functors $$ D^-_\QCoh(\mathcal{O}_X) \to D^-_\QCoh(\mathcal{O}_U) \quad\text{and}\quad D^b_\QCoh(\mathcal{O}_X) \to D^b_\QCoh(\mathcal{O}_U) $$ are essentially surjective. \end{lemma} 
\begin{lemma} \label{lemma-lift-coherent} Let $X$ be a Noetherian scheme and let $j : U \to X$ be an open immersion. The functor $D^b_{\textit{Coh}}(\mathcal{O}_X) \to D^b_{\textit{Coh}}(\mathcal{O}_U)$ is essentially surjective. \end{lemma} 
\begin{lemma} \label{lemma-lift-pseudo-coherent} Let $X$ be an affine scheme and let $U \subset X$ be a quasi-compact open subscheme. For any pseudo-coherent object $E$ of $D(\mathcal{O}_U)$ there exists a bounded above complex of finite free $\mathcal{O}_X$-modules  whose restriction to $U$ is isomorphic to $E$. \end{lemma} 
\begin{lemma} \label{lemma-vanishing-ext} Let $X$ be a quasi-compact and quasi-separated scheme. Let $E \in D^b_\QCoh(\mathcal{O}_X)$. There exists an integer $n_0 > 0$ such that $\Ext^n_{D(\mathcal{O}_X)}(\mathcal{E}, E) = 0$ for every finite locally free $\mathcal{O}_X$-module $\mathcal{E}$ and every $n \geq n_0$. \end{lemma} 
\begin{lemma} \label{lemma-ext-from-perfect-into-bounded-QCoh} Let $X$ be a quasi-compact and quasi-separated scheme. Let $K$ be a perfect object of $D(\mathcal{O}_X)$. Then \begin{enumerate} \item there exist integers $a \leq b$ such that for any $L \in D_\QCoh(\mathcal{O}_X)$ with $H^i(L) = 0$ for $i \in [a, b]$ we have $\Hom_{D(\mathcal{O}_X)}(K, L) = 0$, and \item if $L$ is bounded, then $\Ext^n_{D(\mathcal{O}_X)}(K, L)$ is zero for all but finitely many $n$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-lift-perfect-complex-plus-locally-free} Let $X$ be an affine scheme. Let $U \subset X$ be a quasi-compact open. For every perfect object $E$ of $D(\mathcal{O}_U)$ there exists an integer $r$ and a finite locally free sheaf $\mathcal{F}$ on $U$ such that $\mathcal{F}[-r] \oplus E$ is the restriction of a perfect object of $D(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-lift-map} Let $X$ be an affine scheme. Let $U \subset X$ be a quasi-compact open. Let $E, E'$ be objects of $D_\QCoh(\mathcal{O}_X)$ with $E$ perfect. For every map $\alpha : E|_U \to E'|_U$ there exist maps $$ E \xleftarrow{\beta} E_1 \xrightarrow{\gamma} E' $$ of complexes on $X$ with $E_1$ perfect such that $\beta : E_1 \to E$ restricts to an isomorphism on $U$ and such that $\alpha = \gamma|_U \circ \beta|_U^{-1}$. Moreover we can assume $E_1 = E \otimes_{\mathcal{O}_X}^\mathbf{L} I$ for some perfect complex $I$ on $X$. \end{lemma} 
\begin{lemma} \label{lemma-lift-perfect-complex-plus-shift} Let $X$ be an affine scheme. Let $U \subset X$ be a quasi-compact open. For every perfect object $F$ of $D(\mathcal{O}_U)$ the object $F \oplus F[1]$ is the restriction of a perfect object of $D(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-perfect-into-support-on-T} Let $X$ be a quasi-compact and quasi-separated scheme. Let $f \in \Gamma(X, \mathcal{O}_X)$. For any morphism $\alpha : E \to E'$ in $D_\QCoh(\mathcal{O}_X)$ such that \begin{enumerate} \item $E$ is perfect, and \item $E'$ is supported on $T = V(f)$ \end{enumerate} there exists an $n \geq 0$ such that $f^n \alpha  = 0$. \end{lemma} 
\begin{lemma} \label{lemma-lift-perfect-complex-plus-shift-support} Let $X$ be an affine scheme. Let $T \subset X$ be a closed subset such that $X \setminus T$ is quasi-compact. Let $U \subset X$ be a quasi-compact open. For every perfect object $F$ of $D(\mathcal{O}_U)$ supported on $T \cap U$ the object $F \oplus F[1]$ is the restriction of a perfect object $E$ of $D(\mathcal{O}_X)$ supported in $T$. \end{lemma} 
\begin{lemma} \label{lemma-lift-map-from-perfect-complex-with-support} Let $X$ be a quasi-compact and quasi-separated scheme. Let $U \subset X$ be a quasi-compact open. Let $T \subset X$ be a closed subset with $X \setminus T$ retro-compact in $X$. Let $E$ be an object of $D_\QCoh(\mathcal{O}_X)$. Let $\alpha : P \to E|_U$ be a map where $P$ is a perfect object of $D(\mathcal{O}_U)$ supported on $T \cap U$. Then there exists a map $\beta : R \to E$ where $R$ is a perfect object of $D(\mathcal{O}_X)$ supported on $T$ such that $P$ is a direct summand of $R|_U$ in $D(\mathcal{O}_U)$ compatible $\alpha$ and $\beta|_U$. \end{lemma} 
\begin{definition} \label{definition-approximation-holds} Let $X$ be a scheme. Consider triples $(T, E, m)$ where \begin{enumerate} \item $T \subset X$ is a closed subset, \item $E$ is an object of $D_\QCoh(\mathcal{O}_X)$, and \item $m \in \mathbf{Z}$. \end{enumerate} We say {\it approximation holds for the triple} $(T, E, m)$ if there exists a perfect object $P$ of $D(\mathcal{O}_X)$ supported on $T$ and a map $\alpha : P \to E$ which induces isomorphisms $H^i(P) \to H^i(E)$ for $i > m$ and a surjection $H^m(P) \to H^m(E)$. \end{definition} 
\begin{definition} \label{definition-approximation} Let $X$ be a scheme. We say {\it approximation by perfect complexes holds} on $X$ if for any closed subset $T \subset X$ with $X \setminus T$ retro-compact in $X$ there exists an integer $r$ such that for every triple $(T, E, m)$ as in Definition \ref{definition-approximation-holds} with \begin{enumerate} \item $E$ is $(m - r)$-pseudo-coherent, and \item $H^i(E)$ is supported on $T$ for $i \geq m - r$ \end{enumerate} approximation holds. \end{definition} 
\begin{lemma} \label{lemma-open} Let $X$ be a scheme. Let $U \subset X$ be an open subscheme. Let $(T, E, m)$ be a triple as in Definition \ref{definition-approximation-holds}. If \begin{enumerate} \item $T \subset U$, \item approximation holds for $(T, E|_U, m)$, and \item the sheaves $H^i(E)$ for $i \geq m$ are supported on $T$, \end{enumerate} then approximation holds for $(T, E, m)$. \end{lemma} 
\begin{lemma} \label{lemma-approximation-affine} Let $X$ be an affine scheme. Then approximation holds for every triple $(T, E, m)$ as in Definition \ref{definition-approximation-holds} such that there exists an integer $r \geq 0$ with \begin{enumerate} \item $E$ is $m$-pseudo-coherent, \item $H^i(E)$ is supported on $T$ for $i \geq m - r + 1$, \item $X \setminus T$ is the union of $r$ affine opens. \end{enumerate} In particular, approximation by perfect complexes holds for affine schemes. \end{lemma} 
\begin{lemma} \label{lemma-induction-step} Let $X$ be a scheme. Let $X = U \cup V$ be an open covering with $U$ quasi-compact, $V$ affine, and $U \cap V$ quasi-compact. If approximation by perfect complexes holds on $U$, then approximation holds on $X$. \end{lemma} 
\begin{theorem} \label{theorem-approximation} Let $X$ be a quasi-compact and quasi-separated scheme. Then approximation by perfect complexes holds on $X$. \end{theorem} 
\begin{lemma} \label{lemma-direct-summand-of-a-restriction} Let $X$ be a quasi-compact and quasi-separated scheme. Let $U$ be a quasi-compact open subscheme. Let $P$ be a perfect object of $D(\mathcal{O}_U)$. Then $P$ is a direct summand of the restriction of a perfect object of $D(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-orthogonal-koszul-complex} \begin{reference} \cite[Proposition 6.1]{Bokstedt-Neeman} \end{reference} In Situation \ref{situation-complex} denote $j : U \to X$ the open immersion and let $K$ be the perfect object of $D(\mathcal{O}_X)$ corresponding to the Koszul complex on $f_1, \ldots, f_r$ over $A$. For $E \in D_\QCoh(\mathcal{O}_X)$ the following are equivalent \begin{enumerate} \item $E = Rj_*(E|_U)$, and \item $\Hom_{D(\mathcal{O}_X)}(K[n], E) = 0$ for all $n \in \mathbf{Z}$. \end{enumerate} \end{lemma} 
\begin{theorem} \label{theorem-bondal-van-den-Bergh} Let $X$ be a quasi-compact and quasi-separated scheme. The category $D_\QCoh(\mathcal{O}_X)$ can be generated by a single perfect object. More precisely, there exists a perfect object $P$ of $D(\mathcal{O}_X)$ such that for  $E \in D_\QCoh(\mathcal{O}_X)$ the following are equivalent \begin{enumerate} \item $E = 0$, and \item $\Hom_{D(\mathcal{O}_X)}(P[n], E) = 0$ for all $n \in \mathbf{Z}$. \end{enumerate} \end{theorem} 
\begin{lemma} \label{lemma-generator-with-support} \begin{reference} \cite[Theorem 6.8]{Rouquier-dimensions} \end{reference} Let $X$ be a quasi-compact and quasi-separated scheme. Let $T \subset X$ be a closed subset such that $X \setminus T$ is quasi-compact. With notation as above, the category $D_{\QCoh, T}(\mathcal{O}_X)$ is generated by a single perfect object. \end{lemma} 
\begin{lemma} \label{lemma-nonzero-some-cohomology} Let $X$ be a scheme and $\mathcal{L}$ an ample invertible $\mathcal{O}_X$-module. If $K$ is a nonzero object of $D_\QCoh(\mathcal{O}_X)$, then for some $n \geq 0$ and $p \in \mathbf{Z}$ the cohomology group $H^p(X, K \otimes_{\mathcal{O}_X}^\mathbf{L} \mathcal{L}^{\otimes n})$ is nonzero. \end{lemma} 
\begin{lemma} \label{lemma-construct-the-next-one} Let $A$ be a ring. Let $X = \mathbf{P}^n_A$. For every $a \in \mathbf{Z}$ there exists an exact complex $$ 0 \to \mathcal{O}_X(a) \to \ldots \to \mathcal{O}_X(a + i)^{\oplus {n + 1 \choose i}} \to \ldots \to \mathcal{O}_X(a + n + 1) \to 0 $$ of vector bundles on $X$. \end{lemma} 
\begin{lemma} \label{lemma-generator-P1} Let $A$ be a ring. Let $X = \mathbf{P}^n_A$. Then $$ E = \mathcal{O}_X \oplus \mathcal{O}_X(-1) \oplus \ldots \oplus \mathcal{O}_X(-n) $$ is a generator (Derived Categories, Definition \ref{derived-definition-generators}) of $D_\QCoh(X)$. \end{lemma} 
\begin{proposition} \label{proposition-compact-is-perfect} Let $X$ be a quasi-compact and quasi-separated scheme. An object of $D_\QCoh(\mathcal{O}_X)$ is compact if and only if it is perfect. \end{proposition} 
\begin{lemma} \label{lemma-compact-is-perfect-with-support} Let $X$ be a quasi-compact and quasi-separated scheme. Let $T \subset X$ be a closed subset such that $X \setminus T$ is quasi-compact. An object of $D_{\QCoh, T}(\mathcal{O}_X)$ is compact if and only if it is perfect as an object of $D(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-map-from-pseudo-coherent-to-complex-with-support} Let $X$ be a quasi-compact and quasi-separated scheme. Let $T \subset X$ be a closed subset such that $U = X \setminus T$ is quasi-compact. Let $\alpha : P \to E$ be a morphism of $D_\QCoh(\mathcal{O}_X)$ with either \begin{enumerate} \item $P$ is perfect and $E$ supported on $T$, or \item $P$ pseudo-coherent, $E$ supported on $T$, and $E$ bounded below. \end{enumerate} Then there exists a perfect complex of $\mathcal{O}_X$-modules $I$ and a map $I \to \mathcal{O}_X[0]$ such that $I \otimes^\mathbf{L} P \to E$ is zero and such that $I|_U \to \mathcal{O}_U[0]$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-tensor-with-QCoh-complex} Let $X$ be a scheme. Let $K^\bullet$ be a complex of $\mathcal{O}_X$-modules whose cohomology sheaves are quasi-coherent. Let $(E, d) = \Hom_{\text{Comp}^{dg}(\mathcal{O}_X)}(K^\bullet, K^\bullet)$ be the endomorphism differential graded algebra. Then the functor $$ - \otimes_E^\mathbf{L} K^\bullet : D(E, \text{d}) \longrightarrow D(\mathcal{O}_X) $$ of Differential Graded Algebra, Lemma \ref{dga-lemma-tensor-with-complex-derived} has image contained in $D_\QCoh(\mathcal{O}_X)$. \end{lemma} 
\begin{theorem} \label{theorem-DQCoh-is-Ddga} Let $X$ be a quasi-compact and quasi-separated scheme. Then there exist a differential graded algebra $(E, \text{d})$ with only a finite number of nonzero cohomology groups $H^i(E)$ such that $D_\QCoh(\mathcal{O}_X)$ is equivalent to $D(E, \text{d})$. \end{theorem} 
\begin{lemma} \label{lemma-pseudo-coherent-hocolim} Let $X$ be a quasi-compact and quasi-separated scheme. Let $K \in D(\mathcal{O}_X)$. The following are equivalent \begin{enumerate} \item $K$ is pseudo-coherent, and \item $K = \text{hocolim} K_n$ where $K_n$ is perfect and $\tau_{\geq -n}K_n \to \tau_{\geq -n}K$ is an isomorphism for all $n$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-pseudo-coherent-hocolim-with-support} Let $X$ be a quasi-compact and quasi-separated scheme. Let $T \subset X$ be a closed subset such that $X \setminus T$ is quasi-compact. Let $K \in D(\mathcal{O}_X)$ supported on $T$. The following are equivalent \begin{enumerate} \item $K$ is pseudo-coherent, and \item $K = \text{hocolim} K_n$ where $K_n$ is perfect, supported on $T$, and $\tau_{\geq -n}K_n \to \tau_{\geq -n}K$ is an isomorphism for all $n$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-Pn-module-category} \begin{reference} \cite{Beilinson} \end{reference} Let $A$ be a ring. Let $X = \mathbf{P}^n_A = \text{Proj}(S)$ where $S = A[X_0, \ldots, X_n]$. With $P$ as in (\ref{equation-generator-Pn}) and $R$ as in (\ref{equation-algebra-for-Pn}) the functor $$ - \otimes_R^\mathbf{L} P : D(R) \longrightarrow D_\QCoh(\mathcal{O}_X) $$ is an $A$-linear equivalence of triangulated categories sending $R$ to $P$. \end{lemma} 
\begin{lemma} \label{lemma-better-coherator} Let $X$ be a quasi-compact and quasi-separated scheme. The inclusion functor $D_\QCoh(\mathcal{O}_X) \to D(\mathcal{O}_X)$ has a right adjoint $DQ_X$. \end{lemma} 
\begin{lemma} \label{lemma-pushforward-better-coherator} Let $f : X \to Y$ be a quasi-compact and quasi-separated morphism of schemes. If the right adjoints $DQ_X$ and $DQ_Y$ of the inclusion functors $D_\QCoh \to D$ exist for $X$ and $Y$, then $$ Rf_* \circ DQ_X = DQ_Y \circ Rf_* $$ \end{lemma} 
\begin{lemma} \label{lemma-boundedness-better-coherator} Let $X$ be a quasi-compact and quasi-separated scheme. The functor $DQ_X$ of Lemma \ref{lemma-better-coherator} has the following boundedness property: there exists an integer $N = N(X)$ such that, if $K$ in $D(\mathcal{O}_X)$ with $H^i(U, K) = 0$ for $U$ affine open in $X$ and $i \not \in [a, b]$, then the cohomology sheaves $H^i(DQ_X(K))$ are zero for $i \not \in [a, b + N]$. \end{lemma} 
\begin{lemma} \label{lemma-cohomology-base-change} Let $f : X \to Y$ be a quasi-compact and quasi-separated morphism of schemes. For $E$ in $D_\QCoh(\mathcal{O}_X)$ and $K$ in $D_\QCoh(\mathcal{O}_Y)$ the map $$ Rf_*(E) \otimes_{\mathcal{O}_Y}^\mathbf{L} K \longrightarrow Rf_*(E \otimes_{\mathcal{O}_X}^\mathbf{L} Lf^*K) $$ defined in Cohomology, Equation (\ref{cohomology-equation-projection-formula-map}) is an isomorphism. \end{lemma} 
\begin{definition} \label{definition-tor-independent} Let $S$ be a scheme. Let $X$, $Y$ be schemes over $S$. We say $X$ and $Y$ are {\it Tor independent over $S$} if for every $x \in X$ and $y \in Y$ mapping to the same point $s \in S$ the rings $\mathcal{O}_{X, x}$ and $\mathcal{O}_{Y, y}$ are Tor independent over $\mathcal{O}_{S, s}$ (see More on Algebra, Definition \ref{more-algebra-definition-tor-independent}). \end{definition} 
\begin{lemma} \label{lemma-tor-independent} Let $f : X \to S$ and $g : Y \to S$ be morphisms of schemes. The following are equivalent \begin{enumerate} \item $X$ and $Y$ are tor independent over $S$, and \item for every affine opens $U \subset X$, $V \subset Y$, $W \subset S$ with $f(U) \subset W$ and $g(V) \subset W$ the rings $\mathcal{O}_X(U)$ and $\mathcal{O}_Y(V)$ are tor independent over $\mathcal{O}_S(W)$. \item there exists an affine open overing $S = \bigcup W_i$ and for each $i$ affine open coverings $f^{-1}(W_i) = \bigcup U_{ij}$ and $g^{-1}(W_i) = \bigcup V_{ik}$ such that the rings $\mathcal{O}_X(U_{ij})$ and $\mathcal{O}_Y(V_{ik})$ are tor independent over $\mathcal{O}_S(W_i)$ for all $i, j, k$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-flat-base-change-tor-independent} Let $X \to S$ and $Y \to S$ be morphisms of schemes. Let $S' \to S$ be a morphism of schemes and denote $X' = X \times_S S'$ and $Y' = Y \times_S S'$. If $X$ and $Y$ are tor independent over $S$ and $S' \to S$ is flat, then $X'$ and $Y'$ are tor independent over $S'$. \end{lemma} 
\begin{lemma} \label{lemma-compare-base-change} Let $g : S' \to S$ be a morphism of schemes. Let $f : X \to S$ be quasi-compact and quasi-separated. Consider the base change diagram $$ \xymatrix{ X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\ S' \ar[r]^g & S } $$ If $X$ and $S'$ are Tor independent over $S$, then for all $E \in D_\QCoh(\mathcal{O}_X)$ we have $Rf'_*L(g')^*E = Lg^*Rf_*E$. \end{lemma} 
\begin{lemma} \label{lemma-affine-morphism-and-hom-out-of-perfect} Consider a cartesian square $$ \xymatrix{ X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\ S' \ar[r]^g & S } $$ of quasi-compact and quasi-separated schemes. Assume $g$ and $f$ Tor independent and $S = \Spec(R)$, $S' = \Spec(R')$ affine. For $M, K \in D(\mathcal{O}_X)$ the canonical map $$ R\Hom_X(M, K) \otimes^\mathbf{L}_R R' \longrightarrow R\Hom_{X'}(L(g')^*M, L(g')^*K) $$ in $D(R')$ is an isomorphism in the following two cases \begin{enumerate} \item $M \in D(\mathcal{O}_X)$ is perfect and $K \in D_\QCoh(X)$, or \item $M \in D(\mathcal{O}_X)$ is pseudo-coherent, $K \in D_\QCoh^+(X)$, and $R'$ has finite tor dimension over $R$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-tor-independence-and-tor-amplitude} Consider a cartesian square of schemes $$ \xymatrix{ X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\ S' \ar[r]^g & S } $$ Assume $g$ and $f$ Tor independent. \begin{enumerate} \item If $E \in D(\mathcal{O}_X)$ has tor amplitude in $[a, b]$ as a complex of $f^{-1}\mathcal{O}_S$-modules, then $L(g')^*E$ has tor amplitude in $[a, b]$ as a complex of $f^{-1}\mathcal{O}_{S'}$-modules. \item If $\mathcal{G}$ is an $\mathcal{O}_X$-module flat over $S$, then $L(g')^*\mathcal{G} = (g')^*\mathcal{G}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-compare-base-change-closed-immersion} Consider a cartesian diagram of schemes $$ \xymatrix{ Z' \ar[r]_{i'} \ar[d]_g & X' \ar[d]^f \\ Z \ar[r]^i & X } $$ where $i$ is a closed immersion. If $Z$ and $X'$ are tor independent over $X$, then $Ri'_* \circ Lg^* = Lf^* \circ Ri_*$ as functors $D(\mathcal{O}_Z) \to D(\mathcal{O}_{X'})$. \end{lemma} 
\begin{lemma} \label{lemma-kunneth} In the situation above, if $a$ and $b$ are quasi-compact and quasi-separated and $X$ and $Y$ are tor-independent over $S$, then (\ref{equation-kunneth}) is an isomorphism for $K \in D_\QCoh(\mathcal{O}_X)$ and $M \in D_\QCoh(\mathcal{O}_Y)$. If in addition $S = \Spec(A)$ is affine, then the map (\ref{equation-kunneth-global}) is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-cohomology-de-rham-base-change} Let $a : X \to S$ be a quasi-compact and quasi-separated morphism of schemes. Let $\mathcal{F}^\bullet$ be a locally bounded complex of $a^{-1}\mathcal{O}_S$-modules. Assume for all $n \in \mathbf{Z}$ the sheaf $\mathcal{F}^n$ is a flat $a^{-1}\mathcal{O}_S$-module and $\mathcal{F}^n$ has the structure of a quasi-coherent $\mathcal{O}_X$-module compatible with the given $a^{-1}\mathcal{O}_S$-module structure (but the differentials in the complex $\mathcal{F}^\bullet$ need not be $\mathcal{O}_X$-linear). Then the following hold \begin{enumerate} \item $Ra_*\mathcal{F}^\bullet$ is locally bounded, \item $Ra_*\mathcal{F}^\bullet$ is in $D_\QCoh(\mathcal{O}_S)$, \item $Ra_*\mathcal{F}^\bullet$ locally has finite tor dimension, \item $\mathcal{G} \otimes_{\mathcal{O}_S}^\mathbf{L} Ra_*\mathcal{F}^\bullet = Ra_*(a^{-1}\mathcal{G} \otimes_{a^{-1}\mathcal{O}_S} \mathcal{F}^\bullet)$ for $\mathcal{G} \in \QCoh(\mathcal{O}_S)$, and \item $K \otimes_{\mathcal{O}_S}^\mathbf{L} Ra_*\mathcal{F}^\bullet = Ra_*(a^{-1}K \otimes_{a^{-1}\mathcal{O}_S}^\mathbf{L} \mathcal{F}^\bullet)$ for $K \in D_\QCoh(\mathcal{O}_S)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-K-flat} Let $f : X \to Y$ be a morphism of schemes with $Y = \Spec(A)$ affine. Let $\mathcal{U} : X = \bigcup_{i \in I} U_i$ be a finite affine open covering such that all the finite intersections $U_{i_0 \ldots i_p} = U_{i_0} \cap \ldots \cap U_{i_p}$ are affine. Let $\mathcal{F}^\bullet$ be a bounded complex of $f^{-1}\mathcal{O}_Y$-modules. Assume for all $n \in \mathbf{Z}$ the sheaf $\mathcal{F}^n$ is a flat $f^{-1}\mathcal{O}_Y$-module and $\mathcal{F}^n$ has the structure of a quasi-coherent $\mathcal{O}_X$-module compatible with the given $p^{-1}\mathcal{O}_Y$-module structure (but the differentials in the complex $\mathcal{F}^\bullet$ need not be $\mathcal{O}_X$-linear). Then the complex $\text{Tot}(\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F}^\bullet))$ is K-flat as a complex of $A$-modules. \end{lemma} 
\begin{lemma} \label{lemma-kunneth-single-sheaf} In the situation above the map (\ref{equation-kunneth-single-sheaves}) is an isomorphism if $S$ is affine, $\mathcal{F}$ and $\mathcal{G}$ are $S$-flat and quasi-coherent and $X$ and $Y$ are quasi-compact with affine diagonal. \end{lemma} 
\begin{lemma} \label{lemma-kunneth-special} In the situation above the cup product (\ref{equation-de-rham-kunneth}) is an isomorphism in $D(A)$ if the following assumptions hold \begin{enumerate} \item $S = \Spec(A)$ is affine, \item $X$ and $Y$ are quasi-compact with affine diagonal, \item $\mathcal{F}^\bullet$ is bounded, \item $\mathcal{G}^\bullet$ is bounded below, \item $\mathcal{F}^n$ is $S$-flat, and \item $\mathcal{G}^m$ is $S$-flat. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-kunneth-Ext} In the situation above, assume $a$ and $b$ are quasi-compact and quasi-separated and $X$ and $Y$ are tor independent over $S$. If $K$ is perfect, $K' \in D_\QCoh(\mathcal{O}_X)$, $M$ is perfect, and $M' \in D_\QCoh(\mathcal{O}_Y)$, then (\ref{equation-kunneth-ext}) is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-single-complex-base-change-condition} Let $$ \xymatrix{ X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\ S' \ar[r]^g & S } $$ be a cartesian diagram of schemes. Let $K \in D_\QCoh(\mathcal{O}_X)$ and let $L(g')^*K \to K'$ be a map in $D_\QCoh(\mathcal{O}_{X'})$. The following are equivalent \begin{enumerate} \item for any $x' \in X'$ and $i \in \mathbf{Z}$ the map (\ref{equation-bc}) is an isomorphism, \item for $U \subset X$, $V' \subset S'$ affine open both mapping into the affine open $V \subset S$ with $U' = V' \times_V U$ the composition $$ R\Gamma(U, K) \otimes_{\mathcal{O}_S(U)}^\mathbf{L} \mathcal{O}_{S'}(V') \to R\Gamma(U, K) \otimes_{\mathcal{O}_X(U)}^\mathbf{L} \mathcal{O}_{X'}(U') \to R\Gamma(U', K') $$ is an isomorphism in $D(\mathcal{O}_{S'}(V'))$, and \item there is a set $I$ of quadruples $U_i, V_i', V_i, U_i'$, $i \in I$ as in (2) with $X' = \bigcup U'_i$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-single-complex-base-change} Let $$ \xymatrix{ X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\ S' \ar[r]^g & S } $$ be a cartesian diagram of schemes. Let $K \in D_\QCoh(\mathcal{O}_X)$ and let $L(g')^*K \to K'$ be a map in $D_\QCoh(\mathcal{O}_{X'})$. If \begin{enumerate} \item the equivalent conditions of Lemma \ref{lemma-single-complex-base-change-condition} hold, and \item $f$ is quasi-compact and quasi-separated, \end{enumerate} then the composition $Lg^*Rf_*K \to Rf'_*L(g')^*K \to Rf'_*K'$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-single-complex-base-change-condition-inherited} Let $$ \xymatrix{ X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\ S' \ar[r]^g & S } $$ be a cartesian diagram of schemes. Let $K \in D_\QCoh(\mathcal{O}_X)$ and let $L(g')^*K \to K'$ be a map in $D_\QCoh(\mathcal{O}_{X'})$. If the equivalent conditions of Lemma \ref{lemma-single-complex-base-change-condition} hold, then \begin{enumerate} \item for $E \in D_\QCoh(\mathcal{O}_X)$ the equivalent conditions of Lemma \ref{lemma-single-complex-base-change-condition} hold for $L(g')^*(E \otimes^\mathbf{L} K) \to L(g')^*E \otimes^\mathbf{L} K'$, \item if $E$ in $D(\mathcal{O}_X)$ is perfect the equivalent conditions of Lemma \ref{lemma-single-complex-base-change-condition} hold for $L(g')^*R\SheafHom(E, K) \to R\SheafHom(L(g')^*E, K')$, and \item if $K$ is bounded below and $E$ in $D(\mathcal{O}_X)$ pseudo-coherent the equivalent conditions of Lemma \ref{lemma-single-complex-base-change-condition} hold for $L(g')^*R\SheafHom(E, K) \to R\SheafHom(L(g')^*E, K')$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-base-change-tensor} Let $f : X \to S$ be a quasi-compact and quasi-separated morphism of schemes. Let $E \in D_\QCoh(\mathcal{O}_X)$. Let $\mathcal{G}^\bullet$ be a bounded above complex of quasi-coherent $\mathcal{O}_X$-modules flat over $S$. Then formation of $$ Rf_*(E \otimes^\mathbf{L}_{\mathcal{O}_X} \mathcal{G}^\bullet) $$ commutes with arbitrary base change (see proof for precise statement). \end{lemma} 
\begin{lemma} \label{lemma-base-change-RHom} Let $f : X \to S$ be a quasi-compact and quasi-separated morphism of schemes. Let $E$ be an object of $D(\mathcal{O}_X)$. Let $\mathcal{G}^\bullet$ be a complex of quasi-coherent $\mathcal{O}_X$-modules. If \begin{enumerate} \item $E$ is perfect, $\mathcal{G}^\bullet$ is a bounded above, and $\mathcal{G}^n$ is flat over $S$, or \item $E$ is pseudo-coherent, $\mathcal{G}^\bullet$ is bounded, and $\mathcal{G}^n$ is flat over $S$, \end{enumerate} then formation of $$ Rf_*R\SheafHom(E, \mathcal{G}^\bullet) $$ commutes with arbitrary base change (see proof for precise statement). \end{lemma} 
\begin{lemma} \label{lemma-perfect-direct-image} Let $S$ be a Noetherian scheme. Let $f : X \to S$ be a morphism of schemes which is locally of finite type. Let $E \in D(\mathcal{O}_X)$ such that \begin{enumerate} \item $E \in D^b_{\textit{Coh}}(\mathcal{O}_X)$, \item the support of $H^i(E)$ is proper over $S$ for all $i$, and \item $E$ has finite tor dimension as an object of $D(f^{-1}\mathcal{O}_S)$. \end{enumerate} Then $Rf_*E$ is a perfect object of $D(\mathcal{O}_S)$. \end{lemma} 
\begin{lemma} \label{lemma-tensor-perfect} Let $S$ be a Noetherian scheme. Let $f : X \to S$ be a morphism of schemes which is locally of finite type. Let $E \in D(\mathcal{O}_X)$ be perfect. Let $\mathcal{G}^\bullet$ be a bounded complex of coherent $\mathcal{O}_X$-modules flat over $S$ with support proper over $S$. Then $K = Rf_*(E \otimes_{\mathcal{O}_X}^\mathbf{L} \mathcal{G}^\bullet)$ is a perfect object of $D(\mathcal{O}_S)$. \end{lemma} 
\begin{lemma} \label{lemma-ext-perfect} Let $S$ be a Noetherian scheme. Let $f : X \to S$ be a morphism of schemes which is locally of finite type. Let $E \in D(\mathcal{O}_X)$ be perfect. Let $\mathcal{G}^\bullet$ be a bounded complex of coherent $\mathcal{O}_X$-modules flat over $S$ with support proper over $S$. Then $K = Rf_*R\SheafHom(E, \mathcal{G}^\bullet)$ is a perfect object of $D(\mathcal{O}_S)$. \end{lemma} 
\begin{lemma} \label{lemma-flat-proper-perfect-direct-image} Let $S$ be a Noetherian scheme. Let $f : X \to S$ be a flat proper morphism of schemes. Let $E \in D(\mathcal{O}_X)$ be perfect. Then $Rf_*E$ is a perfect object of $D(\mathcal{O}_S)$. \end{lemma} 
\begin{lemma} \label{lemma-compute-tensor-perfect} Assumptions and notation as in Lemma \ref{lemma-tensor-perfect}. Then there are functorial isomorphisms $$ H^i(S, K \otimes^\mathbf{L}_{\mathcal{O}_S} \mathcal{F}) \longrightarrow H^i(X, E \otimes_{\mathcal{O}_X}^\mathbf{L} (\mathcal{G}^\bullet \otimes_{\mathcal{O}_X} f^*\mathcal{F})) $$ for $\mathcal{F}$ quasi-coherent on $S$ compatible with boundary maps (see proof). \end{lemma} 
\begin{lemma} \label{lemma-compute-ext-perfect} Assumptions and notation as in Lemma \ref{lemma-ext-perfect}. Then there are functorial isomorphisms $$ H^i(S, K \otimes^\mathbf{L}_{\mathcal{O}_S} \mathcal{F}) \longrightarrow \Ext^i_{\mathcal{O}_X}(E, \mathcal{G}^\bullet \otimes_{\mathcal{O}_X} f^*\mathcal{F}) $$ for $\mathcal{F}$ quasi-coherent on $S$ compatible with boundary maps (see proof). \end{lemma} 
\begin{lemma} \label{lemma-compute-ext} Let $f : X \to S$ be a morphism of schemes, $E \in D(\mathcal{O}_X)$ and $\mathcal{G}^\bullet$ a complex of $\mathcal{O}_X$-modules. Assume \begin{enumerate} \item $S$ is Noetherian, \item $f$ is locally of finite type, \item $E \in D^-_{\textit{Coh}}(\mathcal{O}_X)$, \item $\mathcal{G}^\bullet$ is a bounded complex of coherent $\mathcal{O}_X$-modules flat over $S$ with support proper over $S$. \end{enumerate} Then the following two statements are true \begin{enumerate} \item[(A)] for every $m \in \mathbf{Z}$ there exists a perfect object $K$ of $D(\mathcal{O}_S)$ and functorial maps $$ \alpha^i_\mathcal{F} : \Ext^i_{\mathcal{O}_X}(E, \mathcal{G}^\bullet \otimes_{\mathcal{O}_X} f^*\mathcal{F}) \longrightarrow H^i(S, K \otimes^\mathbf{L}_{\mathcal{O}_S} \mathcal{F}) $$ for $\mathcal{F}$ quasi-coherent on $S$ compatible with boundary maps (see proof) such that $\alpha^i_\mathcal{F}$ is an isomorphism for $i \leq m$ \item[(B)] there exists a pseudo-coherent $L \in D(\mathcal{O}_S)$ and functorial isomorphisms $$ \Ext^i_{\mathcal{O}_S}(L, \mathcal{F}) \longrightarrow \Ext^i_{\mathcal{O}_X}(E, \mathcal{G}^\bullet \otimes_{\mathcal{O}_X} f^*\mathcal{F}) $$ for $\mathcal{F}$ quasi-coherent on $S$ compatible with boundary maps. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-descend-homomorphisms} In Situation \ref{situation-descent}. Let $E_0$ and $K_0$ be objects of $D(\mathcal{O}_{S_0})$. Set $E_i = Lf_{i0}^*E_0$ and $K_i = Lf_{i0}^*K_0$ for $i \geq 0$ and set $E = Lf_0^*E_0$ and $K = Lf_0^*K_0$. Then the map $$ \colim_{i \geq 0} \Hom_{D(\mathcal{O}_{S_i})}(E_i, K_i) \longrightarrow \Hom_{D(\mathcal{O}_S)}(E, K) $$ is an isomorphism if either \begin{enumerate} \item $E_0$ is perfect and $K_0 \in D_\QCoh(\mathcal{O}_{S_0})$, or \item $E_0$ is pseudo-coherent and $K_0 \in D_\QCoh(\mathcal{O}_{S_0})$ has finite tor dimension. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-descend-perfect} In Situation \ref{situation-descent} the category of perfect objects of $D(\mathcal{O}_S)$ is the colimit of the categories of perfect objects of $D(\mathcal{O}_{S_i})$. \end{lemma} 
\begin{lemma} \label{lemma-base-change-tensor-perfect} Let $f : X \to S$ be a morphism of finite presentation. Let $E \in D(\mathcal{O}_X)$ be a perfect object. Let $\mathcal{G}^\bullet$ be a bounded complex of finitely presented $\mathcal{O}_X$-modules, flat over $S$, with support proper over $S$. Then $$ K = Rf_*(E \otimes_{\mathcal{O}_X}^\mathbf{L} \mathcal{G}^\bullet) $$ is a perfect object of $D(\mathcal{O}_S)$ and its formation commutes with arbitrary base change. \end{lemma} 
\begin{lemma} \label{lemma-base-change-tensor-pseudo-coherent} Let $f : X \to S$ be a morphism of finite presentation. Let $E \in D(\mathcal{O}_X)$ be a pseudo-coherent object. Let $\mathcal{G}^\bullet$ be a bounded above complex of finitely presented $\mathcal{O}_X$-modules, flat over $S$, with support proper over $S$. Then $$ K = Rf_*(E \otimes_{\mathcal{O}_X}^\mathbf{L} \mathcal{G}^\bullet) $$ is a pseudo-coherent object of $D(\mathcal{O}_S)$ and its formation commutes with arbitrary base change. \end{lemma} 
\begin{lemma} \label{lemma-flat-proper-perfect-direct-image-general} Let $S$ be a scheme. Let $f : X \to S$ be a proper morphism of finite presentation. \begin{enumerate} \item Let $E \in D(\mathcal{O}_X)$ be perfect and $f$ flat. Then $Rf_*E$ is a perfect object of $D(\mathcal{O}_S)$ and its formation commutes with arbitrary base change. \item Let $\mathcal{G}$ be an $\mathcal{O}_X$-module of finite presentation, flat over $S$. Then $Rf_*\mathcal{G}$ is a perfect object of $D(\mathcal{O}_S)$ and its formation commutes with arbitrary base change. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-flat-proper-pseudo-coherent-direct-image-general} Let $S$ be a scheme. Let $f : X \to S$ be a flat proper morphism of finite presentation. Let $E \in D(\mathcal{O}_X)$ be pseudo-coherent. Then $Rf_*E$ is a pseudo-coherent object of $D(\mathcal{O}_S)$ and its formation commutes with arbitrary base change. \end{lemma} 
\begin{lemma} \label{lemma-pullback-and-limits} Let $R$ be a ring. Let $X$ be a scheme and let $f : X \to \Spec(R)$ be proper, flat, and of finite presentation. Let $(M_n)$ be an inverse system of $R$-modules with surjective transition maps. Then the canonical map $$ \mathcal{O}_X \otimes_R (\lim M_n) \longrightarrow \lim \mathcal{O}_X \otimes_R M_n $$ induces an isomorphism from the source to $DQ_X$ applied to the target. \end{lemma} 
\begin{lemma} \label{lemma-base-change-RHom-perfect} Let $f : X \to S$ be a morphism of finite presentation. Let $E \in D(\mathcal{O}_X)$ be a perfect object. Let $\mathcal{G}^\bullet$ be a bounded complex of finitely presented $\mathcal{O}_X$-modules, flat over $S$, with support proper over $S$. Then $$ K = Rf_*R\SheafHom(E, \mathcal{G}^\bullet) $$ is a perfect object of $D(\mathcal{O}_S)$ and its formation commutes with arbitrary base change. \end{lemma} 
\begin{lemma} \label{lemma-jump-loci} Let $X$ be a scheme. Let $E \in D(\mathcal{O}_X)$ be pseudo-coherent (for example perfect). For any $i \in \mathbf{Z}$ consider the function $$ \beta_i : X \longrightarrow \{0, 1, 2, \ldots\},\quad x \longmapsto \dim_{\kappa(x)} H^i(E \otimes_{\mathcal{O}_X}^\mathbf{L} \kappa(x)) $$ Then we have \begin{enumerate} \item formation of $\beta_i$ commutes with arbitrary base change, \item the functions $\beta_i$ are upper semi-continuous, and \item the level sets of $\beta_i$ are locally constructible in $X$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-chi-locally-constant} Let $X$ be a scheme. Let $E \in D(\mathcal{O}_X)$ be perfect. The function $$ \chi_E : X \longrightarrow \mathbf{Z},\quad x \longmapsto \sum (-1)^i \dim_{\kappa(x)} H^i(E \otimes_{\mathcal{O}_X}^\mathbf{L} \kappa(x)) $$ is locally constant on $X$. \end{lemma} 
\begin{lemma} \label{lemma-open-where-cohomology-in-degree-i-rank-r} Let $X$ be a scheme. Let $E \in D(\mathcal{O}_X)$ be perfect. Given $i, r \in \mathbf{Z}$, there exists an open subscheme $U \subset X$ characterized by the following \begin{enumerate} \item $E|_U \cong H^i(E|_U)[-i]$ and $H^i(E|_U)$ is a locally free $\mathcal{O}_U$-module of rank $r$, \item a morphism $f : Y \to X$ factors through $U$ if and only if $Lf^*E$ is isomorphic to a locally free module of rank $r$ placed in degree $i$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-locally-closed-where-H0-locally-free} Let $X$ be a scheme. Let $E \in D(\mathcal{O}_X)$ be perfect of tor-amplitude in $[a, b]$ for some $a, b \in \mathbf{Z}$. Let $r \geq 0$. Then there exists a locally closed subscheme $j : Z \to X$ characterized by the following \begin{enumerate} \item $H^a(Lj^*E)$ is a locally free $\mathcal{O}_Z$-module of rank $r$, and \item a morphism $f : Y \to X$ factors through $Z$ if and only if for all morphisms $g : Y' \to Y$ the $\mathcal{O}_{Y'}$-module $H^a(L(f \circ g)^*E)$ is locally free of rank $r$. \end{enumerate} Moreover, $j : Z \to X$ is of finite presentation and we have \begin{enumerate} \item[(3)] if $f : Y \to X$ factors as $Y \xrightarrow{g} Z \to X$, then $H^a(Lf^*E) = g^*H^a(Lj^*E)$, \item[(4)] if $\beta_a(x) \leq r$ for all $x \in X$, then $j$ is a closed immersion and given $f : Y \to X$ the following are equivalent \begin{enumerate} \item $f : Y \to X$ factors through $Z$, \item $H^0(Lf^*E)$ is a locally free $\mathcal{O}_Y$-module of rank $r$, \end{enumerate} and if $r = 1$ these are also equivalent to \begin{enumerate} \item[(c)] $\mathcal{O}_Y \to \SheafHom_{\mathcal{O}_Y}(H^0(Lf^*E), H^0(Lf^*E))$ is injective. \end{enumerate} \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-jump-loci-geometric} Let $f : X \to S$ be a flat, proper morphism of finite presentation. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module of finite presentation, flat over $S$. For fixed $i \in \mathbf{Z}$ consider the function $$ \beta_i : S \to \{0, 1, 2, \ldots\},\quad s \longmapsto \dim_{\kappa(s)} H^i(X_s, \mathcal{F}_s) $$ Then we have \begin{enumerate} \item formation of $\beta_i$ commutes with arbitrary base change, \item the functions $\beta_i$ are upper semi-continuous, and \item the level sets of $\beta_i$ are locally constructible in $S$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-chi-locally-constant-geometric} Let $f : X \to S$ be a flat, proper morphism of finite presentation. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module of finite presentation, flat over $S$. The function $$ s \longmapsto \chi(X_s, \mathcal{F}_s) $$ is locally constant on $S$. Formation of this function commutes with base change. \end{lemma} 
\begin{lemma} \label{lemma-open-where-cohomology-in-degree-i-rank-r-geometric} Let $f : X \to S$ be a proper morphism of finite presentation. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module of finite presentation, flat over $S$. Fix $i, r \in \mathbf{Z}$. Then there exists an open subscheme $U \subset S$ with the following property: A morphism $T \to S$ factors through $U$ if and only if $Rf_{T, *}\mathcal{F}_T$ is isomorphic to a finite locally free module of rank $r$ placed in degree $i$. \end{lemma} 
\begin{lemma} \label{lemma-vanishing-implies-locally-free} Let $f : X \to S$ be a morphism of finite presentation. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module of finite presentation, flat over $S$ with support proper over $S$. If $R^if_*\mathcal{F} = 0$ for $i > 0$, then $f_*\mathcal{F}$ is locally free and its formation commutes with arbitrary base change (see proof for explanation). \end{lemma} 
\begin{lemma} \label{lemma-proper-flat-h0} Let $f : X \to S$ be a morphism of schemes. Assume \begin{enumerate} \item $f$ is proper, flat, and of finite presentation, and \item for all $s \in S$ we have $\kappa(s) = H^0(X_s, \mathcal{O}_{X_s})$. \end{enumerate} Then we have \begin{enumerate} \item[(a)] $f_*\mathcal{O}_X = \mathcal{O}_S$ and this holds after any base change, \item[(b)] locally on $S$ we have $$ Rf_*\mathcal{O}_X = \mathcal{O}_S \oplus P $$ in $D(\mathcal{O}_S)$ where $P$ is perfect of tor amplitude in $[1, \infty)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-proper-flat-geom-red-connected} Let $f : X \to S$ be a morphism of schemes. Assume \begin{enumerate} \item $f$ is proper, flat, and of finite presentation, and \item the geometric fibres of $f$ are reduced and connected. \end{enumerate} Then $f_*\mathcal{O}_X = \mathcal{O}_S$ and this holds after any base change. \end{lemma} 
\begin{lemma} \label{lemma-proper-idempotent-on-fibre} Let $f : X \to S$ be a proper morphism of schemes. Let $s \in S$ and let $e \in H^0(X_s, \mathcal{O}_{X_s})$ be an idempotent. Then $e$ is in the image of the map $(f_*\mathcal{O}_X)_s \to H^0(X_s, \mathcal{O}_{X_s})$. \end{lemma} 
\begin{lemma} \label{lemma-proper-flat-geom-red} Let $f : X \to S$ be a morphism of schemes. Let $s \in S$. Assume \begin{enumerate} \item $f$ is proper, flat, and of finite presentation, and \item the fibre $X_s$ is geometrically reduced. \end{enumerate} Then, after replacing $S$ by an open neighbourhood of $s$, there exists a direct sum decomposition $Rf_*\mathcal{O}_X = f_*\mathcal{O}_X \oplus P$ in $D(\mathcal{O}_S)$ where $f_*\mathcal{O}_X$ is a finite \'etale $\mathcal{O}_S$-algebra and $P$ is a perfect of tor amplitude in $[1, \infty)$. \end{lemma} 
\begin{lemma} \label{lemma-cohomology-over-coherent-ring} Let $R$ be a coherent ring. Let $X$ be a scheme of finite presentation over $R$. Let $\mathcal{G}$ be an $\mathcal{O}_X$-module of finite presentation, flat over $R$, with support proper over $R$. Then $H^i(X, \mathcal{G})$ is a coherent $R$-module. \end{lemma} 
\begin{lemma} \label{lemma-countable-cohomology} Let $X$ be a quasi-compact and quasi-separated scheme. Let $K$ be an object of $D_\QCoh(\mathcal{O}_X)$ such that the cohomology sheaves $H^i(K)$ have countable sets of sections over affine opens. Then for any quasi-compact open $U \subset X$ and any perfect object $E$ in $D(\mathcal{O}_X)$ the sets $$ H^i(U, K \otimes^\mathbf{L} E),\quad \Ext^i(E|_U, K|_U) $$ are countable. \end{lemma} 
\begin{lemma} \label{lemma-countable} Let $X$ be a quasi-compact and quasi-separated scheme such that the sets of sections of $\mathcal{O}_X$ over affine opens are countable. Let $K$ be an object of $D_\QCoh(\mathcal{O}_X)$. The following are equivalent \begin{enumerate} \item $K = \text{hocolim} E_n$ with $E_n$ a perfect object of $D(\mathcal{O}_X)$, and \item the cohomology sheaves $H^i(K)$ have countable sets of sections over affine opens. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-computing-sections-as-colim} Let $A$ be a ring. Let $X$ be a scheme of finite presentation over $A$. Let $f : U \to X$ be a flat morphism of finite presentation. Then \begin{enumerate} \item there exists an inverse system of perfect objects $L_n$ of $D(\mathcal{O}_X)$ such that $$ R\Gamma(U, Lf^*K) = \text{hocolim}\ R\Hom_X(L_n, K) $$ in $D(A)$ functorially in $K$ in $D_\QCoh(\mathcal{O}_X)$, and \item there exists a system of perfect objects $E_n$ of $D(\mathcal{O}_X)$ such that $$ R\Gamma(U, Lf^*K) = \text{hocolim}\ R\Gamma(X, E_n \otimes^\mathbf{L} K) $$ in $D(A)$ functorially in $K$ in $D_\QCoh(\mathcal{O}_X)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-pseudo-coherent-over-algebra} Let $A$ be a ring. Let $R$ be a (possibly noncommutative) $A$-algebra which is finite free as an $A$-module. Then any object $M$ of $D(R)$ which is pseudo-coherent in $D(A)$ can be represented by a bounded above complex of finite free (right) $R$-modules. \end{lemma} 
\begin{lemma} \label{lemma-pseudo-coherent-on-projective-space} Let $A$ be a ring. Let $n \geq 0$. Let $K \in D_\QCoh(\mathcal{O}_{\mathbf{P}^n_A})$. The following are equivalent \begin{enumerate} \item $K$ is pseudo-coherent, \item $R\Gamma(\mathbf{P}^n_A, E \otimes^\mathbf{L} K)$ is a pseudo-coherent object of $D(A)$ for each pseudo-coherent object $E$ of $D(\mathcal{O}_{\mathbf{P}^n_A})$, \item $R\Gamma(\mathbf{P}^n_A, E \otimes^\mathbf{L} K)$ is a pseudo-coherent object of $D(A)$ for each perfect object $E$ of $D(\mathcal{O}_{\mathbf{P}^n_A})$, \item $R\Hom_{\mathbf{P}^n_A}(E, K)$ is a pseudo-coherent object of $D(A)$ for each perfect object $E$ of $D(\mathcal{O}_{\mathbf{P}^n_A})$, \item $R\Gamma(\mathbf{P}^n_A, K \otimes^\mathbf{L} \mathcal{O}_{\mathbf{P}^n_A}(d))$ is pseudo-coherent object of $D(A)$ for $d = 0, 1, \ldots, n$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-perfect-enough} Let $A$ be a ring. Let $X$ be a scheme over $A$ which is quasi-compact and quasi-separated. Let $K \in D^-_\QCoh(\mathcal{O}_X)$. If $R\Gamma(X, E \otimes^\mathbf{L} K)$ is pseudo-coherent in $D(A)$ for every perfect $E$ in $D(\mathcal{O}_X)$, then $R\Gamma(X, E \otimes^\mathbf{L} K)$ is pseudo-coherent in $D(A)$ for every pseudo-coherent $E$ in $D(\mathcal{O}_X)$. \end{lemma} 
\begin{definition} \label{definition-relatively-perfect} Let $f : X \to S$ be a morphism of schemes which is flat and locally of finite presentation. An object $E$ of $D(\mathcal{O}_X)$ is {\it perfect relative to $S$} or {\it $S$-perfect} if $E$ is pseudo-coherent (Cohomology, Definition \ref{cohomology-definition-pseudo-coherent}) and $E$ locally has finite tor dimension as an object of $D(f^{-1}\mathcal{O}_S)$ (Cohomology, Definition \ref{cohomology-definition-tor-amplitude}). \end{definition} 
\begin{lemma} \label{lemma-affine-locally-rel-perfect} Let $f : X \to S$ be a morphism of schemes which is flat and locally of finite presentation. Let $E$ be an object of $D_\QCoh(\mathcal{O}_X)$. The following are equivalent \begin{enumerate} \item $E$ is $S$-perfect, \item for any affine open $U \subset X$ mapping into an affine open $V \subset S$ the complex $R\Gamma(U, E)$ is $\mathcal{O}_S(V)$-perfect. \item there exists an affine open covering $S = \bigcup V_i$ and for each $i$ an affine open covering $f^{-1}(V_i) = \bigcup U_{ij}$ such that the complex $R\Gamma(U_{ij}, E)$ is $\mathcal{O}_S(V_i)$-perfect. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-triangulated} Let $f : X \to S$ be a morphism of schemes which is flat and locally of finite presentation. The full subcategory of $D(\mathcal{O}_X)$ consisting of $S$-perfect objects is a saturated\footnote{Derived Categories, Definition \ref{derived-definition-saturated}.} triangulated subcategory. \end{lemma} 
\begin{lemma} \label{lemma-perfect-relatively-perfect} Let $f : X \to S$ be a morphism of schemes which is flat and locally of finite presentation. A perfect object of $D(\mathcal{O}_X)$ is $S$-perfect. If $K, M \in D(\mathcal{O}_X)$, then $K \otimes_{\mathcal{O}_X}^\mathbf{L} M$ is $S$-perfect if $K$ is perfect and $M$ is $S$-perfect. \end{lemma} 
\begin{lemma} \label{lemma-base-change-relatively-perfect} Let $f : X \to S$ be a morphism of schemes which is flat and locally of finite presentation. Let $g : S' \to S$ be a morphism of schemes. Set $X' = S' \times_S X$ and denote $g' : X' \to X$ the projection. If $K \in D(\mathcal{O}_X)$ is $S$-perfect, then $L(g')^*K$ is $S'$-perfect. \end{lemma} 
\begin{lemma} \label{lemma-relative-descend-homomorphisms} In Situation \ref{situation-relative-descent}. Let $K_0$ and $L_0$ be objects of $D(\mathcal{O}_{X_0})$. Set $K_i = Lf_{i0}^*K_0$ and $L_i = Lf_{i0}^*L_0$ for $i \geq 0$ and set $K = Lf_0^*K_0$ and $L = Lf_0^*L_0$. Then the map $$ \colim_{i \geq 0} \Hom_{D(\mathcal{O}_{X_i})}(K_i, L_i) \longrightarrow \Hom_{D(\mathcal{O}_X)}(K, L) $$ is an isomorphism if $K_0$ is pseudo-coherent and $L_0 \in D_\QCoh(\mathcal{O}_{X_0})$ has (locally) finite tor dimension as an object of $D((X_0 \to S_0)^{-1}\mathcal{O}_{S_0})$ \end{lemma} 
\begin{lemma} \label{lemma-descend-relatively-perfect} In Situation \ref{situation-relative-descent} the category of $S$-perfect objects of $D(\mathcal{O}_X)$ is the colimit of the categories of $S_i$-perfect objects of $D(\mathcal{O}_{X_i})$. \end{lemma} 
\begin{lemma} \label{lemma-derived-pushforward-rel-perfect} Let $f : X \to S$ be a morphism of schemes which is flat, proper, and of finite presentation. Let $E \in D(\mathcal{O}_X)$ be $S$-perfect. Then $Rf_*E$ is a perfect object of $D(\mathcal{O}_S)$ and its formation commutes with arbitrary base change. \end{lemma} 
\begin{lemma} \label{lemma-compute-ext-rel-perfect} Let $f : X \to S$ be a morphism of schemes. Let $E, K \in D(\mathcal{O}_X)$. Assume \begin{enumerate} \item $S$ is quasi-compact and quasi-separated, \item $f$ is proper, flat, and of finite presentation, \item $E$ is $S$-perfect, \item $K$ is pseudo-coherent. \end{enumerate} Then there exists a pseudo-coherent $L \in D(\mathcal{O}_S)$ such that $$ Rf_*R\SheafHom(K, E) = R\SheafHom(L, \mathcal{O}_S) $$ and the same is true after arbitrary base change: given $$ \vcenter{ \xymatrix{ X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\ S' \ar[r]^g & S } } \quad\quad \begin{matrix} \text{cartesian, then we have } \\ Rf'_*R\SheafHom(L(g')^*K, L(g')^*E) \\ = R\SheafHom(Lg^*L, \mathcal{O}_{S'}) \end{matrix} $$ \end{lemma} 
\begin{lemma} \label{lemma-bounded-on-fibres} Let $f : X \to S$ be a morphism of schemes which is flat and locally of finite presentation. Let $E$ be a pseudo-coherent object of $D(\mathcal{O}_X)$. The following are equivalent \begin{enumerate} \item $E$ is $S$-perfect, and \item $E$ is locally bounded below and for every point $s \in S$ the object $L(X_s \to X)^*E$ of $D(\mathcal{O}_{X_s})$ is locally bounded below. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-resolution-property} Let $X$ be a scheme. We say $X$ has the {\it resolution property} if every quasi-coherent $\mathcal{O}_X$-module of finite type is the quotient of a finite locally free $\mathcal{O}_X$-module. \end{definition} 
\begin{lemma} \label{lemma-resolution-property-ample} Let $X$ be a scheme. If $X$ has an ample invertible $\mathcal{O}_X$-module, then $X$ has the resolution property. \end{lemma} 
\begin{lemma} \label{lemma-resolution-property-ample-relative} Let $f : X \to Y$ be a morphism of schemes. Assume \begin{enumerate} \item $Y$ is quasi-compact and quasi-separated and has the resolution property, \item there exists an $f$-ample invertible module on $X$. \end{enumerate} Then $X$ has the resolution property. \end{lemma} 
\begin{lemma} \label{lemma-resolution-property-goes-up-affine} Let $f : X \to Y$ be an affine or quasi-affine morphism of schemes with $Y$ quasi-compact and quasi-separated. If $Y$ has the resolution property, so does $X$. \end{lemma} 
\begin{lemma} \label{lemma-resolution-property-goes-down-finite-flat} Let $f : X \to Y$ be a surjective finite locally free morphism of schemes. If $X$ has the resolution property, so does $Y$. \end{lemma} 
\begin{lemma} \label{lemma-resolution-property-finite-number} Let $X$ be a scheme. Suppose given \begin{enumerate} \item a finite affine open covering $X = U_1 \cup \ldots \cup U_m$ \item finite type quasi-coherent ideals $\mathcal{I}_j$ with $V(\mathcal{I}_j) = X \setminus U_j$ \end{enumerate} Then $X$ has the resolution property if and only if $\mathcal{I}_j$ is the quotient of a finite locally free $\mathcal{O}_X$-module for $j = 1, \ldots, m$. \end{lemma} 
\begin{lemma} \label{lemma-resolution-property-ample-family} Let $X$ be a scheme. If $X$ has an ample family of invertible modules (Morphisms, Definition \ref{morphisms-definition-family-ample-invertible-modules}), then $X$ has the resolution property. \end{lemma} 
\begin{lemma} \label{lemma-regular-resolution-property} Let $X$ be a quasi-compact, regular scheme with affine diagonal. Then $X$ has the resolution property. \end{lemma} 
\begin{lemma} \label{lemma-resolution-property-descends} Let $X = \lim X_i$ be a limit of a direct system of quasi-compact and quasi-separated schemes with affine transition morphisms. Then $X$ has the resolution property if and only if $X_i$ has the resolution properties for some $i$. \end{lemma} 
\begin{lemma} \label{lemma-resolution-property-affine-diagonal} \begin{reference} Special case of \cite[Proposition 1.3]{totaro_resolution}. \end{reference} Let $X$ be a quasi-compact and quasi-separated scheme with the resolution property. Then $X$ has affine diagonal. \end{lemma} 
\begin{lemma} \label{lemma-construct-strictly-perfect} Let $X$ be a quasi-compact and quasi-separated scheme with the resolution property. Let $\mathcal{F}^\bullet$ be a bounded below complex of quasi-coherent $\mathcal{O}_X$-modules representing a perfect object of $D(\mathcal{O}_X)$. Then there exists a bounded complex $\mathcal{E}^\bullet$ of finite locally free $\mathcal{O}_X$-modules and a quasi-isomorphism $\mathcal{E}^\bullet \to \mathcal{F}^\bullet$. \end{lemma} 
\begin{lemma} \label{lemma-resolution-property-perfect-complex} Let $X$ be a quasi-compact and quasi-separated scheme with the resolution property. Then every perfect object of $D(\mathcal{O}_X)$ can be represented by a bounded complex of finite locally free $\mathcal{O}_X$-modules. \end{lemma} 
\begin{lemma} \label{lemma-resolution-property-map-perfect-complex} Let $X$ be a quasi-compact and quasi-separated scheme with the resolution property. Let $\mathcal{E}^\bullet$ and $\mathcal{F}^\bullet$ be finite complexes of finite locally free $\mathcal{O}_X$-modules. Then any $\alpha \in \Hom_{D(\mathcal{O}_X)}(\mathcal{E}^\bullet, \mathcal{F}^\bullet)$ can be represented by a diagram $$ \mathcal{E}^\bullet \leftarrow \mathcal{G}^\bullet \to \mathcal{F}^\bullet $$ where $\mathcal{G}^\bullet$ is a bounded complex of finite locally free $\mathcal{O}_X$-modules and where $\mathcal{G}^\bullet \to \mathcal{E}^\bullet$ is a quasi-isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-resolution-property-homotopy-map-perfect-complex} Let $X$ be a quasi-compact and quasi-separated scheme with the resolution property. Let $\mathcal{E}^\bullet$ and $\mathcal{F}^\bullet$ be finite complexes of finite locally free $\mathcal{O}_X$-modules. Let $\alpha^\bullet, \beta^\bullet :\mathcal{E}^\bullet \to \mathcal{F}^\bullet$ be two maps of complexes defining the same map in $D(\mathcal{O}_X)$. Then there exists a quasi-isomorphism $\gamma^\bullet : \mathcal{G}^\bullet \to \mathcal{E}^\bullet$ where $\mathcal{G}^\bullet$ is a bounded complex of finite locally free $\mathcal{O}_X$-modules such that $\alpha^\bullet \circ \gamma^\bullet$ and $\beta^\bullet \circ \gamma^\bullet$ are homotopic maps of complexes. \end{lemma} 
\begin{proposition} \label{proposition-perfect-resolution-property} Let $X$ be a quasi-compact and quasi-separated scheme with the resolution property. Denote \begin{enumerate} \item $\mathcal{A}$ the additive category of finite locally free $\mathcal{O}_X$-modules, \item $K^b(\mathcal{A})$ the homotopy category of bounded complexes in $\mathcal{A}$, see Derived Categories, Section \ref{derived-section-homotopy}, and \item $D_{perf}(\mathcal{O}_X)$ the strictly full, saturated, triangulated subcategory of $D(\mathcal{O}_X)$ consisting of perfect objects. \end{enumerate} With this notation the obvious functor $$ K^b(\mathcal{A}) \longrightarrow D_{perf}(\mathcal{O}_X) $$ is an exact functor of trianglated categories which factors through an equivalence $S^{-1}K^b(\mathcal{A}) \to D_{perf}(\mathcal{O}_X)$ of triangulated categories where $S$ is the saturated multiplicative system of quasi-isomorphisms in $K^b(\mathcal{A})$. \end{proposition} 
\begin{lemma} \label{lemma-Noetherian-Kprime} Let $X$ be a Noetherian scheme. Then $$ K_0(\textit{Coh}(\mathcal{O}_X)) = K_0(D^b(\textit{Coh}(\mathcal{O}_X)) = K_0(D^b_{\textit{Coh}}(\mathcal{O}_X)) $$ \end{lemma} 
\begin{definition} \label{definition-K-group} Let $X$ be a scheme. \begin{enumerate} \item We denote $K_0(X)$ the {\it Grothendieck group of $X$}. It is the zeroth K-group of the strictly full, saturated, triangulated subcategory $D_{perf}(\mathcal{O}_X)$ of $D(\mathcal{O}_X)$ consisting of perfect objects. In a formula $$ K_0(X) = K_0(D_{perf}(\mathcal{O}_X)) $$ \item If $X$ is locally Noetherian, then we denote $K'_0(X)$ the {\it Grothendieck group of coherent sheaves on $X$}. It is the is the zeroth $K$-group of the abelian category of coherent $\mathcal{O}_X$-modules. In a formula $$ K'_0(X) = K_0(\textit{Coh}(\mathcal{O}_X)) $$ \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-K-agrees-affine} Let $X = \Spec(R)$ be an affine scheme. Then $K_0(X) = K_0(R)$ and if $R$ is Noetherian then $K'_0(X) = K'_0(R)$. \end{lemma} 
\begin{lemma} \label{lemma-Kprime-K} Let $X$ be a Noetherian regular scheme. Then the map $K_0(X) \to K'_0(X)$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-K-is-old-K} Let $X$ be a quasi-compact and quasi-separated scheme with the resolution property. Then the map $K_0(\textit{Vect}(X)) \to K_0(X)$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-projection-formula} Let $f : X \to Y$ be a proper morphism of locally Noetherian schemes. Then we have $f_*(\alpha \cdot f^*\beta) = f_*\alpha \cdot \beta$ for $\alpha \in K'_0(X)$ and $\beta \in K_0(Y)$. \end{lemma} 
\begin{lemma} \label{lemma-determinant-two-term-complexes} Let $X$ be a scheme. There is a functor $$ \det : \left\{ \begin{matrix} \text{category of perfect complexes} \\ \text{with tor amplitude in }[-1, 0] \\ \text{morphisms are isomorphisms} \end{matrix} \right\} \longrightarrow \left\{ \begin{matrix} \text{category of invertible modules} \\ \text{morphisms are isomorphisms} \end{matrix} \right\} $$ In addition, given a rank $0$ perfect object $L$ of $D(\mathcal{O}_X)$ with tor-amplitude in $[-1, 0]$ there is a canonical element $\delta(L) \in \Gamma(X, \det(L))$ such that for any isomorphism $a : L \to K$ in $D(\mathcal{O}_X)$ we have $\det(a)(\delta(L)) = \delta(K)$. Moreover, the construction is affine locally given by the construction of More on Algebra, Section \ref{more-algebra-section-determinants-complexes}. \end{lemma} 
\begin{lemma} \label{lemma-orthogonal-koszul-first-variant} In Situation \ref{situation-complex} denote $j : U \to X$ the open immersion and let $K$ be the perfect object of $D(\mathcal{O}_X)$ corresponding to the Koszul complex on $f_1, \ldots, f_r$ over $A$. Let $E \in D_\QCoh(\mathcal{O}_X)$ and $a \in \mathbf{Z}$. Consider the following conditions \begin{enumerate} \item The canonical map $\tau_{\geq a}E \to \tau_{\geq a} Rj_*(E|_U)$ is an isomorphism. \item We have $\Hom_{D(\mathcal{O}_X)}(K[-n], E) = 0$ for all $n \geq a$. \end{enumerate} Then (2) implies (1) and (1) implies (2) with $a$ replaced by $a + 1$. \end{lemma} 
\begin{lemma} \label{lemma-orthogonal-koszul-second-variant} In Situation \ref{situation-complex} denote $j : U \to X$ the open immersion and let $K$ be the perfect object of $D(\mathcal{O}_X)$ corresponding to the Koszul complex on $f_1, \ldots, f_r$ over $A$. Let $E \in D_\QCoh(\mathcal{O}_X)$ and $a \in \mathbf{Z}$. Consider the following conditions \begin{enumerate} \item The canonical map $\tau_{\leq a}E \to \tau_{\leq a} Rj_*(E|_U)$ is an isomorphism, and \item $\Hom_{D(\mathcal{O}_X)}(K[-n], E) = 0$ for all $n \leq a$. \end{enumerate} Then (2) implies (1) and (1) implies (2) with $a$ replaced by $a - 1$. \end{lemma} 
\begin{lemma} \label{lemma-bounded-truncation} Let $X$ be a quasi-compact and quasi-separated scheme. Let $P \in D_{perf}(\mathcal{O}_X)$ and $E \in D_{\QCoh}(\mathcal{O}_X)$.  Let $a \in \mathbf{Z}$. The following are equivalent \begin{enumerate} \item $\Hom_{D(\mathcal{O}_X)}(P[-i], E) = 0$ for $i \gg 0$, and \item $\Hom_{D(\mathcal{O}_X)}(P[-i], \tau_{\geq a} E) = 0$ for $i \gg 0$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-bounded-below-truncation} Let $X$ be a quasi-compact and quasi-separated scheme. Let $P \in D_{perf}(\mathcal{O}_X)$ and $E \in D_{\QCoh}(\mathcal{O}_X)$. Let $a \in \mathbf{Z}$. The following are equivalent \begin{enumerate} \item $\Hom_{D(\mathcal{O}_X)}(P[-i], E) = 0$ for $i \ll 0$, and \item $\Hom_{D(\mathcal{O}_X)}(P[-i], \tau_{\leq a} E) = 0$ for $i \ll 0$. \end{enumerate} \end{lemma} 
\begin{proposition} \label{proposition-detecting-bounded-above} Let $X$ be a quasi-compact and quasi-separated scheme. Let $G \in D_{perf}(\mathcal{O}_X)$ be a perfect complex which generates  $D_\QCoh (\mathcal{O}_X)$. Let $E \in D_\QCoh (\mathcal{O}_X)$. The following are equivalent \begin{enumerate} \item $E \in D^-_\QCoh (\mathcal{O}_X)$, \item $\Hom_{D(\mathcal{O}_X)}(G[-i], E) = 0$ for $i \gg 0$, \item $\Ext^i_X(G, E) = 0$ for $i \gg 0$, \item $R\Hom_X(G, E)$ is in $D^-(\mathbf{Z})$, \item $H^i(X, G^\vee \otimes_{\mathcal{O}_X}^\mathbf{L} E) = 0$ for $i \gg 0$, \item $R\Gamma(X, G^\vee \otimes_{\mathcal{O}_X}^\mathbf{L} E)$ is in $D^-(\mathbf{Z})$, \item for every perfect object $P$ of $D(\mathcal{O}_X)$ \begin{enumerate} \item the assertions (2), (3), (4) hold with $G$ replaced by $P$, and \item $H^i(X, P \otimes_{\mathcal{O}_X}^\mathbf{L} E) = 0$ for $i \gg 0$, \item $R\Gamma(X, P \otimes_{\mathcal{O}_X}^\mathbf{L} E)$ is in $D^-(\mathbf{Z})$. \end{enumerate} \end{enumerate} \end{proposition} 
\begin{proposition} \label{proposition-detecting-bounded-below} Let $X$ be a quasi-compact and quasi-separated scheme. Let $G \in D_{perf}(\mathcal{O}_X)$ be a perfect complex which generates $D_\QCoh (\mathcal{O}_X)$. Let $E \in D_\QCoh (\mathcal{O}_X)$. The following are equivalent \begin{enumerate} \item $E \in D^+_\QCoh (\mathcal{O}_X)$, \item $\Hom_{D(\mathcal{O}_X)}(G[-i], E) = 0$ for $i \ll 0$, \item $\Ext^i_X(G, E) = 0$ for $i \ll 0$, \item $R\Hom_X(G, E)$ is in $D^+(\mathbf{Z})$, \item $H^i(X, G^\vee \otimes_{\mathcal{O}_X}^\mathbf{L} E) = 0$ for $i \ll 0$, \item $R\Gamma(X, G^\vee \otimes_{\mathcal{O}_X}^\mathbf{L} E)$ is in $D^+(\mathbf{Z})$, \item for every perfect object $P$ of $D(\mathcal{O}_X)$ \begin{enumerate} \item the assertions (2), (3), (4) hold with $G$ replaced by $P$, and \item $H^i(X, P \otimes_{\mathcal{O}_X}^\mathbf{L} E) = 0$ for $i \ll 0$, \item $R\Gamma(X, P \otimes_{\mathcal{O}_X}^\mathbf{L} E)$ is in $D^+(\mathbf{Z})$. \end{enumerate} \end{enumerate} \end{proposition} 
\begin{lemma} \label{lemma-DQCoh-alternative-small} In the situation above there are canonical exact equivalences between the following triangulated categories \begin{enumerate} \item $D_\QCoh(\mathcal{O}_X)$, \item $D_\QCoh(X_{Zar}, \mathcal{O})$, \item $D_\QCoh(X_{affine, Zar}, \mathcal{O})$, \item $D_\QCoh(X_{affine}, \mathcal{O}_X)$, and \item $\mathit{QC}(X_{affine}, \mathcal{O})$. \end{enumerate} \end{lemma} 
