\begin{lemma} \label{lemma-locally-constructible} Let $X$ be a scheme. A subset $E$ of $X$ is locally constructible in $X$ if and only if $E \cap U$ is constructible in $U$ for every affine open $U$ of $X$. \end{lemma} 
\begin{lemma} \label{lemma-generic-point-in-constructible} Let $X$ be a scheme and let $E \subset X$ be a locally constructible subset. Let $\xi \in X$ be a generic point of an irreducible component of $X$. \begin{enumerate} \item If $\xi \in E$, then an open neighbourhood of $\xi$ is contained in $E$. \item If $\xi \not \in E$, then an open neighbourhood of $\xi$ is disjoint from $E$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-quasi-separated-quasi-compact-open-retrocompact} Let $X$ be a quasi-separated scheme. The intersection of any two quasi-compact opens of $X$ is a quasi-compact open of $X$. Every quasi-compact open of $X$ is retrocompact in $X$. \end{lemma} 
\begin{lemma} \label{lemma-quasi-compact-quasi-separated-spectral} Let $X$ be a quasi-compact and quasi-separated scheme. Then the underlying topological space of $X$ is a spectral space. \end{lemma} 
\begin{lemma} \label{lemma-constructible-quasi-compact-quasi-separated} Let $X$ be a quasi-compact and quasi-separated scheme. Any locally constructible subset of $X$ is constructible. \end{lemma} 
\begin{lemma} \label{lemma-retrocompact} Let $X$ be a scheme. A subset $E$ of $X$ is retrocompact in $X$ if and only if $E \cap U$ is quasi-compact for every affine open $U$ of $X$. \end{lemma} 
\begin{lemma} \label{lemma-stratification-locally-finite-constructible} A partition $X = \coprod_{i \in I} X_i$ of a scheme $X$ with retrocompact parts is locally finite if and only if the parts are locally constructible. \end{lemma} 
\begin{definition} \label{definition-integral} Let $X$ be a scheme. We say $X$ is {\it integral} if it is nonempty and for every nonempty affine open $\Spec(R) = U \subset X$ the ring $R$ is an integral domain. \end{definition} 
\begin{lemma} \label{lemma-characterize-reduced} Let $X$ be a scheme. The following are equivalent. \begin{enumerate} \item The scheme $X$ is reduced, see Schemes, Definition \ref{schemes-definition-reduced}. \item There exists an affine open covering $X = \bigcup U_i$ such that each $\Gamma(U_i, \mathcal{O}_X)$ is reduced. \item For every affine open $U \subset X$ the ring $\mathcal{O}_X(U)$ is reduced. \item For every open $U \subset X$ the ring $\mathcal{O}_X(U)$ is reduced. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-characterize-irreducible} Let $X$ be a scheme. The following are equivalent. \begin{enumerate} \item The scheme $X$ is irreducible. \item There exists an affine open covering $X = \bigcup_{i \in I} U_i$ such that $I$ is not empty, $U_i$ is irreducible for all $i \in I$, and $U_i \cap U_j \not = \emptyset$ for all $i, j \in I$. \item The scheme $X$ is nonempty and every nonempty affine open $U \subset X$ is irreducible. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-characterize-integral} A scheme $X$ is integral if and only if it is reduced and irreducible. \end{lemma} 
\begin{definition} \label{definition-property-local} Let $P$ be a property of rings. We say that $P$ is {\it local} if the following hold: \begin{enumerate} \item For any ring $R$, and any $f \in R$ we have $P(R) \Rightarrow P(R_f)$. \item For any ring $R$, and $f_i \in R$ such that $(f_1, \ldots, f_n) = R$ then $\forall i, P(R_{f_i}) \Rightarrow P(R)$. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-locally-P} Let $P$ be a property of rings. Let $X$ be a scheme. We say $X$ is {\it locally $P$} if for any $x \in X$ there exists an affine open neighbourhood $U$ of $x$ in $X$ such that $\mathcal{O}_X(U)$ has property $P$. \end{definition} 
\begin{lemma} \label{lemma-locally-P} Let $X$ be a scheme. Let $P$ be a local property of rings. The following are equivalent: \begin{enumerate} \item The scheme $X$ is locally $P$. \item For every affine open $U \subset X$ the property $P(\mathcal{O}_X(U))$ holds. \item There exists an affine open covering $X = \bigcup U_i$ such that each $\mathcal{O}_X(U_i)$ satisfies $P$. \item There exists an open covering $X = \bigcup X_j$ such that each open subscheme $X_j$ is locally $P$. \end{enumerate} Moreover, if $X$ is locally $P$ then every open subscheme is locally $P$. \end{lemma} 
\begin{lemma} \label{lemma-reduced-is-locally-reduced} Let $X$ be a scheme. Then $X$ is reduced if and only if $X$ is ``locally reduced'' in the sense of Definition \ref{definition-locally-P}. \end{lemma} 
\begin{lemma} \label{lemma-properties-local} The following properties of a ring $R$ are local. \begin{enumerate} \item (Cohen-Macaulay.) The ring $R$ is Noetherian and CM, see Algebra, Definition \ref{algebra-definition-ring-CM}. \item (Regular.) The ring $R$ is Noetherian and regular, see Algebra, Definition \ref{algebra-definition-regular}. \item (Absolutely Noetherian.) The ring $R$ is of finite type over $Z$. \item Add more here as needed.\footnote{But we only list those properties here which we have not already dealt with separately somewhere else.} \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-noetherian} Let $X$ be a scheme. \begin{enumerate} \item We say $X$ is {\it locally Noetherian} if every $x \in X$ has an affine open neighbourhood $\Spec(R) = U \subset X$ such that the ring $R$ is Noetherian. \item We say $X$ is {\it Noetherian} if $X$ is locally Noetherian and quasi-compact. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-locally-Noetherian} Let $X$ be a scheme. The following are equivalent: \begin{enumerate} \item The scheme $X$ is locally Noetherian. \item For every affine open $U \subset X$ the ring $\mathcal{O}_X(U)$ is Noetherian. \item There exists an affine open covering $X = \bigcup U_i$ such that each $\mathcal{O}_X(U_i)$ is Noetherian. \item There exists an open covering $X = \bigcup X_j$ such that each open subscheme $X_j$ is locally Noetherian. \end{enumerate} Moreover, if $X$ is locally Noetherian then every open subscheme is locally Noetherian. \end{lemma} 
\begin{lemma} \label{lemma-immersion-into-noetherian} Any immersion $Z \to X$ with $X$ locally Noetherian is quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-locally-Noetherian-quasi-separated} A locally Noetherian scheme is quasi-separated. \end{lemma} 
\begin{lemma} \label{lemma-Noetherian-topology} A (locally) Noetherian scheme has a (locally) Noetherian underlying topological space, see Topology, Definition \ref{topology-definition-noetherian}. \end{lemma} 
\begin{lemma} \label{lemma-locally-closed-in-Noetherian} Any locally closed subscheme of a (locally) Noetherian scheme is (locally) Noetherian. \end{lemma} 
\begin{lemma} \label{lemma-Noetherian-irreducible-components} A Noetherian scheme has a finite number of irreducible components. \end{lemma} 
\begin{lemma} \label{lemma-morphism-Noetherian-schemes-quasi-compact} Any morphism of schemes $f : X \to Y$ with $X$ Noetherian is quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-locally-Noetherian-closed-point} Any nonempty locally Noetherian scheme has a closed point. Any nonempty closed subset of a locally Noetherian scheme has a closed point. Equivalently, any point of a locally Noetherian scheme specializes to a closed point. \end{lemma} 
\begin{lemma} \label{lemma-locally-Noetherian-specialization-dvr} Let $X$ be a locally Noetherian scheme. Let $x' \leadsto x$ be a specialization of points of $X$. Then \begin{enumerate} \item there exists a discrete valuation ring $R$ and a morphism $f : \Spec(R) \to X$ such that the generic point $\eta$ of $\Spec(R)$ maps to $x'$ and the special point maps to $x$, and \item given a finitely generated field extension $K/\kappa(x')$ we may arrange it so that the extension $\kappa(\eta)/\kappa(x')$ induced by $f$ is isomorphic to the given one. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-thin-infinite-sequence} Let $S$ be a Noetherian scheme. Let $T \subset S$ be an infinite subset. Then there exists an infinite subset $T' \subset T$ such that there are no nontrivial specializations among the points $T'$. \end{lemma} 
\begin{lemma} \label{lemma-maximal-points} Let $S$ be a Noetherian scheme. Let $T \subset S$ be a subset. Let $T_0 \subset T$ be the set of $t \in T$ such that there is no nontrivial specialization $t' \leadsto t$ with $t' \in T'$. Then (a) there are no specializations among the points of $T_0$, (b) every point of $T$ is a specialization of a point of $T_0$, and (c) the closures of $T$ and $T_0$ are the same. \end{lemma} 
\begin{lemma} \label{lemma-countable-dense-subset} Let $S$ be a Noetherian scheme. Let $T \subset S$ be an infinite dense subset. Then there exist a countable subset $E \subset T$ which is dense in $S$. \end{lemma} 
\begin{definition} \label{definition-jacobson} A scheme $S$ is said to be {\it Jacobson} if its underlying topological space is Jacobson. \end{definition} 
\begin{lemma} \label{lemma-affine-jacobson} An affine scheme $\Spec(R)$ is Jacobson if and only if the ring $R$ is Jacobson. \end{lemma} 
\begin{lemma} \label{lemma-locally-jacobson} Let $X$ be a scheme. The following are equivalent: \begin{enumerate} \item The scheme $X$ is Jacobson. \item The scheme $X$ is ``locally Jacobson'' in the sense of Definition \ref{definition-locally-P}. \item For every affine open $U \subset X$ the ring $\mathcal{O}_X(U)$ is Jacobson. \item There exists an affine open covering $X = \bigcup U_i$ such that each $\mathcal{O}_X(U_i)$ is Jacobson. \item There exists an open covering $X = \bigcup X_j$ such that each open subscheme $X_j$ is Jacobson. \end{enumerate} Moreover, if $X$ is Jacobson then every open subscheme is Jacobson. \end{lemma} 
\begin{lemma} \label{lemma-complement-closed-point-Jacobson} Examples of Noetherian Jacobson schemes. \begin{enumerate} \item If $(R, \mathfrak m)$ is a Noetherian local ring, then the punctured spectrum $\Spec(R) \setminus \{\mathfrak m\}$ is a Jacobson scheme. \item If $R$ is a Noetherian ring with Jacobson radical $\text{rad}(R)$ then $\Spec(R) \setminus V(\text{rad}(R))$ is a Jacobson scheme. \item If $(R, I)$ is a Zariski pair (More on Algebra, Definition \ref{more-algebra-definition-zariski-pair}) with $R$ Noetherian, then $\Spec(R) \setminus V(I)$ is a Jacobson scheme. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-normal} A scheme $X$ is {\it normal} if and only if for all $x \in X$ the local ring $\mathcal{O}_{X, x}$ is a normal domain. \end{definition} 
\begin{lemma} \label{lemma-locally-normal} Let $X$ be a scheme. The following are equivalent: \begin{enumerate} \item The scheme $X$ is normal. \item For every affine open $U \subset X$ the ring $\mathcal{O}_X(U)$ is normal. \item There exists an affine open covering $X = \bigcup U_i$ such that each $\mathcal{O}_X(U_i)$ is normal. \item There exists an open covering $X = \bigcup X_j$ such that each open subscheme $X_j$ is normal. \end{enumerate} Moreover, if $X$ is normal then every open subscheme is normal. \end{lemma} 
\begin{lemma} \label{lemma-normal-reduced} A normal scheme is reduced. \end{lemma} 
\begin{lemma} \label{lemma-integral-normal} Let $X$ be an integral scheme. Then $X$ is normal if and only if for every nonempty affine open $U \subset X$ the ring $\mathcal{O}_X(U)$ is a normal domain. \end{lemma} 
\begin{lemma} \label{lemma-normal-locally-finite-nr-irreducibles} Let $X$ be a scheme such that any quasi-compact open has a finite number of irreducible components. The following are equivalent: \begin{enumerate} \item $X$ is normal, and \item $X$ is a disjoint union of normal integral schemes. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-normal-Noetherian} Let $X$ be a Noetherian scheme. The following are equivalent: \begin{enumerate} \item $X$ is normal, and \item $X$ is a finite disjoint union of normal integral schemes. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-normal-locally-Noetherian} Let $X$ be a locally Noetherian scheme. The following are equivalent: \begin{enumerate} \item $X$ is normal, and \item $X$ is a disjoint union of integral normal schemes. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-normal-integral-sections} \begin{slogan} The ring of functions on a normal scheme is normal. \end{slogan} Let $X$ be an integral normal scheme. Then $\Gamma(X, \mathcal{O}_X)$ is a normal domain. \end{lemma} 
\begin{definition} \label{definition-Cohen-Macaulay} Let $X$ be a scheme. We say $X$ is {\it Cohen-Macaulay} if for every $x \in X$ there exists an affine open neighbourhood $U \subset X$ of $x$ such that the ring $\mathcal{O}_X(U)$ is Noetherian and Cohen-Macaulay. \end{definition} 
\begin{lemma} \label{lemma-characterize-Cohen-Macaulay} Let $X$ be a scheme. The following are equivalent: \begin{enumerate} \item $X$ is Cohen-Macaulay, \item $X$ is locally Noetherian and all of its local rings are Cohen-Macaulay, and \item $X$ is locally Noetherian and for any closed point $x \in X$ the local ring $\mathcal{O}_{X, x}$ is Cohen-Macaulay. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-locally-Cohen-Macaulay} Let $X$ be a scheme. The following are equivalent: \begin{enumerate} \item The scheme $X$ is Cohen-Macaulay. \item For every affine open $U \subset X$ the ring $\mathcal{O}_X(U)$ is Noetherian and Cohen-Macaulay. \item There exists an affine open covering $X = \bigcup U_i$ such that each $\mathcal{O}_X(U_i)$ is Noetherian and Cohen-Macaulay. \item There exists an open covering $X = \bigcup X_j$ such that each open subscheme $X_j$ is Cohen-Macaulay. \end{enumerate} Moreover, if $X$ is Cohen-Macaulay then every open subscheme is Cohen-Macaulay. \end{lemma} 
\begin{definition} \label{definition-regular} Let $X$ be a scheme. We say $X$ is {\it regular}, or {\it nonsingular} if for every $x \in X$ there exists an affine open neighbourhood $U \subset X$ of $x$ such that the ring $\mathcal{O}_X(U)$ is Noetherian and regular. \end{definition} 
\begin{lemma} \label{lemma-characterize-regular} Let $X$ be a scheme. The following are equivalent: \begin{enumerate} \item $X$ is regular, \item $X$ is locally Noetherian and all of its local rings are regular, and \item $X$ is locally Noetherian and for any closed point $x \in X$ the local ring $\mathcal{O}_{X, x}$ is regular. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-locally-regular} Let $X$ be a scheme. The following are equivalent: \begin{enumerate} \item The scheme $X$ is regular. \item For every affine open $U \subset X$ the ring $\mathcal{O}_X(U)$ is Noetherian and regular. \item There exists an affine open covering $X = \bigcup U_i$ such that each $\mathcal{O}_X(U_i)$ is Noetherian and regular. \item There exists an open covering $X = \bigcup X_j$ such that each open subscheme $X_j$ is regular. \end{enumerate} Moreover, if $X$ is regular then every open subscheme is regular. \end{lemma} 
\begin{lemma} \label{lemma-regular-normal} A regular scheme is normal. \end{lemma} 
\begin{definition} \label{definition-dimension} Let $X$ be a scheme. \begin{enumerate} \item The {\it dimension} of $X$ is just the dimension of $X$ as a topological spaces, see Topology, Definition \ref{topology-definition-Krull}. \item For $x \in X$ we denote $\dim_x(X)$ the dimension of the underlying topological space of $X$ at $x$ as in Topology, Definition \ref{topology-definition-Krull}. We say $\dim_x(X)$ is the {\it dimension of $X$ at $x$}. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-dimension} Let $X$ be a scheme. The following are equal \begin{enumerate} \item The dimension of $X$. \item The supremum of the dimensions of the local rings of $X$. \item The supremum of $\dim_x(X)$ for $x \in X$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-codimension-local-ring} Let $X$ be a scheme. Let $Y \subset X$ be an irreducible closed subset. Let $\xi \in Y$ be the generic point. Then $$ \text{codim}(Y, X) = \dim(\mathcal{O}_{X, \xi}) $$ where the codimension is as defined in Topology, Definition \ref{topology-definition-codimension}. \end{lemma} 
\begin{lemma} \label{lemma-generic-point} Let $X$ be a scheme. Let $x \in X$. Then $x$ is a generic point of an irreducible component of $X$ if and only if $\dim(\mathcal{O}_{X, x}) = 0$. \end{lemma} 
\begin{lemma} \label{lemma-locally-Noetherian-dimension-0} A locally Noetherian scheme of dimension $0$ is a disjoint union of spectra of Artinian local rings. \end{lemma} 
\begin{lemma} \label{lemma-dimension-zero} \begin{reference} Email from Ofer Gabber dated June 4, 2016 \end{reference} Let $X$ be a scheme of dimension zero. The following are equivalent \begin{enumerate} \item $X$ is quasi-separated, \item $X$ is separated, \item $X$ is Hausdorff, \item every affine open is closed. \end{enumerate} In this case the connected components of $X$ are points and every quasi-compact open of $X$ is affine. In particular, if $X$ is quasi-compact, then $X$ is affine. \end{lemma} 
\begin{lemma} \label{lemma-isolated-dim-0-locally-noetherian} Let $x$ be a point of a locally Noetherian scheme $X$. Then $\dim_x(X) = 0$ if and only if $x$ is an isolated point of $X$. \end{lemma} 
\begin{definition} \label{definition-catenary} Let $S$ be a scheme. We say $S$ is {\it catenary} if the underlying topological space of $S$ is catenary. \end{definition} 
\begin{lemma} \label{lemma-catenary-local} Let $S$ be a scheme. The following are equivalent \begin{enumerate} \item $S$ is catenary, \item there exists an open covering of $S$ all of whose members are catenary schemes, \item for every affine open $\Spec(R) = U \subset S$ the ring $R$ is catenary, and \item there exists an affine open covering $S = \bigcup U_i$ such that each $U_i$ is the spectrum of a catenary ring. \end{enumerate} Moreover, in this case any locally closed subscheme of $S$ is catenary as well. \end{lemma} 
\begin{lemma} \label{lemma-catenary-dimension-function} Let $S$ be a locally Noetherian scheme. The following are equivalent: \begin{enumerate} \item $S$ is catenary, and \item locally in the Zariski topology there exists a dimension function on $S$ (see Topology, Definition \ref{topology-definition-dimension-function}). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-catenary-local-rings-catenary} Let $X$ be a scheme. The following are equivalent \begin{enumerate} \item $X$ is catenary, and \item for any $x \in X$ the local ring $\mathcal{O}_{X, x}$ is catenary. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-Rk} Let $X$ be a locally Noetherian scheme. Let $k \geq 0$. \begin{enumerate} \item We say $X$ is {\it regular in codimension $k$}, or we say $X$ has property {\it $(R_k)$} if for every $x \in X$ we have $$ \dim(\mathcal{O}_{X, x}) \leq k \Rightarrow \mathcal{O}_{X, x}\text{ is regular} $$ \item We say $X$ has property {\it $(S_k)$} if for every $x \in X$ we have $\text{depth}(\mathcal{O}_{X, x}) \geq \min(k, \dim(\mathcal{O}_{X, x}))$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-scheme-regular-iff-all-Rk} Let $X$ be a locally Noetherian scheme. Then $X$ is regular if and only if $X$ has $(R_k)$ for all $k \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-scheme-CM-iff-all-Sk} Let $X$ be a locally Noetherian scheme. Then $X$ is Cohen-Macaulay if and only if $X$ has $(S_k)$ for all $k \geq 0$. \end{lemma} 
\begin{lemma} \label{lemma-criterion-reduced} Let $X$ be a locally Noetherian scheme. Then $X$ is reduced if and only if $X$ has properties $(S_1)$ and $(R_0)$. \end{lemma} 
\begin{lemma} \label{lemma-criterion-normal} Let $X$ be a locally Noetherian scheme. Then $X$ is normal if and only if $X$ has properties $(S_2)$ and $(R_1)$. \end{lemma} 
\begin{lemma} \label{lemma-normal-dimension-1-regular} Let $X$ be a locally Noetherian scheme which is normal and has dimension $\leq 1$. Then $X$ is regular. \end{lemma} 
\begin{lemma} \label{lemma-normal-dimension-2-Cohen-Macaulay} Let $X$ be a locally Noetherian scheme which is normal and has dimension $\leq 2$. Then $X$ is Cohen-Macaulay. \end{lemma} 
\begin{definition} \label{definition-nagata} Let $X$ be a scheme. \begin{enumerate} \item Assume $X$ integral. We say $X$ is {\it Japanese} if for every $x \in X$ there exists an affine open neighbourhood $x \in U \subset X$ such that the ring $\mathcal{O}_X(U)$ is Japanese (see Algebra, Definition \ref{algebra-definition-N}). \item We say $X$ is {\it universally Japanese} if for every $x \in X$ there exists an affine open neighbourhood $x \in U \subset X$ such that the ring $\mathcal{O}_X(U)$ is universally Japanese (see Algebra, Definition \ref{algebra-definition-nagata}). \item We say $X$ is {\it Nagata} if for every $x \in X$ there exists an affine open neighbourhood $x \in U \subset X$ such that the ring $\mathcal{O}_X(U)$ is Nagata (see Algebra, Definition \ref{algebra-definition-nagata}). \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-nagata-locally-Noetherian} A Nagata scheme is locally Noetherian. \end{lemma} 
\begin{lemma} \label{lemma-locally-Japanese} Let $X$ be an integral scheme. The following are equivalent: \begin{enumerate} \item The scheme $X$ is Japanese. \item For every affine open $U \subset X$ the domain $\mathcal{O}_X(U)$ is Japanese. \item There exists an affine open covering $X = \bigcup U_i$ such that each $\mathcal{O}_X(U_i)$ is Japanese. \item There exists an open covering $X = \bigcup X_j$ such that each open subscheme $X_j$ is Japanese. \end{enumerate} Moreover, if $X$ is Japanese then every open subscheme is Japanese. \end{lemma} 
\begin{lemma} \label{lemma-locally-universally-Japanese} Let $X$ be a scheme. The following are equivalent: \begin{enumerate} \item The scheme $X$ is universally Japanese. \item For every affine open $U \subset X$ the ring $\mathcal{O}_X(U)$ is universally Japanese. \item There exists an affine open covering $X = \bigcup U_i$ such that each $\mathcal{O}_X(U_i)$ is universally Japanese. \item There exists an open covering $X = \bigcup X_j$ such that each open subscheme $X_j$ is universally Japanese. \end{enumerate} Moreover, if $X$ is universally Japanese then every open subscheme is universally Japanese. \end{lemma} 
\begin{lemma} \label{lemma-locally-nagata} Let $X$ be a scheme. The following are equivalent: \begin{enumerate} \item The scheme $X$ is Nagata. \item For every affine open $U \subset X$ the ring $\mathcal{O}_X(U)$ is Nagata. \item There exists an affine open covering $X = \bigcup U_i$ such that each $\mathcal{O}_X(U_i)$ is Nagata. \item There exists an open covering $X = \bigcup X_j$ such that each open subscheme $X_j$ is Nagata. \end{enumerate} Moreover, if $X$ is Nagata then every open subscheme is Nagata. \end{lemma} 
\begin{lemma} \label{lemma-characterize-nagata} Let $X$ be a locally Noetherian scheme. Then $X$ is Nagata if and only if every integral closed subscheme $Z \subset X$ is Japanese. \end{lemma} 
\begin{lemma} \label{lemma-nagata-universally-Japanese} Let $X$ be a scheme. The following are equivalent: \begin{enumerate} \item $X$ is Nagata, and \item $X$ is locally Noetherian and universally Japanese. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-singular-locus} Let $X$ be a locally Noetherian scheme. The {\it regular locus} $\text{Reg}(X)$ of $X$ is the set of $x \in X$ such that $\mathcal{O}_{X, x}$ is a regular local ring. The {\it singular locus} $\text{Sing}(X)$ is the complement $X \setminus \text{Reg}(X)$, i.e., the set of points $x \in X$ such that $\mathcal{O}_{X, x}$ is not a regular local ring. \end{definition} 
\begin{definition} \label{definition-unibranch} \begin{reference} \cite[Chapter IV (6.15.1)]{EGA4} \end{reference} Let $X$ be a scheme. Let $x \in X$. We say $X$ is {\it unibranch at $x$} if the local ring $\mathcal{O}_{X, x}$ is unibranch. We say $X$ is {\it geometrically unibranch at $x$} if the local ring $\mathcal{O}_{X, x}$ is geometrically unibranch. We say $X$ is {\it unibranch} if $X$ is unibranch at all of its points. We say $X$ is {\it geometrically unibranch} if $X$ is geometrically unibranch at all of its points. \end{definition} 
\begin{lemma} \label{lemma-normal-geometrically-unibranch} A normal scheme is geometrically unibranch. \end{lemma} 
\begin{lemma} \label{lemma-geometrically-unibranch} \begin{reference} Compare with \cite[Proposition 2.3]{Etale-coverings} \end{reference} Let $X$ be a Noetherian scheme. The following are equivalent \begin{enumerate} \item $X$ is geometrically unibranch (Definition \ref{definition-unibranch}), \item for every point $x \in X$ which is not the generic point of an irreducible component of $X$, the punctured spectrum of the strict henselization $\mathcal{O}_{X, x}^{sh}$ is connected. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-number-of-branches} Let $X$ be a scheme. Let $x \in X$. The {\it number of branches of $X$ at $x$} is the number of branches of the local ring $\mathcal{O}_{X, x}$ as defined in More on Algebra, Definition \ref{more-algebra-definition-number-of-branches}. The {\it number of geometric branches of $X$ at $x$} is the number of geometric branches of the local ring $\mathcal{O}_{X, x}$ as defined in More on Algebra, Definition \ref{more-algebra-definition-number-of-branches}. \end{definition} 
\begin{lemma} \label{lemma-number-of-branches-irreducible-components} Let $X$ be a scheme and $x \in X$. Let $X_i$, $i \in I$ be the irreducible components of $X$ passing through $x$. Then the number of (geometric) branches of $X$ at $x$ is the sum over $i \in I$ of the number of (geometric) branches of $X_i$ at $x$. \end{lemma} 
\begin{lemma} \label{lemma-number-of-branches-1} Let $X$ be a scheme. Let $x \in X$. \begin{enumerate} \item The number of branches of $X$ at $x$ is $1$ if and only if $X$ is unibranch at $x$. \item The number of geometric branches of $X$ at $x$ is $1$ if and only if $X$ is geometrically unibranch at $x$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-finite-type-module} Let $X = \Spec(R)$ be an affine scheme. The quasi-coherent sheaf of $\mathcal{O}_X$-modules $\widetilde M$ is a finite type $\mathcal{O}_X$-module if and only if $M$ is a finite $R$-module. \end{lemma} 
\begin{lemma} \label{lemma-finite-presentation-module} Let $X = \Spec(R)$ be an affine scheme. The quasi-coherent sheaf of $\mathcal{O}_X$-modules $\widetilde M$ is an $\mathcal{O}_X$-module of finite presentation if and only if $M$ is an $R$-module of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-invert-f-sections} \begin{slogan} Sections of quasi-coherent sheaves have only meromorphic singularities at infinity. \end{slogan} Let $X$ be a scheme. Let $f \in \Gamma(X, \mathcal{O}_X)$. Denote $X_f \subset X$ the open where $f$ is invertible, see Schemes, Lemma \ref{schemes-lemma-f-open}. If $X$ is quasi-compact and quasi-separated, the canonical map $$ \Gamma(X, \mathcal{O}_X)_f \longrightarrow \Gamma(X_f, \mathcal{O}_X) $$ is an isomorphism. Moreover, if $\mathcal{F}$ is a quasi-coherent sheaf of $\mathcal{O}_X$-modules the map $$ \Gamma(X, \mathcal{F})_f \longrightarrow \Gamma(X_f, \mathcal{F}) $$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-invert-s-sections} Let $X$ be a scheme. Let $\mathcal{L}$ be an invertible sheaf on $X$. Let $s \in \Gamma(X, \mathcal{L})$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. \begin{enumerate} \item If $X$ is quasi-compact, then (\ref{equation-module-invert-s}) is injective, and \item if $X$ is quasi-compact and quasi-separated, then (\ref{equation-module-invert-s}) is an isomorphism. \end{enumerate} In particular, the canonical map $$ \Gamma_*(X, \mathcal{L})_{(s)} \longrightarrow \Gamma(X_s, \mathcal{O}_X),\quad a/s^n \longmapsto a \otimes s^{-n} $$ is an isomorphism if $X$ is quasi-compact and quasi-separated. \end{lemma} 
\begin{lemma} \label{lemma-section-maps-backwards} Let $X$ be a scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Let $s \in \Gamma(X, \mathcal{L})$ be a section. Let $\mathcal{F}$, $\mathcal{G}$ be quasi-coherent $\mathcal{O}_X$-modules. \begin{enumerate} \item If $X$ is quasi-compact and $\mathcal{F}$ is of finite type, then (\ref{equation-hom-invert-s}) is injective, and \item if $X$ is quasi-compact and quasi-separated and $\mathcal{F}$ is of finite presentation, then (\ref{equation-hom-invert-s}) is bijective. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-quasi-affine} A scheme $X$ is called {\it quasi-affine} if it is quasi-compact and isomorphic to an open subscheme of an affine scheme. \end{definition} 
\begin{lemma} \label{lemma-quasi-coherent-quasi-affine} Let $A$ be a ring and let $U \subset \Spec(A)$ be a quasi-compact open subscheme. For $\mathcal{F}$ quasi-coherent on $U$ the canonical map $$ \widetilde{H^0(U, \mathcal{F})}|_U \to \mathcal{F} $$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-invert-f-affine} Let $X$ be a scheme. Let $f \in \Gamma(X, \mathcal{O}_X)$. Assume $X$ is quasi-compact and quasi-separated and assume that $X_f$ is affine. Then the canonical morphism $$ j : X \longrightarrow \Spec(\Gamma(X, \mathcal{O}_X)) $$ from Schemes, Lemma \ref{schemes-lemma-morphism-into-affine} induces an isomorphism of $X_f = j^{-1}(D(f))$ onto the standard affine open $D(f) \subset \Spec(\Gamma(X, \mathcal{O}_X))$. \end{lemma} 
\begin{lemma} \label{lemma-quasi-affine} Let $X$ be a scheme. Then $X$ is quasi-affine if and only if the canonical morphism $$ X \longrightarrow \Spec(\Gamma(X, \mathcal{O}_X)) $$ from Schemes, Lemma \ref{schemes-lemma-morphism-into-affine} is a quasi-compact open immersion. \end{lemma} 
\begin{lemma} \label{lemma-cartesian-diagram-quasi-affine} Let $U \to V$ be an open immersion of quasi-affine schemes. Then $$ \xymatrix{ U \ar[d] \ar[rr]_-j & & \Spec(\Gamma(U, \mathcal{O}_U)) \ar[d] \\ U \ar[r] & V \ar[r]^-{j'} & \Spec(\Gamma(V, \mathcal{O}_V)) } $$ is cartesian. \end{lemma} 
\begin{lemma} \label{lemma-quasi-affine-presentation} Let $X$ be a quasi-affine scheme. There exists an integer $n \geq 0$, an affine scheme $T$, and a morphism $T \to X$ such that for every morphism $X' \to X$ with $X'$ affine the fibre product $X' \times_X T$ is isomorphic to $\mathbf{A}^n_{X'}$ over $X'$. \end{lemma} 
\begin{lemma} \label{lemma-flat-module} \begin{slogan} Flatness is the same for modules and sheaves. \end{slogan} Let $X = \Spec(R)$ be an affine scheme. Let $\mathcal{F} = \widetilde{M}$ for some $R$-module $M$. The quasi-coherent sheaf $\mathcal{F}$ is a flat $\mathcal{O}_X$-module if and only if $M$ is a flat $R$-module. \end{lemma} 
\begin{lemma} \label{lemma-locally-free-module} Let $X = \Spec(R)$ be an affine scheme. Let $\mathcal{F} = \widetilde{M}$ for some $R$-module $M$. The quasi-coherent sheaf $\mathcal{F}$ is a (finite) locally free $\mathcal{O}_X$-module of if and only if $M$ is a (finite) locally free $R$-module. \end{lemma} 
\begin{lemma} \label{lemma-finite-locally-free} Let $X$ be a scheme. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. The following are equivalent: \begin{enumerate} \item $\mathcal{F}$ is a flat $\mathcal{O}_X$-module of finite presentation, \item $\mathcal{F}$ is $\mathcal{O}_X$-module of finite presentation and for all $x \in X$ the stalk $\mathcal{F}_x$ is a free $\mathcal{O}_{X, x}$-module, \item $\mathcal{F}$ is a locally free, finite type $\mathcal{O}_X$-module, \item $\mathcal{F}$ is a finite locally free $\mathcal{O}_X$-module, and \item $\mathcal{F}$ is an $\mathcal{O}_X$-module of finite type, for every $x \in X$ the stalk $\mathcal{F}_x$ is a free $\mathcal{O}_{X, x}$-module, and the function $$ \rho_\mathcal{F} : X \to \mathbf{Z}, \quad x \longmapsto \dim_{\kappa(x)} \mathcal{F}_x \otimes_{\mathcal{O}_{X, x}} \kappa(x) $$ is locally constant in the Zariski topology on $X$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-finite-locally-free-reduced} Let $X$ be a reduced scheme. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Then the equivalent conditions of Lemma \ref{lemma-finite-locally-free} are also equivalent to \begin{enumerate} \item[(6)] $\mathcal{F}$ is an $\mathcal{O}_X$-module of finite type and the function $$ \rho_\mathcal{F} : X \to \mathbf{Z}, \quad x \longmapsto \dim_{\kappa(x)} \mathcal{F}_x \otimes_{\mathcal{O}_{X, x}} \kappa(x) $$ is locally constant in the Zariski topology on $X$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-locally-projective} Let $X$ be a scheme. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. We say $\mathcal{F}$ is {\it locally projective} if for every affine open $U \subset X$ the $\mathcal{O}_X(U)$-module $\mathcal{F}(U)$ is projective. \end{definition} 
\begin{lemma} \label{lemma-locally-projective} Let $X$ be a scheme. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. The following are equivalent \begin{enumerate} \item $\mathcal{F}$ is locally projective, and \item there exists an affine open covering $X = \bigcup U_i$ such that the $\mathcal{O}_X(U_i)$-module $\mathcal{F}(U_i)$ is projective for every $i$. \end{enumerate} In particular, if $X = \Spec(A)$ and $\mathcal{F} = \widetilde{M}$ then $\mathcal{F}$ is locally projective if and only if $M$ is a projective $A$-module. \end{lemma} 
\begin{lemma} \label{lemma-locally-projective-pullback} Let $f : X \to Y$ be a morphism of schemes. Let $\mathcal{G}$ be a quasi-coherent $\mathcal{O}_Y$-module. If $\mathcal{G}$ is locally projective on $Y$, then $f^*\mathcal{G}$ is locally projective on $X$. \end{lemma} 
\begin{lemma} \label{lemma-extend-trivial} Let $j : U \to X$ be a quasi-compact open immersion of schemes. \begin{enumerate} \item Any quasi-coherent sheaf on $U$ extends to a quasi-coherent sheaf on $X$. \item Let $\mathcal{F}$ be a quasi-coherent sheaf on $X$. Let $\mathcal{G} \subset \mathcal{F}|_U$ be a quasi-coherent subsheaf. There exists a quasi-coherent subsheaf $\mathcal{H}$ of $\mathcal{F}$ such that $\mathcal{H}|_U = \mathcal{G}$ as subsheaves of $\mathcal{F}|_U$. \item Let $\mathcal{F}$ be a quasi-coherent sheaf on $X$. Let $\mathcal{G}$ be a quasi-coherent sheaf on $U$. Let $\varphi : \mathcal{G} \to \mathcal{F}|_U$ be a morphism of $\mathcal{O}_U$-modules. There exists a quasi-coherent sheaf $\mathcal{H}$ of $\mathcal{O}_X$-modules and a map $\psi : \mathcal{H} \to \mathcal{F}$ such that $\mathcal{H}|_U = \mathcal{G}$ and that $\psi|_U = \varphi$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-extend} Let $X$ be a quasi-compact and quasi-separated scheme. Let $U \subset X$ be a quasi-compact open. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Let $\mathcal{G} \subset \mathcal{F}|_U$ be a quasi-coherent $\mathcal{O}_U$-submodule which is of finite type. Then there exists a quasi-coherent submodule $\mathcal{G}' \subset \mathcal{F}$ which is of finite type such that $\mathcal{G}'|_U = \mathcal{G}$. \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherent-colimit-finite-type} Let $X$ be a quasi-compact and quasi-separated scheme. Any quasi-coherent sheaf of $\mathcal{O}_X$-modules is the directed colimit of its quasi-coherent $\mathcal{O}_X$-submodules which are of finite type. \end{lemma} 
\begin{lemma} \label{lemma-extend-finite-presentation} Let $X$ be a quasi-compact and quasi-separated scheme. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Let $U \subset X$ be a quasi-compact open. Let $\mathcal{G}$ be an $\mathcal{O}_U$-module which is of finite presentation. Let $\varphi : \mathcal{G} \to \mathcal{F}|_U$ be a morphism of $\mathcal{O}_U$-modules. Then there exists an $\mathcal{O}_X$-module $\mathcal{G}'$ of finite presentation, and a morphism of $\mathcal{O}_X$-modules $\varphi' : \mathcal{G}' \to \mathcal{F}$ such that $\mathcal{G}'|_U = \mathcal{G}$ and such that $\varphi'|_U = \varphi$. \end{lemma} 
\begin{lemma} \label{lemma-lift-finite-presentation} Let $X$ be a quasi-compact and quasi-separated scheme. Let $U \subset X$ be a quasi-compact open. Let $\mathcal{G}$ be an $\mathcal{O}_U$-module. \begin{enumerate} \item If $\mathcal{G}$ is quasi-coherent and of finite type, then there exists a quasi-coherent $\mathcal{O}_X$-module $\mathcal{G}'$ of finite type such that $\mathcal{G}'|_U = \mathcal{G}$. \item If $\mathcal{G}$ is of finite presentation, then there exists an $\mathcal{O}_X$-module $\mathcal{G}'$ of finite presentation such that $\mathcal{G}'|_U = \mathcal{G}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-directed-colimit-diagram-finite-presentation} \begin{slogan} Quasi-coherent modules on quasi-compact and quasi-separated schemes are filtered colimits of finitely presented modules. \end{slogan} Let $X$ be a scheme. Assume $X$ is quasi-compact and quasi-separated. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. There exist \begin{enumerate} \item a filtered index category $\mathcal{I}$ (see Categories, Definition \ref{categories-definition-directed}), \item a diagram $\mathcal{I} \to \textit{Mod}(\mathcal{O}_X)$ (see Categories, Section \ref{categories-section-limits}), $i \mapsto \mathcal{F}_i$, \item morphisms of $\mathcal{O}_X$-modules $\varphi_i : \mathcal{F}_i \to \mathcal{F}$ \end{enumerate} such that each $\mathcal{F}_i$ is of finite presentation and such that the morphisms $\varphi_i$ induce an isomorphism $$ \colim_i \mathcal{F}_i = \mathcal{F}. $$ \end{lemma} 
\begin{lemma} \label{lemma-directed-colimit-finite-presentation} Let $X$ be a scheme. Assume $X$ is quasi-compact and quasi-separated. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. There exist \begin{enumerate} \item a directed set $I$ (see Categories, Definition \ref{categories-definition-directed-set}), \item a system $(\mathcal{F}_i, \varphi_{ii'})$ over $I$ in $\textit{Mod}(\mathcal{O}_X)$ (see Categories, Definition \ref{categories-definition-system-over-poset}) \item morphisms of $\mathcal{O}_X$-modules $\varphi_i : \mathcal{F}_i \to \mathcal{F}$ \end{enumerate} such that each $\mathcal{F}_i$ is of finite presentation and such that the morphisms $\varphi_i$ induce an isomorphism $$ \colim_i \mathcal{F}_i = \mathcal{F}. $$ \end{lemma} 
\begin{lemma} \label{lemma-finite-directed-colimit-surjective-maps} Let $X$ be a scheme. Assume $X$ is quasi-compact and quasi-separated. Let $\mathcal{F}$ be a finite type quasi-coherent $\mathcal{O}_X$-module. Then we can write $\mathcal{F} = \colim \mathcal{F}_i$ with $\mathcal{F}_i$ of finite presentation and all transition maps $\mathcal{F}_i \to \mathcal{F}_{i'}$ surjective. \end{lemma} 
\begin{lemma} \label{lemma-application-directed-colimit} Let $X$ be a quasi-compact and quasi-separated scheme. Let $\mathcal{F}$ be a finite type quasi-coherent $\mathcal{O}_X$-module. Let $U \subset X$ be a quasi-compact open such that $\mathcal{F}|_U$ is of finite presentation. Then there exists a map of $\mathcal{O}_X$-modules $\varphi : \mathcal{G} \to \mathcal{F}$ with (a) $\mathcal{G}$ of finite presentation, (b) $\varphi$ is surjective, and (c) $\varphi|_U$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-algebra-directed-colimit-finite-presentation} Let $X$ be a scheme. Assume $X$ is quasi-compact and quasi-separated. Let $\mathcal{A}$ be a quasi-coherent $\mathcal{O}_X$-algebra. There exist \begin{enumerate} \item a directed set $I$ (see Categories, Definition \ref{categories-definition-directed-set}), \item a system $(\mathcal{A}_i, \varphi_{ii'})$ over $I$ in the category of $\mathcal{O}_X$-algebras, \item morphisms of $\mathcal{O}_X$-algebras $\varphi_i : \mathcal{A}_i \to \mathcal{A}$ \end{enumerate} such that each $\mathcal{A}_i$ is a quasi-coherent $\mathcal{O}_X$-algebra of finite presentation and such that the morphisms $\varphi_i$ induce an isomorphism $$ \colim_i \mathcal{A}_i = \mathcal{A}. $$ \end{lemma} 
\begin{lemma} \label{lemma-algebra-directed-colimit-finite-type} Let $X$ be a scheme. Assume $X$ is quasi-compact and quasi-separated. Let $\mathcal{A}$ be a quasi-coherent $\mathcal{O}_X$-algebra. Then $\mathcal{A}$ is the directed colimit of its finite type quasi-coherent $\mathcal{O}_X$-subalgebras. \end{lemma} 
\begin{lemma} \label{lemma-finite-algebra-directed-colimit-finite-finitely-presented} Let $X$ be a scheme. Assume $X$ is quasi-compact and quasi-separated. Let $\mathcal{A}$ be a finite quasi-coherent $\mathcal{O}_X$-algebra. Then $\mathcal{A} = \colim \mathcal{A}_i$ is a directed colimit of finite and finitely presented quasi-coherent $\mathcal{O}_X$-algebras such that all transition maps $\mathcal{A}_{i'} \to \mathcal{A}_i$ are surjective. \end{lemma} 
\begin{lemma} \label{lemma-integral-algebra-directed-colimit-finite} Let $X$ be a scheme. Assume $X$ is quasi-compact and quasi-separated. Let $\mathcal{A}$ be an integral quasi-coherent $\mathcal{O}_X$-algebra. Then \begin{enumerate} \item $\mathcal{A}$ is the directed colimit of its finite quasi-coherent $\mathcal{O}_X$-subalgebras, and \item $\mathcal{A}$ is a direct colimit of finite and finitely presented quasi-coherent $\mathcal{O}_X$-algebras. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-kappa-generated} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\kappa$ be an infinite cardinal. We say a sheaf of $\mathcal{O}_X$-modules $\mathcal{F}$ is {\it $\kappa$-generated} if there exists an open covering $X = \bigcup U_i$ such that $\mathcal{F}|_{U_i}$ is generated by a subset $R_i \subset \mathcal{F}(U_i)$ whose cardinality is at most $\kappa$. \end{definition} 
\begin{lemma} \label{lemma-set-of-iso-classes} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\kappa$ be a cardinal. There exists a set $T$ and a family $(\mathcal{F}_t)_{t \in T}$ of $\kappa$-generated $\mathcal{O}_X$-modules such that every $\kappa$-generated $\mathcal{O}_X$-module is isomorphic to one of the $\mathcal{F}_t$. \end{lemma} 
\begin{lemma} \label{lemma-colimit-kappa} Let $X$ be a scheme. There exists a cardinal $\kappa$ such that every quasi-coherent module $\mathcal{F}$ is the directed colimit of its quasi-coherent $\kappa$-generated submodules. \end{lemma} 
\begin{proposition} \label{proposition-coherator} Let $X$ be a scheme. \begin{enumerate} \item The category $\QCoh(\mathcal{O}_X)$ is a Grothendieck abelian category. Consequently, $\QCoh(\mathcal{O}_X)$ has enough injectives and all limits. \item The inclusion functor $\QCoh(\mathcal{O}_X) \to \textit{Mod}(\mathcal{O}_X)$ has a right adjoint\footnote{This functor is sometimes called the {\it coherator}.} $$ Q : \textit{Mod}(\mathcal{O}_X) \longrightarrow \QCoh(\mathcal{O}_X) $$ such that for every quasi-coherent sheaf $\mathcal{F}$ the adjunction mapping $Q(\mathcal{F}) \to \mathcal{F}$ is an isomorphism. \end{enumerate} \end{proposition} 
\begin{lemma} \label{lemma-quasi-coherent-finite-type-ideals} Let $X$ be a quasi-compact and quasi-separated scheme. Let $U \subset X$ be an open subscheme. The following are equivalent: \begin{enumerate} \item $U$ is retrocompact in $X$, \item $U$ is quasi-compact, \item $U$ is a finite union of affine opens, and \item there exists a finite type quasi-coherent sheaf of ideals $\mathcal{I} \subset \mathcal{O}_X$ such that $X \setminus U = V(\mathcal{I})$ (set theoretically). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-sections-annihilated-by-ideal} Let $X$ be a scheme. Let $\mathcal{I} \subset \mathcal{O}_X$ be a quasi-coherent sheaf of ideals. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Consider the sheaf of $\mathcal{O}_X$-modules $\mathcal{F}'$ which associates to every open $U \subset X$ $$ \mathcal{F}'(U) = \{s \in \mathcal{F}(U) \mid \mathcal{I}s = 0\} $$ Assume $\mathcal{I}$ is of finite type. Then \begin{enumerate} \item $\mathcal{F}'$ is a quasi-coherent sheaf of $\mathcal{O}_X$-modules, \item on any affine open $U \subset X$ we have $\mathcal{F}'(U) = \{s \in \mathcal{F}(U) \mid \mathcal{I}(U)s = 0\}$, and \item $\mathcal{F}'_x = \{s \in \mathcal{F}_x \mid \mathcal{I}_x s = 0\}$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-subsheaf-sections-annihilated-by-ideal} Let $X$ be a scheme. Let $\mathcal{I} \subset \mathcal{O}_X$ be a quasi-coherent sheaf of ideals of finite type. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. The subsheaf $\mathcal{F}' \subset \mathcal{F}$ defined in Lemma \ref{lemma-sections-annihilated-by-ideal} above is called the {\it subsheaf of sections annihilated by $\mathcal{I}$}. \end{definition} 
\begin{lemma} \label{lemma-push-sections-annihilated-by-ideal} Let $f : X \to Y$ be a quasi-compact and quasi-separated morphism of schemes. Let $\mathcal{I} \subset \mathcal{O}_Y$ be a quasi-coherent sheaf of ideals of finite type. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Let $\mathcal{F}' \subset \mathcal{F}$ be the subsheaf of sections annihilated by $f^{-1}\mathcal{I}\mathcal{O}_X$. Then $f_*\mathcal{F}' \subset f_*\mathcal{F}$ is the subsheaf of sections annihilated by $\mathcal{I}$. \end{lemma} 
\begin{lemma} \label{lemma-sections-supported-on-closed-subset} Let $X$ be a scheme. Let $Z \subset X$ be a closed subset. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Consider the sheaf of $\mathcal{O}_X$-modules $\mathcal{F}'$ which associates to every open $U \subset X$ $$ \mathcal{F}'(U) = \{s \in \mathcal{F}(U) \mid \text{the support of }s\text{ is contained in }Z \cap U\} $$ If $X \setminus Z$ is a retrocompact open of $X$, then \begin{enumerate} \item for an affine open $U \subset X$ there exist a finitely generated ideal $I \subset \mathcal{O}_X(U)$ such that $Z \cap U = V(I)$, \item for $U$ and $I$ as in (1) we have $\mathcal{F}'(U) = \{x \in \mathcal{F}(U) \mid I^nx = 0 \text{ for some } n\}$, \item $\mathcal{F}'$ is a quasi-coherent sheaf of $\mathcal{O}_X$-modules. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-subsheaf-sections-supported-on-closed} Let $X$ be a scheme. Let $T \subset X$ be a closed subset whose complement is retrocompact in $X$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. The quasi-coherent subsheaf $\mathcal{F}' \subset \mathcal{F}$ defined in Lemma \ref{lemma-sections-supported-on-closed-subset} is called the {\it subsheaf of sections supported on $T$}. \end{definition} 
\begin{lemma} \label{lemma-push-sections-supported-on-closed-subset} Let $f : X \to Y$ be a quasi-compact and quasi-separated morphism of schemes. Let $Z \subset Y$ be a closed subset such that $Y \setminus Z$ is retrocompact in $Y$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Let $\mathcal{F}' \subset \mathcal{F}$ be the subsheaf of sections supported in $f^{-1}Z$. Then $f_*\mathcal{F}' \subset f_*\mathcal{F}$ is the subsheaf of sections supported in $Z$. \end{lemma} 
\begin{lemma} \label{lemma-sections-over-quasi-compact-open-in-affine} Let $A$ be a ring. Let $I \subset A$ be a finitely generated ideal. Let $M$ be an $A$-module. Then there is a canonical map $$ \colim_n \Hom_A(I^n, M) \longrightarrow \Gamma(\Spec(A) \setminus V(I), \widetilde{M}). $$ This map is always injective. If for all $x \in M$ we have $Ix = 0 \Rightarrow x = 0$ then this map is an isomorphism. In general, set $M_n = \{x \in M \mid I^nx = 0\}$, then there is an isomorphism $$ \colim_n \Hom_A(I^n, M/M_n) \longrightarrow \Gamma(\Spec(A) \setminus V(I), \widetilde{M}). $$ \end{lemma} 
\begin{lemma} \label{lemma-sections-over-quasi-compact-open} Let $X$ be a quasi-compact scheme. Let $\mathcal{I} \subset \mathcal{O}_X$ be a quasi-coherent sheaf of ideals of finite type. Let $Z \subset X$ be the closed subscheme defined by $\mathcal{I}$ and set $U = X \setminus Z$. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. The canonical map $$ \colim_n \Hom_{\mathcal{O}_X}(\mathcal{I}^n, \mathcal{F}) \longrightarrow \Gamma(U, \mathcal{F}) $$ is injective. Assume further that $X$ is quasi-separated. Let $\mathcal{F}_n \subset \mathcal{F}$ be subsheaf of sections annihilated by $\mathcal{I}^n$. The canonical map $$ \colim_n \Hom_{\mathcal{O}_X}(\mathcal{I}^n, \mathcal{F}/\mathcal{F}_n) \longrightarrow \Gamma(U, \mathcal{F}) $$ is an isomorphism. \end{lemma} 
\begin{definition} \label{definition-ample} \begin{reference} \cite[II Definition 4.5.3]{EGA} \end{reference} Let $X$ be a scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. We say $\mathcal{L}$ is {\it ample} if \begin{enumerate} \item $X$ is quasi-compact, and \item for every $x \in X$ there exists an $n \geq 1$ and $s \in \Gamma(X, \mathcal{L}^{\otimes n})$ such that $x \in X_s$ and $X_s$ is affine. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-ample-power-ample} \begin{reference} \cite[II Proposition 4.5.6(i)]{EGA} \end{reference} Let $X$ be a scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Let $n \geq 1$. Then $\mathcal{L}$ is ample if and only if $\mathcal{L}^{\otimes n}$ is ample. \end{lemma} 
\begin{lemma} \label{lemma-ample-on-closed} Let $X$ be a scheme. Let $\mathcal{L}$ be an ample invertible $\mathcal{O}_X$-module. For any closed subscheme $Z \subset X$ the restriction of $\mathcal{L}$ to $Z$ is ample. \end{lemma} 
\begin{lemma} \label{lemma-affine-cap-s-open} Let $X$ be a scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Let $s \in \Gamma(X, \mathcal{L})$. For any affine $U \subset X$ the intersection $U \cap X_s$ is affine. \end{lemma} 
\begin{lemma} \label{lemma-ample-tensor-globally-generated} \begin{reference} \cite[II Proposition 4.5.6(ii)]{EGA} \end{reference} Let $X$ be a scheme. Let $\mathcal{L}$ and $\mathcal{M}$ be invertible $\mathcal{O}_X$-modules. If \begin{enumerate} \item $\mathcal{L}$ is ample, and \item the open sets $X_t$ where $t \in \Gamma(X, \mathcal{M}^{\otimes m})$ for $m > 0$ cover $X$, \end{enumerate} then $\mathcal{L} \otimes \mathcal{M}$ is ample. \end{lemma} 
\begin{lemma} \label{lemma-affine-s-opens} Let $X$ be a scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Assume the open sets $X_s$, where $s \in \Gamma(X, \mathcal{L}^{\otimes n})$ and $n \geq 1$, form a basis for the topology on $X$. Then among those opens, the open sets $X_s$ which are affine form a basis for the topology on $X$. \end{lemma} 
\begin{lemma} \label{lemma-affine-s-opens-cover-quasi-separated} Let $X$ be a scheme and $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Assume for every point $x$ of $X$ there exists $n \geq 1$ and $s \in \Gamma(X, \mathcal{L}^{\otimes n})$ such that $x \in X_s$ and $X_s$ is affine. Then $X$ is separated. \end{lemma} 
\begin{lemma} \label{lemma-ample-separated} Let $X$ be a scheme. If there exists an ample invertible sheaf on $X$ then $X$ is separated. \end{lemma} 
\begin{lemma} \label{lemma-map-into-proj} Let $X$ be a scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Set $S = \Gamma_*(X, \mathcal{L})$ as a graded ring. If every point of $X$ is contained in one of the open subschemes $X_s$, for some $s \in S_{+}$ homogeneous, then there is a canonical morphism of schemes $$ f : X \longrightarrow Y = \text{Proj}(S), $$ to the homogeneous spectrum of $S$ (see Constructions, Section \ref{constructions-section-proj}). This morphism has the following properties \begin{enumerate} \item $f^{-1}(D_{+}(s)) = X_s$ for any $s \in S_{+}$ homogeneous, \item there are $\mathcal{O}_X$-module maps $f^*\mathcal{O}_Y(n) \to \mathcal{L}^{\otimes n}$ compatible with multiplication maps, see Constructions, Equation (\ref{constructions-equation-multiply}), \item the composition $S_n \to \Gamma(Y, \mathcal{O}_Y(n)) \to \Gamma(X, \mathcal{L}^{\otimes n})$ is the identity map, and \item for every $x \in X$ there is an integer $d \geq 1$ and an open neighbourhood $U \subset X$ of $x$ such that $f^*\mathcal{O}_Y(dn)|_U \to \mathcal{L}^{\otimes dn}|_U$ is an isomorphism for all $n \in \mathbf{Z}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-map-into-proj-quasi-compact} Let $X$ be a scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Set $S = \Gamma_*(X, \mathcal{L})$. Assume (a) every point of $X$ is contained in one of the open subschemes $X_s$, for some $s \in S_{+}$ homogeneous, and (b) $X$ is quasi-compact. Then the canonical morphism of schemes $f : X \longrightarrow \text{Proj}(S)$ of Lemma \ref{lemma-map-into-proj} above is quasi-compact with dense image. \end{lemma} 
\begin{lemma} \label{lemma-ample-immersion-into-proj} Let $X$ be a scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Set $S = \Gamma_*(X, \mathcal{L})$. Assume $\mathcal{L}$ is ample. Then the canonical morphism of schemes $f : X \longrightarrow \text{Proj}(S)$ of Lemma \ref{lemma-map-into-proj} is an open immersion with dense image. \end{lemma} 
\begin{lemma} \label{lemma-open-in-proj-ample} Let $X$ be a scheme. Let $S$ be a graded ring. Assume $X$ is quasi-compact, and assume there exists an open immersion $$ j : X \longrightarrow Y = \text{Proj}(S). $$ Then $j^*\mathcal{O}_Y(d)$ is an invertible ample sheaf for some $d > 0$. \end{lemma} 
\begin{proposition} \label{proposition-characterize-ample} Let $X$ be a quasi-compact scheme. Let $\mathcal{L}$ be an invertible sheaf on $X$. Set $S = \Gamma_*(X, \mathcal{L})$. The following are equivalent: \begin{enumerate} \item \label{item-ample} $\mathcal{L}$ is ample, \item \label{item-immersion} the open sets $X_s$, with $s \in S_{+}$ homogeneous, cover $X$ and the associated morphism $X \to \text{Proj}(S)$ is an open immersion, \item \label{item-s-basis} the open sets $X_s$, with $s \in S_{+}$ homogeneous, form a basis for the topology of $X$, \item \label{item-s-affine-basis} the open sets $X_s$, with $s \in S_{+}$ homogeneous, which are affine form a basis for the topology of $X$, \item \label{item-qc-gg} for every quasi-coherent sheaf $\mathcal{F}$ on $X$ the sum of the images of the canonical maps $$ \Gamma(X, \mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}^{\otimes n}) \otimes_{\mathbf{Z}} \mathcal{L}^{\otimes -n} \longrightarrow \mathcal{F} $$ with $n \geq 1$ equals $\mathcal{F}$, \item \label{item-qc-i-gg} same property as (\ref{item-qc-gg}) with $\mathcal{F}$ ranging over all quasi-coherent sheaves of ideals, \item \label{item-c-gg} $X$ is quasi-separated and for every quasi-coherent sheaf $\mathcal{F}$ of finite type on $X$ there exists an integer $n_0$ such that $\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}^{\otimes n}$ is globally generated for all $n \geq n_0$, \item \label{item-c-q} $X$ is quasi-separated and for every quasi-coherent sheaf $\mathcal{F}$ of finite type on $X$ there exist integers $n > 0$, $k \geq 0$ such that $\mathcal{F}$ is a quotient of a direct sum of $k$ copies of $\mathcal{L}^{\otimes - n}$, and \item \label{item-c-i-q} same as in (\ref{item-c-q}) with $\mathcal{F}$ ranging over all sheaves of ideals of finite type on $X$. \end{enumerate} \end{proposition} 
\begin{lemma} \label{lemma-ample-on-locally-closed} Let $X$ be a scheme. Let $\mathcal{L}$ be an ample invertible $\mathcal{O}_X$-module. Let $i : X' \to X$ be a morphism of schemes. Assume at least one of the following conditions holds \begin{enumerate} \item $i$ is a quasi-compact immersion, \item $X'$ is quasi-compact and $i$ is an immersion, \item $i$ is quasi-compact and induces a homeomorphism between $X'$ and $i(X')$, \item $X'$ is quasi-compact and $i$ induces a homeomorphism between $X'$ and $i(X')$. \end{enumerate} Then $i^*\mathcal{L}$ is ample on $X'$. \end{lemma} 
\begin{lemma} \label{lemma-ample-on-product} Let $S$ be a quasi-separated scheme. Let $X$, $Y$ be schemes over $S$. Let $\mathcal{L}$ be an ample invertible $\mathcal{O}_X$-module and let $\mathcal{N}$ be an ample invertible $\mathcal{O}_Y$-module. Then $\mathcal{M} = \text{pr}_1^*\mathcal{L} \otimes_{\mathcal{O}_{X \times_S Y}} \text{pr}_2^*\mathcal{N}$ is an ample invertible sheaf on $X \times_S Y$. \end{lemma} 
\begin{lemma} \label{lemma-quasi-affine-O-ample} Let $X$ be a scheme. Then $X$ is quasi-affine if and only if $\mathcal{O}_X$ is ample. \end{lemma} 
\begin{lemma} \label{lemma-quasi-affine-locally-closed} Let $X$ be a quasi-affine scheme. For any quasi-compact immersion $i : X' \to X$ the scheme $X'$ is quasi-affine. \end{lemma} 
\begin{lemma} \label{lemma-characterize-affine} Let $X$ be a scheme. Suppose that there exist finitely many elements $f_1, \ldots, f_n \in \Gamma(X, \mathcal{O}_X)$ such that \begin{enumerate} \item each $X_{f_i}$ is an affine open of $X$, and \item the ideal generated by $f_1, \ldots, f_n$ in $\Gamma(X, \mathcal{O}_X)$ is equal to the unit ideal. \end{enumerate} Then $X$ is affine. \end{lemma} 
\begin{lemma} \label{lemma-ample-gcd-is-one} In Situation \ref{situation-ample}. The canonical morphism $f : X \to Y$ maps $X$ into the open subscheme $W = W_1 \subset Y$ where $\mathcal{O}_Y(1)$ is invertible and where all multiplication maps $\mathcal{O}_Y(n) \otimes_{\mathcal{O}_Y} \mathcal{O}_Y(m) \to \mathcal{O}_Y(n + m)$ are isomorphisms (see Constructions, Lemma \ref{constructions-lemma-where-invertible}). Moreover, the maps $f^*\mathcal{O}_Y(n) \to \mathcal{L}^{\otimes n}$ are all isomorphisms. \end{lemma} 
\begin{lemma} \label{lemma-ample-quasi-coherent} In Situation \ref{situation-ample}. Let $\mathcal{F}$ be a quasi-coherent sheaf on $X$. Set $M = \Gamma_*(X, \mathcal{L}, \mathcal{F})$ as a graded $S$-module. There are isomorphisms $$ f^*\widetilde{M} \longrightarrow \mathcal{F} $$ functorial in $\mathcal{F}$ such that $M_0 \to \Gamma(\text{Proj}(S), \widetilde{M}) \to \Gamma(X, \mathcal{F})$ is the identity map. \end{lemma} 
\begin{lemma} \label{lemma-proj-quasi-coherent} Let $S$ be a graded ring such that $X = \text{Proj}(S)$ is quasi-compact. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Set $M = \bigoplus_{n \in \mathbf{Z}} \Gamma(X, \mathcal{F}(n))$ as a graded $S$-module, see Constructions, Section \ref{constructions-section-invertible-on-proj}. The map $$ \widetilde{M} \longrightarrow \mathcal{F} $$ of Constructions, Lemma \ref{constructions-lemma-comparison-proj-quasi-coherent} is an isomorphism. If $X$ is covered by standard opens $D_+(f)$ where $f$ has degree $1$, then the induced maps $M_n \to \Gamma(X, \mathcal{F}(n))$ are the identity maps. \end{lemma} 
\begin{lemma} \label{lemma-maximal-points-affine} Let $X$ be a quasi-separated scheme. Let $Z_1, \ldots, Z_n$ be pairwise distinct irreducible components of $X$, see Topology, Section \ref{topology-section-irreducible-components}. Let $\eta_i \in Z_i$ be their generic points, see Schemes, Lemma \ref{schemes-lemma-scheme-sober}. There exist affine open neighbourhoods $\eta_i \in U_i$ such that $U_i \cap U_j = \emptyset$ for all $i \not = j$. In particular, $U = U_1 \cup \ldots \cup U_n$ is an affine open containing all of the points $\eta_1, \ldots, \eta_n$. \end{lemma} 
\begin{lemma} \label{lemma-quasi-compact-dense-open-separated} Let $X$ be a quasi-compact scheme. There exists a dense open $V \subset X$ which is separated. \end{lemma} 
\begin{lemma} \label{lemma-point-and-maximal-points-affine} Let $X$ be a quasi-separated scheme. Let $Z_1, \ldots, Z_n$ be pairwise distinct irreducible components of $X$. Let $\eta_i \in Z_i$ be their generic points. Let $x \in X$ be arbitrary. There exists an affine open $U \subset X$ containing $x$ and all the $\eta_i$. \end{lemma} 
\begin{lemma} \label{lemma-ample-finite-set-in-affine} Let $X$ be a scheme. Assume either \begin{enumerate} \item The scheme $X$ is quasi-affine. \item The scheme $X$ is isomorphic to a locally closed subscheme of an affine scheme. \item There exists an ample invertible sheaf on $X$. \item The scheme $X$ is isomorphic to a locally closed subscheme of $\text{Proj}(S)$ for some graded ring $S$. \end{enumerate} Then for any finite subset $E \subset X$ there exists an affine open $U \subset X$ with $E \subset U$. \end{lemma} 
\begin{lemma} \label{lemma-ample-finite-set-in-principal-affine} Let $X$ be a scheme. Let $\mathcal{L}$ be an ample invertible sheaf on $X$. Let $$ E \subset W \subset X $$ with $E$ finite and $W$ open in $X$. Then there exists an $n > 0$ and a section $s \in \Gamma(X, \mathcal{L}^{\otimes n})$ such that $X_s$ is affine and $E \subset X_s \subset W$. \end{lemma} 
\begin{lemma} \label{lemma-quasi-affine-invertible-nonvanishing-section} Let $X$ be a quasi-affine scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. Let $E \subset W \subset X$ with $E$ finite and $W$ open. Then there exists an $s \in \Gamma(X, \mathcal{L})$ such that $X_s$ is affine and $E \subset X_s \subset W$. \end{lemma} 
\begin{lemma} \label{lemma-ring-affine-open-injective-local-ring} Let $X$ be a scheme and $x \in X$ a point. There exists an affine open neighbourhood $U \subset X$ of $x$ such that the canonical map $\mathcal{O}_X(U) \to \mathcal{O}_{X, x}$ is injective in each of the following cases: \begin{enumerate} \item $X$ is integral, \item $X$ is locally Noetherian, \item $X$ is reduced and has a finite number of irreducible components. \end{enumerate} \end{lemma} 
