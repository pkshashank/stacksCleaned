\begin{lemma} \label{lemma-abelian} Let $(X, \mathcal{O}_X)$ be a ringed space. The category $\textit{Mod}(\mathcal{O}_X)$ is an abelian category. Moreover a complex $$ \mathcal{F} \to \mathcal{G} \to \mathcal{H} $$ is exact at $\mathcal{G}$ if and only if for all $x \in X$ the complex $$ \mathcal{F}_x \to \mathcal{G}_x \to \mathcal{H}_x $$ is exact at $\mathcal{G}_x$. \end{lemma} 
\begin{lemma} \label{lemma-limits-colimits} Let $(X, \mathcal{O}_X)$ be a ringed space. \begin{enumerate} \item All limits exist in $\textit{Mod}(\mathcal{O}_X)$. Limits are the same as the corresponding limits of presheaves of $\mathcal{O}_X$-modules (i.e., commute with taking sections over opens). \item All colimits exist in $\textit{Mod}(\mathcal{O}_X)$. Colimits are the sheafification of the corresponding colimit in the category of presheaves. Taking colimits commutes with taking stalks. \item Filtered colimits are exact. \item Finite direct sums are the same as the corresponding finite direct sums of presheaves of $\mathcal{O}_X$-modules. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-exactness-pushforward-pullback} Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. \begin{enumerate} \item The functor $f_* : \textit{Mod}(\mathcal{O}_X) \to \textit{Mod}(\mathcal{O}_Y)$ is left exact. In fact it commutes with all limits. \item The functor $f^* : \textit{Mod}(\mathcal{O}_Y) \to \textit{Mod}(\mathcal{O}_X)$ is right exact. In fact it commutes with all colimits. \item Pullback $f^{-1} : \textit{Ab}(Y) \to \textit{Ab}(X)$ on abelian sheaves is exact. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-j-shriek-exact} Let $j : U \to X$ be an open immersion of topological spaces. The functor $j_! : \textit{Ab}(U) \to \textit{Ab}(X)$ is exact. \end{lemma} 
\begin{lemma} \label{lemma-section-direct-sum-quasi-compact} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $I$ be a set. For $i \in I$, let $\mathcal{F}_i$ be a sheaf of $\mathcal{O}_X$-modules. For $U \subset X$ quasi-compact open the map $$ \bigoplus\nolimits_{i \in I} \mathcal{F}_i(U) \longrightarrow \left(\bigoplus\nolimits_{i \in I} \mathcal{F}_i\right)(U) $$ is bijective. \end{lemma} 
\begin{definition} \label{definition-globally-generated} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. We say that $\mathcal{F}$ is {\it generated by global sections} if there exist a set $I$, and global sections $s_i \in \Gamma(X, \mathcal{F})$, $i \in I$ such that the map $$ \bigoplus\nolimits_{i \in I} \mathcal{O}_X \longrightarrow \mathcal{F} $$ which is the map associated to $s_i$ on the summand corresponding to $i$, is surjective. In this case we say that the sections $s_i$ {\it generate} $\mathcal{F}$. \end{definition} 
\begin{lemma} \label{lemma-globally-generated} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. Let $I$ be a set. Let $s_i \in \Gamma(X, \mathcal{F})$, $i \in I$ be global sections. The sections $s_i$ generate $\mathcal{F}$ if and only if for all $x\in X$ the elements $s_{i, x} \in \mathcal{F}_x$ generate the $\mathcal{O}_{X, x}$-module $\mathcal{F}_x$. \end{lemma} 
\begin{lemma} \label{lemma-tensor-product-globally-generated} \begin{slogan} The tensor product of globally generated sheaves of modules is globally generated. \end{slogan} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$, $\mathcal{G}$ be sheaves of $\mathcal{O}_X$-modules. If $\mathcal{F}$ and $\mathcal{G}$ are generated by global sections then so is $\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G}$. \end{lemma} 
\begin{lemma} \label{lemma-generated-by-local-sections} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. Let $I$ be a set. Let $s_i$, $i \in I$ be a collection of local sections of $\mathcal{F}$, i.e., $s_i \in \mathcal{F}(U_i)$ for some opens $U_i \subset X$. There exists a unique smallest subsheaf of $\mathcal{O}_X$-modules $\mathcal{G}$ such that each $s_i$ corresponds to a local section of $\mathcal{G}$. \end{lemma} 
\begin{definition} \label{definition-generated-by-local-sections} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. Given a set $I$, and local sections $s_i$, $i \in I$ of $\mathcal{F}$ we say that the subsheaf $\mathcal{G}$ of Lemma \ref{lemma-generated-by-local-sections} above is the {\it subsheaf generated by the $s_i$}. \end{definition} 
\begin{lemma} \label{lemma-generated-by-local-sections-stalk} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. Given a set $I$, and local sections $s_i$, $i \in I$ of $\mathcal{F}$. Let $\mathcal{G}$ be the subsheaf generated by the $s_i$ and let $x\in X$. Then $\mathcal{G}_x$ is the $\mathcal{O}_{X, x}$-submodule of $\mathcal{F}_x$ generated by the elements $s_{i, x}$ for those $i$ such that $s_i$ is defined at $x$. \end{lemma} 
\begin{definition} \label{definition-support} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. \begin{enumerate} \item The {\it support of $\mathcal{F}$} is the set of points $x \in X$ such that $\mathcal{F}_x \not = 0$. \item We denote $\text{Supp}(\mathcal{F})$ the support of $\mathcal{F}$. \item Let $s \in \Gamma(X, \mathcal{F})$ be a global section. The {\it support of $s$} is the set of points $x \in X$ such that the image $s_x \in \mathcal{F}_x$ of $s$ is not zero. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-support-section-closed} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. Let $U \subset X$ open. \begin{enumerate} \item The support of $s \in \mathcal{F}(U)$ is closed in $U$. \item The support of $fs$ is contained in the intersections of the supports of $f \in \mathcal{O}_X(U)$ and $s \in \mathcal{F}(U)$. \item The support of $s + s'$ is contained in the union of the supports of $s, s' \in \mathcal{F}(U)$. \item The support of $\mathcal{F}$ is the union of the supports of all local sections of $\mathcal{F}$. \item If $\varphi : \mathcal{F} \to \mathcal{G}$ is a morphism of $\mathcal{O}_X$-modules, then the support of $\varphi(s)$ is contained in the support of $s \in \mathcal{F}(U)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-support-sheaf-rings-closed} Let $X$ be a topological space. The support of a sheaf of rings is closed. \end{lemma} 
\begin{lemma} \label{lemma-i-star-exact} Let $X$ be a topological space. Let $Z \subset X$ be a closed subset. Denote $i : Z \to X$ the inclusion map. The functor $$ i_* : \textit{Ab}(Z) \longrightarrow \textit{Ab}(X) $$ is exact, fully faithful, with essential image exactly those abelian sheaves whose support is contained in $Z$. The functor $i^{-1}$ is a left inverse to $i_*$. \end{lemma} 
\begin{lemma} \label{lemma-i-star-right-adjoint} Let $i : Z \to X$ be the inclusion of a closed subset into the topological space $X$. The functor $\textit{Ab}(X) \to \textit{Ab}(Z)$, $\mathcal{F} \mapsto \mathcal{H}_Z(\mathcal{F})$ of Remark \ref{remark-sections-support-in-closed} is a right adjoint to $i_* : \textit{Ab}(Z) \to \textit{Ab}(X)$. In particular $i_*$ commutes with arbitrary colimits. \end{lemma} 
\begin{lemma} \label{lemma-canonical-exact-sequence} Let $X$ be a topological space. Let $U \subset X$ be an open subset with complement $Z \subset X$. Denote $j : U \to X$ the open immersion and $i : Z \to X$ the closed immersion. For any sheaf of abelian groups $\mathcal{F}$ on $X$ the adjunction mappings $j_{!}j^{-1}\mathcal{F} \to \mathcal{F}$ and $\mathcal{F} \to i_*i^{-1}\mathcal{F}$ give a short exact sequence $$ 0 \to j_{!}j^{-1}\mathcal{F} \to \mathcal{F} \to i_*i^{-1}\mathcal{F} \to 0 $$ of sheaves of abelian groups. For any morphism $\varphi : \mathcal{F} \to \mathcal{G}$ of abelian sheaves on $X$ we obtain a morphism of short exact sequences $$ \xymatrix{ 0 \ar[r] & j_{!}j^{-1}\mathcal{F} \ar[r] \ar[d] & \mathcal{F} \ar[r] \ar[d] & i_*i^{-1}\mathcal{F} \ar[r] \ar[d] & 0 \\ 0 \ar[r] & j_{!}j^{-1}\mathcal{G} \ar[r] & \mathcal{G} \ar[r] & i_*i^{-1}\mathcal{G} \ar[r] & 0 } $$ \end{lemma} 
\begin{definition} \label{definition-locally-generated} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. We say that $\mathcal{F}$ is {\it locally generated by sections} if for every $x \in X$ there exists an open neighbourhood $U$ of $x$ such that $\mathcal{F}|_U$ is globally generated as a sheaf of $\mathcal{O}_U$-modules. \end{definition} 
\begin{lemma} \label{lemma-pullback-locally-generated} Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. The pullback $f^*\mathcal{G}$ is locally generated by sections if $\mathcal{G}$ is locally generated by sections. \end{lemma} 
\begin{definition} \label{definition-finite-type} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. We say that $\mathcal{F}$ is of {\it finite type} if for every $x \in X$ there exists an open neighbourhood $U$ such that $\mathcal{F}|_U$ is generated by finitely many sections. \end{definition} 
\begin{lemma} \label{lemma-pullback-finite-type} Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. The pullback $f^*\mathcal{G}$ of a finite type $\mathcal{O}_Y$-module is a finite type $\mathcal{O}_X$-module. \end{lemma} 
\begin{lemma} \label{lemma-extension-finite-type} Let $X$ be a ringed space. The image of a morphism of $\mathcal{O}_X$-modules of finite type is of finite type. Let $0 \to \mathcal{F}_1 \to \mathcal{F}_2 \to \mathcal{F}_3 \to 0$ be a short exact sequence of $\mathcal{O}_X$-modules. If $\mathcal{F}_1$ and $\mathcal{F}_3$ are of finite type, so is $\mathcal{F}_2$. \end{lemma} 
\begin{lemma} \label{lemma-finite-type-surjective-on-stalk} Let $X$ be a ringed space. Let $\varphi : \mathcal{G} \to \mathcal{F}$ be a homomorphism of $\mathcal{O}_X$-modules. Let $x \in X$. Assume $\mathcal{F}$ of finite type and the map on stalks $\varphi_x : \mathcal{G}_x \to \mathcal{F}_x$ surjective. Then there exists an open neighbourhood $x \in U \subset X$ such that $\varphi|_U$ is surjective. \end{lemma} 
\begin{lemma} \label{lemma-finite-type-stalk-zero} Let $X$ be a ringed space. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module. Let $x \in X$. Assume $\mathcal{F}$ of finite type and $\mathcal{F}_x = 0$. Then there exists an open neighbourhood $x \in U \subset X$ such that $\mathcal{F}|_U$ is zero. \end{lemma} 
\begin{lemma} \label{lemma-support-finite-type-closed} \begin{slogan} Over any ringed space, sheaves of modules of finite type have closed support. \end{slogan} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. If $\mathcal{F}$ is of finite type then support of $\mathcal{F}$ is closed. \end{lemma} 
\begin{lemma} \label{lemma-finite-type-quasi-compact-colimit} Let $X$ be a ringed space. Let $I$ be a preordered set and let $(\mathcal{F}_i, f_{ii'})$ be a system over $I$ consisting of sheaves of $\mathcal{O}_X$-modules (see Categories, Section \ref{categories-section-posets-limits}). Let $\mathcal{F} = \colim \mathcal{F}_i$ be the colimit. Assume (a) $I$ is directed, (b) $\mathcal{F}$ is a finite type $\mathcal{O}_X$-module, and (c) $X$ is quasi-compact. Then there exists an $i$ such that $\mathcal{F}_i \to \mathcal{F}$ is surjective. If the transition maps $f_{ii'}$ are injective then we conclude that $\mathcal{F} = \mathcal{F}_i$ for some $i \in I$. \end{lemma} 
\begin{lemma} \label{lemma-set-isomorphism-classes-finite-type-modules} Let $X$ be a ringed space. There exists a set of $\mathcal{O}_X$-modules $\{\mathcal{F}_i\}_{i \in I}$ of finite type such that each finite type $\mathcal{O}_X$-module on $X$ is isomorphic to exactly one of the $\mathcal{F}_i$. \end{lemma} 
\begin{definition} \label{definition-quasi-coherent} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. We say that $\mathcal{F}$ is a {\it quasi-coherent sheaf of $\mathcal{O}_X$-modules} if for every point $x \in X$ there exists an open neighbourhood $x\in U \subset X$ such that $\mathcal{F}|_U$ is isomorphic to the cokernel of a map $$ \bigoplus\nolimits_{j \in J} \mathcal{O}_U \longrightarrow \bigoplus\nolimits_{i \in I} \mathcal{O}_U $$ The category of quasi-coherent $\mathcal{O}_X$-modules is denoted $\QCoh(\mathcal{O}_X)$. \end{definition} 
\begin{lemma} \label{lemma-direct-sum-quasi-coherent} Let $(X, \mathcal{O}_X)$ be a ringed space. The direct sum of two quasi-coherent $\mathcal{O}_X$-modules is a quasi-coherent $\mathcal{O}_X$-module. \end{lemma} 
\begin{lemma} \label{lemma-pullback-quasi-coherent} Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. The pullback $f^*\mathcal{G}$ of a quasi-coherent $\mathcal{O}_Y$-module is quasi-coherent. \end{lemma} 
\begin{lemma} \label{lemma-construct-quasi-coherent-sheaves} Let $(X, \mathcal{O}_X)$ be ringed space. Let $\alpha : R \to \Gamma(X, \mathcal{O}_X)$ be a ring homomorphism from a ring $R$ into the ring of global sections on $X$. Let $M$ be an $R$-module. The following three constructions give canonically isomorphic sheaves of $\mathcal{O}_X$-modules: \begin{enumerate} \item Let $\pi : (X, \mathcal{O}_X) \longrightarrow (\{*\}, R)$ be the morphism of ringed spaces with $\pi : X \to \{*\}$ the unique map and with $\pi$-map $\pi^\sharp$ the given map $\alpha : R \to \Gamma(X, \mathcal{O}_X)$. Set $\mathcal{F}_1 = \pi^*M$. \item Choose a presentation $\bigoplus_{j \in J} R \to \bigoplus_{i \in I} R \to M \to 0$. Set $$ \mathcal{F}_2 = \Coker\left( \bigoplus\nolimits_{j \in J} \mathcal{O}_X \to \bigoplus\nolimits_{i \in I} \mathcal{O}_X \right). $$ Here the map on the component $\mathcal{O}_X$ corresponding to $j \in J$ given by the section $\sum_i \alpha(r_{ij})$ where the $r_{ij}$ are the matrix coefficients of the map in the presentation of $M$. \item Set $\mathcal{F}_3$ equal to the sheaf associated to the presheaf $U \mapsto \mathcal{O}_X(U) \otimes_R M$, where the map $R \to \mathcal{O}_X(U)$ is the composition of $\alpha$ and the restriction map $\mathcal{O}_X(X) \to \mathcal{O}_X(U)$. \end{enumerate} This construction has the following properties: \begin{enumerate} \item The resulting sheaf of $\mathcal{O}_X$-modules $\mathcal{F}_M = \mathcal{F}_1 = \mathcal{F}_2 = \mathcal{F}_3$ is quasi-coherent. \item The construction gives a functor from the category of $R$-modules to the category of quasi-coherent sheaves on $X$ which commutes with arbitrary colimits. \item For any $x \in X$ we have $\mathcal{F}_{M, x} = \mathcal{O}_{X, x} \otimes_R M$ functorial in $M$. \item Given any $\mathcal{O}_X$-module $\mathcal{G}$ we have $$ \Mor_{\mathcal{O}_X}(\mathcal{F}_M, \mathcal{G}) = \Hom_R(M, \Gamma(X, \mathcal{G})) $$ where the $R$-module structure on $\Gamma(X, \mathcal{G})$ comes from the $\Gamma(X, \mathcal{O}_X)$-module structure via $\alpha$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-sheaf-associated} In the situation of Lemma \ref{lemma-construct-quasi-coherent-sheaves} we say $\mathcal{F}_M$ is the {\it sheaf associated to the module $M$ and the ring map $\alpha$}. If $R = \Gamma(X, \mathcal{O}_X)$ and $\alpha = \text{id}_R$ we simply say $\mathcal{F}_M$ is the {\it sheaf associated to the module $M$}. \end{definition} 
\begin{lemma} \label{lemma-restrict-quasi-coherent} Let $(X, \mathcal{O}_X)$ be a ringed space. Set $R = \Gamma(X, \mathcal{O}_X)$. Let $M$ be an $R$-module. Let $\mathcal{F}_M$ be the quasi-coherent sheaf of $\mathcal{O}_X$-modules associated to $M$. If $g : (Y, \mathcal{O}_Y) \to (X, \mathcal{O}_X)$ is a morphism of ringed spaces, then $g^*\mathcal{F}_M$ is the sheaf associated to the $\Gamma(Y, \mathcal{O}_Y)$-module $\Gamma(Y, \mathcal{O}_Y) \otimes_R M$. \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherent-module} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $x \in X$ be a point. Assume that $x$ has a fundamental system of quasi-compact neighbourhoods. Consider any quasi-coherent $\mathcal{O}_X$-module $\mathcal{F}$. Then there exists an open neighbourhood $U$ of $x$ such that $\mathcal{F}|_U$ is isomorphic to the sheaf of modules $\mathcal{F}_M$ on $(U, \mathcal{O}_U)$ associated to some $\Gamma(U, \mathcal{O}_U)$-module $M$. \end{lemma} 
\begin{definition} \label{definition-finite-presentation} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. We say that $\mathcal{F}$ is of {\it finite presentation} if for every point $x \in X$ there exists an open neighbourhood $x\in U \subset X$, and  $n, m \in \mathbf{N}$ such that $\mathcal{F}|_U$ is isomorphic to the cokernel of a map $$ \bigoplus\nolimits_{j = 1, \ldots, m} \mathcal{O}_U \longrightarrow \bigoplus\nolimits_{i = 1, \ldots, n} \mathcal{O}_U $$ \end{definition} 
\begin{lemma} \label{lemma-finite-presentation-quasi-coherent} Let $(X, \mathcal{O}_X)$ be a ringed space. Any $\mathcal{O}_X$-module of finite presentation is quasi-coherent. \end{lemma} 
\begin{lemma} \label{lemma-kernel-surjection-finite-free-onto-finite-presentation} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module of finite presentation. \begin{enumerate} \item If $\psi : \mathcal{O}_X^{\oplus r} \to \mathcal{F}$ is a surjection, then $\Ker(\psi)$ is of finite type. \item If $\theta : \mathcal{G} \to \mathcal{F}$ is surjective with $\mathcal{G}$ of finite type, then $\Ker(\theta)$ is of finite type. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-pullback-finite-presentation} Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. The pullback $f^*\mathcal{G}$ of a module of finite presentation is of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherent-limit-finite-presentation} Let $(X, \mathcal{O}_X)$ be a ringed space. Set $R = \Gamma(X, \mathcal{O}_X)$. Let $M$ be an $R$-module. The $\mathcal{O}_X$-module $\mathcal{F}_M$ associated to $M$ is a directed colimit of finitely presented $\mathcal{O}_X$-modules. \end{lemma} 
\begin{lemma} \label{lemma-finite-presentation-stalk-free} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a finitely presented $\mathcal{O}_X$-module. Let $x \in X$ such that $\mathcal{F}_x \cong \mathcal{O}_{X, x}^{\oplus r}$. Then there exists an open neighbourhood $U$ of $x$ such that $\mathcal{F}|_U \cong \mathcal{O}_U^{\oplus r}$. \end{lemma} 
\begin{definition} \label{definition-coherent} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. We say that $\mathcal{F}$ is a {\it coherent $\mathcal{O}_X$-module} if the following two conditions hold: \begin{enumerate} \item $\mathcal{F}$ is of finite type, and \item for every open $U \subset X$ and every finite collection $s_i \in \mathcal{F}(U)$, $i = 1, \ldots, n$ the kernel of the associated map $\bigoplus_{i = 1, \ldots, n} \mathcal{O}_U \to \mathcal{F}|_U$ is of finite type. \end{enumerate} The category of coherent $\mathcal{O}_X$-modules is denoted $\textit{Coh}(\mathcal{O}_X)$. \end{definition} 
\begin{lemma} \label{lemma-coherent-finite-presentation} Let $(X, \mathcal{O}_X)$ be a ringed space. Any coherent $\mathcal{O}_X$-module is of finite presentation and hence quasi-coherent. \end{lemma} 
\begin{lemma} \label{lemma-coherent-abelian} Let $(X, \mathcal{O}_X)$ be a ringed space. \begin{enumerate} \item Any finite type subsheaf of a coherent sheaf is coherent. \item Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a morphism from a finite type sheaf $\mathcal{F}$ to a coherent sheaf $\mathcal{G}$. Then $\Ker(\varphi)$ is of finite type. \item Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a morphism of coherent $\mathcal{O}_X$-modules. Then $\Ker(\varphi)$ and $\Coker(\varphi)$ are coherent. \item Given a short exact sequence of $\mathcal{O}_X$-modules $0 \to \mathcal{F}_1 \to \mathcal{F}_2 \to \mathcal{F}_3 \to 0$ if two out of three are coherent so is the third. \item The category $\textit{Coh}(\mathcal{O}_X)$ is a weak Serre subcategory of $\textit{Mod}(\mathcal{O}_X)$. In particular, the category of coherent modules is abelian and the inclusion functor $\textit{Coh}(\mathcal{O}_X) \to \textit{Mod}(\mathcal{O}_X)$ is exact. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-coherent-structure-sheaf} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module. Assume $\mathcal{O}_X$ is a coherent $\mathcal{O}_X$-module. Then $\mathcal{F}$ is coherent if and only if it is of finite presentation. \end{lemma} 
\begin{lemma} \label{lemma-finite-type-to-coherent-injective-on-stalk} Let $X$ be a ringed space. Let $\varphi : \mathcal{G} \to \mathcal{F}$ be a homomorphism of $\mathcal{O}_X$-modules. Let $x \in X$. Assume $\mathcal{G}$ of finite type, $\mathcal{F}$ coherent and the map on stalks $\varphi_x : \mathcal{G}_x \to \mathcal{F}_x$ injective. Then there exists an open neighbourhood $x \in U \subset X$ such that $\varphi|_U$ is injective. \end{lemma} 
\begin{definition} \label{definition-closed-immersion} A {\it closed immersion of ringed spaces}\footnote{This is nonstandard notation; see discussion above.} is a morphism $i : (Z, \mathcal{O}_Z) \to (X, \mathcal{O}_X)$ with the following properties: \begin{enumerate} \item The map $i$ is a closed immersion of topological spaces. \item The associated map $\mathcal{O}_X \to i_*\mathcal{O}_Z$ is surjective. Denote the kernel by $\mathcal{I}$. \item The $\mathcal{O}_X$-module $\mathcal{I}$ is locally generated by sections. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-i-star-quasi-coherent} Let $i : (Z, \mathcal{O}_Z) \to (X, \mathcal{O}_X)$ be a closed immersion of ringed spaces. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_Z$-module. Then $i_*\mathcal{F}$ is locally on $X$ the cokernel of a map of quasi-coherent $\mathcal{O}_X$-modules. \end{lemma} 
\begin{lemma} \label{lemma-i-star-reflects-finite-type} Let $i : (Z, \mathcal{O}_Z) \to (X, \mathcal{O}_X)$ be a morphism of ringed spaces. Assume $i$ is a homeomorphism onto a closed subset of $X$ and that $\mathcal{O}_X \to i_*\mathcal{O}_Z$ is surjective. Let $\mathcal{F}$ be an $\mathcal{O}_Z$-module. Then $i_*\mathcal{F}$ is of finite type if and only if $\mathcal{F}$ is of finite type. \end{lemma} 
\begin{lemma} \label{lemma-i-star-equivalence} Let $i : (Z, \mathcal{O}_Z) \to (X, \mathcal{O}_X)$ be a morphism of ringed spaces. Assume $i$ is a homeomorphism onto a closed subset of $X$ and $i^\sharp : \mathcal{O}_X \to i_*\mathcal{O}_Z$ is surjective. Denote $\mathcal{I} \subset \mathcal{O}_X$ the kernel of $i^\sharp$. The functor $$ i_* : \textit{Mod}(\mathcal{O}_Z) \longrightarrow \textit{Mod}(\mathcal{O}_X) $$ is exact, fully faithful, with essential image those $\mathcal{O}_X$-modules $\mathcal{G}$ such that $\mathcal{I}\mathcal{G} = 0$. \end{lemma} 
\begin{lemma} \label{lemma-adjoint-section-with-support} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $i : Z \to X$ be the inclusion of a closed subset. The functor $\mathcal{H}_Z : \textit{Mod}(\mathcal{O}_X) \to \textit{Mod}(\mathcal{O}_X|_Z)$ of Remark \ref{remark-sections-support-in-closed-modules} is right adjoint to $i_* : \textit{Mod}(\mathcal{O}_X|_Z) \to \textit{Mod}(\mathcal{O}_X)$. \end{lemma} 
\begin{definition} \label{definition-locally-free} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. \begin{enumerate} \item We say $\mathcal{F}$ is {\it locally free} if for every point $x \in X$ there exist a set $I$ and an open neighbourhood $x \in U \subset X$ such that $\mathcal{F}|_U$ is isomorphic to $\bigoplus_{i \in I} \mathcal{O}_X|_U$ as an $\mathcal{O}_X|_U$-module. \item We say $\mathcal{F}$ is {\it finite locally free} if we may choose the index sets $I$ to be finite. \item We say $\mathcal{F}$ is {\it finite locally free of rank $r$} if we may choose the index sets $I$ to have cardinality $r$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-locally-free-quasi-coherent} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. If $\mathcal{F}$ is locally free then it is quasi-coherent. \end{lemma} 
\begin{lemma} \label{lemma-pullback-locally-free} Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. If $\mathcal{G}$ is a locally free $\mathcal{O}_Y$-module, then $f^*\mathcal{G}$ is a locally free $\mathcal{O}_X$-module. \end{lemma} 
\begin{lemma} \label{lemma-rank} Let $(X, \mathcal{O}_X)$ be a ringed space. Suppose that the support of $\mathcal{O}_X$ is $X$, i.e., all stalks of $\mathcal{O}_X$ are nonzero rings. Let $\mathcal{F}$ be a locally free sheaf of $\mathcal{O}_X$-modules. There exists a locally constant function $$ \text{rank}_\mathcal{F} : X \longrightarrow \{0, 1, 2, \ldots\}\cup\{\infty\} $$ such that for any point $x \in X$ the cardinality of any set $I$ such that $\mathcal{F}$ is isomorphic to $\bigoplus_{i\in I} \mathcal{O}_X$ in a neighbourhood of $x$ is $\text{rank}_\mathcal{F}(x)$. \end{lemma} 
\begin{lemma} \label{lemma-map-finite-locally-free} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $r \geq 0$. Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a map of finite locally free $\mathcal{O}_X$-modules of rank $r$. Then $\varphi$ is an isomorphism if and only if $\varphi$ is surjective. \end{lemma} 
\begin{lemma} \label{lemma-direct-summand-of-locally-free-is-locally-free} Let $(X, \mathcal{O}_X)$ be a ringed space. If all stalks $\mathcal{O}_{X, x}$ are local rings, then any direct summand of a finite locally free $\mathcal{O}_X$-module is finite locally free. \end{lemma} 
\begin{lemma} \label{lemma-stalk-tensor-product} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$, $\mathcal{G}$ be $\mathcal{O}_X$-modules. Let $x \in X$. There is a canonical isomorphism of $\mathcal{O}_{X, x}$-modules $$ (\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G})_x = \mathcal{F}_x \otimes_{\mathcal{O}_{X, x}} \mathcal{G}_x $$ functorial in $\mathcal{F}$ and $\mathcal{G}$. \end{lemma} 
\begin{lemma} \label{lemma-tensor-product-sheafification} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}'$, $\mathcal{G}'$ be presheaves of $\mathcal{O}_X$-modules with sheafifications $\mathcal{F}$, $\mathcal{G}$. Then $\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G} = (\mathcal{F}' \otimes_{p, \mathcal{O}_X} \mathcal{G}')^\#$. \end{lemma} 
\begin{lemma} \label{lemma-tensor-product-exact} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{G}$ be an $\mathcal{O}_X$-module. If $\mathcal{F}_1 \to \mathcal{F}_2 \to \mathcal{F}_3 \to 0$ is an exact sequence of $\mathcal{O}_X$-modules then the induced sequence $$ \mathcal{F}_1 \otimes_{\mathcal{O}_X} \mathcal{G} \to \mathcal{F}_2 \otimes_{\mathcal{O}_X} \mathcal{G} \to \mathcal{F}_3 \otimes_{\mathcal{O}_X} \mathcal{G} \to 0 $$ is exact. \end{lemma} 
\begin{lemma} \label{lemma-tensor-product-pullback} Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. Let $\mathcal{F}$, $\mathcal{G}$ be $\mathcal{O}_Y$-modules. Then $f^*(\mathcal{F} \otimes_{\mathcal{O}_Y} \mathcal{G}) = f^*\mathcal{F} \otimes_{\mathcal{O}_X} f^*\mathcal{G}$ functorially in $\mathcal{F}$, $\mathcal{G}$. \end{lemma} 
\begin{lemma} \label{lemma-tensor-commute-colimits} Let $(X, \mathcal{O}_X)$ be a ringed space. For any $\mathcal{O}_X$-module $\mathcal{F}$ the functor $$ \textit{Mod}(\mathcal{O}_X) \longrightarrow \textit{Mod}(\mathcal{O}_X) , \quad \mathcal{G} \longmapsto \mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G} $$ commutes with arbitrary colimits. \end{lemma} 
\begin{lemma} \label{lemma-tensor-product-permanence} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$, $\mathcal{G}$ be $\mathcal{O}_X$-modules. \begin{enumerate} \item If $\mathcal{F}$, $\mathcal{G}$ are locally generated by sections, so is $\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G}$. \item If $\mathcal{F}$, $\mathcal{G}$ are of finite type, so is $\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G}$. \item If $\mathcal{F}$, $\mathcal{G}$ are quasi-coherent, so is $\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G}$. \item If $\mathcal{F}$, $\mathcal{G}$ are of finite presentation, so is $\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G}$. \item If $\mathcal{F}$ is of finite presentation and $\mathcal{G}$ is coherent, then $\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G}$ is coherent. \item If $\mathcal{F}$, $\mathcal{G}$ are coherent, so is $\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G}$. \item If $\mathcal{F}$, $\mathcal{G}$ are locally free, so is $\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G}$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-flat} Let $(X, \mathcal{O}_X)$ be a ringed space. An $\mathcal{O}_X$-module $\mathcal{F}$ is {\it flat} if the functor $$ \textit{Mod}(\mathcal{O}_X) \longrightarrow \textit{Mod}(\mathcal{O}_X), \quad \mathcal{G} \mapsto \mathcal{G} \otimes_\mathcal{O} \mathcal{F} $$ is exact. \end{definition} 
\begin{lemma} \label{lemma-flat-stalks-flat} Let $(X, \mathcal{O}_X)$ be a ringed space. An $\mathcal{O}_X$-module $\mathcal{F}$ is flat if and only if the stalk $\mathcal{F}_x$ is a flat $\mathcal{O}_{X, x}$-module for all $x \in X$. \end{lemma} 
\begin{definition} \label{definition-flat-at-point} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $x \in X$. An $\mathcal{O}_X$-module $\mathcal{F}$ is {\it flat at $x$} if $\mathcal{F}_x$ is a flat $\mathcal{O}_{X, x}$-module. \end{definition} 
\begin{lemma} \label{lemma-colimits-flat} Let $(X, \mathcal{O}_X)$ be a ringed space. A filtered colimit of flat $\mathcal{O}_X$-modules is flat. A direct sum of flat $\mathcal{O}_X$-modules is flat. \end{lemma} 
\begin{lemma} \label{lemma-j-shriek-flat} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $U \subset X$ be open. The sheaf $j_{U!}\mathcal{O}_U$ is a flat sheaf of $\mathcal{O}_X$-modules. \end{lemma} 
\begin{lemma} \label{lemma-module-quotient-flat} Let $(X, \mathcal{O}_X)$ be a ringed space. \begin{enumerate} \item Any sheaf of $\mathcal{O}_X$-modules is a quotient of a direct sum $\bigoplus j_{U_i!}\mathcal{O}_{U_i}$. \item Any $\mathcal{O}_X$-module is a quotient of a flat $\mathcal{O}_X$-module. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-flat-tor-zero} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $$ 0 \to \mathcal{F}'' \to \mathcal{F}' \to \mathcal{F} \to 0 $$ be a short exact sequence of $\mathcal{O}_X$-modules. Assume $\mathcal{F}$ is flat. Then for any $\mathcal{O}_X$-module $\mathcal{G}$ the sequence $$ 0 \to \mathcal{F}'' \otimes_\mathcal{O} \mathcal{G} \to \mathcal{F}' \otimes_\mathcal{O} \mathcal{G} \to \mathcal{F} \otimes_\mathcal{O} \mathcal{G} \to 0 $$ is exact. \end{lemma} 
\begin{lemma} \label{lemma-flat-ses} \begin{slogan} Kernels of epimorphisms and extensions of flat sheaves of modules over a ringed space are again flat. \end{slogan} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $$ 0 \to \mathcal{F}_2 \to \mathcal{F}_1 \to \mathcal{F}_0 \to 0 $$ be a short exact sequence of $\mathcal{O}_X$-modules. \begin{enumerate} \item If $\mathcal{F}_2$ and $\mathcal{F}_0$ are flat so is $\mathcal{F}_1$. \item If $\mathcal{F}_1$ and $\mathcal{F}_0$ are flat so is $\mathcal{F}_2$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-flat-resolution-of-flat} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $$ \ldots \to \mathcal{F}_2 \to \mathcal{F}_1 \to \mathcal{F}_0 \to \mathcal{Q} \to 0 $$ be an exact complex of $\mathcal{O}_X$-modules. If $\mathcal{Q}$ and all $\mathcal{F}_i$ are flat $\mathcal{O}_X$-modules, then for any $\mathcal{O}_X$-module $\mathcal{G}$ the complex $$ \ldots \to \mathcal{F}_2 \otimes_{\mathcal{O}_X} \mathcal{G} \to \mathcal{F}_1 \otimes_{\mathcal{O}_X} \mathcal{G} \to \mathcal{F}_0 \otimes_{\mathcal{O}_X} \mathcal{G} \to \mathcal{Q} \otimes_{\mathcal{O}_X} \mathcal{G} \to 0 $$ is exact also. \end{lemma} 
\begin{lemma} \label{lemma-flat-eq} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a flat $\mathcal{O}_X$-module. Let $U \subset X$ be open and let $$ \mathcal{O}_U \xrightarrow{(f_1, \ldots, f_n)} \mathcal{O}_U^{\oplus n} \xrightarrow{(s_1, \ldots, s_n)} \mathcal{F}|_U $$ be a complex of $\mathcal{O}_U$-modules. For every $x \in U$ there exists an open neighbourhood $V \subset U$ of $x$ and a factorization $$ \mathcal{O}_V^{\oplus n} \xrightarrow{A} \mathcal{O}_V^{\oplus m} \xrightarrow{(t_1, \ldots, t_m)} \mathcal{F}|_V $$ of $(s_1, \ldots, s_n)|_V$ such that $A \circ (f_1, \ldots, f_n)|_V = 0$. \end{lemma} 
\begin{lemma} \label{lemma-left-dual-module} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module. Let $\mathcal{G}, \eta, \epsilon$ be a left dual of $\mathcal{F}$ in the monoidal category of $\mathcal{O}_X$-modules, see Categories, Definition \ref{categories-definition-dual}. Then \begin{enumerate} \item $\mathcal{F}$ is locally a direct summand of a finite free $\mathcal{O}_X$-module, \item the map $e : \SheafHom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{O}_X) \to \mathcal{G}$ sending a local section $\lambda$ to $(\lambda \otimes 1)(\eta)$ is an isomorphism, \item we have $\epsilon(f, g) = e^{-1}(g)(f)$ for local sections $f$ and $g$ of $\mathcal{F}$ and $\mathcal{G}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-flat-locally-finite-presentation} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a flat $\mathcal{O}_X$-module of finite presentation. Then $\mathcal{F}$ is locally a direct summand of a finite free $\mathcal{O}_X$-module. \end{lemma} 
\begin{lemma} \label{lemma-surjection} Let $X$ be a topological space. Let $\mathcal{B}$ be a basis for the topology on $X$. Let $\mathcal{F}$ be a sheaf of sets on $X$. There exists a set $I$ and for each $i \in I$ an element $U_i \in \mathcal{B}$ and a finite set $S_i$ such that there exists a surjection $\coprod_{i \in I} j_{U_i!}\underline{S_i} \to \mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-filtered-colimit-constructibles} Let $X$ be a topological space. Let $\mathcal{B}$ be a basis for the topology of $X$ and assume that each $U \in \mathcal{B}$ is quasi-compact. Then every sheaf of sets on $X$ is a filtered colimit of sheaves of the form \begin{equation} \label{equation-towards-constructible-sets} \text{Coequalizer}\left( \xymatrix{ \coprod\nolimits_{b = 1, \ldots, m} j_{V_b!}\underline{S_b} \ar@<1ex>[r] \ar@<-1ex>[r] & \coprod\nolimits_{a = 1, \ldots, n} j_{U_a!}\underline{S_a} } \right) \end{equation} with $U_a$ and $V_b$ in $\mathcal{B}$ and $S_a$ and $S_b$ finite sets. \end{lemma} 
\begin{lemma} \label{lemma-constructible-comes-from-finite} Let $X$ be a spectral topological space. Let $\mathcal{B}$ be the set of quasi-compact open subsets of $X$. Let $\mathcal{F}$ be a sheaf of sets as in Equation (\ref{equation-towards-constructible-sets}). Then there exists a continuous spectral map $f : X \to Y$ to a finite sober topological space $Y$ and a sheaf of sets $\mathcal{G}$ on $Y$ with finite stalks such that $f^{-1}\mathcal{G} \cong \mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-constructible-in-constant} Let $X$ be a spectral topological space. Let $\mathcal{B}$ be the set of quasi-compact open subsets of $X$. Let $\mathcal{F}$ be a sheaf of sets as in Equation (\ref{equation-towards-constructible-sets}). Then there exist finitely many constructible closed subsets $Z_1, \ldots, Z_n \subset X$ and finite sets $S_i$ such that $\mathcal{F}$ is isomorphic to a subsheaf of $\prod (Z_i \to X)_*\underline{S_i}$. \end{lemma} 
\begin{definition} \label{definition-flat-morphism} Let $f : X \to Y$ be a morphism of ringed spaces. Let $x \in X$. We say $f$ is {\it flat at $x$} if the map of rings $\mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$ is flat. We say $f$ is {\it flat} if $f$ is flat at every $x \in X$. \end{definition} 
\begin{lemma} \label{lemma-pullback-flat} Let $f : X \to Y$ be a flat morphism of ringed spaces. Then the pullback functor $f^* : \textit{Mod}(\mathcal{O}_Y) \to \textit{Mod}(\mathcal{O}_X)$ is exact. \end{lemma} 
\begin{definition} \label{definition-flat-module} Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. \begin{enumerate} \item We say that $\mathcal{F}$ is {\it flat over $Y$ at a point $x \in X$} if the stalk $\mathcal{F}_x$ is a flat $\mathcal{O}_{Y, f(x)}$-module. \item We say that $\mathcal{F}$ is {\it flat over $Y$} if $\mathcal{F}$ is flat over $Y$ at every point $x$ of $X$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-pullback-tensor-flat-module} Let $f : X \to Y$ be a morphism of ringed spaces. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module flat over $Y$. Then the functor $$ \textit{Mod}(\mathcal{O}_Y) \to \textit{Mod}(\mathcal{O}_X),\quad \mathcal{G} \longmapsto f^*\mathcal{G} \otimes_{\mathcal{O}_X} \mathcal{F} $$ is exact. \end{lemma} 
\begin{lemma} \label{lemma-local-tensor-algebra} In the situation described above. The sheaf $\wedge^n\mathcal{F}$ is the sheafification of the presheaf $$ U \longmapsto \wedge^n_{\mathcal{O}_X(U)}(\mathcal{F}(U)). $$ See Algebra, Section \ref{algebra-section-tensor-algebra}. Similarly, the sheaf $\text{Sym}^n\mathcal{F}$ is the sheafification of the presheaf $$ U \longmapsto \text{Sym}^n_{\mathcal{O}_X(U)}(\mathcal{F}(U)). $$ \end{lemma} 
\begin{lemma} \label{lemma-stalk-tensor-algebra} In the situation described above. Let $x \in X$. There are canonical isomorphisms of $\mathcal{O}_{X, x}$-modules $\text{T}(\mathcal{F})_x = \text{T}(\mathcal{F}_x)$, $\text{Sym}(\mathcal{F})_x = \text{Sym}(\mathcal{F}_x)$, and $\wedge(\mathcal{F})_x = \wedge(\mathcal{F}_x)$. \end{lemma} 
\begin{lemma} \label{lemma-pullback-tensor-algebra} Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_Y$-modules. Then $f^*\text{T}(\mathcal{F}) = \text{T}(f^*\mathcal{F})$, and similarly for the exterior and symmetric algebras associated to $\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-presentation-sym-exterior} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}_2 \to \mathcal{F}_1 \to \mathcal{F} \to 0$ be an exact sequence of sheaves of $\mathcal{O}_X$-modules. For each $n \geq 1$ there is an exact sequence $$ \mathcal{F}_2 \otimes_{\mathcal{O}_X} \text{Sym}^{n - 1}(\mathcal{F}_1) \to \text{Sym}^n(\mathcal{F}_1) \to \text{Sym}^n(\mathcal{F}) \to 0 $$ and similarly an exact sequence $$ \mathcal{F}_2 \otimes_{\mathcal{O}_X} \wedge^{n - 1}(\mathcal{F}_1) \to \wedge^n(\mathcal{F}_1) \to \wedge^n(\mathcal{F}) \to 0 $$ \end{lemma} 
\begin{lemma} \label{lemma-tensor-algebra-permanence} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. \begin{enumerate} \item If $\mathcal{F}$ is locally generated by sections, then so is each $\text{T}^n(\mathcal{F})$, $\wedge^n(\mathcal{F})$, and $\text{Sym}^n(\mathcal{F})$. \item If $\mathcal{F}$ is of finite type, then so is each $\text{T}^n(\mathcal{F})$, $\wedge^n(\mathcal{F})$, and $\text{Sym}^n(\mathcal{F})$. \item If $\mathcal{F}$ is of finite presentation, then so is each $\text{T}^n(\mathcal{F})$, $\wedge^n(\mathcal{F})$, and $\text{Sym}^n(\mathcal{F})$. \item If $\mathcal{F}$ is coherent, then for $n > 0$ each $\text{T}^n(\mathcal{F})$, $\wedge^n(\mathcal{F})$, and $\text{Sym}^n(\mathcal{F})$ is coherent. \item If $\mathcal{F}$ is quasi-coherent, then so is each $\text{T}^n(\mathcal{F})$, $\wedge^n(\mathcal{F})$, and $\text{Sym}^n(\mathcal{F})$. \item If $\mathcal{F}$ is locally free, then so is each $\text{T}^n(\mathcal{F})$, $\wedge^n(\mathcal{F})$, and $\text{Sym}^n(\mathcal{F})$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-whole-tensor-algebra-permanence} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. \begin{enumerate} \item If $\mathcal{F}$ is quasi-coherent, then so is each $\text{T}(\mathcal{F})$, $\wedge(\mathcal{F})$, and $\text{Sym}(\mathcal{F})$. \item If $\mathcal{F}$ is locally free, then so is each $\text{T}(\mathcal{F})$, $\wedge(\mathcal{F})$, and $\text{Sym}(\mathcal{F})$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-internal-hom} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$, $\mathcal{G}$, $\mathcal{H}$ be $\mathcal{O}_X$-modules. There is a canonical isomorphism $$ \SheafHom_{\mathcal{O}_X} (\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G}, \mathcal{H}) \longrightarrow \SheafHom_{\mathcal{O}_X} (\mathcal{F}, \SheafHom_{\mathcal{O}_X}(\mathcal{G}, \mathcal{H})) $$ which is functorial in all three entries (sheaf Hom in all three spots). In particular, to give a morphism $\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{G} \to \mathcal{H}$ is the same as giving a morphism $\mathcal{F} \to \SheafHom_{\mathcal{O}_X}(\mathcal{G}, \mathcal{H})$. \end{lemma} 
\begin{lemma} \label{lemma-internal-hom-exact} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$, $\mathcal{G}$ be $\mathcal{O}_X$-modules. \begin{enumerate} \item If $\mathcal{F}_2 \to \mathcal{F}_1 \to \mathcal{F} \to 0$ is an exact sequence of $\mathcal{O}_X$-modules, then $$ 0 \to \SheafHom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{G}) \to \SheafHom_{\mathcal{O}_X}(\mathcal{F}_1, \mathcal{G}) \to \SheafHom_{\mathcal{O}_X}(\mathcal{F}_2, \mathcal{G}) $$ is exact. \item If $0 \to \mathcal{G} \to \mathcal{G}_1 \to \mathcal{G}_2$ is an exact sequence of $\mathcal{O}_X$-modules, then $$ 0 \to \SheafHom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{G}) \to \SheafHom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{G}_1) \to \SheafHom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{G}_2) $$ is exact. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-adjoint-tensor-restrict} Let $X$ be a topological space. Let $\mathcal{O}_1 \to \mathcal{O}_2$ be a homomorphism of sheaves of rings. Then we have $$ \Hom_{\mathcal{O}_1}(\mathcal{F}_{\mathcal{O}_1}, \mathcal{G}) = \Hom_{\mathcal{O}_2}(\mathcal{F}, \SheafHom_{\mathcal{O}_1}(\mathcal{O}_2, \mathcal{G})) $$ bifunctorially in $\mathcal{F} \in \textit{Mod}(\mathcal{O}_2)$ and $\mathcal{G} \in \textit{Mod}(\mathcal{O}_1)$. \end{lemma} 
\begin{lemma} \label{lemma-stalk-internal-hom} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$, $\mathcal{G}$ be $\mathcal{O}_X$-modules. If $\mathcal{F}$ is of finite type then the canonical map $$ \SheafHom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{G})_x \to \Hom_{\mathcal{O}_{X, x}}(\mathcal{F}_x, \mathcal{G}_x) $$ is injective. If $\mathcal{F}$ is finitely presented, this canonical morphism is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-pullback-internal-hom} Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. Let $\mathcal{F}$, $\mathcal{G}$ be $\mathcal{O}_Y$-modules. If $\mathcal{F}$ is finitely presented and $f$ is flat, then the canonical map $$ f^*\SheafHom_{\mathcal{O}_Y}(\mathcal{F}, \mathcal{G}) \longrightarrow \SheafHom_{\mathcal{O}_X}(f^*\mathcal{F}, f^*\mathcal{G}) $$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-internal-hom-locally-kernel-direct-sum} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$, $\mathcal{G}$ be $\mathcal{O}_X$-modules. If $\mathcal{F}$ is finitely presented then the sheaf $\SheafHom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{G})$ is locally a kernel of a map between finite direct sums of copies of $\mathcal{G}$. In particular, if $\mathcal{G}$ is coherent then $\SheafHom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{G})$ is coherent too. \end{lemma} 
\begin{lemma} \label{lemma-hom-finite-presentation-colimit} Let $X$ be a ringed space. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module of finite presentation. Let $\mathcal{G} = \colim_{\lambda \in \Lambda} \mathcal{G}_\lambda$ be a filtered colimit of $\mathcal{O}_X$-modules. Then the canonical map $$ \colim_\lambda \SheafHom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{G}_\lambda) \longrightarrow \SheafHom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{G}) $$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-finite-presentation-quasi-compact-colimit} Let $X$ be a ringed space. Let $I$ be a preordered set and let $(\mathcal{F}_i, \varphi_{ii'})$ be a system over $I$ consisting of sheaves of $\mathcal{O}_X$-modules (see Categories, Section \ref{categories-section-posets-limits}). Assume \begin{enumerate} \item $I$ is directed, \item $\mathcal{G}$ is an $\mathcal{O}_X$-module of finite presentation, and \item $X$ has a cofinal system of open coverings $\mathcal{U} : X = \bigcup_{j\in J} U_j$ with $J$ finite and $U_j \cap U_{j'}$ quasi-compact for all $j, j' \in J$. \end{enumerate} Then we have $$ \colim_i \Hom_X(\mathcal{G}, \mathcal{F}_i) = \Hom_X(\mathcal{G}, \colim_i \mathcal{F}_i). $$ \end{lemma} 
\begin{definition} \label{definition-annihilator-sheaf} Let $(X, \mathcal{O}_X)$ be a ringed space and let $\mathcal{F}$ be an $\mathcal{O}_X$-module. The {\it annihilator} of $\mathcal{F}$, denoted $\text{Ann}_{\mathcal{O}_X}(\mathcal{F})$ is the kernel of the map $\mathcal{O}_X \to \SheafHom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{F})$ discussed above. \end{definition} 
\begin{lemma} \label{lemma-finite-type-annihilator-stalk} Let $(X, \mathcal{O}_X)$ be a ringed space and let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules. If $\mathcal{F}$ is of finite type, then $(\text{Ann}_{\mathcal{O}_X}(\mathcal{F}))_x = \text{Ann}_{\mathcal{O}_{X, x}}(\mathcal{F}_x)$. \end{lemma} 
\begin{lemma} \label{lemma-induced-quotient-ring-sheaf-module-structure} Let $(X, \mathcal{O}_X)$ be a ringed space, let $\mathcal{F}$ be an $\mathcal{O}_X$-module and let $\mathcal{I} \subset \mathcal{O}_X$ be an ideal sheaf. If $\mathcal{I} \subset \text{Ann}_{\mathcal{O}_X}(\mathcal{F})$, then $\mathcal{F}$ has a natural $\mathcal{O}_X/\mathcal{I}$-module structure which agrees with the usual commutative algebra construction on stalks. \end{lemma} 
\begin{lemma} \label{lemma-coherent-annihilator} Let $(X,\mathcal{O}_X)$ be a ringed space. If $\mathcal{O}_X$ and $\mathcal{F}$ are coherent, then so is $\text{Ann}_{\mathcal{O}_X}(\mathcal{F})$. \end{lemma} 
\begin{definition} \label{definition-koszul} Let $X$ be a ringed space. Let $\varphi : \mathcal{E} \to \mathcal{O}_X$ be an $\mathcal{O}_X$-module map. The {\it Koszul complex} $K_\bullet(\varphi)$ associated to $\varphi$ is the sheaf of commutative differential graded algebras defined as follows: \begin{enumerate} \item the underlying graded algebra is the exterior algebra $K_\bullet(\varphi) = \wedge(\mathcal{E})$, \item the differential $d : K_\bullet(\varphi) \to K_\bullet(\varphi)$ is the unique derivation such that $d(e) = \varphi(e)$ for all local sections $e$ of $\mathcal{E} = K_1(\varphi)$. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-koszul-complex} Let $X$ be a ringed space and let $f_1, \ldots, f_n \in \Gamma(X, \mathcal{O}_X)$. The {\it Koszul complex on $f_1, \ldots, f_r$} is the Koszul complex associated to the map $(f_1, \ldots, f_n) : \mathcal{O}_X^{\oplus n} \to \mathcal{O}_X$. Notation $K_\bullet(\mathcal{O}_X, f_1, \ldots, f_n)$, or $K_\bullet(\mathcal{O}_X, f_\bullet)$. \end{definition} 
\begin{definition} \label{definition-invertible} Let $(X, \mathcal{O}_X)$ be a ringed space. An {\it invertible $\mathcal{O}_X$-module} is a sheaf of $\mathcal{O}_X$-modules $\mathcal{L}$ such that the functor $$ \textit{Mod}(\mathcal{O}_X) \longrightarrow \textit{Mod}(\mathcal{O}_X),\quad \mathcal{F} \longmapsto \mathcal{L} \otimes_{\mathcal{O}_X} \mathcal{F} $$ is an equivalence of categories. We say that $\mathcal{L}$ is {\it trivial} if it is isomorphic as an $\mathcal{O}_X$-module to $\mathcal{O}_X$. \end{definition} 
\begin{lemma} \label{lemma-invertible} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{L}$ be an $\mathcal{O}_X$-module. Equivalent are \begin{enumerate} \item $\mathcal{L}$ is invertible, and \item there exists an $\mathcal{O}_X$-module $\mathcal{N}$ such that $\mathcal{L} \otimes_{\mathcal{O}_X} \mathcal{N} \cong \mathcal{O}_X$. \end{enumerate} In this case $\mathcal{L}$ is locally a direct summand of a finite free $\mathcal{O}_X$-module and the module $\mathcal{N}$ in (2) is isomorphic to $\SheafHom_{\mathcal{O}_X}(\mathcal{L}, \mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-pullback-invertible} Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. The pullback $f^*\mathcal{L}$ of an invertible $\mathcal{O}_Y$-module is invertible. \end{lemma} 
\begin{lemma} \label{lemma-invertible-is-locally-free-rank-1} Let $(X, \mathcal{O}_X)$ be a ringed space. Any locally free $\mathcal{O}_X$-module of rank $1$ is invertible. If all stalks $\mathcal{O}_{X, x}$ are local rings, then the converse holds as well (but in general this is not the case). \end{lemma} 
\begin{lemma} \label{lemma-constructions-invertible} Let $(X, \mathcal{O}_X)$ be a ringed space. \begin{enumerate} \item If $\mathcal{L}$, $\mathcal{N}$ are invertible $\mathcal{O}_X$-modules, then so is $\mathcal{L} \otimes_{\mathcal{O}_X} \mathcal{N}$. \item If $\mathcal{L}$ is an invertible $\mathcal{O}_X$-module, then so is $\SheafHom_{\mathcal{O}_X}(\mathcal{L}, \mathcal{O}_X)$ and the evaluation map $\mathcal{L} \otimes_{\mathcal{O}_X} \SheafHom_{\mathcal{O}_X}(\mathcal{L}, \mathcal{O}_X) \to \mathcal{O}_X$ is an isomorphism. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-powers} Let $(X, \mathcal{O}_X)$ be a ringed space. Given an invertible sheaf $\mathcal{L}$ on $X$ and $n \in \mathbf{Z}$ we define the $n$th {\it tensor power} $\mathcal{L}^{\otimes n}$ of $\mathcal{L}$ as the image of $\mathcal{O}_X$ under applying the equivalence $\mathcal{F} \mapsto\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}$ exactly $n$ times. \end{definition} 
\begin{definition} \label{definition-gamma-star} Let $(X, \mathcal{O}_X)$ be a ringed space. Given an invertible sheaf $\mathcal{L}$ on $X$ we define the {\it associated graded ring} to be $$ \Gamma_*(X, \mathcal{L}) = \bigoplus\nolimits_{n \geq 0} \Gamma(X, \mathcal{L}^{\otimes n}) $$ Given a sheaf of $\mathcal{O}_X$-modules $\mathcal{F}$ we set $$ \Gamma_*(X, \mathcal{L}, \mathcal{F}) = \bigoplus\nolimits_{n \in \mathbf{Z}} \Gamma(X, \mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}^{\otimes n}) $$ which we think of as a graded $\Gamma_*(X, \mathcal{L})$-module. \end{definition} 
\begin{lemma} \label{lemma-pic-set} Let $(X, \mathcal{O}_X)$ be a ringed space. There exists a set of invertible modules $\{\mathcal{L}_i\}_{i \in I}$ such that each invertible module on $X$ is isomorphic to exactly one of the $\mathcal{L}_i$. \end{lemma} 
\begin{definition} \label{definition-pic} Let $(X, \mathcal{O}_X)$ be a ringed space. The {\it Picard group} $\Pic(X)$ of $X$ is the abelian group whose elements are isomorphism classes of invertible $\mathcal{O}_X$-modules, with addition corresponding to tensor product. \end{definition} 
\begin{lemma} \label{lemma-s-open} \begin{slogan} A (local) trivialisation of a linebundle is the same as a (local) nonvanishing section. \end{slogan} Let $X$ be a ringed space. Assume that each stalk $\mathcal{O}_{X, x}$ is a local ring with maximal ideal $\mathfrak m_x$. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module. For any section $s \in \Gamma(X, \mathcal{L})$ the set $$ X_s = \{x \in X \mid \text{image }s \not\in \mathfrak m_x\mathcal{L}_x\} $$ is open in $X$. The map $s : \mathcal{O}_{X_s} \to \mathcal{L}|_{X_s}$ is an isomorphism, and there exists a section $s'$ of $\mathcal{L}^{\otimes -1}$ over $X_s$ such that $s' (s|_{X_s}) = 1$. \end{lemma} 
\begin{lemma} \label{lemma-det-ses} Let $X$ be a ringed space. Let $0 \to \mathcal{E}' \to \mathcal{E} \to \mathcal{E}'' \to 0$ be a short exact sequence of finite locally free $\mathcal{O}_X$-modules. Then there is a canonical isomorphism $$ \det(\mathcal{E}') \otimes_{\mathcal{O}_X}\det(\mathcal{E}'') \longrightarrow \det(\mathcal{E}) $$ of $\mathcal{O}_X$-modules. \end{lemma} 
\begin{lemma} \label{lemma-determinant-as-socle} Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{F}$ be a flat and finitely presented $\mathcal{O}_X$-module. Denote $$ \det(\mathcal{F}) \subset \wedge^*_{\mathcal{O}_X}(\mathcal{F}) $$ the annihilator of $\mathcal{F} \subset \wedge^*_{\mathcal{O}_X}(\mathcal{F})$. Then $\det(\mathcal{F})$ is an invertible $\mathcal{O}_X$-module. \end{lemma} 
\begin{lemma} \label{lemma-simple-invert} Let $X$ be a topological space and let $\mathcal{O}_X$ be a presheaf of rings. Let $\mathcal{S} \subset \mathcal{O}_X$ be a pre-sheaf of sets contained in $\mathcal{O}_X$. Suppose that for every open $U \subset X$ the set $\mathcal{S}(U) \subset \mathcal{O}_X(U)$ is a multiplicative subset. \begin{enumerate} \item There is a map of presheaves of rings $\mathcal{O}_X \to \mathcal{S}^{-1}\mathcal{O}_X$ such that every local section of $\mathcal{S}$ maps to an invertible section of $\mathcal{O}_X$. \item For any homomorphism of presheaves of rings $\mathcal{O}_X \to \mathcal{A}$ such that each local section of $\mathcal{S}$ maps to an invertible section of $\mathcal{A}$ there exists a unique factorization $\mathcal{S}^{-1}\mathcal{O}_X \to \mathcal{A}$. \item For any $x \in X$ we have $$ (\mathcal{S}^{-1}\mathcal{O}_X)_x = \mathcal{S}_x^{-1} \mathcal{O}_{X, x}. $$ \item The sheafification $(\mathcal{S}^{-1}\mathcal{O}_X)^\#$ is a sheaf of rings with a map of sheaves of rings $(\mathcal{O}_X)^\# \to (\mathcal{S}^{-1}\mathcal{O}_X)^\#$ which is universal for maps of $(\mathcal{O}_X)^\#$ into sheaves of rings such that each local section of $\mathcal{S}$ maps to an invertible section. \item For any $x \in X$ we have $$ (\mathcal{S}^{-1}\mathcal{O}_X)^\#_x = \mathcal{S}_x^{-1} \mathcal{O}_{X, x}. $$ \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-simple-invert-module} Let $X$ be a topological space. Let $\mathcal{O}_X$ be a presheaf of rings. Let $\mathcal{S} \subset \mathcal{O}_X$ be a pre-sheaf of sets contained in $\mathcal{O}_X$. Suppose that for every open $U \subset X$ the set $\mathcal{S}(U) \subset \mathcal{O}_X(U)$ is a multiplicative subset. For any presheaf of $\mathcal{O}_X$-modules $\mathcal{F}$ we have $$ \mathcal{S}^{-1}\mathcal{F} = \mathcal{S}^{-1}\mathcal{O}_X \otimes_{p, \mathcal{O}_X} \mathcal{F} $$ (see Sheaves, Section \ref{sheaves-section-presheaves-modules} for notation) and if $\mathcal{F}$ and $\mathcal{O}_X$ are sheaves then $$ (\mathcal{S}^{-1}\mathcal{F})^\# = (\mathcal{S}^{-1}\mathcal{O}_X)^\# \otimes_{\mathcal{O}_X} \mathcal{F} $$ (see Sheaves, Section \ref{sheaves-section-sheafification-presheaves-modules} for notation). \end{lemma} 
\begin{definition} \label{definition-derivation} Let $X$ be a topological space. Let $\varphi : \mathcal{O}_1 \to \mathcal{O}_2$ be a homomorphism of sheaves of rings. Let $\mathcal{F}$ be an $\mathcal{O}_2$-module. An {\it $\mathcal{O}_1$-derivation} or more precisely a {\it $\varphi$-derivation} into $\mathcal{F}$ is a map $D : \mathcal{O}_2 \to \mathcal{F}$ which is additive, annihilates the image of $\mathcal{O}_1 \to \mathcal{O}_2$, and satisfies the {\it Leibniz rule} $$ D(ab) = aD(b) + D(a)b $$ for all $a, b$ local sections of $\mathcal{O}_2$ (wherever they are both defined). We denote $\text{Der}_{\mathcal{O}_1}(\mathcal{O}_2, \mathcal{F})$ the set of $\varphi$-derivations into $\mathcal{F}$. \end{definition} 
\begin{lemma} \label{lemma-universal-module} Let $X$ be a topological space. Let $\varphi : \mathcal{O}_1 \to \mathcal{O}_2$ be a homomorphism of sheaves of rings. The functor $$ \textit{Mod}(\mathcal{O}_2) \longrightarrow \textit{Ab}, \quad \mathcal{F} \longmapsto \text{Der}_{\mathcal{O}_1}(\mathcal{O}_2, \mathcal{F}) $$ is representable. \end{lemma} 
\begin{definition} \label{definition-module-differentials} Let $X$ be a topological space. Let $\varphi : \mathcal{O}_1 \to \mathcal{O}_2$ be a homomorphism of sheaves of rings on $X$. The {\it module of differentials} of $\varphi$ is the object representing the functor $\mathcal{F} \mapsto \text{Der}_{\mathcal{O}_1}(\mathcal{O}_2, \mathcal{F})$ which exists by Lemma \ref{lemma-universal-module}. It is denoted $\Omega_{\mathcal{O}_2/\mathcal{O}_1}$, and the {\it universal $\varphi$-derivation} is denoted $\text{d} : \mathcal{O}_2 \to \Omega_{\mathcal{O}_2/\mathcal{O}_1}$. \end{definition} 
\begin{lemma} \label{lemma-differentials-sheafify} Let $X$ be a topological space. Let $\varphi : \mathcal{O}_1 \to \mathcal{O}_2$ be a homomorphism of sheaves of rings on $X$. Then $\Omega_{\mathcal{O}_2/\mathcal{O}_1}$ is the sheaf associated to the presheaf $U \mapsto \Omega_{\mathcal{O}_2(U)/\mathcal{O}_1(U)}$. \end{lemma} 
\begin{lemma} \label{lemma-localize-differentials} Let $X$ be a topological space. Let $\varphi : \mathcal{O}_1 \to \mathcal{O}_2$ be a homomorphism of sheaves of rings. For $U \subset X$ open there is a canonical isomorphism $$ \Omega_{\mathcal{O}_2/\mathcal{O}_1}|_U = \Omega_{(\mathcal{O}_2|_U)/(\mathcal{O}_1|_U)} $$ compatible with universal derivations. \end{lemma} 
\begin{lemma} \label{lemma-pullback-differentials} Let $f : Y \to X$ be a continuous map of topological spaces. Let $\varphi : \mathcal{O}_1 \to \mathcal{O}_2$ be a homomorphism of sheaves of rings on $X$. Then there is a canonical identification $f^{-1}\Omega_{\mathcal{O}_2/\mathcal{O}_1} = \Omega_{f^{-1}\mathcal{O}_2/f^{-1}\mathcal{O}_1}$ compatible with universal derivations. \end{lemma} 
\begin{lemma} \label{lemma-stalk-module-differentials} Let $X$ be a topological space. Let $\mathcal{O}_1 \to \mathcal{O}_2$ be a homomorphism of sheaves of rings on $X$. Let $x \in X$. Then we have $\Omega_{\mathcal{O}_2/\mathcal{O}_1, x} = \Omega_{\mathcal{O}_{2, x}/\mathcal{O}_{1, x}}$. \end{lemma} 
\begin{lemma} \label{lemma-functoriality-differentials} Let $X$ be a topological space. Let $$ \xymatrix{ \mathcal{O}_2 \ar[r]_\varphi & \mathcal{O}_2' \\ \mathcal{O}_1 \ar[r] \ar[u] & \mathcal{O}'_1 \ar[u] } $$ be a commutative diagram of sheaves of rings on $X$. The map $\mathcal{O}_2 \to \mathcal{O}'_2$ composed with the map $\text{d} : \mathcal{O}'_2 \to \Omega_{\mathcal{O}'_2/\mathcal{O}'_1}$ is a $\mathcal{O}_1$-derivation. Hence we obtain a canonical map of $\mathcal{O}_2$-modules $\Omega_{\mathcal{O}_2/\mathcal{O}_1} \to \Omega_{\mathcal{O}'_2/\mathcal{O}'_1}$. It is uniquely characterized by the property that $\text{d}(f) \mapsto \text{d}(\varphi(f))$ for any local section $f$ of $\mathcal{O}_2$. In this way $\Omega_{-/-}$ becomes a functor on the category of arrows of sheaves of rings. \end{lemma} 
\begin{lemma} \label{lemma-differential-seq} In Lemma \ref{lemma-functoriality-differentials} suppose that $\mathcal{O}_2 \to \mathcal{O}'_2$ is surjective with kernel $\mathcal{I} \subset \mathcal{O}_2$ and assume that $\mathcal{O}_1 = \mathcal{O}'_1$. Then there is a canonical exact sequence of $\mathcal{O}'_2$-modules $$ \mathcal{I}/\mathcal{I}^2 \longrightarrow \Omega_{\mathcal{O}_2/\mathcal{O}_1} \otimes_{\mathcal{O}_2} \mathcal{O}'_2 \longrightarrow \Omega_{\mathcal{O}'_2/\mathcal{O}_1} \longrightarrow 0 $$ The leftmost map is characterized by the rule that a local section $f$ of $\mathcal{I}$ maps to $\text{d}f \otimes 1$. \end{lemma} 
\begin{definition} \label{definition-differentials} Let $(f, f^\sharp) : (X, \mathcal{O}_X) \to (S, \mathcal{O}_S)$ be a morphism of ringed spaces. \begin{enumerate} \item Let $\mathcal{F}$ be an $\mathcal{O}_X$-module. An {\it $S$-derivation} into $\mathcal{F}$ is a $f^{-1}\mathcal{O}_S$-derivation, or more precisely a $f^\sharp$-derivation in the sense of Definition \ref{definition-derivation}. We denote $\text{Der}_S(\mathcal{O}_X, \mathcal{F})$ the set of $S$-derivations into $\mathcal{F}$. \item The {\it sheaf of differentials $\Omega_{X/S}$ of $X$ over $S$} is the module of differentials $\Omega_{\mathcal{O}_X/f^{-1}\mathcal{O}_S}$ endowed with its universal $S$-derivation $\text{d}_{X/S} : \mathcal{O}_X \to \Omega_{X/S}$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-double-structure-gives-derivation} Let $(f, f^\sharp) : (X, \mathcal{O}_X) \to (S, \mathcal{O}_S)$ be a morphism of ringed spaces. Consider a short exact sequence $$ 0 \to \mathcal{I} \to \mathcal{A} \to \mathcal{O}_X \to 0 $$ Here $\mathcal{A}$ is a sheaf of $f^{-1}\mathcal{O}_S$-algebras, $\pi : \mathcal{A} \to \mathcal{O}_X$ is a surjection of sheaves of $f^{-1}\mathcal{O}_S$-algebras, and $\mathcal{I} = \Ker(\pi)$ is its kernel. Assume $\mathcal{I}$ an ideal sheaf with square zero in $\mathcal{A}$. So $\mathcal{I}$ has a natural structure of an $\mathcal{O}_X$-module. A section $s : \mathcal{O}_X \to \mathcal{A}$ of $\pi$ is a $f^{-1}\mathcal{O}_S$-algebra map such that $\pi \circ s = \text{id}$. Given any section $s : \mathcal{O}_X \to \mathcal{A}$ of $\pi$ and any $S$-derivation $D : \mathcal{O}_X \to \mathcal{I}$ the map $$ s + D : \mathcal{O}_X \to \mathcal{A} $$ is a section of $\pi$ and every section $s'$ is of the form $s + D$ for a unique $S$-derivation $D$. \end{lemma} 
\begin{lemma} \label{lemma-functoriality-differentials-ringed-spaces} Let $$ \xymatrix{ X' \ar[d]_{h'} \ar[r]_f & X \ar[d]^h \\ S' \ar[r]^g & S } $$ be a commutative diagram of ringed spaces. \begin{enumerate} \item The canonical map $\mathcal{O}_X \to f_*\mathcal{O}_{X'}$ composed with $f_*\text{d}_{X'/S'} : f_*\mathcal{O}_{X'} \to f_*\Omega_{X'/S'}$ is a $S$-derivation and we obtain a canonical map of $\mathcal{O}_X$-modules $\Omega_{X/S} \to f_*\Omega_{X'/S'}$. \item The commutative diagram $$ \xymatrix{ f^{-1}\mathcal{O}_X \ar[r] & \mathcal{O}_{X'} \\ f^{-1}h^{-1}\mathcal{O}_S \ar[u] \ar[r] & (h')^{-1}\mathcal{O}_{S'} \ar[u] } $$ induces by Lemmas \ref{lemma-pullback-differentials} and \ref{lemma-functoriality-differentials} a canonical map $f^{-1}\Omega_{X/S} \to \Omega_{X'/S'}$. \end{enumerate} These two maps correspond (via adjointness of $f_*$ and $f^*$ and via $f^*\Omega_{X/S} = f^{-1}\Omega_{X/S} \otimes_{f^{-1}\mathcal{O}_X} \mathcal{O}_{X'}$ and Sheaves, Lemma \ref{sheaves-lemma-adjointness-tensor-restrict}) to the same $\mathcal{O}_{X'}$-module homomorphism $$ c_f : f^*\Omega_{X/S} \longrightarrow \Omega_{X'/S'} $$ which is uniquely characterized by the property that $f^*\text{d}_{X/S}(a)$ maps to $\text{d}_{X'/S'}(f^*a)$ for any local section $a$ of $\mathcal{O}_X$. \end{lemma} 
\begin{lemma} \label{lemma-check-functoriality-differentials} Let $$ \xymatrix{ X'' \ar[d] \ar[r]_g & X' \ar[d] \ar[r]_f & X \ar[d] \\ S'' \ar[r] & S' \ar[r] & S } $$ be a commutative diagram of ringed spaces. With notation as in Lemma \ref{lemma-functoriality-differentials-ringed-spaces} we have $$ c_{f \circ g} = c_g \circ g^* c_f $$ as maps $(f \circ g)^*\Omega_{X/S} \to \Omega_{X''/S''}$. \end{lemma} 
\begin{lemma} \label{lemma-triangle-differentials} Let $f : X \to Y$, $g : Y \to S$ be morphisms of ringed spaces Then there is a canonical exact sequence $$ f^*\Omega_{Y/S} \to \Omega_{X/S} \to \Omega_{X/Y} \to 0 $$ where the maps come from applications of Lemma \ref{lemma-functoriality-differentials-ringed-spaces}. \end{lemma} 
\begin{definition} \label{definition-differential-operators} Let $X$ be a topological space. Let $\varphi : \mathcal{O}_1 \to \mathcal{O}_2$ be a homomorphism of sheaves of rings on $X$. Let $k \geq 0$ be an integer. Let $\mathcal{F}$, $\mathcal{G}$ be sheaves of $\mathcal{O}_2$-modules. A {\it differential operator $D : \mathcal{F} \to \mathcal{G}$ of order $k$} is an is an $\mathcal{O}_1$-linear map such that for all local sections $g$ of $\mathcal{O}_2$ the map $s \mapsto D(gs) - gD(s)$ is a differential operator of order $k - 1$. For the base case $k = 0$ we define a differential operator of order $0$ to be an $\mathcal{O}_2$-linear map. \end{definition} 
\begin{lemma} \label{lemma-composition-differential-operators} Let $X$ be a topological space. Let $\mathcal{O}_1 \to \mathcal{O}_2$ be a map of sheaves of rings on $X$. Let $\mathcal{E}, \mathcal{F}, \mathcal{G}$ be sheaves of $\mathcal{O}_2$-modules. If $D : \mathcal{E} \to \mathcal{F}$ and $D' : \mathcal{F} \to \mathcal{G}$ are differential operators of order $k$ and $k'$, then $D' \circ D$ is a differential operator of order $k + k'$. \end{lemma} 
\begin{lemma} \label{lemma-module-principal-parts} Let $X$ be a topological space. Let $\mathcal{O}_1 \to \mathcal{O}_2$ be a map of sheaves of rings on $X$. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_2$-modules. Let $k \geq 0$. There exists a sheaf of $\mathcal{O}_2$-modules $\mathcal{P}^k_{\mathcal{O}_2/\mathcal{O}_1}(\mathcal{F})$ and a canonical isomorphism $$ \text{Diff}^k_{\mathcal{O}_2/\mathcal{O}_1}(\mathcal{F}, \mathcal{G}) = \Hom_{\mathcal{O}_2}( \mathcal{P}^k_{\mathcal{O}_2/\mathcal{O}_1}(\mathcal{F}), \mathcal{G}) $$ functorial in the $\mathcal{O}_2$-module $\mathcal{G}$. \end{lemma} 
\begin{definition} \label{definition-module-principal-parts} Let $X$ be a topoological space. Let $\mathcal{O}_1 \to \mathcal{O}_2$ be a map of sheaves of rings on $X$. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_2$-modules. The module $\mathcal{P}^k_{\mathcal{O}_2/\mathcal{O}_1}(\mathcal{F})$ constructed in Lemma \ref{lemma-module-principal-parts} is called the {\it module of principal parts of order $k$} of $\mathcal{F}$. \end{definition} 
\begin{lemma} \label{lemma-differential-operators-sheafify} Let $X$ be a topological space. Let $\mathcal{O}_1 \to \mathcal{O}_2$ be a homomorphism of presheaves of rings on $X$. Let $\mathcal{F}$ be a presheaf of $\mathcal{O}_2$-modules. Then $\mathcal{P}^k_{\mathcal{O}_2^\#/\mathcal{O}_1^\#}(\mathcal{F}^\#)$ is the sheaf associated to the presheaf $U \mapsto P^k_{\mathcal{O}_2(U)/\mathcal{O}_1(U)}(\mathcal{F}(U))$. \end{lemma} 
\begin{lemma} \label{lemma-sequence-of-principal-parts} Let $X$ be a topological space. Let $\mathcal{O}_1 \to \mathcal{O}_2$ be a homomorphism of sheaves of rings on $X$. Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_2$-modules. There is a canonical short exact sequence $$ 0 \to \Omega_{\mathcal{O}_2/\mathcal{O}_1} \otimes_{\mathcal{O}_2} \mathcal{F} \to \mathcal{P}^1_{\mathcal{O}_2/\mathcal{O}_1}(\mathcal{F}) \to \mathcal{F} \to 0 $$ functorial in $\mathcal{F}$ called the {\it sequence of principal parts}. \end{lemma} 
\begin{definition} \label{definition-relative-differential-operators} Let $(f, f^\sharp) : (X, \mathcal{O}_X) \to (S, \mathcal{O}_S)$ be a morphism of ringed spaces. Let $\mathcal{F}$ and $\mathcal{G}$ be $\mathcal{O}_X$-modules. Let $k \geq 0$ be an integer. A {\it differential operator of order $k$ on $X/S$} is a differential operator $D : \mathcal{F} \to \mathcal{G}$ with respect to $f^\sharp : f^{-1}\mathcal{O}_S \to \mathcal{O}_X$ We denote $\text{Diff}^k_{X/S}(\mathcal{F}, \mathcal{G})$ the set of these differential operators. \end{definition} 
\begin{definition} \label{definition-de-rham-complex} In the situation above, the {\it de Rham complex of $\mathcal{B}$ over $\mathcal{A}$} is the unique complex $$ \Omega_{\mathcal{B}/\mathcal{A}}^0 \to \Omega_{\mathcal{B}/\mathcal{A}}^1 \to \Omega_{\mathcal{B}/\mathcal{A}}^2 \to \ldots $$ of sheaves of $\mathcal{A}$-modules whose differential in degree $0$ is given by $\text{d} : \mathcal{B} \to \Omega_{\mathcal{B}/\mathcal{A}}$ and whose differentials in higher degrees have the following property \begin{equation} \label{equation-rule} \text{d}\left(b_0\text{d}b_1 \wedge \ldots \wedge \text{d}b_p\right) = \text{d}b_0 \wedge \text{d}b_1 \wedge \ldots \wedge \text{d}b_p \end{equation} where $b_0, \ldots, b_p \in \mathcal{B}(U)$ are sections over a common open $U \subset X$. \end{definition} 
\begin{lemma} \label{lemma-pullback-de-rham-complex} Let $f : Y \to X$ be a continuous map of topological spaces. Let $\mathcal{A} \to \mathcal{B}$ be a homomorphism of sheaves of rings on $X$. Then there is a canonical identification $f^{-1}\Omega^\bullet_{\mathcal{B}/\mathcal{A}} = \Omega^\bullet_{f^{-1}\mathcal{B}/f^{-1}\mathcal{A}}$ of de Rham complexes. \end{lemma} 
\begin{lemma} \label{lemma-differentials-de-rham-complex-order-1} Let $X$ be a topological space. Let $\mathcal{A} \to \mathcal{B}$ be a homomorphism of sheaves of rings on $X$. The differentials $\text{d} : \Omega^i_{\mathcal{B}/\mathcal{A}}  \to \Omega^{i + 1}_{\mathcal{B}/\mathcal{A}}$ are differential operators of order $1$. \end{lemma} 
\begin{definition} \label{definition-de-rham-complex-morphism-ringed-spaces} Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of ringed spaces. The {\it de Rham complex} of $f$ or of $X$ over $Y$ is the complex $$ \Omega^\bullet_{X/Y} = \Omega^\bullet_{\mathcal{O}_X/f^{-1}\mathcal{O}_Y} $$ \end{definition} 
\begin{lemma} \label{lemma-differentials-relative-de-rham-complex-order-1} Let $f : X \to Y$ be a morphism of ringed spaces. The differentials $\text{d} : \Omega^i_{X/Y}  \to \Omega^{i + 1}_{X/Y}$ are differential operators of order $1$ on $X/Y$. \end{lemma} 
\begin{definition} \label{definition-naive-cotangent-complex} Let $X$ be a topological space. Let $\mathcal{A} \to \mathcal{B}$ be a homomorphism of sheaves of rings. The {\it naive cotangent complex} $\NL_{\mathcal{B}/\mathcal{A}}$ is the chain complex (\ref{equation-naive-cotangent-complex}) $$ \NL_{\mathcal{B}/\mathcal{A}} = \left(\mathcal{I}/\mathcal{I}^2 \longrightarrow \Omega_{\mathcal{A}[\mathcal{B}]/\mathcal{A}} \otimes_{\mathcal{A}[\mathcal{B}]} \mathcal{B}\right) $$ with $\mathcal{I}/\mathcal{I}^2$ placed in degree $-1$ and $\Omega_{\mathcal{A}[\mathcal{B}]/\mathcal{A}} \otimes_{\mathcal{A}[\mathcal{B}]} \mathcal{B}$ placed in degree $0$. \end{definition} 
\begin{lemma} \label{lemma-NL-up-to-qis} In the situation above there is a canonical isomorphism $\NL(\alpha) = \NL_{\mathcal{B}/\mathcal{A}}$ in $D(\mathcal{B})$. \end{lemma} 
\begin{lemma} \label{lemma-pullback-NL} Let $f : X \to Y$ be a continuous map of topological spaces. Let $\mathcal{A} \to \mathcal{B}$ be a homomorphism of sheaves of rings on $Y$. Then $f^{-1}\NL_{\mathcal{B}/\mathcal{A}} = \NL_{f^{-1}\mathcal{B}/f^{-1}\mathcal{A}}$. \end{lemma} 
\begin{lemma} \label{lemma-stalk-NL} Let $X$ be a topological space. Let $\mathcal{A} \to \mathcal{B}$ be a homomorphism of sheaves of rings on $X$. Let $x \in X$. Then we have $\NL_{\mathcal{B}/\mathcal{A}, x} = \NL_{\mathcal{B}_x/\mathcal{A}_x}$. \end{lemma} 
\begin{lemma} \label{lemma-exact-sequence-NL} Let $X$ be a topological space. Let $\mathcal{A} \to \mathcal{B} \to \mathcal{C}$ be maps of sheaves of rings. Let $C$ be the cone (Derived Categories, Definition \ref{derived-definition-cone}) of the map of complexes $\NL_{\mathcal{C}/\mathcal{A}} \to \NL_{\mathcal{C}/\mathcal{B}}$. There is a canonical map $$ c : \NL_{\mathcal{B}/\mathcal{A}} \otimes_\mathcal{B} \mathcal{C} \longrightarrow C[-1] $$ of complexes of $\mathcal{C}$-modules which produces a canonical six term exact sequence $$ \xymatrix{ H^0(\NL_{\mathcal{B}/\mathcal{A}} \otimes_\mathcal{B} \mathcal{C}) \ar[r] & H^0(\NL_{\mathcal{C}/\mathcal{A}}) \ar[r] & H^0(\NL_{\mathcal{C}/\mathcal{B}}) \ar[r] & 0 \\ H^{-1}(\NL_{\mathcal{B}/\mathcal{A}} \otimes_\mathcal{B} \mathcal{C}) \ar[r] & H^{-1}(\NL_{\mathcal{C}/\mathcal{A}}) \ar[r] & H^{-1}(\NL_{\mathcal{C}/\mathcal{B}}) \ar[llu] } $$ of cohomology sheaves. \end{lemma} 
\begin{definition} \label{definition-cotangent-complex-morphism-ringed-topoi} The {\it naive cotangent complex} $\NL_f = \NL_{X/Y}$ of a morphism of ringed spaces $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ is $\NL_{\mathcal{O}_X/f^{-1}\mathcal{O}_Y}$. \end{definition} 
\begin{lemma} \label{lemma-exact-sequence-NL-ringed-topoi} Let $f : X \to Y$ and $g : Y \to Z$ be morphisms of ringed spaces. Let $C$ be the cone of the map $\NL_{X/Z} \to \NL_{X/Y}$ of complexes of $\mathcal{O}_X$-modules. There is a canonical map $$ f^*\NL_{Y/Z} \to C[-1] $$ which produces a canonical six term exact sequence $$ \xymatrix{ H^0(f^*\NL_{Y/Z}) \ar[r] & H^0(\NL_{X/Z}) \ar[r] & H^0(\NL_{X/Y}) \ar[r] & 0 \\ H^{-1}(f^*\NL_{Y/Z}) \ar[r] & H^{-1}(\NL_{X/Z}) \ar[r] & H^{-1}(\NL_{X/Y}) \ar[llu] } $$ of cohomology sheaves. \end{lemma} 
