\begin{definition} \label{definition-CLambda} Let $\Lambda$ be a Noetherian ring and let $\Lambda \to k$ be a finite ring map where $k$ is a field. We define {\it $\mathcal{C}_\Lambda$} to be the category with \begin{enumerate} \item objects are pairs $(A, \varphi)$ where $A$ is an Artinian local $\Lambda$-algebra and where $\varphi : A/\mathfrak m_A \to k$ is a $\Lambda$-algebra isomorphism, and \item morphisms $f : (B, \psi) \to (A, \varphi)$ are local $\Lambda$-algebra homomorphisms such that $\varphi \circ (f \bmod \mathfrak m) = \psi$. \end{enumerate} We say we are in the {\it classical case} if $\Lambda$ is a Noetherian complete local ring and $k$ is its residue field. \end{definition} 
\begin{definition} \label{definition-small-extension} Let $f: B \to A$ be a ring map in $\mathcal{C}_\Lambda$.  We say $f$ is a {\it small extension} if it is surjective and $\Ker(f)$ is a nonzero principal ideal which is annihilated by $\mathfrak{m}_B$. \end{definition} 
\begin{lemma} \label{lemma-factor-small-extension} Let $f: B \to A$ be a surjective ring map in $\mathcal{C}_\Lambda$. Then $f$ can be factored as a composition of small extensions. \end{lemma} 
\begin{lemma} \label{lemma-length} Let $A$ be a local $\Lambda$-algebra with residue field $k$. Let $M$ be an $A$-module. Then $[k : k'] \text{length}_A(M) = \text{length}_\Lambda(M)$. In the classical case we have $\text{length}_A(M) = \text{length}_\Lambda(M)$. \end{lemma} 
\begin{lemma} \label{lemma-surjective} Let $A \to B$ be a ring map in $\mathcal{C}_\Lambda$. The following are equivalent \begin{enumerate} \item $f$ is surjective, \item $\mathfrak m_A/\mathfrak m_A^2 \to \mathfrak m_B/\mathfrak m_B^2$ is surjective, and \item $\mathfrak m_A/(\mathfrak m_\Lambda A + \mathfrak m_A^2) \to \mathfrak m_B/(\mathfrak m_\Lambda B + \mathfrak m_B^2)$ is surjective. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-tangent-space-ring} Let $R \to S$ be a local homomorphism of local rings. The {\it relative cotangent space}\footnote{Caution: We will see later that in our general setting the tangent space of an object $A \in \mathcal{C}_\Lambda$ over $\Lambda$ should not be defined simply as the $k$-linear dual of the relative cotangent space. In fact, the correct definition of the relative cotangent space is $\Omega_{S/R} \otimes_S S/\mathfrak m_S$.} of $R$ over $S$ is the $S/\mathfrak m_S$-vector space $\mathfrak m_S/(\mathfrak m_R S + \mathfrak m_S^2)$. \end{definition} 
\begin{lemma} \label{lemma-fiber-product-CLambda} Let $f_1 : A_1 \to A$ and $f_2 : A_2 \to A$ be ring maps in $\mathcal{C}_\Lambda$. Then: \begin{enumerate} \item If $f_1$ or $f_2$ is surjective, then $A_1 \times_A A_2$ is in $\mathcal{C}_\Lambda$. \item If $f_2$ is a small extension, then so is $A_1 \times_A A_2 \to A_1$. \item If the field extension $k/k'$ is separable, then $A_1 \times_A A_2$ is in $\mathcal{C}_\Lambda$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-essential-surjection} Let $f: B \to A$ be a ring map in $\mathcal{C}_\Lambda$.  We say $f$ is an {\it essential surjection} if it has the following properties: \begin{enumerate} \item $f$ is surjective. \item If $g: C \to B$ is a ring map in $\mathcal{C}_\Lambda$ such that $f \circ g$ is surjective, then $g$ is surjective. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-essential-surjection-mod-squares} Let $f: B \to A$ be a ring map in $\mathcal{C}_\Lambda$. The following are equivalent \begin{enumerate} \item $f$ is an essential surjection, \item the map $B/\mathfrak m_B^2 \to A/\mathfrak m_A^2$ is an essential surjection, and \item the map $B/(\mathfrak m_\Lambda B + \mathfrak m_B^2) \to A/(\mathfrak m_\Lambda A + \mathfrak m_A^2)$ is an essential surjection. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-H1-separable-case} There is a canonical map $$ \mathfrak m_\Lambda/\mathfrak m_\Lambda^2 \longrightarrow H_1(L_{k/\Lambda}). $$ If $k' \subset k$ is separable (for example if the characteristic of $k$ is zero), then this map induces an isomorphism $\mathfrak m_\Lambda/\mathfrak m_\Lambda^2 \otimes_{k'} k = H_1(L_{k/\Lambda})$. If $k = k'$ (for example in the classical case), then $\mathfrak m_\Lambda/\mathfrak m_\Lambda^2 = H_1(L_{k/\Lambda})$. The composition $$ \mathfrak m_\Lambda/\mathfrak m_\Lambda^2 \longrightarrow H_1(L_{k/\Lambda}) \longrightarrow \mathfrak m_A/\mathfrak m_A^2 $$ comes from the canonical map $\mathfrak m_\Lambda \to \mathfrak m_A$. \end{lemma} 
\begin{lemma} \label{lemma-essential-surjection} Let $f: B \to A$ be a ring map in $\mathcal{C}_\Lambda$. Notation as in (\ref{equation-sequence-functorial}). \begin{enumerate} \item The equivalent conditions of Lemma \ref{lemma-surjective} characterizing when $f$ is surjective are also equivalent to \begin{enumerate} \item $\Im(\text{d}_B) \to \Im(\text{d}_A)$ is surjective, and \item the map $\Omega_{B/\Lambda} \otimes_B k \to \Omega_{A/\Lambda} \otimes_A k$ is surjective. \end{enumerate} \item The following are equivalent \begin{enumerate} \item $f$ is an essential surjection (see Lemma \ref{lemma-essential-surjection-mod-squares}), \item the map $\Im(\text{d}_B) \to \Im(\text{d}_A)$ is an isomorphism, and \item the map $\Omega_{B/\Lambda} \otimes_B k \to \Omega_{A/\Lambda} \otimes_A k$ is an isomorphism. \end{enumerate} \item If $k/k'$ is separable, then $f$ is an essential surjection if and only if the map $\mathfrak m_B/(\mathfrak m_\Lambda B + \mathfrak m_B^2) \to \mathfrak m_A/(\mathfrak m_\Lambda A + \mathfrak m_A^2)$ is an isomorphism. \item If $f$ is a small extension, then $f$ is not essential if and only if $f$ has a section $s: A \to B$ in $\mathcal{C}_\Lambda$ with $f \circ s = \text{id}_A$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-completion-CLambda} Let $\Lambda$ be a Noetherian ring and let $\Lambda \to k$ be a finite ring map where $k$ is a field. We define {\it $\widehat{\mathcal{C}}_\Lambda$} to be the category with \begin{enumerate} \item objects are pairs $(R, \varphi)$ where $R$ is a Noetherian complete local $\Lambda$-algebra and where $\varphi : R/\mathfrak m_R \to k$ is a $\Lambda$-algebra isomorphism, and \item morphisms $f : (S, \psi) \to (R, \varphi)$ are local $\Lambda$-algebra homomorphisms such that $\varphi \circ (f \bmod \mathfrak m) = \psi$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-surjective-cotangent-space} Let $f: R \to S$ be a ring map in $\widehat{\mathcal{C}}_\Lambda$. The following are equivalent \begin{enumerate} \item $f$ is surjective, \item the map $\mathfrak m_R/\mathfrak m_R^2 \to \mathfrak m_S/\mathfrak m_S^2$ is surjective, and \item the map $\mathfrak m_R/(\mathfrak m_\Lambda R + \mathfrak m_R^2) \to \mathfrak m_S/(\mathfrak m_\Lambda S + \mathfrak m_S^2)$ is surjective. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-CLambdahat-pushouts} The category $\widehat{\mathcal{C}}_\Lambda$ admits pushouts. \end{lemma} 
\begin{lemma} \label{lemma-CLambdahat-coproducts} The category $\widehat{\mathcal{C}}_\Lambda$ admits coproducts of pairs of objects. \end{lemma} 
\begin{lemma} \label{lemma-derivations-finite} Let $S$ be an object of $\widehat{\mathcal{C}}_\Lambda$. Then $\dim_k \text{Der}_\Lambda(S, k) < \infty$. \end{lemma} 
\begin{lemma} \label{lemma-derivations-surjective} Let $f : R \to S$ be a morphism of $\widehat{\mathcal{C}}_\Lambda$. If $\text{Der}_\Lambda(S, k) \to \text{Der}_\Lambda(R, k)$ is injective, then $f$ is surjective. \end{lemma} 
\begin{lemma} \label{lemma-m-adic-topology} Let $R$ be an object of $\widehat{\mathcal{C}}_\Lambda$. Let $(J_n)$ be a decreasing sequence of ideals such that $\mathfrak m_R^n \subset J_n$. Set $J = \bigcap J_n$. Then the sequence $(J_n/J)$ defines the $\mathfrak m_{R/J}$-adic topology on $R/J$. \end{lemma} 
\begin{lemma} \label{lemma-limit-artinian} Let $\ldots \to A_3 \to A_2 \to A_1$ be a sequence of surjective ring maps in $\mathcal{C}_\Lambda$. If $\dim_k (\mathfrak m_{A_n}/\mathfrak m_{A_n}^2)$ is bounded, then $S = \lim A_n$ is an object in $\widehat{\mathcal{C}}_\Lambda$ and the ideals $I_n = \Ker(S \to A_n)$ define the $\mathfrak m_S$-adic topology on $S$. \end{lemma} 
\begin{lemma} \label{lemma-power-series} Let $R', R \in \Ob(\widehat{\mathcal{C}}_\Lambda)$. Suppose that $R = R' \oplus I$ for some ideal $I$ of $R$. Let $x_1, \ldots, x_r \in I$ map to a basis of $I/\mathfrak m_R I$. Set $S = R'[[X_1, \ldots, X_r]]$ and consider the $R'$-algebra map $S \to R$ mapping $X_i$ to $x_i$. Assume that for every $n \gg 0$ the map $S/\mathfrak m_S^n \to R/\mathfrak m_R^n$ has a left inverse in $\mathcal{C}_\Lambda$. Then $S \to R$ is an isomorphism. \end{lemma} 
\begin{definition} \label{definition-category-cofibred-groupoids} Let $\mathcal{C}$ be a category.  A {\it category cofibered in groupoids over $\mathcal{C}$} is a category $\mathcal{F}$ equipped with a functor $p: \mathcal{F} \to \mathcal{C}$ such that $\mathcal{F}^{opp}$ is a category fibered in groupoids over $\mathcal{C}^{opp}$ via $p^{opp}: \mathcal{F}^{opp} \to \mathcal{C}^{opp}$. \end{definition} 
\begin{definition} \label{definition-prorepresentable} Let $F : \mathcal{C}_\Lambda \to \textit{Sets}$ be a functor. We say $F$ is {\it prorepresentable} if there exists an isomorphism $F \cong \underline{R}|_{\mathcal{C}_\Lambda}$ of functors for some $R \in \Ob(\widehat{\mathcal{C}}_\Lambda)$. \end{definition} 
\begin{definition} \label{definition-predeformation-category} A {\it predeformation category} $\mathcal{F}$ is a category cofibered in groupoids over $\mathcal{C}_\Lambda$ such that $\mathcal{F}(k)$ is equivalent to a category with a single object and a single morphism, i.e., $\mathcal{F}(k)$ contains at least one object and there is a unique morphism between any two objects. A {\it morphism of predeformation categories} is a morphism of categories cofibered in groupoids over $\mathcal{C}_\Lambda$. \end{definition} 
\begin{definition} \label{definition-formal-objects} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$. The {\it category $\widehat{\mathcal{F}}$ of formal objects of  $\mathcal{F}$} is the category with the following objects and morphisms. \begin{enumerate} \item A {\it formal object $\xi = (R, \xi_n, f_n)$ of $\mathcal{F}$} consists of an object $R$ of $\widehat{\mathcal{C}}_\Lambda$, and a collection indexed by $n \in \mathbf{N}$ of objects $\xi_n$ of $\mathcal{F}(R/\mathfrak m_R^n)$ and morphisms $f_n : \xi_{n + 1} \to \xi_n$ lying over the projection $R/\mathfrak m_R^{n + 1} \to R/\mathfrak m_R^n$. \item Let $\xi = (R, \xi_n, f_n)$ and $\eta = (S, \eta_n, g_n)$ be formal objects of $\mathcal{F}$.  A {\it morphism $a : \xi \to \eta$ of formal objects} consists of a map $a_0 : R \to S$ in $\widehat{\mathcal{C}}_\Lambda$ and a collection $a_n : \xi_n \to \eta_n$ of morphisms of $\mathcal{F}$ lying over $R/\mathfrak m_R^n \to S/\mathfrak m_S^n$, such that for every $n$ the diagram $$ \xymatrix{ \xi_{n + 1} \ar[r]_{f_n} \ar[d]_{a_{n + 1}} & \xi_n \ar[d]^{a_n} \\ \eta_{n + 1} \ar[r]^{g_n} & \eta_n } $$ commutes. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-completion-cofibred} Let $p : \mathcal{F} \to \mathcal{C}_\Lambda$ be a category cofibered in groupoids. Then $\widehat{p} : \widehat{\mathcal{F}} \to \widehat{\mathcal{C}}_\Lambda$ is a category cofibered in groupoids. \end{lemma} 
\begin{definition} \label{definition-completion} Let $p : \mathcal{F} \to \mathcal{C}_\Lambda$ be a category cofibered in groupoids. The category cofibered in groupoids $\widehat{p} : \widehat{\mathcal  F} \to \widehat{\mathcal{C}}_\Lambda$ is called the {\it completion of $\mathcal{F}$}. \end{definition} 
\begin{lemma} \label{lemma-formal-objects-different-filtration} In the situation above, $\widehat{\mathcal{F}}_\mathcal{I}(R)$ is equivalent to the category $\widehat{\mathcal{F}}(R)$. \end{lemma} 
\begin{definition} \label{definition-smooth-morphism} Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a morphism of categories cofibered in groupoids over $\mathcal{C}_\Lambda$.  We say  $\varphi$ is {\it smooth} if it satisfies the following condition: Let $B \to A$ be a surjective ring map in $\mathcal{C}_\Lambda$.  Let $y \in \Ob(\mathcal{G}(B)), x \in \Ob(\mathcal{F}(A))$, and $y \to \varphi(x)$ be a morphism lying over $B \to A$.  Then there exists $x' \in \Ob(\mathcal{F}(B))$, a morphism $x' \to x$ lying over $B \to A$, and a morphism $\varphi(x') \to y$ lying over $\text{id}: B \to B$, such that the diagram $$ \xymatrix{ \varphi(x') \ar[r] \ar[dr] & y \ar[d] \\ & \varphi(x) } $$ commutes. \end{definition} 
\begin{lemma} \label{lemma-smoothness-small-extensions} Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a morphism of categories cofibered in groupoids over $\mathcal{C}_\Lambda$.  Then $\varphi$ is smooth if the condition in Definition \ref{definition-smooth-morphism} is assumed to hold only for small extensions $B \to A$. \end{lemma} 
\begin{lemma} \label{lemma-smooth-morphism-power-series} Let $R \to S$ be a ring map in $\widehat{\mathcal{C}}_\Lambda$. Then the induced morphism $\underline{S}|_{\mathcal{C}_\Lambda} \to \underline{R}|_{\mathcal{C}_\Lambda}$ is smooth if and only if $S$ is a power series ring over $R$. \end{lemma} 
\begin{lemma} \label{lemma-smooth-properties} Let $\varphi : \mathcal{F} \to \mathcal{G}$ and $\psi : \mathcal{G} \to \mathcal{H}$ be morphisms of categories cofibered in groupoids over $\mathcal{C}_\Lambda$. \begin{enumerate} \item If $\varphi$ and $\psi$ are smooth, then $\psi \circ \varphi$ is smooth. \item If $\varphi$ is essentially surjective and $\psi \circ \varphi$ is smooth, then $\psi$ is smooth. \item If $\mathcal{G}' \to \mathcal{G}$ is a morphism of categories cofibered in groupoids and $\varphi$ is smooth, then $\mathcal{F} \times_\mathcal{G} \mathcal{G}' \to \mathcal{G}'$ is smooth. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-smooth-morphism-essentially-surjective} Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a smooth morphism of categories cofibered in groupoids over $\mathcal{C}_\Lambda$.  Assume $\varphi : \mathcal{F}(k) \to \mathcal{G}(k)$ is essentially surjective. Then $\varphi : \mathcal{F} \to \mathcal{G}$ and $\widehat{\varphi} : \widehat{\mathcal{F}} \to \widehat{\mathcal{G}}$ are essentially surjective. \end{lemma} 
\begin{definition} \label{definition-versal} Let $\mathcal{F}$ be a category cofibered in groupoids.  Let $\xi$ be a formal object of $\mathcal{F}$ lying over $R \in \Ob(\widehat{\mathcal{C}}_\Lambda)$. We say $\xi$ is {\it versal} if the corresponding morphism $\underline{\xi}: \underline{R}|_{\mathcal{C}_\Lambda} \to \mathcal{F}$ of Remark \ref{remark-formal-objects-yoneda} is smooth. \end{definition} 
\begin{lemma} \label{lemma-versal-object-quasi-initial} Let $\mathcal{F}$ be a predeformation category. Let $\xi$ be a versal formal object of $\mathcal{F}$. For any formal object $\eta$ of $\widehat{\mathcal{F}}$, there exists a morphism $\xi \to \eta$. \end{lemma} 
\begin{definition} \label{definition-cofibered-groupoid-projection-smooth} Let $p : \mathcal{F} \to \mathcal{C}_\Lambda$ be a category cofibered in groupoids. We say $\mathcal{F}$ is {\it smooth} or {\it unobstructed} if its structure morphism $p$ is smooth in the sense of Definition \ref{definition-smooth-morphism}. \end{definition} 
\begin{lemma} \label{lemma-smooth} Let $R \in \Ob(\widehat{\mathcal{C}}_\Lambda)$. The following are equivalent \begin{enumerate} \item $\underline{R}|_{\mathcal{C}_\Lambda}$ is smooth, \item $\Lambda \to R$ is formally smooth in the $\mathfrak m_R$-adic topology, \item $\Lambda \to R$ is flat and $R \otimes_\Lambda k'$ is geometrically regular over $k'$, and \item $\Lambda \to R$ is flat and $k' \to R \otimes_\Lambda k'$ is formally smooth in the $\mathfrak m_R$-adic topology. \end{enumerate} In the classical case, these are also equivalent to \begin{enumerate} \item[(5)] $R$ is isomorphic to $\Lambda[[x_1, \ldots, x_n]]$ for some $n$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-smooth-power-series-classical} Let $\mathcal{F}$ be a predeformation category. Let $\xi$ be a versal formal object of $\mathcal{F}$ lying over $R \in \Ob(\widehat{\mathcal{C}}_\Lambda)$. The following are equivalent \begin{enumerate} \item $\mathcal{F}$ is unobstructed, and \item $\Lambda \to R$ is formally smooth in the $\mathfrak m_R$-adic topology. \end{enumerate} In the classical case these are also equivalent to \begin{enumerate} \item[(3)] $R \cong \Lambda[[x_1, \ldots, x_n]]$ for some $n$.\ \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-exists-smooth} There exists an $R \in \Ob(\widehat{\mathcal{C}}_\Lambda)$ such that the equivalent conditions of Lemma \ref{lemma-smooth} hold and moreover $H_1(L_{k/\Lambda}) = \mathfrak m_R/\mathfrak m_R^2$ and $\Omega_{R/\Lambda} \otimes_R k = \Omega_{k/\Lambda}$. \end{lemma} 
\begin{definition} \label{definition-S1-S2} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal C_\Lambda$. We define {\it conditions (S1) and (S2)} on $\mathcal{F}$ as follows: \begin{enumerate} \item[(S1)] Every diagram in $\mathcal{F}$ $$ \vcenter{ \xymatrix{            & x_2 \ar[d] \\ x_1 \ar[r] & x } } \quad\text{lying over}\quad \vcenter{ \xymatrix{            & A_2 \ar[d] \\ A_1 \ar[r] & A } } $$ in $\mathcal{C}_\Lambda$ with $A_2 \to A$ surjective can be completed to a commutative diagram $$ \vcenter{ \xymatrix{ y \ar[r] \ar[d] & x_2 \ar[d] \\ x_1 \ar[r]      & x } } \quad\text{lying over}\quad \vcenter{ \xymatrix{ A_1 \times_A A_2 \ar[r] \ar[d] & A_2 \ar[d] \\ A_1 \ar[r]      & A. } } $$ \item[(S2)] The condition of (S1) holds for diagrams in $\mathcal{F}$ lying over a diagram in $\mathcal{C}_\Lambda$ of the form $$ \xymatrix{           & k[\epsilon] \ar[d] \\ A  \ar[r] & k. } $$ Moreover, if we have two commutative diagrams in $\mathcal{F}$ $$ \vcenter{ \xymatrix{ y \ar[r]_c \ar[d]_a & x_\epsilon \ar[d]^e \\ x \ar[r]^d          & x_0 } } \quad\text{and}\quad \vcenter{ \xymatrix{ y' \ar[r]_{c'} \ar[d]_{a'} & x_\epsilon \ar[d]^e \\ x \ar[r]^d                 & x_0 } } \quad\text{lying over}\quad \vcenter{ \xymatrix{ A \times_k k[\epsilon] \ar[r] \ar[d] & k[\epsilon] \ar[d] \\ A  \ar[r] & k } } $$ then there exists a morphism $b : y \to y'$ in $\mathcal{F}(A \times_k k[\epsilon])$ such that $a = a' \circ b$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-S1-small-extensions} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal C_\Lambda$. Then $\mathcal{F}$ satisfies (S1) if the condition of (S1) is assumed to hold only when $A_2 \to A$ is a small extension. \end{lemma} 
\begin{lemma} \label{lemma-S2-extensions} Let $\mathcal{F}$ be a category cofibred in groupoids over $\mathcal{C}_\Lambda$. If $\mathcal{F}$ satisfies (S2), then the condition of (S2) also holds when $k[\epsilon]$ is replaced by $k[V]$ for any finite dimensional $k$-vector space $V$. \end{lemma} 
\begin{lemma} \label{lemma-S1-S2-associated-functor} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$. \begin{enumerate} \item If $\mathcal{F}$ satisfies (S1), then so does $\overline{\mathcal{F}}$. \item If $\mathcal{F}$ satisfies (S2), then so does $\overline{\mathcal{F}}$ provided at least one of the following conditions is satisfied \begin{enumerate} \item $\mathcal{F}$ is a predeformation category, \item the category $\mathcal{F}(k)$ is a set or a setoid, or \item for any morphism $x_\epsilon \to x_0$ of $\mathcal{F}$ lying over $k[\epsilon] \to k$ the pushforward map $\text{Aut}_{k[\epsilon]}(x_\epsilon) \to \text{Aut}_k(x_0)$ is surjective. \end{enumerate} \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-S1-S2-localize} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$. Let $x_0 \in \Ob(\mathcal{F}(k))$. Let $\mathcal{F}_{x_0}$ be the category cofibred in groupoids over $\mathcal{C}_\Lambda$ constructed in Remark \ref{remark-localize-cofibered-groupoid}. \begin{enumerate} \item If $\mathcal{F}$ satisfies (S1), then so does $\mathcal{F}_{x_0}$. \item If $\mathcal{F}$ satisfies (S2), then so does $\mathcal{F}_{x_0}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-lifting-section} Let $p: \mathcal{F} \to \mathcal{C}_\Lambda$ be a category cofibered in groupoids. Consider a diagram of $\mathcal{F}$ $$ \vcenter{ \xymatrix{ y \ar[r] \ar[d]_a & x_\epsilon \ar[d]_e \\ x \ar[r]^d        & x_0 } } \quad\text{lying over}\quad \vcenter{ \xymatrix{ A \times_k k[\epsilon] \ar[r] \ar[d] & k[\epsilon] \ar[d] \\ A \ar[r] & k. } } $$ in $\mathcal{C}_\Lambda$. Assume $\mathcal{F}$ satisfies (S2). Then there exists a morphism $s : x \to y$ with $a \circ s = \text{id}_x$ if and only if there exists a morphism $s_\epsilon : x \to x_\epsilon$ with $e \circ s_\epsilon = d$. \end{lemma} 
\begin{lemma} \label{lemma-lifting-along-small-extension} Consider a commutative diagram in a predeformation category $\mathcal{F}$ $$ \vcenter{ \xymatrix{ y \ar[r] \ar[d] & x_2 \ar[d]^{a_2} \\ x_1 \ar[r]^{a_1}        & x } } \quad\text{lying over} \vcenter{ \xymatrix{ A_1 \times_A A_2 \ar[r] \ar[d] & A_2 \ar[d]^{f_2} \\ A_1 \ar[r]^{f_1} & A } } $$ in $\mathcal{C}_\Lambda$ where $f_2 : A_2 \to A$ is a small extension. Assume there is a map $h : A_1 \to A_2$ such that $f_2 = f_1 \circ h$. Let $I = \Ker(f_2)$. Consider the ring map $$ g : A_1 \times_A A_2 \longrightarrow k[I] = k \oplus I, \quad (u, v) \longmapsto \overline{u} \oplus (v - h(u)) $$ Choose a pushforward $y \to g_*y$. Assume $\mathcal{F}$ satisfies (S2). If there exists a morphism $x_1 \to g_*y$, then there exists a morphism $b: x_1 \to x_2$ such that $a_1 =  a_2 \circ b$. \end{lemma} 
\begin{definition} \label{definition-linear} Let $L: \text{Mod}^{fg}_R \to \text{Mod}_R$, resp.\ $L: \text{Mod}_R \to \text{Mod}_R$ be a functor.  We say that $L$ is {\it $R$-linear} if for every pair of objects $M, N$ of $\text{Mod}^{fg}_R$, resp.\ $\text{Mod}_R$ the map $$ L : \Hom_R(M, N) \longrightarrow \Hom_R(L(M), L(N)) $$ is a map of $R$-modules. \end{definition} 
\begin{lemma} \label{lemma-linear-functor} Let $L: \text{Mod}^{fg}_R \to \textit{Sets}$, resp.\ $L: \text{Mod}_R \to \textit{Sets}$ be a functor.  Suppose $L(0)$ is a one element set and $L$ preserves finite products.  Then there exists a unique $R$-linear functor $\widetilde{L} : \text{Mod}^{fg}_R \to \text{Mod}_R$, resp.\  $\widetilde{L} : \text{Mod}^{fg}_R \to \text{Mod}_R$, such that $$ \vcenter{ \xymatrix{ & \text{Mod}_R \ar[dr]^{\text{forget}} &   \\ \text{Mod}^{fg}_R  \ar[ur]^{\widetilde{L}} \ar[rr]^{L} &  & \textit{Sets} } } \quad\text{resp.}\quad \vcenter{ \xymatrix{ & \text{Mod}_R \ar[dr]^{\text{forget}} &   \\ \text{Mod}_R  \ar[ur]^{\widetilde{L}} \ar[rr]^{L} &  & \textit{Sets} } } $$ commutes. \end{lemma} 
\begin{lemma} \label{lemma-morphism-linear-functors} Let $L_1, L_2: \text{Mod}^{fg}_R \to \textit{Sets}$ be functors that take $0$ to a one element set and preserve finite products. Let $t : L_1 \to L_2$ be a morphism of functors. Then $t$ induces a morphism $\widetilde{t} : \widetilde{L}_1 \to \widetilde{L}_2$ between the functors guaranteed by Lemma \ref{lemma-linear-functor}, which is given simply by $\widetilde{t}_M = t_M: \widetilde{L}_1(M) \to \widetilde{L}_2(M)$ for each $M \in \Ob(\text{Mod}^{fg}_R)$. In other words, $t_M: \widetilde{L}_1(M) \to \widetilde{L}_2(M)$ is a map of $R$-modules. \end{lemma} 
\begin{lemma} \label{lemma-linear-functor-over-field} Let $K$ be a field. Let $L: \text{Mod}^{fg}_K \to \text{Mod}_K$ be a $K$-linear functor.  Then $L$ is isomorphic to the functor $L(K) \otimes_K - : \text{Mod}^{fg}_K \to \text{Mod}_K$. \end{lemma} 
\begin{lemma} \label{lemma-preserves-products} Let $R$ be an $S$-algebra. Then the functor $\text{Mod}_R \to S\text{-Alg}/R$ described above preserves finite products. \end{lemma} 
\begin{lemma} \label{lemma-tangent-space-functor} Let $R$ be an $S$-algebra, and let $\mathcal{C}$ be a strictly full subcategory of $S\text{-Alg}/R$ containing $R[M]$ for all $M \in \Ob(\text{Mod}^{fg}_R)$. Let $F: \mathcal{C} \to \textit{Sets}$ be a functor. Suppose that $F(R)$ is a one element set and that for any $M, N \in \Ob(\text{Mod}^{fg}_R)$, the induced map $$ F(R[M] \times_R R[N]) \to F(R[M]) \times F(R[N]) $$ is a bijection. Then $F(R[M])$ has a natural $R$-module structure for any $M \in \Ob(\text{Mod}^{fg}_R)$. \end{lemma} 
\begin{definition} \label{definition-tangent-space-over-R} Let $\mathcal{C}$ be a category as in Lemma \ref{lemma-tangent-space-functor}. Let $F : \mathcal{C} \to \textit{Sets}$ be a functor such that $F(R)$ is a one element set. The {\it tangent space $TF$ of $F$} is $F(R[\epsilon])$. \end{definition} 
\begin{lemma} \label{lemma-morphism-tangent-spaces} Let $F, G: \mathcal{C} \to \textit{Sets}$ be functors satisfying the hypotheses of Lemma \ref{lemma-tangent-space-functor}. Let $t : F \to G$ be a morphism of functors. For any $M \in \Ob(\text{Mod}^{fg}_R)$, the map $t_{R[M]}: F(R[M]) \to G(R[M])$ is a map of $R$-modules, where $F(R[M])$ and $G(R[M])$ are given the $R$-module structure from Lemma \ref{lemma-tangent-space-functor}. In particular, $t_{R[\epsilon]} : TF \to TG$ is a map of $R$-modules. \end{lemma} 
\begin{lemma} \label{lemma-tangent-space-tensor} Let $F: \mathcal{C} \to \textit{Sets}$ be a functor satisfying the hypotheses of Lemma \ref{lemma-tangent-space-functor}. Assume $R = K$ is a field. Then $F(K[V]) \cong TF \otimes_K V$ for any finite dimensional $K$-vector space $V$. \end{lemma} 
\begin{definition} \label{definition-tangent-space} Let $\mathcal{F}$ be a predeformation category. The {\it tangent space $T \mathcal{F}$ of $\mathcal{F}$} is the set $\overline{\mathcal{F}}(k[\epsilon])$ of isomorphism classes of objects in the fiber category $\mathcal F(k[\epsilon])$. \end{definition} 
\begin{lemma} \label{lemma-tangent-space-vector-space} Let $\mathcal{F}$ be a predeformation category such that $\overline{\mathcal{F}}$ satisfies (S2)\footnote{For example if $\mathcal{F}$ satisfies (S2), see Lemma \ref{lemma-S1-S2-associated-functor}.}. Then $T \mathcal{F}$ has a natural $k$-vector space structure. For any finite dimensional vector space $V$ we have $\overline{\mathcal{F}}(k[V]) = T\mathcal{F} \otimes_k V$ functorially in $V$. \end{lemma} 
\begin{definition} \label{definition-differential} Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a morphism predeformation categories. The {\it differential $d \varphi : T \mathcal{F} \to T \mathcal{G}$ of $\varphi$} is the map obtained by evaluating the morphism of functors $\overline{\varphi}: \overline{\mathcal{F}} \to \overline{\mathcal{G}}$ at $A = k[\epsilon]$. \end{definition} 
\begin{lemma} \label{lemma-k-linear-differential} Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a morphism of predeformation categories. Assume $\overline{\mathcal{F}}$ and $\overline{\mathcal{G}}$ both satisfy (S2). Then $d \varphi : T \mathcal{F} \to T \mathcal{G}$ is $k$-linear. \end{lemma} 
\begin{lemma} \label{lemma-action-linear} Let $\mathcal{F}$ be a predeformation category over $\mathcal{C}_\Lambda$. If $\overline{\mathcal{F}}$ has (S2) then the maps $\gamma_V$ are $k$-linear and we have $a_V(D, x) = x + \gamma_V(D)$. \end{lemma} 
\begin{lemma} \label{lemma-versal-object-S1} Let $\mathcal{F}$ be a predeformation category. Assume $\mathcal{F}$ has a versal formal object. Then $\mathcal{F}$ satisfies (S1). \end{lemma} 
\begin{lemma} \label{lemma-versal-criterion} Let $\mathcal{F}$ be a predeformation category satisfying (S1) and (S2). Let $\xi$ be a formal object of $\mathcal{F}$ corresponding to $\underline{\xi} : \underline{R}|_{\mathcal{C}_\Lambda} \to \mathcal{F}$, see Remark \ref{remark-formal-objects-yoneda}. Then $\xi$ is versal if and only if the following two conditions hold: \begin{enumerate} \item the map $d\underline{\xi} : T\underline{R}|_{\mathcal{C}_\Lambda} \to T\mathcal{F}$ on tangent spaces is surjective, and \item given a diagram in $\widehat{\mathcal{F}}$ $$ \vcenter{ \xymatrix{             &  y \ar[d] \\ \xi \ar[r]  &  x } } \quad\text{lying over}\quad \vcenter{ \xymatrix{          &   B  \ar[d]^{f} \\ R \ar[r] &   A } } $$ in $\widehat{\mathcal{C}}_\Lambda$ with $B \to A$ a small extension of Artinian rings, then there exists a ring map $R \to B$ such that $$ \xymatrix{          &   B  \ar[d]^{f} \\ R \ar[ur] \ar[r] &   A } $$ commutes. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-largest-closed-where-lift} Let $\mathcal{F}$ be a category cofibred in groupoids over $\mathcal{C}_\Lambda$ which has (S1). Let $B \to A$ be a surjection in $\mathcal{C}_\Lambda$ with kernel $I$ annihilated by $\mathfrak m_B$. Let $x \in \mathcal{F}(A)$. The set of ideals $$ \mathcal{J} = \{ J \subset I \mid \text{there exists an }y \to x\text{ lying over }B/J \to A\} $$ has a smallest element. \end{lemma} 
\begin{lemma} \label{lemma-versal-object-existence} Let $\mathcal{F}$ be a category cofibred in groupoids over $\mathcal{C}_\Lambda$. Assume the following conditions hold: \begin{enumerate} \item $\mathcal{F}$ is a predeformation category. \item $\mathcal{F}$ satisfies (S1). \item $\mathcal{F}$ satisfies (S2). \item $\dim_k T\mathcal{F}$ is finite. \end{enumerate} Then $\mathcal{F}$ has a versal formal object. \end{lemma} 
\begin{lemma} \label{lemma-smallest-where-descends} Let $\mathcal{F}$ be a category cofibred in groupoids over $\mathcal{C}_\Lambda$ which has (S1). \begin{enumerate} \item For $y \to x$ in $\mathcal{F}$ a minimal object in $\mathcal{S}_y$ maps to a minimal object of $\mathcal{S}_x$. \item For $y \to x$ in $\mathcal{F}$ lying over a surjection $f : B \to A$ in $\mathcal{C}_\Lambda$ every minimal object of $\mathcal{S}_x$ is the image of a minimal object of $\mathcal{S}_y$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-smallest-where-descends-versal} Let $\mathcal{F}$ be a category cofibred in groupoids over $\mathcal{C}_\Lambda$ which has (S1). Let $\xi$ be a versal formal object of $\mathcal{F}$ lying over $R$. There exists a morphism $\xi' \to \xi$ lying over $R' \subset R$ with the following minimality properties \begin{enumerate} \item for every $f : R \to A$ with $A \in \Ob(\mathcal{C}_\Lambda)$ the pushforwards $$ \vcenter{ \xymatrix{ \xi' \ar[d] \ar[r] & x' \ar[d] \\ \xi \ar[r] & x } } \quad\text{lying over}\quad \vcenter{ \xymatrix{ R' \ar[d] \ar[r] & f(R') \ar[d] \\ R \ar[r] & A } } $$ produce a minimal object $x' \to x$ of $\mathcal{S}_x$, and \item for any morphism of formal objects $\xi'' \to \xi'$ the corresponding morphism $R'' \to R'$ is surjective. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-descends-versal} Let $\mathcal{F}$ be a category cofibred in groupoids over $\mathcal{C}_\Lambda$ which has (S1). Let $\xi$ be a versal formal object of $\mathcal{F}$ lying over $R$. Let $\xi' \to \xi$ be a morphism of formal objects lying over $R' \subset R$ as constructed in Lemma \ref{lemma-smallest-where-descends-versal}. Then $$ R \cong R'[[x_1, \ldots, x_r]] $$ is a power series ring over $R'$. Moreover, $\xi'$ is a versal formal object too. \end{lemma} 
\begin{definition} \label{definition-minimal-versal} Let $\mathcal{F}$ be a predeformation category. We say a versal formal object $\xi$ of $\mathcal{F}$ is {\it minimal}\footnote{This may be nonstandard terminology. Many authors tie this notion in with properties of tangent spaces. We will make the link in Section \ref{section-miniversal-objects-existence}.} if for any morphism of formal objects $\xi' \to \xi$ the underlying map on rings is surjective. Sometimes a minimal versal formal object is called {\it miniversal}. \end{definition} 
\begin{lemma} \label{lemma-minimal-versal} Let $\mathcal{F}$ be a predeformation category which has a versal formal object. Then \begin{enumerate} \item $\mathcal{F}$ has a minimal versal formal object, \item minimal versal objects are unique up to isomorphism, and \item any versal object is the pushforward of a minimal versal object along a power series ring extension. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-miniversal-object-unique} Let $\mathcal{F}$ be a predeformation category. Let $\xi$ be a versal formal object of $\mathcal{F}$ such that (\ref{equation-bijective-orbits}) holds. Then $\xi$ is a minimal versal formal object. In particular, such $\xi$ are unique up to isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-miniversal-object-existence-1} Let $\mathcal{F}$ be a predeformation category. Let $\xi$ be a versal formal object of $\mathcal{F}$ such that (\ref{equation-bijective}) holds. Then \begin{enumerate} \item $\mathcal{F}$ satisfies (S1). \item $\mathcal{F}$ satisfies (S2). \item $\dim_k T\mathcal{F}$ is finite. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-construct-bijective-orbits} Let $\mathcal{F}$ be a predeformation category satisfying (S2) which has a versal formal object. Then its minimal versal formal object satisfies (\ref{equation-bijective-orbits}). \end{lemma} 
\begin{theorem} \label{theorem-miniversal-object-existence} Let $\mathcal{F}$ be a predeformation category. Consider the following conditions \begin{enumerate} \item $\mathcal{F}$ has a minimal versal formal object satisfying (\ref{equation-bijective}), \item $\mathcal{F}$ has a minimal versal formal object satisfying (\ref{equation-bijective-orbits}), \item the following conditions hold: \begin{enumerate} \item $\mathcal{F}$ satisfies (S1). \item $\mathcal{F}$ satisfies (S2). \item $\dim_k T\mathcal{F}$ is finite. \end{enumerate} \end{enumerate} We always have $$ (1) \Rightarrow (3) \Rightarrow (2). $$ If $k' \subset k$ is separable, then all three are equivalent. \end{theorem} 
\begin{definition} \label{definition-RS} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal C_\Lambda$.  We say that $\mathcal{F}$ satisfies {\it condition (RS)} if for every diagram in $\mathcal{F}$ $$ \vcenter{ \xymatrix{            & x_2 \ar[d] \\ x_1 \ar[r] & x } } \quad\text{lying over}\quad \vcenter{ \xymatrix{            & A_2 \ar[d] \\ A_1 \ar[r] & A } } $$ in $\mathcal{C}_\Lambda$ with $A_2 \to A$ surjective, there exists a fiber product $x_1 \times_x x_2$ in $\mathcal{F}$ such that the diagram $$ \vcenter{ \xymatrix{ x_1 \times_x x_2 \ar[r] \ar[d] & x_2 \ar[d] \\ x_1 \ar[r]      & x } } \quad\text{lies over}\quad \vcenter{ \xymatrix{ A_1 \times_A A_2 \ar[r] \ar[d] & A_2 \ar[d] \\ A_1 \ar[r]      & A. } } $$ \end{definition} 
\begin{lemma} \label{lemma-RS-fiber-square} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$ satisfying (RS). Given a commutative diagram in $\mathcal{F}$ $$ \vcenter{ \xymatrix{ y \ar[r] \ar[d] & x_2 \ar[d]   \\ x_1 \ar[r]      & x } } \quad\text{lying over}\quad \vcenter{ \xymatrix{ A_1 \times_A A_2 \ar[r] \ar[d] & A_2 \ar[d] \\ A_1 \ar[r]      & A. } } $$ with $A_2 \to A$ surjective, then it is a fiber square. \end{lemma} 
\begin{lemma} \label{lemma-RS-small-extension} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal C_\Lambda$. Then $\mathcal{F}$ satisfies (RS) if the condition in Definition \ref{definition-RS} is assumed to hold only when $A_2 \to A$ is a small extension. \end{lemma} 
\begin{lemma} \label{lemma-RS-2-categorical} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$. The following are equivalent \begin{enumerate} \item $\mathcal{F}$ satisfies (RS), \item the functor $\mathcal{F}(A_1 \times_A A_2) \to \mathcal{F}(A_1) \times_{\mathcal{F}(A)} \mathcal{F}(A_2)$ see (\ref{equation-compare}) is an equivalence of categories whenever $A_2 \to A$ is surjective, and \item same as in (2) whenever $A_2 \to A$ is a small extension. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-RS-implies-S1-S2} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$. The condition (RS) for $\mathcal{F}$ implies both (S1) and (S2) for $\mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-RS-associated-functor} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$ satisfying (RS). The following conditions are equivalent: \begin{enumerate} \item $\overline{\mathcal{F}}$ satisfies (RS). \item Let $f_1: A_1 \to A$ and $f_2: A_2 \to A$ be ring maps in $\mathcal{C}_\Lambda$ with $f_2$ surjective. The induced map of sets of isomorphism classes $$ \overline{\mathcal{F}(A_1) \times_{\mathcal{F}(A)} \mathcal{F}(A_2)} \to \overline{\mathcal{F}}(A_1) \times_{\overline{\mathcal{F}}(A)} \overline{\mathcal{F}}(A_2) $$ is injective. \item For every morphism $x' \to x$ in $\mathcal{F}$ lying over a surjective ring map $A' \to A$, the map $\text{Aut}_{A'}(x') \to \text{Aut}_A(x)$ is surjective. \item For every morphism $x' \to x$ in $\mathcal{F}$ lying over a small extension $A' \to A$, the map $\text{Aut}_{A'}(x') \to \text{Aut}_A(x)$ is surjective. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-deformation-category} A {\it deformation category} is a predeformation category $\mathcal{F}$ satisfying (RS). A morphism of deformation categories is a morphism of categories over $\mathcal{C}_\Lambda$. \end{definition} 
\begin{lemma} \label{lemma-localize-RS} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$. Let $x_0 \in \Ob(\mathcal{F}(k))$. Let $\mathcal{F}_{x_0}$ be the category cofibred in groupoids over $\mathcal{C}_\Lambda$ constructed in Remark \ref{remark-localize-cofibered-groupoid}. If $\mathcal{F}$ satisfies (RS), then so does $\mathcal{F}_{x_0}$. In particular, $\mathcal{F}_{x_0}$ is a deformation category. \end{lemma} 
\begin{lemma} \label{lemma-RS-fiber-product-morphisms} Let $$ \xymatrix{ \mathcal{H} \times_\mathcal{F} \mathcal{G} \ar[r] \ar[d] & \mathcal{G} \ar[d]^g \\ \mathcal{H} \ar[r]^f & \mathcal{F} } $$ be $2$-fibre product of categories cofibered in groupoids over $\mathcal{C}_\Lambda$. If $\mathcal{F}, \mathcal{G}, \mathcal{H}$ all satisfy (RS), then $\mathcal{H} \times_\mathcal{F} \mathcal{G}$ satisfies (RS). \end{lemma} 
\begin{definition} \label{definition-lifts} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$. Let $f: A' \to A$ be a map in $\mathcal{C}_\Lambda$. Let $x \in \mathcal{F}(A)$. The category $\textit{Lift}(x, f)$ of lifts of $x$ along $f$ is the category with the following objects and morphisms. \begin{enumerate} \item Objects: A {\it lift of $x$ along $f$} is a morphism $x' \to x$ lying over $f$. \item Morphisms: A {\it morphism of lifts} from $a_1 : x'_1 \to x$ to $a_2 : x'_2 \to x$ is a morphism $b : x'_1 \to x'_2$ in $\mathcal{F}(A')$ such that $a_2 = a_1 \circ b$. \end{enumerate} The set $\text{Lift}(x, f)$ of lifts of $x$ along $f$ is the set of isomorphism classes of $\textit{Lift}(x, f)$. \end{definition} 
\begin{lemma} \label{lemma-free-transitive-action} Let $\mathcal{F}$ be a deformation category. Let $A' \to A$ be a surjective ring map in $\mathcal{C}_\Lambda$ whose kernel $I$ is annihilated by $\mathfrak m_{A'}$. Let $x \in \Ob(\mathcal{F}(A))$. If $\text{Lift}(x, A')$ is nonempty, then there is a free and transitive action of $T\mathcal{F} \otimes_k I$ on $\text{Lift}(x, A')$. \end{lemma} 
\begin{lemma} \label{lemma-minimal-smooth-morphism-functors} Let $F, G: \mathcal{C}_\Lambda \to \textit{Sets}$ be deformation functors. Let $\varphi : F \to G$ be a smooth morphism which induces an isomorphism $d\varphi : TF \to TG$ of tangent spaces. Then $\varphi$ is an isomorphism. \end{lemma} 
\begin{theorem} \label{theorem-Schlessinger-prorepresentability} Let $F: \mathcal{C}_\Lambda \to \textit{Sets}$ be a functor. Then $F$ is prorepresentable if and only if (a) $F$ is a deformation functor, (b) $\dim_k TF$ is finite, and (c) $\gamma : \text{Der}_\Lambda(k, k) \to TF$ is injective. \end{theorem} 
\begin{definition} \label{definition-relative-infinitesimal-auts} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal C_\Lambda$. Let $x' \to x$ be a morphism in $\mathcal{F}$ lying over $A' \to A$. The kernel $$ \text{Inf}(x'/x) = \Ker(\text{Aut}_{A'}(x') \to \text{Aut}_A(x)) $$ is the {\it group of infinitesimal automorphisms of $x'$ over $x$}. \end{definition} 
\begin{definition} \label{definition-infinitesimal-auts} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal C_\Lambda$. Let $x_0 \in \Ob(\mathcal{F}(k))$. Assume a choice of pushforward $x_0 \to x_0'$ of $x_0$ along the map $k \to k[\epsilon], a \mapsto a$ has been made. Then there is a unique map $x'_0 \to x_0$ such that $x_0 \to x_0' \to x_0$ is the identity on $x_0$. Then $$ \text{Inf}_{x_0}(\mathcal F) = \text{Inf}(x'_0/x_0) $$ is the {\it group of infinitesimal automorphisms of $x_0$} \end{definition} 
\begin{definition} \label{definition-automorphism-functor} Let $p : \mathcal{F} \to \mathcal{C}$ be a category cofibered in groupoids over an arbitrary base category $\mathcal{C}$. Assume a choice of pushforwards has been made. Let $x \in \Ob(\mathcal{F})$ and let $U = p(x)$. Let $U/\mathcal{C}$ denote the category of objects under $U$. The {\it automorphism functor of $x$} is the functor $\mathit{Aut}(x) : U/\mathcal{C} \to \textit{Sets}$ sending an object $f : U \to V$ to $\text{Aut}_V(f_*x)$ and sending a morphism $$ \xymatrix{ V' \ar[rr] &                    & V\\           & U \ar[ul]^{f'}  \ar[ur]_f & } $$ to the homomorphism $\text{Aut}_{V'}(f'_*x) \to \text{Aut}_V(f_*x)$ coming from the unique morphism $f'_*x \to f_*x$ lying over $V' \to V$ and compatible with $x \to f'_*x$ and $x \to f_*x$. \end{definition} 
\begin{lemma} \label{lemma-Aut-functor-RS} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$ satisfying (RS). Let $x \in \Ob(\mathcal{F}(A))$. Then $\mathit{Aut}(x): \mathcal{C}_A \to \textit{Sets}$ satisfies (RS). \end{lemma} 
\begin{lemma} \label{lemma-Aut-functor-tangent-space} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$ satisfying (RS). Let $x \in \Ob(\mathcal{F}(A))$. Let $x_0$ be a pushforward of $x$ to $\mathcal{F}(k)$. \begin{enumerate} \item $T_{\text{id}_{x_0}} \mathit{Aut}(x)$ has a natural $k$-vector space structure such that addition agrees with composition in $T_{\text{id}_{x_0}} \mathit{Aut}(x)$. In particular, composition in $T_{\text{id}_{x_0}} \mathit{Aut}(x)$ is commutative. \item There is a canonical isomorphism $T_{\text{id}_{x_0}} \mathit{Aut}(x) \to T_{\text{id}_{x_0}} \mathit{Aut}(x_0)$ of $k$-vector spaces. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-infaut-vector-space} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$ satisfying (RS). Let $x_0 \in \Ob(\mathcal{F}(k))$. Then $\text{Inf}_{x_0}(\mathcal{F})$ is equal as a set to $T_{\text{id}_{x_0}} \mathit{Aut}(x_0)$, and so has a natural $k$-vector space structure such that addition agrees with composition of automorphisms. \end{lemma} 
\begin{lemma} \label{lemma-k-linear-infaut} Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a morphism of categories cofibred in groupoids over $\mathcal{C}_\Lambda$ satisfying (RS). Let $x_0 \in \Ob(\mathcal{F}(k))$. Then $\varphi$ induces a $k$-linear map $\text{Inf}_{x_0}(\mathcal{F}) \to \text{Inf}_{\varphi(x_0)}(\mathcal{G})$. \end{lemma} 
\begin{lemma} \label{lemma-lifted-automorphisms-torsor} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$ satisfying (RS). Let $x' \to x$ be a morphism lying over a surjective ring map $A' \to A$ with kernel $I$ annihilated by $\mathfrak m_{A'}$. Let $x_0$ be a pushforward of $x$ to $\mathcal{F}(k)$. Then $\text{Inf}(x'/x)$ has a free and transitive action by $T_{\text{id}_{x_0}} \mathit{Aut}(x') \otimes_k I = \text{Inf}_{x_0}(\mathcal{F}) \otimes_k I$. \end{lemma} 
\begin{lemma} \label{lemma-infaut-trivial} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$ satisfying (RS). Let $x' \to x$ be a morphism in $\mathcal{F}$ lying over a surjective ring map. Let $x_0$ be a pushforward of $x$ to $\mathcal{F}(k)$. If $\text{Inf}_{x_0}(\mathcal{F}) = 0$ then $\text{Inf}(x'/x) = 0$. \end{lemma} 
\begin{lemma} \label{lemma-infdef-trivial} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$ satisfying (RS). Let $x_0 \in \Ob(\mathcal{F}(k))$. Then $\text{Inf}_{x_0}(\mathcal{F}) = 0$ if and only if the natural morphism $\mathcal{F}_{x_0} \to \overline{\mathcal{F}_{x_0}}$ of categories cofibered in groupoids is an equivalence. \end{lemma} 
\begin{lemma} \label{lemma-deformation-categories-fiber-product-morphisms} Let $f : \mathcal{H} \to \mathcal{F}$ and $g : \mathcal{G} \to \mathcal{F}$ be $1$-morphisms of deformation categories. Then \begin{enumerate} \item $\mathcal{W} = \mathcal{H} \times_\mathcal{F} \mathcal{G}$ is a deformation category, and \item we have a $6$-term exact sequence of vector spaces $$ 0 \to \text{Inf}(\mathcal{W}) \to \text{Inf}(\mathcal{H}) \oplus \text{Inf}(\mathcal{G}) \to \text{Inf}(\mathcal{F}) \to T\mathcal{W} \to T\mathcal{H} \oplus T\mathcal{G} \to T\mathcal{F} $$ \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-map-fibre-products-smooth} Let $\mathcal{H}_1 \to \mathcal{G}$, $\mathcal{H}_2 \to \mathcal{G}$, and $\mathcal{G} \to \mathcal{F}$ be maps of categories cofibred in groupoids over $\mathcal{C}_\Lambda$. Assume \begin{enumerate} \item $\mathcal{F}$ and $\mathcal{G}$ are deformation categories, \item $T\mathcal{G} \to T\mathcal{F}$ is injective, and \item $\text{Inf}(\mathcal{G}) \to \text{Inf}(\mathcal{F})$ is surjective. \end{enumerate} Then $\mathcal{H}_1 \times_\mathcal{G} \mathcal{H}_2 \to \mathcal{H}_1 \times_\mathcal{F} \mathcal{H}_2$ is smooth. \end{lemma} 
\begin{lemma} \label{lemma-easy-check-smooth} Let $f : \mathcal{F} \to \mathcal{G}$ be a map of deformation categories. Let $x_0 \in \Ob(\mathcal{F}(k))$ with image $y_0 \in \Ob(\mathcal{G}(k))$. If \begin{enumerate} \item the map $T\mathcal{F} \to T\mathcal{G}$ is surjective, and \item for every small extension $A' \to A$ in $\mathcal{C}_\Lambda$ and $x \in \mathcal{F}(A)$ with image $y \in \mathcal{G}(A)$ if there is a lift of $y$ to $A'$, then there is a lift of $x$ to $A'$, \end{enumerate} then $\mathcal{F} \to \mathcal{G}$ is smooth (and vice versa). \end{lemma} 
\begin{lemma} \label{lemma-map-between-smooth} Let $\mathcal{F} \to \mathcal{G} \to \mathcal{H}$ be maps of categories cofibred in groupoids over $\mathcal{C}_\Lambda$. If \begin{enumerate} \item $\mathcal{F}$, $\mathcal{G}$ are deformation categories \item the map $T\mathcal{F} \to T\mathcal{G}$ is surjective, and \item $\mathcal{F} \to \mathcal{H}$ is smooth. \end{enumerate} Then $\mathcal{F} \to \mathcal{G}$ is smooth. \end{lemma} 
\begin{definition} \label{definition-groupoid-in-functors} Let $\mathcal{C}$ be a category. The {\it category of groupoids in functors on $\mathcal{C}$} is the category with the following objects and morphisms. \begin{enumerate} \item Objects: A {\it groupoid in functors on $\mathcal{C}$} is a quintuple $(U, R, s, t, c)$ where $U, R : \mathcal{C} \to \textit{Sets}$ are functors and $s, t : R \to U$ and $c : R \times_{s, U, t} R \to R$ are morphisms with the following property: For any object $T$ of $\mathcal{C}$, the quintuple $$ (U(T), R(T), s, t, c) $$ is a groupoid category. \item Morphisms: A {\it morphism $(U, R, s, t, c) \to (U', R', s', t', c')$ of groupoids in functors on $\mathcal{C}$} consists of morphisms $U \to U'$ and $R \to R'$ with the following property: For any object $T$ of $\mathcal{C}$, the induced maps $U(T) \to U'(T)$ and $R(T) \to R'(T)$ define a functor between groupoid categories $$ (U(T), R(T), s, t, c) \to (U'(T), R'(T), s', t', c'). $$ \end{enumerate} \end{definition} 
\begin{definition} \label{definition-representable} Let $\mathcal{C}$ be a category. A groupoid in functors on $\mathcal{C}$ is {\it representable} if it is isomorphic to one of the form $(\underline{U}, \underline{R}, s, t, c)$ where $U$ and $R$ are objects of $\mathcal{C}$ and the pushout $R \amalg_{s, U, t} R$ exists. \end{definition} 
\begin{definition} \label{definition-restricting-groupoids-in-functors} Let $(U, R, s, t, c)$ be a groupoid in functors on a category $\mathcal{C}$. Let $\mathcal{C}'$ be a subcategory of $\mathcal{C}$. The {\it restriction $(U, R, s, t, c)|_{\mathcal{C}'}$ of $(U, R, s, t, c)$ to $\mathcal{C}'$} is the groupoid in functors on $\mathcal{C}'$ given by $(U|_{\mathcal{C}'}, R|_{\mathcal C'}, s|_{\mathcal{C}'}, t|_{\mathcal{C}'}, c|_{\mathcal{C}'})$. \end{definition} 
\begin{definition} \label{definition-quotient} Let $(U, R, s, t, c)$ be a groupoid in functors on a category $\mathcal{C}$. \begin{enumerate} \item The assignment $T \mapsto  (U(T), R(T), s, t, c)$ determines a functor $\mathcal{C} \to \textit{Groupoids}$. The {\it quotient category cofibered in groupoids $[U/R] \to \mathcal{C}$} is the category cofibered in groupoids over $\mathcal{C}$ associated to this functor (as in Remarks \ref{remarks-cofibered-groupoids} (\ref{item-construction-associated-cofibered-groupoid})). \item The {\it quotient morphism $U \to [U/R]$} is the morphism of categories cofibered in groupoids over $\mathcal{C}$ defined by the rules \begin{enumerate} \item $x \in U(T)$ maps to the object $(T, x) \in \Ob([U/R](T))$, and \item $x \in U(T)$ and $f : T \to T'$ give rise to the morphism $(f, \text{id}_{U(f)(x)}): (T, x) \to (T, U(f)(x))$ lying over $f : T \to T'$. \end{enumerate} \end{enumerate} \end{definition} 
\begin{definition} \label{definition-prorepresentable-groupoid-in-functors} A groupoid in functors on $\mathcal{C}_\Lambda$ is {\it prorepresentable} if it is isomorphic to $(\underline{R_0}, \underline{R_1}, s, t, c)|_{\mathcal{C}_\Lambda}$ for some representable groupoid in functors $(\underline{R_0}, \underline{R_1}, s, t, c)$ on the category $\widehat{\mathcal{C}}_\Lambda$. \end{definition} 
\begin{definition} \label{definition-completion-groupoid-in-functors} Let $(U, R, s, t, c)$ be a groupoid in functors on $\mathcal{C}_\Lambda$. The {\it completion $(U, R, s, t, c)^{\wedge}$ of $(U, R, s, t, c)$} is the groupoid in functors $(\widehat{U}, \widehat{R}, \widehat{s}, \widehat{t}, \widehat{c})$ on $\widehat{\mathcal{C}}_\Lambda$ described above. \end{definition} 
\begin{lemma} \label{lemma-groupoid-in-functors-prorep-equivalences} Let $(U, R, s, t, c)$ be a groupoid in functors on $\mathcal{C}_\Lambda$. \begin{enumerate} \item $(U, R, s, t, c)$ is prorepresentable if and only if its completion is representable as a groupoid in functors on $\widehat{\mathcal{C}}_\Lambda$. \item $(U, R, s, t, c)$ is prorepresentable if and only if $U$ and $R$ are prorepresentable. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-smooth-groupoid-in-functors} Let $(U, R, s, t, c)$ be a groupoid in functors on $\mathcal{C}_\Lambda$. We say $(U, R, s, t, c)$ is {\it smooth} if $s, t: R \to U$ are smooth. \end{definition} 
\begin{lemma} \label{lemma-smooth-quotient-morphism} Let $(U, R, s, t, c)$ be a groupoid in functors on $\mathcal{C}_\Lambda$. The following are equivalent: \begin{enumerate} \item The groupoid in functors $(U, R, s, t, c)$ is smooth. \item The morphism $s : R \to U$ is smooth. \item The morphism $t : R \to U$ is smooth. \item The quotient morphism $U \to [U/R]$ is smooth. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-smooth-RS-groupoid-in-functors-quotient} Let $(U, R, s, t, c)$ be a smooth groupoid in functors on $\mathcal{C}_\Lambda$. Assume $U$ and $R$ satisfy (RS). Then $[U/R]$ satisfies (RS). \end{lemma} 
\begin{lemma} \label{lemma-deformation-groupoid-quotient} Let $(U, R, s, t, c)$ be a smooth groupoid in functors on $\mathcal{C}_\Lambda$. Assume $U$ and $R$ are deformation functors. Then: \begin{enumerate} \item The quotient $[U/R]$ is a deformation category. \item The tangent space of $[U/R]$ is $$ T[U/R] = \Coker(ds-dt: TR \to TU). $$ \item The space of infinitesimal automorphisms of $[U/R]$ is $$ \text{Inf}([U/R]) = \Ker(ds \oplus dt : TR \to TU \oplus TU). $$ \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-presentation} Let $\mathcal{F}$ be a category cofibered in groupoids over a category $\mathcal{C}$. Let $(U, R, s, t, c)$ be a groupoid in functors on $\mathcal{C}$. A {\it presentation of $\mathcal{F}$ by $(U, R, s, t, c)$} is an equivalence $\varphi : [U/R] \to \mathcal{F}$ of categories cofibered in groupoids over $\mathcal{C}$. \end{definition} 
\begin{lemma} \label{lemma-presentation-construction} Let $\mathcal{F}$ be category cofibered in groupoids over a category $\mathcal{C}$. Let $U : \mathcal{C} \to \textit{Sets}$ be a functor. Let $f : U \to \mathcal{F}$ be a morphism of categories cofibered in groupoids over $\mathcal{C}$. Define $R, s, t, c$ as follows: \begin{enumerate} \item $R : \mathcal{C} \to \textit{Sets}$ is the functor $U \times_{f, \mathcal{F}, f} U$. \item $t, s : R \to U$ are the first and second projections, respectively. \item $c : R \times_{s, U, t} R \to R$ is the morphism given by projection onto the first and last factors of $U \times_{f, \mathcal{F}, f} U \times_{f, \mathcal{F}, f} U$ under the canonical isomorphism $R \times_{s, U, t} R \to U \times_{f, \mathcal{F}, f} U \times_{f, \mathcal{F}, f} U$. \end{enumerate} Then $(U, R, s, t, c)$ is a groupoid in functors on $\mathcal{C}$. \end{lemma} 
\begin{lemma} \label{lemma-presentation-morphism} Let $\mathcal{F}$ be category cofibered in groupoids over a category $\mathcal{C}$. Let $U : \mathcal{C} \to \textit{Sets}$ be a functor. Let $f : U \to \mathcal{F}$ be a morphism of categories cofibered in groupoids over $\mathcal{C}$. Let $(U, R, s, t, c)$ be the groupoid in functors on $\mathcal{C}$ constructed from $f : U \to \mathcal{F}$ in Lemma \ref{lemma-presentation-construction}. Then there is a natural morphism $[f] : [U/R] \to \mathcal{F}$ such that: \begin{enumerate} \item $[f]: [U/R] \to \mathcal{F}$ is fully faithful. \item $[f]: [U/R] \to \mathcal{F}$ is an equivalence if and only if $f : U \to \mathcal{F}$ is essentially surjective. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-smooth-groupoid-in-functors-construction} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$. Let $U : \mathcal{C}_\Lambda \to \textit{Sets}$ be a functor. Let $f : U \to \mathcal{F}$ be a smooth morphism of categories cofibered in groupoids. Then: \begin{enumerate} \item If $(U, R, s, t, c)$ is the groupoid in functors on $\mathcal{C}_\Lambda$ constructed from $f : U \to \mathcal{F}$ in Lemma \ref{lemma-presentation-construction}, then $(U, R, s, t, c)$ is smooth. \item If $f : U(k) \to \mathcal{F}(k)$ is essentially surjective, then the morphism $[f] : [U/R] \to \mathcal{F}$ of Lemma \ref{lemma-presentation-morphism} is an equivalence. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-deformation-functor-diagonal} Let $\mathcal{F}$ be a deformation category. Let $U : \mathcal{C}_\Lambda \to \textit{Sets}$ be a deformation functor. Let $f: U \to \mathcal{F}$ be a morphism of categories cofibered in groupoids. Then $U \times_{f, \mathcal{F}, f} U$ is a deformation functor with tangent space fitting into an exact sequence of $k$-vector spaces $$ 0 \to \text{Inf}(\mathcal{F}) \to T(U \times_{f, \mathcal{F}, f} U) \to TU \oplus TU $$ \end{lemma} 
\begin{lemma} \label{lemma-prorepresentable-groupoid-in-functors-construction} Let $\mathcal{F}$ be a deformation category. Let $U : \mathcal{C}_\Lambda \to \textit{Sets}$ be a prorepresentable functor. Let $f : U \to \mathcal{F}$ be a morphism of categories cofibered in groupoids. Let $(U, R, s, t, c)$ be the groupoid in functors on $\mathcal{C}_\Lambda$ constructed from $f : U \to \mathcal{F}$ in Lemma \ref{lemma-presentation-construction}. If $\dim_k \text{Inf}(\mathcal{F}) < \infty$, then $(U, R, s, t, c)$ is prorepresentable. \end{lemma} 
\begin{theorem} \label{theorem-presentation-deformation-groupoid} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$. Then $\mathcal{F}$ admits a presentation by a smooth prorepresentable groupoid in functors on $\mathcal{C}_\Lambda$ if and only if the following conditions hold: \begin{enumerate} \item $\mathcal{F}$ is a deformation category. \item $\dim_k T\mathcal{F}$ is finite. \item $\dim_k \text{Inf}(\mathcal{F})$ is finite. \end{enumerate} \end{theorem} 
\begin{definition} \label{definition-minimal-groupoid-in-functors} Let $(U, R, s, t, c)$ be a smooth prorepresentable groupoid in functors on $\mathcal{C}_\Lambda$. \begin{enumerate} \item We say $(U, R, s, t, c)$ is {\it normalized} if the groupoid $(U(k[\epsilon]), R(k[\epsilon]), s, t, c)$ is totally disconnected, i.e., there are no morphisms between distinct objects. \item We say $(U, R, s, t, c)$ is {\it minimal} if the $U \to [U/R]$ is given by a minimal versal formal object of $[U/R]$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-characterize-minimal-groupoid-in-functors} Let $(U, R, s, t, c)$ be a smooth prorepresentable groupoid in functors on $\mathcal{C}_\Lambda$. \begin{enumerate} \item $(U, R, s, t, c)$ is normalized if and only if the morphism $U \to [U/R]$ induces an isomorphism on tangent spaces, and \item $(U, R, s, t, c)$ is minimal if and only if the kernel of $TU \to T[U/R]$ is contained in the image of $\text{Der}_\Lambda(k, k) \to TU$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-surjective-morphism-prorepresentable-functor} Let $U: \mathcal{C}_\Lambda \to \textit{Sets}$ be a prorepresentable functor. Let $\varphi : U \to U$ be a morphism such that $d\varphi : TU \to TU$ is an isomorphism.  Then $\varphi$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-minimal-prorepresentable-groupoid-autoequivalence} Let $(U, R, s, t, c)$ be a minimal smooth prorepresentable groupoid in functors on $\mathcal{C}_\Lambda$. If $\varphi : [U/R] \to [U/R]$ is an equivalence of categories cofibered in groupoids, then $\varphi$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-minimal-prorepresentable-groupoid-equivalence} Let $(U, R, s, t, c)$ and $(U', R', s', t', c')$ be minimal smooth prorepresentable groupoids in functors on $\mathcal{C}_\Lambda$. If $\varphi : [U/R] \to [U'/R']$ is an equivalence of categories cofibered in groupoids, then $\varphi$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-minimal-groupoid-in-functors-construction} Let $\mathcal{F}$ be a deformation category such that $\dim_k T\mathcal{F} <\infty$ and $\dim_k \text{Inf}(\mathcal{F}) < \infty$. Then there exists a minimal versal formal object $\xi$ of $\mathcal{F}$. Say $\xi$ lies over $R \in \Ob(\widehat{\mathcal{C}}_\Lambda)$. Let $U = \underline{R}|_{\mathcal{C}_\Lambda}$. Let $f = \underline{\xi} : U \to \mathcal{F}$ be the associated morphism. Let $(U, R, s, t, c)$ be the groupoid in functors on $\mathcal{C}_\Lambda$ constructed from $f : U \to \mathcal{F}$ in Lemma \ref{lemma-presentation-construction}. Then $(U, R, s, t, c)$ is a minimal smooth prorepresentable groupoid in functors on $\mathcal{C}_\Lambda$ and there is an equivalence $[U/R] \to \mathcal{F}$. \end{lemma} 
\begin{lemma} \label{lemma-minimal-presentations-equivalent} Let $\mathcal{F}$ be category cofibered in groupoids over $\mathcal{C}_\Lambda$. Assume there exist presentations of $\mathcal{F}$ by minimal smooth prorepresentable groupoids in functors $(U, R, s, t, c)$ and $(U', R', s', t', c')$. Then $(U, R, s, t, c)$ and $(U', R', s', t', c')$ are isomorphic. \end{lemma} 
\begin{theorem} \label{theorem-minimal-smooth-prorepresentable-presentations} Let $\mathcal{F}$ be a category cofibered in groupoids over $\mathcal{C}_\Lambda$. Consider the following conditions \begin{enumerate} \item $\mathcal{F}$ admits a presentation by a normalized smooth prorepresentable groupoid in functors on $\mathcal{C}_\Lambda$, \item $\mathcal{F}$ admits a presentation by a smooth prorepresentable groupoid in functors on $\mathcal{C}_\Lambda$, \item $\mathcal{F}$ admits a presentation by a minimal smooth prorepresentable groupoid in functors on $\mathcal{C}_\Lambda$, and \item $\mathcal{F}$ satisfies the following conditions \begin{enumerate} \item $\mathcal{F}$ is a deformation category. \item $\dim_k T\mathcal{F}$ is finite. \item $\dim_k \text{Inf}(\mathcal{F})$ is finite. \end{enumerate} \end{enumerate} Then (2), (3), (4) are equivalent and are implied by (1). If $k' \subset k$ is separable, then (1), (2), (3), (4) are all equivalent. Furthermore, the minimal smooth prorepresentable groupoids in functors which provide a presentation of $\mathcal{F}$ are unique up to isomorphism. \end{theorem} 
\begin{lemma} \label{lemma-homotopy} Being formally homotopic is an equivalence relation on sets of morphisms in $\widehat{\mathcal{C}}_\Lambda$. \end{lemma} 
\begin{lemma} \label{lemma-composition-homotopic} In the category $\widehat{\mathcal{C}}_\Lambda$, if $f_1, f_2 : R \to S$ are formally homotopic and $g : S \to S'$ is a morphism, then $g \circ f_1$ and $g \circ f_2$ are formally homotopic. \end{lemma} 
\begin{lemma} \label{lemma-versal-unique-up-to-homotopy} Let $\mathcal{F}$ be a deformation category over $\mathcal{C}_\Lambda$ with $\dim_k T\mathcal{F} < \infty$ and $\dim_k \text{Inf}(\mathcal{F}) < \infty$. Let $\xi$ be a versal formal object lying over $R$. Let $\eta$ be a formal object lying over $S$. Then any two maps $$ f, g : R \to S $$ such that $f_*\xi \cong \eta \cong g_*\xi$ are formally homotopic. \end{lemma} 
\begin{lemma} \label{lemma-homotopic-minimal-prime} In the category $\widehat{\mathcal{C}}_\Lambda$, if $f_1, f_2 : R \to S$ are formally homotopic and $\mathfrak p \subset R$ is a minimal prime ideal, then $f_1(\mathfrak p)S = f_2(\mathfrak p)S$ as ideals. \end{lemma} 
\begin{lemma} \label{lemma-elementary-properties-change-of-field} With notation and assumptions as in Situation \ref{situation-change-of-fields}. \begin{enumerate} \item We have $\overline{\mathcal{F}_{l/k}} = (\overline{\mathcal{F}})_{l/k}$. \item If $\mathcal{F}$ is a predeformation category, then $\mathcal{F}_{l/k}$ is a predeformation category. \item If $\mathcal{F}$ satisfies (S1), then $\mathcal{F}_{l/k}$ satisfies (S1). \item If $\mathcal{F}$ satisfies (S2), then $\mathcal{F}_{l/k}$ satisfies (S2). \item If $\mathcal{F}$ satisfies (RS), then $\mathcal{F}_{l/k}$ satisfies (RS). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-tangent-space-change-of-field} With notation and assumptions as in Situation \ref{situation-change-of-fields}. Assume $\mathcal{F}$ is a predeformation category and $\overline{\mathcal{F}}$ satisfies (S2). Then there is a canonical $l$-vector space isomorphism $$ T\mathcal{F} \otimes_k l \longrightarrow T\mathcal{F}_{l/k} $$ of tangent spaces. \end{lemma} 
\begin{lemma} \label{lemma-inf-aut-change-of-field} With notation and assumptions as in Situation \ref{situation-change-of-fields}. Assume $\mathcal{F}$ is a deformation category. Then there is a canonical $l$-vector space isomorphism $$ \text{Inf}(\mathcal{F}) \otimes_k l \longrightarrow \text{Inf}(\mathcal{F}_{l/k}) $$ of infinitesimal automorphism spaces. \end{lemma} 
\begin{lemma} \label{lemma-change-of-fields-smooth} With notation and assumptions as in Situation \ref{situation-change-of-fields}. If $\mathcal{F} \to \mathcal{G}$ is a smooth morphism of categories cofibred in groupoids over $\mathcal{C}_{\Lambda, k}$, then $\mathcal{F}_{l/k} \to \mathcal{G}_{l/k}$ is a smooth morphism of categories cofibred in groupoids over $\mathcal{C}_{\Lambda, l}$. \end{lemma} 
\begin{lemma} \label{lemma-change-of-field-versal-ring} With notation and assumptions as in Situation \ref{situation-change-of-fields}. Let $\xi$ be a versal formal object for $\mathcal{F}$ lying over $R \in \Ob(\widehat{\mathcal{C}}_{\Lambda, k})$. Then there exist \begin{enumerate} \item an $S \in \Ob(\widehat{\mathcal{C}}_{\Lambda, l})$ and a local $\Lambda$-algebra homomorphism $R \to S$ which is formally smooth in the $\mathfrak m_S$-adic topology and induces the given field extension $l/k$ on residue fields, and \item a versal formal object of $\mathcal{F}_{l/k}$ lying over $S$. \end{enumerate} \end{lemma} 
