\begin{definition} \label{definition-category} A {\it category} $\mathcal{C}$ consists of the following data: \begin{enumerate} \item A set of objects $\Ob(\mathcal{C})$. \item For each pair $x, y \in \Ob(\mathcal{C})$ a set of morphisms $\Mor_\mathcal{C}(x, y)$. \item For each triple $x, y, z\in \Ob(\mathcal{C})$ a composition map $ \Mor_\mathcal{C}(y, z) \times \Mor_\mathcal{C}(x, y) \to \Mor_\mathcal{C}(x, z) $, denoted $(\phi, \psi) \mapsto \phi \circ \psi$. \end{enumerate} These data are to satisfy the following rules: \begin{enumerate} \item For every element $x\in \Ob(\mathcal{C})$ there exists a morphism $\text{id}_x\in \Mor_\mathcal{C}(x, x)$ such that $\text{id}_x \circ \phi = \phi$ and $\psi \circ \text{id}_x = \psi $ whenever these compositions make sense. \item Composition is associative, i.e., $(\phi \circ \psi) \circ \chi = \phi \circ ( \psi \circ \chi)$ whenever these compositions make sense. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-isomorphism} A morphism $\phi : x \to y$ is an {\it isomorphism} of the category $\mathcal{C}$ if there exists a morphism $\psi : y \to x$ such that $\phi \circ \psi = \text{id}_y$ and $\psi \circ \phi = \text{id}_x$. \end{definition} 
\begin{definition} \label{definition-groupoid} A {\it groupoid} is a category where every morphism is an isomorphism. \end{definition} 
\begin{definition} \label{definition-functor} A {\it functor} $F : \mathcal{A} \to \mathcal{B}$ between two categories $\mathcal{A}, \mathcal{B}$ is given by the following data: \begin{enumerate} \item A map $F : \Ob(\mathcal{A}) \to \Ob(\mathcal{B})$. \item For every $x, y \in \Ob(\mathcal{A})$ a map $F : \Mor_\mathcal{A}(x, y) \to \Mor_\mathcal{B}(F(x), F(y))$, denoted $\phi \mapsto F(\phi)$. \end{enumerate} These data should be compatible with composition and identity morphisms in the following manner: $F(\phi \circ \psi) = F(\phi) \circ F(\psi)$ for a composable pair $(\phi, \psi)$ of morphisms of $\mathcal{A}$ and $F(\text{id}_x) = \text{id}_{F(x)}$. \end{definition} 
\begin{definition} \label{definition-faithful} Let $F : \mathcal{A} \to \mathcal{B}$ be a functor. \begin{enumerate} \item We say $F$ is {\it faithful} if for any objects $x, y \in \Ob(\mathcal{A})$ the map $$ F : \Mor_\mathcal{A}(x, y) \to \Mor_\mathcal{B}(F(x), F(y)) $$ is injective. \item If these maps are all bijective then $F$ is called {\it fully faithful}. \item The functor $F$ is called {\it essentially surjective} if for any object $y \in \Ob(\mathcal{B})$ there exists an object $x \in \Ob(\mathcal{A})$ such that $F(x)$ is isomorphic to $y$ in $\mathcal{B}$. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-subcategory} A {\it subcategory} of a category $\mathcal{B}$ is a category $\mathcal{A}$ whose objects and arrows form subsets of the objects and arrows of $\mathcal{B}$ and such that source, target and composition in $\mathcal{A}$ agree with those of $\mathcal{B}$ and such that the identity morphism of an object of $\mathcal{A}$ matches the one in $\mathcal{B}$. We say $\mathcal{A}$ is a {\it full subcategory} of $\mathcal{B}$ if $\Mor_\mathcal{A}(x, y) = \Mor_\mathcal{B}(x, y)$ for all $x, y \in \Ob(\mathcal{A})$. We say $\mathcal{A}$ is a {\it strictly full} subcategory of $\mathcal{B}$ if it is a full subcategory and given $x \in \Ob(\mathcal{A})$ any object of $\mathcal{B}$ which is isomorphic to $x$ is also in $\mathcal{A}$. \end{definition} 
\begin{definition} \label{definition-transformation-functors} Let $F, G : \mathcal{A} \to \mathcal{B}$ be functors. A {\it natural transformation}, or a {\it morphism of functors} $t : F \to G$, is a collection $\{t_x\}_{x\in \Ob(\mathcal{A})}$ such that \begin{enumerate} \item $t_x : F(x) \to G(x)$ is a morphism in the category $\mathcal{B}$, and \item for every morphism $\phi : x \to y$ of $\mathcal{A}$ the following diagram is commutative $$ \xymatrix{ F(x) \ar[r]^{t_x} \ar[d]_{F(\phi)} & G(x) \ar[d]^{G(\phi)} \\ F(y) \ar[r]^{t_y} & G(y) } $$ \end{enumerate} \end{definition} 
\begin{definition} \label{definition-equivalence-categories} An {\it equivalence of categories} $F : \mathcal{A} \to \mathcal{B}$ is a functor such that there exists a functor $G : \mathcal{B} \to \mathcal{A}$ such that the compositions $F \circ G$ and $G \circ F$ are isomorphic to the identity functors $\text{id}_\mathcal{B}$, respectively $\text{id}_\mathcal{A}$. In this case we say that $G$ is a {\it quasi-inverse} to $F$. \end{definition} 
\begin{lemma} \label{lemma-construct-quasi-inverse} Let $F : \mathcal{A} \to \mathcal{B}$ be a fully faithful functor. Suppose for every $X \in \Ob(\mathcal{B})$ we are given an object $j(X)$ of $\mathcal{A}$ and an isomorphism $i_X : X \to F(j(X))$. Then there is a unique functor $j : \mathcal{B} \to \mathcal{A}$ such that $j$ extends the rule on objects, and the isomorphisms $i_X$ define an isomorphism of functors $\text{id}_\mathcal{B} \to F \circ j$. Moreover, $j$ and $F$ are quasi-inverse equivalences of categories. \end{lemma} 
\begin{lemma} \label{lemma-equivalence-categories} A functor is an equivalence of categories if and only if it is both fully faithful and essentially surjective. \end{lemma} 
\begin{definition} \label{definition-product-category} Let $\mathcal{A}$, $\mathcal{B}$ be categories. We define the {\it product category} $\mathcal{A} \times \mathcal{B}$ to be the category with objects $\Ob(\mathcal{A} \times \mathcal{B}) = \Ob(\mathcal{A}) \times \Ob(\mathcal{B})$ and $$ \Mor_{\mathcal{A} \times \mathcal{B}}((x, y), (x', y')) := \Mor_\mathcal{A}(x, x')\times \Mor_\mathcal{B}(y, y'). $$ Composition is defined componentwise. \end{definition} 
\begin{definition} \label{definition-opposite} Given a category $\mathcal{C}$ the {\it opposite category} $\mathcal{C}^{opp}$ is the category with the same objects as $\mathcal{C}$ but all morphisms reversed. \end{definition} 
\begin{definition} \label{definition-contravariant} Let $\mathcal{C}$, $\mathcal{S}$ be categories. A {\it contravariant} functor $F$ from $\mathcal{C}$ to $\mathcal{S}$ is a functor $\mathcal{C}^{opp}\to \mathcal{S}$. \end{definition} 
\begin{definition} \label{definition-presheaf} Let $\mathcal{C}$ be a category. \begin{enumerate} \item A {\it presheaf of sets on $\mathcal{C}$} or simply a {\it presheaf} is a contravariant functor $F$ from $\mathcal{C}$ to $\textit{Sets}$. \item The category of presheaves is denoted $\textit{PSh}(\mathcal{C})$. \end{enumerate} \end{definition} 
\begin{lemma}[Yoneda lemma] \label{lemma-yoneda} \begin{reference} Appeared in some form in \cite{Yoneda-homology}. Used by Grothendieck in a generalized form in \cite{Gr-II}. \end{reference} Let $U, V \in \Ob(\mathcal{C})$. Given any morphism of functors $s : h_U \to h_V$ there is a unique morphism $\phi : U \to V$ such that $h(\phi) = s$. In other words the functor $h$ is fully faithful. More generally, given any contravariant functor $F$ and any object $U$ of $\mathcal{C}$ we have a natural bijection $$ \Mor_{\textit{PSh}(\mathcal{C})}(h_U, F) \longrightarrow F(U), \quad s \longmapsto s_U(\text{id}_U). $$ \end{lemma} 
\begin{definition} \label{definition-representable-functor} A contravariant functor $F : \mathcal{C}\to \textit{Sets}$ is said to be {\it representable} if it is isomorphic to the functor of points $h_U$ for some object $U$ of $\mathcal{C}$. \end{definition} 
\begin{definition} \label{definition-products} Let $x, y\in \Ob(\mathcal{C})$. A {\it product} of $x$ and $y$ is an object $x \times y \in \Ob(\mathcal{C})$ together with morphisms $p\in \Mor_{\mathcal C}(x \times y, x)$ and $q\in\Mor_{\mathcal C}(x \times y, y)$ such that the following universal property holds: for any $w\in \Ob(\mathcal{C})$ and morphisms $\alpha \in \Mor_{\mathcal C}(w, x)$ and $\beta \in \Mor_\mathcal{C}(w, y)$ there is a unique $\gamma\in \Mor_{\mathcal C}(w, x \times y)$ making the diagram $$ \xymatrix{ w \ar[rrrd]^\beta \ar@{-->}[rrd]_\gamma \ar[rrdd]_\alpha & & \\ & & x \times y \ar[d]_p \ar[r]_q & y \\ & & x & } $$ commute. \end{definition} 
\begin{definition} \label{definition-has-products-of-pairs} We say the category $\mathcal{C}$ {\it has products of pairs of objects} if a product $x \times y$ exists for any $x, y \in \Ob(\mathcal{C})$. \end{definition} 
\begin{definition} \label{definition-coproducts} Let $x, y \in \Ob(\mathcal{C})$. A {\it coproduct}, or {\it amalgamated sum} of $x$ and $y$ is an object $x \amalg y \in \Ob(\mathcal{C})$ together with morphisms $i \in \Mor_{\mathcal C}(x, x \amalg y)$ and $j \in \Mor_{\mathcal C}(y, x \amalg y)$ such that the following universal property holds: for any $w \in \Ob(\mathcal{C})$ and morphisms $\alpha \in \Mor_{\mathcal C}(x, w)$ and $\beta \in \Mor_\mathcal{C}(y, w)$ there is a unique $\gamma \in \Mor_{\mathcal C}(x \amalg y, w)$ making the diagram $$ \xymatrix{ & y \ar[d]^j \ar[rrdd]^\beta \\ x \ar[r]^i \ar[rrrd]_\alpha & x \amalg y \ar@{-->}[rrd]^\gamma \\ & & & w } $$ commute. \end{definition} 
\begin{definition} \label{definition-has-coproducts-of-pairs} We say the category $\mathcal{C}$ {\it has coproducts of pairs of objects} if a coproduct $x \amalg y$ exists for any $x, y \in \Ob(\mathcal{C})$. \end{definition} 
\begin{definition} \label{definition-fibre-products} Let $x, y, z\in \Ob(\mathcal{C})$, $f\in \Mor_\mathcal{C}(x, y)$ and $g\in \Mor_{\mathcal C}(z, y)$. A {\it fibre product} of $f$ and $g$ is an object $x \times_y z\in \Ob(\mathcal{C})$ together with morphisms $p \in \Mor_{\mathcal C}(x \times_y z, x)$ and $q \in \Mor_{\mathcal C}(x \times_y z, z)$ making the diagram $$ \xymatrix{ x \times_y z \ar[r]_q \ar[d]_p & z \ar[d]^g \\ x \ar[r]^f & y } $$ commute, and such that the following universal property holds: for any $w\in \Ob(\mathcal{C})$ and morphisms $\alpha \in \Mor_{\mathcal C}(w, x)$ and $\beta \in \Mor_\mathcal{C}(w, z)$ with $f \circ \alpha = g \circ \beta$ there is a unique $\gamma \in \Mor_{\mathcal C}(w, x \times_y z)$ making the diagram $$ \xymatrix{ w \ar[rrrd]^\beta \ar@{-->}[rrd]_\gamma \ar[rrdd]_\alpha & & \\ & & x \times_y z \ar[d]^p \ar[r]_q & z \ar[d]^g \\ & & x \ar[r]^f & y } $$ commute. \end{definition} 
\begin{definition} \label{definition-cartesian} We say a commutative diagram $$ \xymatrix{ w \ar[r] \ar[d] & z \ar[d] \\ x \ar[r] & y } $$ in a category is {\it cartesian} if $w$ and the morphisms $w \to x$ and $w \to z$ form a fibre product of the morphisms $x \to y$ and $z \to y$. \end{definition} 
\begin{definition} \label{definition-has-fibre-products} We say the category $\mathcal{C}$ {\it has fibre products} if the fibre product exists for any $f\in \Mor_{\mathcal C}(x, y)$ and $g\in \Mor_{\mathcal C}(z, y)$. \end{definition} 
\begin{definition} \label{definition-representable-morphism} A morphism $f : x \to y$ of a category $\mathcal{C}$ is said to be {\it representable} if for every morphism $z \to y$ in $\mathcal{C}$ the fibre product $x \times_y z$ exists. \end{definition} 
\begin{lemma} \label{lemma-composition-representable} Let $\mathcal{C}$ be a category. Let $f : x \to y$, and $g : y \to z$ be representable. Then $g \circ f : x \to z$ is representable. \end{lemma} 
\begin{lemma} \label{lemma-base-change-representable} Let $\mathcal{C}$ be a category. Let $f : x \to y$ be representable. Let $y' \to y$ be a morphism of $\mathcal{C}$. Then the morphism $x' := x \times_y y' \to y'$ is representable also. \end{lemma} 
\begin{lemma} \label{lemma-fibre-product-presheaves} Let $\mathcal{C}$ be a category. Let $F, G, H : \mathcal{C}^{opp} \to \textit{Sets}$ be functors. Let $a : F \to G$ and $b : H \to G$ be transformations of functors. Then the fibre product $F \times_{a, G, b} H$ in the category $\textit{PSh}(\mathcal{C})$ exists and is given by the formula $$ (F \times_{a, G, b} H)(X) = F(X) \times_{a_X, G(X), b_X} H(X) $$ for any object $X$ of $\mathcal{C}$. \end{lemma} 
\begin{definition} \label{definition-representable-map-presheaves} Let $\mathcal{C}$ be a category. Let $F, G : \mathcal{C}^{opp} \to \textit{Sets}$ be functors. We say a morphism $a : F \to G$ is {\it representable}, or that {\it $F$ is relatively representable over $G$}, if for every $U \in \Ob(\mathcal{C})$ and any $\xi \in G(U)$ the functor $h_U \times_G F$ is representable. \end{definition} 
\begin{lemma} \label{lemma-representable-over-representable} Let $\mathcal{C}$ be a category. Let $a : F \to G$ be a morphism of contravariant functors from $\mathcal{C}$ to $\textit{Sets}$. If $a$ is representable, and $G$ is a representable functor, then $F$ is representable. \end{lemma} 
\begin{lemma} \label{lemma-representable-diagonal} Let $\mathcal{C}$ be a category. Let $F : \mathcal{C}^{opp} \to \textit{Sets}$ be a functor. Assume $\mathcal{C}$ has products of pairs of objects and fibre products. The following are equivalent: \begin{enumerate} \item the diagonal $\Delta : F \to F \times F$ is representable, \item for every $U$ in $\mathcal{C}$, and any $\xi \in F(U)$ the map $\xi : h_U \to F$ is representable, \item for every pair $U, V$ in $\mathcal{C}$ and any $\xi \in F(U)$, $\xi' \in F(V)$ the fibre product $h_U \times_{\xi, F, \xi'} h_V$ is representable. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-pushouts} Let $x, y, z\in \Ob(\mathcal{C})$, $f\in \Mor_\mathcal{C}(y, x)$ and $g\in \Mor_{\mathcal C}(y, z)$. A {\it pushout} of $f$ and $g$ is an object $x\amalg_y z\in \Ob(\mathcal{C})$ together with morphisms $p\in \Mor_{\mathcal C}(x, x\amalg_y z)$ and $q\in\Mor_{\mathcal C}(z, x\amalg_y z)$ making the diagram $$ \xymatrix{ y \ar[r]_g \ar[d]_f & z \ar[d]^q \\ x \ar[r]^p & x\amalg_y z } $$ commute, and such that the following universal property holds: For any $w\in \Ob(\mathcal{C})$ and morphisms $\alpha \in \Mor_{\mathcal C}(x, w)$ and $\beta \in \Mor_\mathcal{C}(z, w)$ with $\alpha \circ f = \beta \circ g$ there is a unique $\gamma\in \Mor_{\mathcal C}(x\amalg_y z, w)$ making the diagram $$ \xymatrix{ y \ar[r]_g \ar[d]_f & z \ar[d]^q \ar[rrdd]^\beta & & \\ x \ar[r]^p \ar[rrrd]^\alpha & x \amalg_y z \ar@{-->}[rrd]^\gamma & & \\ & & & w } $$ commute. \end{definition} 
\begin{definition} \label{definition-cocartesian} We say a commutative diagram $$ \xymatrix{ y \ar[r] \ar[d] & z \ar[d] \\ x \ar[r] & w } $$ in a category is {\it cocartesian} if $w$ and the morphisms $x \to w$ and $z \to w$ form a pushout of the morphisms $y \to x$ and $y \to z$. \end{definition} 
\begin{definition} \label{definition-equalizers} Suppose that $X$, $Y$ are objects of a category $\mathcal{C}$ and that $a, b : X \to Y$ are morphisms. We say a morphism $e : Z \to X$ is an {\it equalizer} for the pair $(a, b)$ if $a \circ e = b \circ e$ and if $(Z, e)$ satisfies the following universal property: For every morphism $t : W \to X$ in $\mathcal{C}$ such that $a \circ t = b \circ t$ there exists a unique morphism $s : W \to Z$ such that $t = e \circ s$. \end{definition} 
\begin{definition} \label{definition-coequalizers} Suppose that $X$, $Y$ are objects of a category $\mathcal{C}$ and that $a, b : X \to Y$ are morphisms. We say a morphism $c : Y \to Z$ is a {\it coequalizer} for the pair $(a, b)$ if $c \circ a = c \circ b$ and if $(Z, c)$ satisfies the following universal property: For every morphism $t : Y \to W$ in $\mathcal{C}$ such that $t \circ a = t \circ b$ there exists a unique morphism $s : Z \to W$ such that $t = s \circ c$. \end{definition} 
\begin{definition} \label{definition-initial-final} Let $\mathcal{C}$ be a category. \begin{enumerate} \item An object $x$ of the category $\mathcal{C}$ is called an {\it initial} object if for every object $y$ of $\mathcal{C}$ there is exactly one morphism $x \to y$. \item An object $x$ of the category $\mathcal{C}$ is called a {\it final} object if for every object $y$ of $\mathcal{C}$ there is exactly one morphism $y \to x$. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-mono-epi} Let $\mathcal{C}$ be a category and let $f : X \to Y$ be a morphism of $\mathcal{C}$. \begin{enumerate} \item We say that $f$ is a {\it monomorphism} if for every object $W$ and every pair of morphisms $a, b : W \to X$ such that $f \circ a = f \circ b$ we have $a = b$. \item We say that $f$ is an {\it epimorphism} if for every object $W$ and every pair of morphisms $a, b : Y \to W$ such that $a \circ f = b \circ f$ we have $a = b$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-characterize-mono-epi} Let $\mathcal{C}$ be a category, and let $f : X \to Y$ be a morphism of $\mathcal{C}$. Then \begin{enumerate} \item $f$ is a monomorphism if and only if $X$ is the fibre product $X \times_Y X$, and \item $f$ is an epimorphism if and only if $Y$ is the pushout $Y \amalg_X Y$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-limit} A {\it limit} of the $\mathcal{I}$-diagram $M$ in the category $\mathcal{C}$ is given by an object $\lim_\mathcal{I} M$ in $\mathcal{C}$ together with morphisms $p_i : \lim_\mathcal{I} M \to M_i$ such that \begin{enumerate} \item for $\phi : i \to i'$ a morphism in $\mathcal{I}$ we have $p_{i'} = M(\phi) \circ p_i$, and \item for any object $W$ in $\mathcal{C}$ and any family of morphisms $q_i : W \to M_i$ (indexed by $i \in \Ob(\mathcal{I})$) such that for all $\phi : i \to i'$ in $\mathcal{I}$ we have $q_{i'} = M(\phi) \circ q_i$ there exists a unique morphism $q : W \to \lim_\mathcal{I} M$ such that $q_i = p_i \circ q$ for every object $i$ of $\mathcal{I}$. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-colimit} A {\it colimit} of the $\mathcal{I}$-diagram $M$ in the category $\mathcal{C}$ is given by an object $\colim_\mathcal{I} M$ in $\mathcal{C}$ together with morphisms $s_i : M_i \to \colim_\mathcal{I} M$ such that \begin{enumerate} \item for $\phi : i \to i'$ a morphism in $\mathcal{I}$ we have $s_i = s_{i'} \circ M(\phi)$, and \item for any object $W$ in $\mathcal{C}$ and any family of morphisms $t_i : M_i \to W$ (indexed by $i \in \Ob(\mathcal{I})$) such that for all $\phi : i \to i'$ in $\mathcal{I}$ we have $t_i = t_{i'} \circ M(\phi)$ there exists a unique morphism $t : \colim_\mathcal{I} M \to W$ such that $t_i = t \circ s_i$ for every object $i$ of $\mathcal{I}$. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-product} Suppose that $I$ is a set, and suppose given for every $i \in I$ an object $M_i$ of the category $\mathcal{C}$. A {\it product} $\prod_{i\in I} M_i$ is by definition $\lim_\mathcal{I} M$ (if it exists) where $\mathcal{I}$ is the category having only identities as morphisms and having the elements of $I$ as objects. \end{definition} 
\begin{definition} \label{definition-coproduct} Suppose that $I$ is a set, and suppose given for every $i \in I$ an object $M_i$ of the category $\mathcal{C}$. A {\it coproduct} $\coprod_{i\in I} M_i$ is by definition $\colim_\mathcal{I} M$ (if it exists) where $\mathcal{I}$ is the category having only identities as morphisms and having the elements of $I$ as objects. \end{definition} 
\begin{lemma} \label{lemma-functorial-colimit} Suppose that $M : \mathcal{I} \to \mathcal{C}$, and $N : \mathcal{J} \to \mathcal{C}$ are diagrams whose colimits exist. Suppose $H : \mathcal{I} \to \mathcal{J}$ is a functor, and suppose $t : M \to N \circ H$ is a transformation of functors. Then there is a unique morphism $$ \theta : \colim_\mathcal{I} M \longrightarrow \colim_\mathcal{J} N $$ such that all the diagrams $$ \xymatrix{ M_i \ar[d]_{t_i} \ar[r] & \colim_\mathcal{I} M \ar[d]^{\theta} \\ N_{H(i)} \ar[r] & \colim_\mathcal{J} N } $$ commute. \end{lemma} 
\begin{lemma} \label{lemma-functorial-limit} Suppose that $M : \mathcal{I} \to \mathcal{C}$, and $N : \mathcal{J} \to \mathcal{C}$ are diagrams whose limits exist. Suppose $H : \mathcal{I} \to \mathcal{J}$ is a functor, and suppose $t : N \circ H \to M$ is a transformation of functors. Then there is a unique morphism $$ \theta : \lim_\mathcal{J} N \longrightarrow \lim_\mathcal{I} M $$ such that all the diagrams $$ \xymatrix{ \lim_\mathcal{J} N \ar[d]^{\theta} \ar[r] & N_{H(i)} \ar[d]_{t_i} \\ \lim_\mathcal{I} M \ar[r] & M_i } $$ commute. \end{lemma} 
\begin{lemma} \label{lemma-colimits-commute} Let $\mathcal{I}$, $\mathcal{J}$ be index categories. Let $M : \mathcal{I} \times \mathcal{J} \to \mathcal{C}$ be a functor. Assume that $M_{i, \infty} = \colim_j M_{i,j}$  exists for all $i$. Then the resulting functor $M_{-, \infty} : \mathcal{I} \to \mathcal{C}$ has a colimit if and only if $M$ does, and then the colimits coincide. In particular, we have $$ \colim_i \colim_j M_{i, j} = \colim_{i, j} M_{i, j} = \colim_j \colim_i M_{i, j} $$ provided all the indicated colimits exist. Similar for limits. \end{lemma} 
\begin{lemma} \label{lemma-limits-products-equalizers} Let $M : \mathcal{I} \to \mathcal{C}$ be a diagram. Write $I = \Ob(\mathcal{I})$ and $A = \text{Arrows}(\mathcal{I})$. Denote $s, t : A \to I$ the source and target maps. Suppose that $\prod_{i \in I} M_i$ and $\prod_{a \in A} M_{t(a)}$ exist. Suppose that the equalizer of $$ \xymatrix{ \prod_{i \in I} M_i \ar@<1ex>[r]^\phi \ar@<-1ex>[r]_\psi & \prod_{a \in A} M_{t(a)} } $$ exists, where the morphisms are determined by their components as follows: $p_a \circ \psi = M(a) \circ p_{s(a)}$ and $p_a \circ \phi = p_{t(a)}$. Then this equalizer is the limit of the diagram. \end{lemma} 
\begin{lemma} \label{lemma-colimits-coproducts-coequalizers} \begin{slogan} If all coproducts and coequalizers exist, all colimits exist. \end{slogan} Let $M : \mathcal{I} \to \mathcal{C}$ be a diagram. Write $I = \Ob(\mathcal{I})$ and $A = \text{Arrows}(\mathcal{I})$. Denote $s, t : A \to I$ the source and target maps. Suppose that $\coprod_{i \in I} M_i$ and $\coprod_{a \in A} M_{s(a)}$ exist. Suppose that the coequalizer of $$ \xymatrix{ \coprod_{a \in A} M_{s(a)} \ar@<1ex>[r]^\phi \ar@<-1ex>[r]_\psi & \coprod_{i \in I} M_i } $$ exists, where the morphisms are determined by their components as follows: The component $M_{s(a)}$ maps via $\psi$ to the component $M_{t(a)}$ via the morphism $M(a)$. The component $M_{s(a)}$ maps via $\phi$ to the component $M_{s(a)}$ by the identity morphism. Then this coequalizer is the colimit of the diagram. \end{lemma} 
\begin{definition} \label{definition-category-connected} We say that a category $\mathcal{I}$ is {\it connected} if the equivalence relation generated by $x \sim y \Leftrightarrow \Mor_\mathcal{I}(x, y) \not = \emptyset$ has exactly one equivalence class. \end{definition} 
\begin{lemma} \label{lemma-connected-limit-over-X} Let $\mathcal{C}$ be a category. Let $X$ be an object of $\mathcal{C}$. Let $M : \mathcal{I} \to \mathcal{C}/X$ be a diagram in the category of objects over $X$. If the index category $\mathcal{I}$ is connected and the limit of $M$ exists in $\mathcal{C}/X$, then the limit of the composition $\mathcal{I} \to \mathcal{C}/X \to \mathcal{C}$ exists and is the same. \end{lemma} 
\begin{lemma} \label{lemma-connected-colimit-under-X} Let $\mathcal{C}$ be a category. Let $X$ be an object of $\mathcal{C}$. Let $M : \mathcal{I} \to X/\mathcal{C}$ be a diagram in the category of objects under $X$. If the index category $\mathcal{I}$ is connected and the colimit of $M$ exists in $X/\mathcal{C}$, then the colimit of the composition $\mathcal{I} \to X/\mathcal{C} \to \mathcal{C}$ exists and is the same. \end{lemma} 
\begin{definition} \label{definition-cofinal} Let $H : \mathcal{I} \to \mathcal{J}$ be a functor between categories. We say {\it $\mathcal{I}$ is cofinal in $\mathcal{J}$} or that $H$ is {\it cofinal} if \begin{enumerate} \item for all $y \in \Ob(\mathcal{J})$ there exist an $x \in \Ob(\mathcal{I})$ and a morphism $y \to H(x)$, and \item given $y \in \Ob(\mathcal{J})$, $x, x' \in \Ob(\mathcal{I})$ and morphisms $y \to H(x)$ and $y \to H(x')$ there exist a sequence of morphisms $$ x = x_0 \leftarrow x_1 \rightarrow x_2 \leftarrow x_3 \rightarrow \ldots \rightarrow x_{2n} = x' $$ in $\mathcal{I}$ and morphisms $y \to H(x_i)$ in $\mathcal{J}$ such that the diagrams $$ \xymatrix{ & y \ar[ld] \ar[d] \ar[rd] \\ H(x_{2k}) & H(x_{2k + 1}) \ar[l] \ar[r] & H(x_{2k + 2}) } $$ commute for $k = 0, \ldots, n - 1$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-cofinal} Let $H : \mathcal{I} \to \mathcal{J}$ be a functor of categories. Assume $\mathcal{I}$ is cofinal in $\mathcal{J}$. Then for every diagram $M : \mathcal{J} \to \mathcal{C}$ we have a canonical isomorphism $$ \colim_\mathcal{I} M \circ H = \colim_\mathcal{J} M $$ if either side exists. \end{lemma} 
\begin{definition} \label{definition-initial} Let $H : \mathcal{I} \to \mathcal{J}$ be a functor between categories. We say {\it $\mathcal{I}$ is initial in $\mathcal{J}$} or that $H$ is {\it initial} if \begin{enumerate} \item for all $y \in \Ob(\mathcal{J})$ there exist an $x \in \Ob(\mathcal{I})$ and a morphism $H(x) \to y$, \item for any $y \in \Ob(\mathcal{J})$, $x , x' \in \Ob(\mathcal{I})$ and morphisms $H(x) \to y$, $H(x') \to y$ in $\mathcal{J}$ there exist a sequence of morphisms $$ x = x_0 \leftarrow x_1 \rightarrow x_2 \leftarrow x_3 \rightarrow \ldots \rightarrow x_{2n} = x' $$ in $\mathcal{I}$ and morphisms $H(x_i) \to y$ in $\mathcal{J}$ such that the diagrams $$ \xymatrix{ H(x_{2k}) \ar[rd] & H(x_{2k + 1}) \ar[l] \ar[r] \ar[d] & H(x_{2k + 2}) \ar[ld] \\ & y } $$ commute for $k = 0, \ldots, n - 1$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-initial} Let $H : \mathcal{I} \to \mathcal{J}$ be a functor of categories. Assume $\mathcal{I}$ is initial in $\mathcal{J}$. Then for every diagram $M : \mathcal{J} \to \mathcal{C}$ we have a canonical isomorphism $$ \lim_\mathcal{I} M \circ H = \lim_\mathcal{J} M $$ if either side exists. \end{lemma} 
\begin{lemma} \label{lemma-colimit-constant-connected-fibers} Let $F : \mathcal{I} \to \mathcal{I}'$ be a functor. Assume \begin{enumerate} \item the fibre categories (see Definition \ref{definition-fibre-category}) of $\mathcal{I}$ over $\mathcal{I}'$ are all connected, and \item for every morphism $\alpha' : x' \to y'$ in $\mathcal{I}'$ there exists a morphism $\alpha : x \to y$ in $\mathcal{I}$ such that $F(\alpha) = \alpha'$. \end{enumerate} Then for every diagram $M : \mathcal{I}' \to \mathcal{C}$ the colimit $\colim_\mathcal{I} M \circ F$ exists if and only if $\colim_{\mathcal{I}'} M$ exists and if so these colimits agree. \end{lemma} 
\begin{lemma} \label{lemma-product-with-connected} Let $\mathcal{I}$ and $\mathcal{J}$ be a categories and denote $p : \mathcal{I} \times \mathcal{J} \to \mathcal{J}$ the projection. If $\mathcal{I}$ is connected, then for a diagram $M : \mathcal{J} \to \mathcal{C}$ the colimit $\colim_\mathcal{J} M$ exists if and only if $\colim_{\mathcal{I} \times \mathcal{J}} M \circ p$ exists and if so these colimits are equal. \end{lemma} 
\begin{lemma} \label{lemma-finite-diagram-category} Let $\mathcal{I}$ be a category with \begin{enumerate} \item $\Ob(\mathcal{I})$ is finite, and \item there exist finitely many morphisms $f_1, \ldots, f_m \in \text{Arrows}(\mathcal{I})$ such that every morphism of $\mathcal{I}$ is a composition $f_{j_1} \circ f_{j_2} \circ \ldots \circ f_{j_k}$. \end{enumerate} Then there exists a functor $F : \mathcal{J} \to \mathcal{I}$ such that \begin{enumerate} \item[(a)] $\mathcal{J}$ is a finite category, and \item[(b)] for any diagram $M : \mathcal{I} \to \mathcal{C}$ the (co)limit of $M$ over $\mathcal{I}$ exists if and only if the (co)limit of $M \circ F$ over $\mathcal{J}$ exists and in this case the (co)limits are canonically isomorphic. \end{enumerate} Moreover, $\mathcal{J}$ is connected (resp.\ nonempty) if and only if $\mathcal{I}$ is so. \end{lemma} 
\begin{lemma} \label{lemma-fibre-products-equalizers-exist} Let $\mathcal{C}$ be a category. The following are equivalent: \begin{enumerate} \item Connected finite limits exist in $\mathcal{C}$. \item Equalizers and fibre products exist in $\mathcal{C}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-almost-finite-limits-exist} Let $\mathcal{C}$ be a category. The following are equivalent: \begin{enumerate} \item Nonempty finite limits exist in $\mathcal{C}$. \item Products of pairs and equalizers exist in $\mathcal{C}$. \item Products of pairs and fibre products exist in $\mathcal{C}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-finite-limits-exist} Let $\mathcal{C}$ be a category. The following are equivalent: \begin{enumerate} \item Finite limits exist in $\mathcal{C}$. \item Finite products and equalizers exist. \item The category has a final object and fibre products exist. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-push-outs-coequalizers-exist} Let $\mathcal{C}$ be a category. The following are equivalent: \begin{enumerate} \item Connected finite colimits exist in $\mathcal{C}$. \item Coequalizers and pushouts exist in $\mathcal{C}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-almost-finite-colimits-exist} Let $\mathcal{C}$ be a category. The following are equivalent: \begin{enumerate} \item Nonempty finite colimits exist in $\mathcal{C}$. \item Coproducts of pairs and coequalizers exist in $\mathcal{C}$. \item Coproducts of pairs and pushouts exist in $\mathcal{C}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-colimits-exist} Let $\mathcal{C}$ be a category. The following are equivalent: \begin{enumerate} \item Finite colimits exist in $\mathcal{C}$. \item Finite coproducts and coequalizers exist in $\mathcal{C}$. \item The category has an initial object and pushouts exist. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-directed} We say that a diagram $M : \mathcal{I} \to \mathcal{C}$ is {\it directed}, or {\it filtered} if the following conditions hold: \begin{enumerate} \item the category $\mathcal{I}$ has at least one object, \item for every pair of objects $x, y$ of $\mathcal{I}$ there exist an object $z$ and morphisms $x \to z$, $y \to z$, and \item for every pair of objects $x, y$ of $\mathcal{I}$ and every pair of morphisms $a, b : x \to y$ of $\mathcal{I}$ there exists a morphism $c : y \to z$ of $\mathcal{I}$ such that $M(c \circ a) = M(c \circ b)$ as morphisms in $\mathcal{C}$. \end{enumerate} We say that an index category $\mathcal{I}$ is {\it directed}, or {\it filtered} if $\text{id} : \mathcal{I} \to \mathcal{I}$ is filtered (in other words you erase the $M$ in part (3) above). \end{definition} 
\begin{lemma} \label{lemma-directed-commutes} Let $\mathcal{I}$ and $\mathcal{J}$ be index categories. Assume that $\mathcal{I}$ is filtered and $\mathcal{J}$ is finite. Let $M : \mathcal{I} \times \mathcal{J} \to \textit{Sets}$, $(i, j) \mapsto M_{i, j}$ be a diagram of diagrams of sets. In this case $$ \colim_i \lim_j M_{i, j} = \lim_j \colim_i M_{i, j}. $$ In particular, colimits over $\mathcal{I}$ commute with finite products, fibre products, and equalizers of sets. \end{lemma} 
\begin{lemma} \label{lemma-cofinal-in-filtered} Let $\mathcal{I}$ be a category. Let $\mathcal{J}$ be a full subcategory. Assume that $\mathcal{I}$ is filtered. Assume also that for any object $i$ of $\mathcal{I}$, there exists a morphism $i \to j$ to some object $j$ of $\mathcal{J}$. Then $\mathcal{J}$ is filtered and cofinal in $\mathcal{I}$. \end{lemma} 
\begin{lemma} \label{lemma-preserve-products} Let $\mathcal{I}$ be an index category, i.e., a category. Assume that for every pair of objects $x, y$ of $\mathcal{I}$ there exist an object $z$ and morphisms $x \to z$ and $y \to z$. Then \begin{enumerate} \item If $M$ and $N$ are diagrams of sets over $\mathcal{I}$, then $\colim (M_i \times N_i) \to \colim M_i \times \colim N_i$ is surjective, \item in general colimits of diagrams of sets over $\mathcal{I}$ do not commute with finite nonempty products. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-colimits-abelian-as-sets} Let $\mathcal{I}$ be an index category, i.e., a category. Assume that for every pair of objects $x, y$ of $\mathcal{I}$ there exist an object $z$ and morphisms $x \to z$ and $y \to z$. Let $M : \mathcal{I} \to \textit{Ab}$ be a diagram of abelian groups over $\mathcal{I}$. Then the colimit of $M$ in the category of sets surjects onto the colimit of $M$ in the category of abelian groups. \end{lemma} 
\begin{lemma} \label{lemma-split-into-connected} Let $\mathcal{I}$ be an index category, i.e., a category. Assume that for every solid diagram $$ \xymatrix{ x \ar[d] \ar[r] & y \ar@{..>}[d] \\ z \ar@{..>}[r] & w } $$ in $\mathcal{I}$ there exist an object $w$ and dotted arrows making the diagram commute. Then $\mathcal{I}$ is either empty or a nonempty disjoint union of connected categories having the same property. \end{lemma} 
\begin{lemma} \label{lemma-preserve-injective-maps} Let $\mathcal{I}$ be an index category, i.e., a category. Assume that for every solid diagram $$ \xymatrix{ x \ar[d] \ar[r] & y \ar@{..>}[d] \\ z \ar@{..>}[r] & w } $$ in $\mathcal{I}$ there exist an object $w$ and dotted arrows making the diagram commute. Then \begin{enumerate} \item an injective morphism $M \to N$ of diagrams of sets over $\mathcal{I}$ gives rise to an injective map $\colim M_i \to \colim N_i$ of sets, \item in general the same is not the case for diagrams of abelian groups and their colimits. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-split-into-directed} Let $\mathcal{I}$ be an index category, i.e., a category. Assume \begin{enumerate} \item for every pair of morphisms $a : w \to x$ and $b : w \to y$ in $\mathcal{I}$ there exist an object $z$ and morphisms $c : x \to z$ and $d : y \to z$ such that $c \circ a = d \circ b$, and \item for every pair of morphisms $a, b : x \to y$ there exists a morphism $c : y \to z$ such that $c \circ a = c \circ b$. \end{enumerate} Then $\mathcal{I}$ is a (possibly empty) union of disjoint filtered index categories $\mathcal{I}_j$. \end{lemma} 
\begin{lemma} \label{lemma-almost-directed-commutes-equalizers} Let $\mathcal{I}$ be an index category satisfying the hypotheses of Lemma \ref{lemma-split-into-directed} above. Then colimits over $\mathcal{I}$ commute with fibre products and equalizers in sets (and more generally with finite connected limits). \end{lemma} 
\begin{definition} \label{definition-codirected} We say that a diagram $M : \mathcal{I} \to \mathcal{C}$ is {\it codirected} or {\it cofiltered} if the following conditions hold: \begin{enumerate} \item the category $\mathcal{I}$ has at least one object, \item for every pair of objects $x, y$ of $\mathcal{I}$ there exist an object $z$ and morphisms $z \to x$, $z \to y$, and \item for every pair of objects $x, y$ of $\mathcal{I}$ and every pair of morphisms $a, b : x \to y$ of $\mathcal{I}$ there exists a morphism $c : w \to x$ of $\mathcal{I}$ such that $M(a \circ c) = M(b \circ c)$ as morphisms in $\mathcal{C}$. \end{enumerate} We say that an index category $\mathcal{I}$ is {\it codirected}, or {\it cofiltered} if $\text{id} : \mathcal{I} \to \mathcal{I}$ is cofiltered (in other words you erase the $M$ in part (3) above). \end{definition} 
\begin{definition} \label{definition-directed-set} Let $I$ be a set and let $\leq$ be a binary relation on $I$. \begin{enumerate} \item We say $\leq$ is a {\it preorder} if it is transitive (if $i \leq j$ and $j \leq k$ then $i \leq k$) and reflexive ($i \leq i$ for all $i \in I$). \item A {\it preordered set} is a set endowed with a preorder. \item A {\it directed set} is a preordered set $(I, \leq)$ such that $I$ is not empty and such that $\forall i, j \in I$, there exists $k \in I$ with $i \leq k, j \leq k$. \item We say $\leq$ is a {\it partial order} if it is a preorder which is antisymmetric (if $i \leq j$ and $j \leq i$, then $i = j$). \item A {\it partially ordered set} is a set endowed with a partial order. \item A {\it directed partially ordered set} is a directed set whose ordering is a partial order. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-system-over-poset} Let $(I, \leq)$ be a preordered set. Let $\mathcal{C}$ be a category. \begin{enumerate} \item A {\it system over $I$ in $\mathcal{C}$}, sometimes called a {\it inductive system over $I$ in $\mathcal{C}$} is given by objects $M_i$ of $\mathcal{C}$ and for every $i \leq i'$ a morphism $f_{ii'} : M_i \to M_{i'}$ such that $f_{ii} = \text{id}$ and such that $f_{ii''} = f_{i'i''} \circ f_{i i'}$ whenever $i \leq i' \leq i''$. \item An {\it inverse system over $I$ in $\mathcal{C}$}, sometimes called a {\it projective system over $I$ in $\mathcal{C}$} is given by objects $M_i$ of $\mathcal{C}$ and for every $i' \leq i$ a morphism $f_{ii'} : M_i \to M_{i'}$ such that $f_{ii} = \text{id}$ and such that $f_{ii''} = f_{i'i''} \circ f_{i i'}$ whenever $i'' \leq i' \leq i$. (Note reversal of inequalities.) \end{enumerate} We will say $(M_i, f_{ii'})$ is a (inverse) system over $I$ to denote this. The maps $f_{ii'}$ are sometimes called the {\it transition maps}. \end{definition} 
\begin{definition} \label{definition-directed-system} Let $I$ be a preordered set. We say a system (resp.\ inverse system) $(M_i, f_{ii'})$ is a {\it directed system} (resp.\ {\it directed inverse system}) if $I$ is a directed set (Definition \ref{definition-directed-set}): $I$ is nonempty and for all $i_1, i_2 \in I$ there exists $i\in I$ such that $i_1 \leq i$ and $i_2 \leq i$. \end{definition} 
\begin{lemma} \label{lemma-directed-category-system} Let $\mathcal{I}$ be a filtered index category. There exist a directed set $I$ and a system $(x_i, \varphi_{ii'})$ over $I$ in $\mathcal{I}$ with the following properties: \begin{enumerate} \item For every category $\mathcal{C}$ and every diagram $M : \mathcal{I} \to \mathcal{C}$ with values in $\mathcal{C}$, denote $(M(x_i), M(\varphi_{ii'}))$ the corresponding system over $I$. If $\colim_{i \in I} M(x_i)$ exists then so does $\colim_\mathcal{I} M$ and the transformation $$ \theta : \colim_{i \in I} M(x_i) \longrightarrow \colim_\mathcal{I} M $$ of Lemma \ref{lemma-functorial-colimit} is an isomorphism. \item For every category $\mathcal{C}$ and every diagram $M : \mathcal{I}^{opp} \to \mathcal{C}$ in $\mathcal{C}$, denote $(M(x_i), M(\varphi_{ii'}))$ the corresponding inverse system over $I$. If $\lim_{i \in I} M(x_i)$ exists then so does $\lim_{\mathcal{I}^{opp}} M$ and the transformation $$ \theta : \lim_{\mathcal{I}^{opp}} M \longrightarrow \lim_{i \in I} M(x_i) $$ of Lemma \ref{lemma-functorial-limit} is an isomorphism. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-nonempty-limit} If $S : \mathcal{I} \to \textit{Sets}$ is a cofiltered diagram of sets and all the $S_i$ are finite nonempty, then $\lim_i S_i$ is nonempty. In other words, the limit of a directed inverse system of finite nonempty sets is nonempty. \end{lemma} 
\begin{definition} \label{definition-essentially-constant-diagram} Let $M : \mathcal{I} \to \mathcal{C}$ be a diagram in a category $\mathcal{C}$. \begin{enumerate} \item Assume the index category $\mathcal{I}$ is filtered and let $(X, \{M_i \to X\}_i)$ be a cocone for $M$, see Remark \ref{remark-cones-and-cocones}. We say $M$ is {\it essentially constant} with {\it value} $X$ if there exist an $i \in \mathcal{I}$ and a morphism $X \to M_i$ such that \begin{enumerate} \item $X \to M_i \to X$ is $\text{id}_X$, and \item for all $j$ there exist $k$ and morphisms $i \to k$ and $j \to k$ such that the morphism $M_j \to M_k$ equals the composition $M_j \to X \to M_i \to M_k$. \end{enumerate} \item Assume the index category $\mathcal{I}$ is cofiltered and let $(X, \{X \to M_i\}_i)$ be a cone for $M$, see Remark \ref{remark-cones-and-cocones}. We say $M$ is {\it essentially constant} with {\it value} $X$ if there exist an $i \in \mathcal{I}$ and a morphism $M_i \to X$ such that \begin{enumerate} \item $X \to M_i \to X$ is $\text{id}_X$, and \item for all $j$ there exist $k$ and morphisms $k \to i$ and $k \to j$ such that the morphism $M_k \to M_j$ equals the composition $M_k \to M_i \to X \to M_j$. \end{enumerate} \end{enumerate} Please keep in mind Lemma \ref{lemma-essentially-constant-is-limit-colimit} when using this definition. \end{definition} 
\begin{definition} \label{definition-essentially-constant-system} Let $\mathcal{C}$ be a category. A directed system $(M_i, f_{ii'})$ is an {\it essentially constant system} if $M$ viewed as a functor $I \to \mathcal{C}$ defines an essentially constant diagram. A directed inverse system $(M_i, f_{ii'})$ is an {\it essentially constant inverse system} if $M$ viewed as a functor $I^{opp} \to \mathcal{C}$ defines an essentially constant inverse diagram. \end{definition} 
\begin{lemma} \label{lemma-essentially-constant-is-limit-colimit} Let $M : \mathcal{I} \to \mathcal{C}$ be a diagram. If $\mathcal{I}$ is filtered and $M$ is essentially constant as an ind-object, then $X = \colim M_i$ exists and $M$ is essentially constant with value $X$. If $\mathcal{I}$ is cofiltered and $M$ is essentially constant as a pro-object, then $X = \lim M_i$ exists and $M$ is essentially constant with value $X$. \end{lemma} 
\begin{lemma} \label{lemma-image-essentially-constant} Let $\mathcal{C}$ be a category. Let $M : \mathcal{I} \to \mathcal{C}$ be a diagram with filtered (resp.\ cofiltered) index category $\mathcal{I}$. Let $F : \mathcal{C} \to \mathcal{D}$ be a functor. If $M$ is essentially constant as an ind-object (resp.\ pro-object), then so is $F \circ M : \mathcal{I} \to \mathcal{D}$. \end{lemma} 
\begin{lemma} \label{lemma-characterize-essentially-constant-ind} Let $\mathcal{C}$ be a category. Let $M : \mathcal{I} \to \mathcal{C}$ be a diagram with filtered index category $\mathcal{I}$. The following are equivalent \begin{enumerate} \item $M$ is an essentially constant ind-object, \item there exists a cocone $(X, \{M_i \to X\}_i)$ such that for any $W$ in $\mathcal{C}$ the map $\colim_i \Mor_\mathcal{C}(W, M_i) \to \Mor_\mathcal{C}(W, X)$ is bijective, \item $X = \colim_i M_i$ exists and for any $W$ in $\mathcal{C}$ the map $\colim_i \Mor_\mathcal{C}(W, M_i) \to \Mor_\mathcal{C}(W, X)$ is bijective, and \item there exists an $i$ in $\mathcal{I}$ and a morphism $X \to M_i$ such that for any $W$ in $\mathcal{C}$ the map $\Mor_\mathcal{C}(W, X) \to \colim_{j \geq i} \Mor_\mathcal{C}(W, M_j)$ is bijective. \end{enumerate} In cases (2), (3), and (4) the value of the essentially constant system is $X$. \end{lemma} 
\begin{lemma} \label{lemma-characterize-essentially-constant-pro} Let $\mathcal{C}$ be a category. Let $M : \mathcal{I} \to \mathcal{C}$ be a diagram with cofiltered index category $\mathcal{I}$. The following are equivalent \begin{enumerate} \item $M$ is an essentially constant pro-object, \item there exists a cone $(X, \{X \to M_i\})$ such that for any $W$ in $\mathcal{C}$ the map $\colim_{i \in \mathcal{I}^{opp}} \Mor_\mathcal{C}(M_i, W) \to \Mor_\mathcal{C}(X, W)$ is bijective, \item $X = \lim_i M_i$ exists and for any $W$ in $\mathcal{C}$ the map $\colim_{i \in \mathcal{I}^{opp}} \Mor_\mathcal{C}(M_i, W) \to \Mor_\mathcal{C}(X, W)$ is bijective, and \item there exists an $i$ in $\mathcal{I}$ and a morphism $M_i \to X$ such that for any $W$ in $\mathcal{C}$ the map $\Mor_\mathcal{C}(X, W) \to \colim_{i \in \mathcal{I}^{opp}} \Mor_\mathcal{C}(M_i, W)$ is bijective. \end{enumerate} In cases (2), (3), and (4) the value of the essentially constant system is $X$. \end{lemma} 
\begin{lemma} \label{lemma-cofinal-essentially-constant} Let $\mathcal{C}$ be a category. Let $H : \mathcal{I} \to \mathcal{J}$ be a functor of filtered index categories. If $H$ is cofinal, then any diagram $M : \mathcal{J} \to \mathcal{C}$ is essentially constant if and only if $M \circ H$ is essentially constant. \end{lemma} 
\begin{lemma} \label{lemma-essentially-constant-over-product} Let $\mathcal{I}$ and $\mathcal{J}$ be filtered categories and denote $p : \mathcal{I} \times \mathcal{J} \to \mathcal{J}$ the projection. Then $\mathcal{I} \times \mathcal{J}$ is filtered and a diagram $M : \mathcal{J} \to \mathcal{C}$ is essentially constant if and only if $M \circ p : \mathcal{I} \times \mathcal{J} \to \mathcal{C}$ is essentially constant. \end{lemma} 
\begin{lemma} \label{lemma-initial-essentially-constant} Let $\mathcal{C}$ be a category. Let $H : \mathcal{I} \to \mathcal{J}$ be a functor of cofiltered index categories. If $H$ is initial, then any diagram $M : \mathcal{J} \to \mathcal{C}$ is essentially constant if and only if $M \circ H$ is essentially constant. \end{lemma} 
\begin{definition} \label{definition-exact} Let $F : \mathcal{A} \to \mathcal{B}$ be a functor. \begin{enumerate} \item Suppose all finite limits exist in $\mathcal{A}$. We say $F$ is {\it left exact} if it commutes with all finite limits. \item Suppose all finite colimits exist in $\mathcal{A}$. We say $F$ is {\it right exact} if it commutes with all finite colimits. \item We say $F$ is {\it exact} if it is both left and right exact. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-characterize-left-exact} Let $F : \mathcal{A} \to \mathcal{B}$ be a functor. Suppose all finite limits exist in $\mathcal{A}$, see Lemma \ref{lemma-finite-limits-exist}. The following are equivalent: \begin{enumerate} \item $F$ is left exact, \item $F$ commutes with finite products and equalizers, and \item $F$ transforms a final object of $\mathcal{A}$ into a final object of $\mathcal{B}$, and commutes with fibre products. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-characterize-right-exact} Let $F : \mathcal{A} \to \mathcal{B}$ be a functor. Suppose all finite colimits exist in $\mathcal{A}$, see Lemma \ref{lemma-colimits-exist}. The following are equivalent: \begin{enumerate} \item $F$ is right exact, \item $F$ commutes with finite coproducts and coequalizers, and \item $F$ transforms an initial object of $\mathcal{A}$ into an initial object of $\mathcal{B}$, and commutes with pushouts. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-adjoint} Let $\mathcal{C}$, $\mathcal{D}$ be categories. Let $u : \mathcal{C} \to \mathcal{D}$ and $v : \mathcal{D} \to \mathcal{C}$ be functors. We say that $u$ is a {\it left adjoint} of $v$, or that $v$ is a {\it right adjoint} to $u$ if there are bijections $$ \Mor_\mathcal{D}(u(X), Y) \longrightarrow \Mor_\mathcal{C}(X, v(Y)) $$ functorial in $X \in \Ob(\mathcal{C})$, and $Y \in \Ob(\mathcal{D})$. \end{definition} 
\begin{lemma} \label{lemma-adjoint-exists} Let $u : \mathcal{C} \to \mathcal{D}$ be a functor between categories. If for each $y \in \Ob(\mathcal{D})$ the functor $x \mapsto \Mor_\mathcal{D}(u(x), y)$ is representable, then $u$ has a right adjoint. \end{lemma} 
\begin{lemma} \label{lemma-left-adjoint-composed-fully-faithful} \begin{reference} Bhargav Bhatt, private communication. \end{reference} Let $u$ be a left adjoint to $v$ as in Definition \ref{definition-adjoint}. \begin{enumerate} \item If $v \circ u$ is fully faithful, then $u$ is fully faithful. \item If $u \circ v$ is fully faithful, then $v$ is fully faithful. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-adjoint-fully-faithful} Let $u$ be a left adjoint to $v$ as in Definition \ref{definition-adjoint}. Then \begin{enumerate} \item $u$ is fully faithful $\Leftrightarrow$ $\text{id} \cong v \circ u$ $\Leftrightarrow$ $\eta : \text{id} \to v \circ u$ is an isomorphism, \item $v$ is fully faithful $\Leftrightarrow$ $u \circ v \cong \text{id}$ $\Leftrightarrow$ $\epsilon : u \circ v \to \text{id}$ is an isomorphism. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-adjoint-exact} Let $u$ be a left adjoint to $v$ as in Definition \ref{definition-adjoint}. \begin{enumerate} \item Suppose that $M : \mathcal{I} \to \mathcal{C}$ is a diagram, and suppose that $\colim_\mathcal{I} M$ exists in $\mathcal{C}$. Then $u(\colim_\mathcal{I} M) = \colim_\mathcal{I} u \circ M$. In other words, $u$ commutes with (representable) colimits. \item Suppose that $M : \mathcal{I} \to \mathcal{D}$ is a diagram, and suppose that $\lim_\mathcal{I} M$ exists in $\mathcal{D}$. Then $v(\lim_\mathcal{I} M) = \lim_\mathcal{I} v \circ M$. In other words $v$ commutes with representable limits. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-exact-adjoint} Let $u$ be a left adjoint of $v$ as in Definition \ref{definition-adjoint}. \begin{enumerate} \item If $\mathcal{C}$ has finite colimits, then $u$ is right exact. \item If $\mathcal{D}$ has finite limits, then $v$ is left exact. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-unit-counit-relations} Let $u : \mathcal{C} \to \mathcal{D}$ be a left adjoint to the functor $v : \mathcal{D} \to \mathcal{C}$. Let $\eta_X : X \to v(u(X))$ be the unit and $\epsilon_Y : u(v(Y)) \to Y$ be the counit. Then $$ u(X) \xrightarrow{u(\eta_X)} u(v(u(X)) \xrightarrow{\epsilon_{u(X)}} u(X) \quad\text{and}\quad v(Y) \xrightarrow{\eta_{v(Y)}} v(u(v(Y))) \xrightarrow{v(\epsilon_Y)} v(Y) $$ are the identity morphisms. \end{lemma} 
\begin{lemma} \label{lemma-transformation-between-functors-and-adjoints} Let $u_1, u_2 : \mathcal{C} \to \mathcal{D}$ be functors with right adjoints $v_1, v_2 : \mathcal{D} \to \mathcal{C}$. Let $\beta : u_2 \to u_1$ be a transformation of functors. Let $\beta^\vee : v_1 \to v_2$ be the corresponding transformation of adjoint functors. Then $$ \xymatrix{ u_2 \circ v_1 \ar[r]_\beta \ar[d]_{\beta^\vee} & u_1 \circ v_1 \ar[d] \\ u_2 \circ v_2 \ar[r] & \text{id} } $$ is commutative where the unlabeled arrows are the counit transformations. \end{lemma} 
\begin{lemma} \label{lemma-compose-counits} Let $\mathcal{A}$, $\mathcal{B}$, and $\mathcal{C}$ be categories. Let $v : \mathcal{A} \to \mathcal{B}$ and $v' : \mathcal{B} \to \mathcal{C}$ be functors with left adjoints $u$ and $u'$ respectively. Then \begin{enumerate} \item The functor $v'' = v' \circ v$ has a left adjoint equal to $u'' = u \circ u'$. \item Given $X$ in $\mathcal{A}$ we have \begin{equation} \label{equation-compose-counits} \epsilon_X^v \circ u(\epsilon^{v'}_{v(X)}) = \epsilon^{v''}_X : u''(v''(X)) \to X \end{equation} Where $\epsilon$ is the counit of the adjunctions. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-a-version-of-brown} Let $\mathcal{C}$ be a big\footnote{See Remark \ref{remark-big-categories}.} category which has limits. Let $F : \mathcal{C} \to \textit{Sets}$ be a functor. Assume that \begin{enumerate} \item $F$ commutes with limits, \item there exist a family $\{x_i\}_{i \in I}$ of objects of $\mathcal{C}$ and for each $i \in I$ an element $f_i \in F(x_i)$ such that for $y \in \Ob(\mathcal{C})$ and $g \in F(y)$ there exist an $i$ and a morphism $\varphi : x_i \to y$ with $F(\varphi)(f_i) = g$. \end{enumerate} Then $F$ is representable, i.e., there exists an object $x$ of $\mathcal{C}$ such that $$ F(y) = \Mor_\mathcal{C}(x, y) $$ functorially in $y$. \end{lemma} 
\begin{theorem}[Adjoint functor theorem] \label{theorem-adjoint-functor} Let $G : \mathcal{C} \to \mathcal{D}$ be a functor of big categories. Assume $\mathcal{C}$ has limits, $G$ commutes with them, and for every object $y$ of $\mathcal{D}$ there exists a set of pairs $(x_i, f_i)_{i \in I}$ with $x_i \in \Ob(\mathcal{C})$, $f_i \in \Mor_\mathcal{D}(y, G(x_i))$ such that for any pair $(x, f)$ with $x \in \Ob(\mathcal{C})$, $f \in \Mor_\mathcal{D}(y, G(x))$ there are an $i$ and a morphism $h : x_i \to x$ such that $f = G(h) \circ f_i$. Then $G$ has a left adjoint $F$. \end{theorem} 
\begin{definition} \label{definition-compact-object} Let $\mathcal{C}$ be a big\footnote{See Remark \ref{remark-big-categories}.} category. An object $X$ of $\mathcal{C}$ is called a {\it categorically compact} if we have $$ \Mor_\mathcal{C}(X, \colim_i M_i) = \colim_i \Mor_\mathcal{C}(X, M_i) $$ for every filtered diagram $M : \mathcal{I} \to \mathcal{C}$ such that $\colim_i M_i$ exists. \end{definition} 
\begin{lemma} \label{lemma-extend-functor-by-colim} Let $\mathcal{C}$ and $\mathcal{D}$ be big categories having filtered colimits. Let $\mathcal{C}' \subset \mathcal{C}$ be a small full subcategory consisting of categorically compact objects of $\mathcal{C}$ such that every object of $\mathcal{C}$ is a filtered colimit of objects of $\mathcal{C}'$. Then every functor $F' : \mathcal{C}' \to \mathcal{D}$ has a unique extension $F : \mathcal{C} \to \mathcal{D}$ commuting with filtered colimits. \end{lemma} 
\begin{definition} \label{definition-multiplicative-system} Let $\mathcal{C}$ be a category. A set of arrows $S$ of $\mathcal{C}$ is called a {\it left multiplicative system} if it has the following properties: \begin{enumerate} \item[LMS1] The identity of every object of $\mathcal{C}$ is in $S$ and the composition of two composable elements of $S$ is in $S$. \item[LMS2] Every solid diagram $$ \xymatrix{ X \ar[d]_t \ar[r]_g & Y \ar@{..>}[d]^s \\ Z \ar@{..>}[r]^f & W } $$ with $t \in S$ can be completed to a commutative dotted square with $s \in S$. \item[LMS3] For every pair of morphisms $f, g : X \to Y$ and $t \in S$ with target $X$ such that $f \circ t = g \circ t$ there exists an $s \in S$ with source $Y$ such that $s \circ f = s \circ g$. \end{enumerate} A set of arrows $S$ of $\mathcal{C}$ is called a {\it right multiplicative system} if it has the following properties: \begin{enumerate} \item[RMS1] The identity of every object of $\mathcal{C}$ is in $S$ and the composition of two composable elements of $S$ is in $S$. \item[RMS2] Every solid diagram $$ \xymatrix{ X \ar@{..>}[d]_t \ar@{..>}[r]_g & Y \ar[d]^s \\ Z \ar[r]^f & W } $$ with $s \in S$ can be completed to a commutative dotted square with $t \in S$. \item[RMS3] For every pair of morphisms $f, g : X \to Y$ and $s \in S$ with source $Y$ such that $s \circ f = s \circ g$ there exists a $t \in S$ with target $X$ such that $f \circ t = g \circ t$. \end{enumerate} A set of arrows $S$ of $\mathcal{C}$ is called a {\it multiplicative system} if it is both a left multiplicative system and a right multiplicative system. In other words, this means that MS1, MS2, MS3 hold, where MS1 $=$ LMS1 $+$ RMS1, MS2 $=$ LMS2 $+$ RMS2, and MS3 $=$ LMS3 $+$ RMS3. (That said, of course LMS1 $=$ RMS1 $=$ MS1.) \end{definition} 
\begin{lemma} \label{lemma-left-localization} Let $\mathcal{C}$ be a category and let $S$ be a left multiplicative system. \begin{enumerate} \item The relation on pairs defined above is an equivalence relation. \item The composition rule given above is well defined on equivalence classes. \item Composition is associative (and the identity morphisms satisfy the identity axioms), and hence $S^{-1}\mathcal{C}$ is a category. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-left-localization-as-fraction} Let $\mathcal{C}$ be a category and let $S$ be a left multiplicative system of morphisms of $\mathcal{C}$. Given any morphism $f : X \to Y'$ in $\mathcal{C}$ and any morphism $s : Y \to Y'$ in $S$, we denote by {\it $s^{-1} f$} the equivalence class of the pair $(f : X \to Y', s : Y \to Y')$. This is a morphism from $X$ to $Y$ in $S^{-1} \mathcal{C}$. \end{definition} 
\begin{lemma} \label{lemma-morphisms-left-localization} Let $\mathcal{C}$ be a category and let $S$ be a left multiplicative system of morphisms of $\mathcal{C}$. Given any finite collection $g_i : X_i \to Y$ of morphisms of $S^{-1}\mathcal{C}$ (indexed by $i$), we can find an element $s : Y \to Y'$ of $S$ and a family of morphisms $f_i : X_i \to Y'$ of $\mathcal{C}$ such that each $g_i$ is the equivalence class of the pair $(f_i : X_i \to Y', s : Y \to Y')$. \end{lemma} 
\begin{lemma} \label{lemma-equality-morphisms-left-localization} Let $\mathcal{C}$ be a category and let $S$ be a left multiplicative system of morphisms of $\mathcal{C}$. Let $A, B : X \to Y$ be morphisms of $S^{-1}\mathcal{C}$ which are the equivalence classes of $(f : X \to Y', s : Y \to Y')$ and $(g : X \to Y', s : Y \to Y')$. The following are equivalent \begin{enumerate} \item $A = B$ \item there exists a morphism $t : Y' \to Y''$ in $S$ with $t \circ f = t \circ g$, and \item there exists a morphism $a : Y' \to Y''$ such that $a \circ f = a \circ g$ and $a \circ s \in S$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-properties-left-localization} Let $\mathcal{C}$ be a category and let $S$ be a left multiplicative system of morphisms of $\mathcal{C}$. \begin{enumerate} \item The rules $X \mapsto X$ and $(f : X \to Y) \mapsto (f : X \to Y, \text{id}_Y : Y \to Y)$ define a functor $Q : \mathcal{C} \to S^{-1}\mathcal{C}$. \item For any $s \in S$ the morphism $Q(s)$ is an isomorphism in $S^{-1}\mathcal{C}$. \item If $G : \mathcal{C} \to \mathcal{D}$ is any functor such that $G(s)$ is invertible for every $s \in S$, then there exists a unique functor $H : S^{-1}\mathcal{C} \to \mathcal{D}$ such that $H \circ Q = G$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-left-localization-limits} Let $\mathcal{C}$ be a category and let $S$ be a left multiplicative system of morphisms of $\mathcal{C}$. The localization functor $Q : \mathcal{C} \to S^{-1}\mathcal{C}$ commutes with finite colimits. \end{lemma} 
\begin{lemma} \label{lemma-left-localization-diagram} Let $\mathcal{C}$ be a category. Let $S$ be a left multiplicative system. If $f : X \to Y$, $f' : X' \to Y'$ are two morphisms of $\mathcal{C}$ and if $$ \xymatrix{ Q(X) \ar[d]_{Q(f)} \ar[r]_a & Q(X') \ar[d]^{Q(f')} \\ Q(Y) \ar[r]^b & Q(Y') } $$ is a commutative diagram in $S^{-1}\mathcal{C}$, then there exist a morphism $f'' : X'' \to Y''$ in $\mathcal{C}$ and a commutative diagram $$ \xymatrix{ X \ar[d]_f \ar[r]_g & X'' \ar[d]^{f''} & X' \ar[d]^{f'} \ar[l]^s \\ Y \ar[r]^h & Y'' & Y' \ar[l]_t } $$ in $\mathcal{C}$ with $s, t \in S$ and $a = s^{-1}g$, $b = t^{-1}h$. \end{lemma} 
\begin{lemma} \label{lemma-right-localization} Let $\mathcal{C}$ be a category and let $S$ be a right multiplicative system. \begin{enumerate} \item The relation on pairs defined above is an equivalence relation. \item The composition rule given above is well defined on equivalence classes. \item Composition is associative (and the identity morphisms satisfy the identity axioms), and hence $S^{-1}\mathcal{C}$ is a category. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-right-localization-as-fraction} Let $\mathcal{C}$ be a category and let $S$ be a right multiplicative system of morphisms of $\mathcal{C}$. Given any morphism $f : X' \to Y$ in $\mathcal{C}$ and any morphism $s : X' \to X$ in $S$, we denote by {\it $f s^{-1}$} the equivalence class of the pair $(f : X' \to Y, s : X' \to X)$. This is a morphism from $X$ to $Y$ in $S^{-1} \mathcal{C}$. \end{definition} 
\begin{lemma} \label{lemma-morphisms-right-localization} Let $\mathcal{C}$ be a category and let $S$ be a right multiplicative system of morphisms of $\mathcal{C}$. Given any finite collection $g_i : X \to Y_i$ of morphisms of $S^{-1}\mathcal{C}$ (indexed by $i$), we can find an element $s : X' \to X$ of $S$ and a family of morphisms $f_i : X' \to Y_i$ of $\mathcal{C}$ such that $g_i$ is the equivalence class of the pair $(f_i : X' \to Y_i, s : X' \to X)$. \end{lemma} 
\begin{lemma} \label{lemma-equality-morphisms-right-localization} Let $\mathcal{C}$ be a category and let $S$ be a right multiplicative system of morphisms of $\mathcal{C}$. Let $A, B : X \to Y$ be morphisms of $S^{-1}\mathcal{C}$ which are the equivalence classes of $(f : X' \to Y, s : X' \to X)$ and $(g : X' \to Y, s : X' \to X)$. The following are equivalent \begin{enumerate} \item $A = B$, \item there exists a morphism $t : X'' \to X'$ in $S$ with $f \circ t = g \circ t$, and \item there exists a morphism $a : X'' \to X'$ with $f \circ a = g \circ a$ and $s \circ a \in S$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-properties-right-localization} Let $\mathcal{C}$ be a category and let $S$ be a right multiplicative system of morphisms of $\mathcal{C}$. \begin{enumerate} \item The rules $X \mapsto X$ and $(f : X \to Y) \mapsto (f : X \to Y, \text{id}_X : X \to X)$ define a functor $Q : \mathcal{C} \to S^{-1}\mathcal{C}$. \item For any $s \in S$ the morphism $Q(s)$ is an isomorphism in $S^{-1}\mathcal{C}$. \item If $G : \mathcal{C} \to \mathcal{D}$ is any functor such that $G(s)$ is invertible for every $s \in S$, then there exists a unique functor $H : S^{-1}\mathcal{C} \to \mathcal{D}$ such that $H \circ Q = G$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-right-localization-limits} Let $\mathcal{C}$ be a category and let $S$ be a right multiplicative system of morphisms of $\mathcal{C}$. The localization functor $Q : \mathcal{C} \to S^{-1}\mathcal{C}$ commutes with finite limits. \end{lemma} 
\begin{lemma} \label{lemma-right-localization-diagram} Let $\mathcal{C}$ be a category. Let $S$ be a right multiplicative system. If $f : X \to Y$, $f' : X' \to Y'$ are two morphisms of $\mathcal{C}$ and if $$ \xymatrix{ Q(X) \ar[d]_{Q(f)} \ar[r]_a & Q(X') \ar[d]^{Q(f')} \\ Q(Y) \ar[r]^b & Q(Y') } $$ is a commutative diagram in $S^{-1}\mathcal{C}$, then there exist a morphism $f'' : X'' \to Y''$ in $\mathcal{C}$ and a commutative diagram $$ \xymatrix{ X \ar[d]_f & X'' \ar[l]^s \ar[d]^{f''} \ar[r]_g & X' \ar[d]^{f'} \\ Y & Y'' \ar[l]_t \ar[r]^h & Y' } $$ in $\mathcal{C}$ with $s, t \in S$ and $a = gs^{-1}$, $b = ht^{-1}$. \end{lemma} 
\begin{lemma} \label{lemma-multiplicative-system} Let $\mathcal{C}$ be a category and let $S$ be a multiplicative system. The category of left fractions and the category of right fractions $S^{-1}\mathcal{C}$ are canonically isomorphic. \end{lemma} 
\begin{definition} \label{definition-saturated-multiplicative-system} Let $\mathcal{C}$ be a category and let $S$ be a multiplicative system. We say $S$ is {\it saturated} if, in addition to MS1, MS2, MS3, we also have \begin{enumerate} \item[MS4] Given three composable morphisms $f, g, h$, if $fg, gh \in S$, then $g \in S$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-what-gets-inverted} Let $\mathcal{C}$ be a category and let $S$ be a multiplicative system. Denote $Q : \mathcal{C} \to S^{-1}\mathcal{C}$ the localization functor. The set $$ \hat S = \{f \in \text{Arrows}(\mathcal{C}) \mid Q(f) \text{ is an isomorphism}\} $$ is equal to $$ S' = \{f \in \text{Arrows}(\mathcal{C}) \mid \text{there exist }g, h\text{ such that }gf, fh \in S\} $$ and is the smallest saturated multiplicative system containing $S$. In particular, if $S$ is saturated, then $\hat S = S$. \end{lemma} 
\begin{definition} \label{definition-horizontal-composition} Given a diagram as in the left hand side of: $$ \xymatrix{ \mathcal{A} \rtwocell^F_{F'}{t} & \mathcal{B} \rtwocell^G_{G'}{s} & \mathcal{C} } \text{ gives } \xymatrix{ \mathcal{A} \rrtwocell^{G \circ F} _{G' \circ F'}{\ \ s \star t} & & \mathcal{C} } $$ we define the {\it horizontal} composition $s \star t$ to be the transformation of functors ${}_{G'}t \circ s_F = s_{F'}\circ {}_Gt$. \end{definition} 
\begin{lemma} \label{lemma-properties-2-cat-cats} The horizontal and vertical compositions have the following properties \begin{enumerate} \item $\circ$ and $\star$ are associative, \item the identity transformations $\text{id}_F$ are units for $\circ$, \item the identity transformations of the identity functors $\text{id}_{\text{id}_\mathcal{A}}$ are units for $\star$ and $\circ$, and \item given a diagram $$ \xymatrix{ \mathcal{A} \rruppertwocell^F{t} \ar[rr]_(.3){F'} \rrlowertwocell_{F''}{t'} & & \mathcal{B} \rruppertwocell^G{s} \ar[rr]_(.3){G'} \rrlowertwocell_{G''}{s'} & & \mathcal{C} } $$ we have $ (s' \circ s) \star (t' \circ t) = (s' \star t') \circ (s \star t)$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-2-category} A (strict) {\it $2$-category} $\mathcal{C}$ consists of the following data \begin{enumerate} \item A set of objects $\Ob(\mathcal{C})$. \item For each pair $x, y \in \Ob(\mathcal{C})$ a category $\Mor_\mathcal{C}(x, y)$. The objects of $\Mor_\mathcal{C}(x, y)$ will be called {\it $1$-morphisms} and denoted $F : x \to y$. The morphisms between these $1$-morphisms will be called {\it $2$-morphisms} and denoted $t : F' \to F$. The composition of $2$-morphisms in $\Mor_\mathcal{C}(x, y)$ will be called {\it vertical} composition and will be denoted $t \circ t'$ for $t : F' \to F$ and $t' : F'' \to F'$. \item For each triple $x, y, z\in \Ob(\mathcal{C})$ a functor $$ (\circ, \star) : \Mor_\mathcal{C}(y, z) \times \Mor_\mathcal{C}(x, y) \longrightarrow \Mor_\mathcal{C}(x, z). $$ The image of the pair of $1$-morphisms $(F, G)$ on the left hand side will be called the {\it composition} of $F$ and $G$, and denoted $F\circ G$. The image of the pair of $2$-morphisms $(t, s)$ will be called the {\it horizontal} composition and denoted $t \star s$. \end{enumerate} These data are to satisfy the following rules: \begin{enumerate} \item The set of objects together with the set of $1$-morphisms endowed with composition of $1$-morphisms forms a category. \item Horizontal composition of $2$-morphisms is associative. \item The identity $2$-morphism $\text{id}_{\text{id}_x}$ of the identity $1$-morphism $\text{id}_x$ is a unit for horizontal composition. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-sub-2-category} Let $\mathcal{C}$ be a $2$-category. A {\it sub $2$-category} $\mathcal{C}'$ of $\mathcal{C}$, is given by a subset $\Ob(\mathcal{C}')$ of $\Ob(\mathcal{C})$ and sub categories $\Mor_{\mathcal{C}'}(x, y)$ of the categories $\Mor_\mathcal{C}(x, y)$ for all $x, y \in \Ob(\mathcal{C}')$ such that these, together with the operations $\circ$ (composition $1$-morphisms), $\circ$ (vertical composition $2$-morphisms), and $\star$ (horizontal composition) form a $2$-category. \end{definition} 
\begin{definition} \label{definition-equivalence} Two objects $x, y$ of a $2$-category are {\it equivalent} if there exist $1$-morphisms $F : x \to y$ and $G : y \to x$ such that $F \circ G$ is $2$-isomorphic to $\text{id}_y$ and $G \circ F$ is $2$-isomorphic to $\text{id}_x$. \end{definition} 
\begin{definition} \label{definition-functor-into-2-category} Let $\mathcal{A}$ be a category and let $\mathcal{C}$ be a $2$-category. \begin{enumerate} \item A {\it functor} from an ordinary category into a $2$-category will ignore the $2$-morphisms unless mentioned otherwise. In other words, it will be a ``usual'' functor into the category formed out of 2-category by forgetting all the 2-morphisms. \item A {\it weak functor}, or a {\it pseudo functor} $\varphi$ from $\mathcal{A}$ into the 2-category $\mathcal{C}$ is given by the following data \begin{enumerate} \item a map $\varphi : \Ob(\mathcal{A}) \to \Ob(\mathcal{C})$, \item for every pair $x, y\in \Ob(\mathcal{A})$, and every morphism $f : x \to y$ a $1$-morphism $\varphi(f) : \varphi(x) \to \varphi(y)$, \item for every $x\in \Ob(A)$ a $2$-morphism $\alpha_x : \text{id}_{\varphi(x)} \to \varphi(\text{id}_x)$, and \item for every pair of composable morphisms $f : x \to y$, $g : y \to z$ of $\mathcal{A}$ a $2$-morphism $\alpha_{g, f} : \varphi(g \circ f) \to \varphi(g) \circ \varphi(f)$. \end{enumerate} These data are subject to the following conditions: \begin{enumerate} \item the $2$-morphisms $\alpha_x$ and $\alpha_{g, f}$ are all isomorphisms, \item for any morphism $f : x \to y$ in $\mathcal{A}$ we have $\alpha_{\text{id}_y, f} = \alpha_y \star \text{id}_{\varphi(f)}$: $$ \xymatrix{ \varphi(x) \rrtwocell^{\varphi(f)}_{\varphi(f)}{\ \ \ \ \text{id}_{\varphi(f)}} & & \varphi(y) \rrtwocell^{\text{id}_{\varphi(y)}}_{\varphi(\text{id}_y)}{\alpha_y} & & \varphi(y) } = \xymatrix{ \varphi(x) \rrtwocell^{\varphi(f)}_{\varphi(\text{id}_y) \circ \varphi(f)}{\ \ \ \ \alpha_{\text{id}_y, f}} & & \varphi(y) } $$ \item for any morphism $f : x \to y$ in $\mathcal{A}$ we have $\alpha_{f, \text{id}_x} = \text{id}_{\varphi(f)} \star \alpha_x$, \item for any triple of composable morphisms $f : w \to x$, $g : x \to y$, and $h : y \to z$ of $\mathcal{A}$ we have $$ (\text{id}_{\varphi(h)} \star \alpha_{g, f}) \circ \alpha_{h, g \circ f} = (\alpha_{h, g} \star \text{id}_{\varphi(f)}) \circ \alpha_{h \circ g, f} $$ in other words the following diagram with objects $1$-morphisms and arrows $2$-morphisms commutes $$ \xymatrix{ \varphi(h \circ g \circ f) \ar[d]_{\alpha_{h, g \circ f}} \ar[rr]_{\alpha_{h \circ g, f}} & & \varphi(h \circ g) \circ \varphi(f) \ar[d]^{\alpha_{h, g} \star \text{id}_{\varphi(f)}} \\ \varphi(h) \circ \varphi(g \circ f) \ar[rr]^{\text{id}_{\varphi(h)} \star \alpha_{g, f}} & & \varphi(h) \circ \varphi(g) \circ \varphi(f) } $$ \end{enumerate} \end{enumerate} \end{definition} 
\begin{definition} \label{definition-2-1-category} A (strict) {\it $(2, 1)$-category} is a $2$-category in which all $2$-morphisms are isomorphisms. \end{definition} 
\begin{definition} \label{definition-final-object-2-category} A {\it final object} of a $(2, 1)$-category $\mathcal{C}$ is an object $x$ such that \begin{enumerate} \item for every $y \in \Ob(\mathcal{C})$ there is a morphism $y \to x$, and \item every two morphisms $y \to x$ are isomorphic by a unique 2-morphism. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-2-fibre-products} Let $\mathcal{C}$ be a $(2, 1)$-category. Let $x, y, z\in \Ob(\mathcal{C})$ and $f\in \Mor_\mathcal{C}(x, z)$ and $g\in \Mor_{\mathcal C}(y, z)$. A {\it 2-fibre product of $f$ and $g$} is a final object in the category of 2-commutative diagrams described above. If a 2-fibre product exists we will denote it $x \times_z y\in \Ob(\mathcal{C})$, and denote the required morphisms $p\in \Mor_{\mathcal C}(x \times_z y, x)$ and $q\in \Mor_{\mathcal C}(x \times_z y, y)$ making the diagram $$ \xymatrix{ & x \times_z y \ar[r]^{p} \ar[d]_q & x \ar[d]^{f} \\ & y \ar[r]^{g} & z } $$ 2-commute and we will denote the given invertible 2-morphism exhibiting this by $\psi : f \circ p \to g \circ q$. \end{definition} 
\begin{lemma} \label{lemma-2-fibre-product-categories} In the $(2, 1)$-category of categories $2$-fibre products exist and are given by the construction of Example \ref{example-2-fibre-product-categories}. \end{lemma} 
\begin{lemma} \label{lemma-functoriality-2-fibre-product} Let $$ \xymatrix{ & \mathcal{Y} \ar[d]_I \ar[rd]^K & \\ \mathcal{X} \ar[r]^H \ar[rd]^L & \mathcal{Z} \ar[rd]^M & \mathcal{B} \ar[d]^G \\ & \mathcal{A} \ar[r]^F & \mathcal{C} } $$ be a $2$-commutative diagram of categories. A choice of isomorphisms $\alpha : G \circ K \to M \circ I$ and $\beta : M \circ H \to F \circ L$ determines a morphism $$ \mathcal{X} \times_\mathcal{Z} \mathcal{Y} \longrightarrow \mathcal{A} \times_\mathcal{C} \mathcal{B} $$ of $2$-fibre products associated to this situation. \end{lemma} 
\begin{lemma} \label{lemma-equivalence-2-fibre-product} Assumptions as in Lemma \ref{lemma-functoriality-2-fibre-product}. \begin{enumerate} \item If $K$ and $L$ are faithful then the morphism $\mathcal{X} \times_\mathcal{Z} \mathcal{Y} \to \mathcal{A} \times_\mathcal{C} \mathcal{B}$ is faithful. \item If $K$ and $L$ are fully faithful and $M$ is faithful then the morphism $\mathcal{X} \times_\mathcal{Z} \mathcal{Y} \to \mathcal{A} \times_\mathcal{C} \mathcal{B}$ is fully faithful. \item If $K$ and $L$ are equivalences and $M$ is fully faithful then the morphism $\mathcal{X} \times_\mathcal{Z} \mathcal{Y} \to \mathcal{A} \times_\mathcal{C} \mathcal{B}$ is an equivalence. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-associativity-2-fibre-product} Let $$ \xymatrix{ \mathcal{A} \ar[rd] & & \mathcal{C} \ar[ld] \ar[rd] & & \mathcal{E} \ar[ld] \\ & \mathcal{B} & & \mathcal{D} } $$ be a diagram of categories and functors. Then there is a canonical isomorphism $$ (\mathcal{A} \times_\mathcal{B} \mathcal{C}) \times_\mathcal{D} \mathcal{E} \cong \mathcal{A} \times_\mathcal{B} (\mathcal{C} \times_\mathcal{D} \mathcal{E}) $$ of categories. \end{lemma} 
\begin{lemma} \label{lemma-triple-2-fibre-product-pr02} Let $$ \xymatrix{ \mathcal{A} \ar[rd] & & \mathcal{C} \ar[ld] \ar[rd] & & \mathcal{E} \ar[ld] \\ & \mathcal{B} \ar[rd]_F & & \mathcal{D} \ar[ld]^G \\ & & \mathcal{F} & } $$ be a commutative diagram of categories and functors. Then there is a canonical functor $$ \text{pr}_{02} : \mathcal{A} \times_\mathcal{B} \mathcal{C} \times_\mathcal{D} \mathcal{E} \longrightarrow \mathcal{A} \times_\mathcal{F} \mathcal{E} $$ of categories. \end{lemma} 
\begin{lemma} \label{lemma-2-fibre-product-erase-factor} Let $$ \mathcal{A} \to \mathcal{B} \leftarrow \mathcal{C} \leftarrow \mathcal{D} $$ be a diagram of categories and functors. Then there is a canonical isomorphism $$ \mathcal{A} \times_\mathcal{B} \mathcal{C} \times_\mathcal{C} \mathcal{D} \cong \mathcal{A} \times_\mathcal{B} \mathcal{D} $$ of categories. \end{lemma} 
\begin{lemma} \label{lemma-diagonal-1} Let $$ \xymatrix{ \mathcal{C}_3 \ar[r] \ar[d] & \mathcal{S} \ar[d]^\Delta \\ \mathcal{C}_1 \times \mathcal{C}_2 \ar[r]^{G_1 \times G_2} & \mathcal{S} \times \mathcal{S} } $$ be a $2$-fibre product of categories. Then there is a canonical isomorphism $\mathcal{C}_3 \cong \mathcal{C}_1 \times_{G_1, \mathcal{S}, G_2} \mathcal{C}_2$. \end{lemma} 
\begin{lemma} \label{lemma-diagonal-2} Let $$ \xymatrix{ \mathcal{C}' \ar[r] \ar[d] & \mathcal{S} \ar[d]^\Delta \\ \mathcal{C} \ar[r]^{G_1 \times G_2} & \mathcal{S} \times \mathcal{S} } $$ be a $2$-fibre product of categories. Then there is a canonical isomorphism $$ \mathcal{C}' \cong (\mathcal{C} \times_{G_1, \mathcal{S}, G_2} \mathcal{C}) \times_{(p, q), \mathcal{C} \times \mathcal{C}, \Delta} \mathcal{C}. $$ \end{lemma} 
\begin{lemma} \label{lemma-fibre-product-after-map} Let $\mathcal{A} \to \mathcal{C}$, $\mathcal{B} \to \mathcal{C}$ and $\mathcal{C} \to \mathcal{D}$ be functors between categories. Then the diagram $$ \xymatrix{ \mathcal{A} \times_\mathcal{C} \mathcal{B} \ar[d] \ar[r] & \mathcal{A} \times_\mathcal{D} \mathcal{B} \ar[d] \\ \mathcal{C} \ar[r]^-{\Delta_{\mathcal{C}/\mathcal{D}}} \ar[r] & \mathcal{C} \times_\mathcal{D} \mathcal{C} } $$ is a $2$-fibre product diagram. \end{lemma} 
\begin{lemma} \label{lemma-base-change-diagonal} Let $$ \xymatrix{ \mathcal{U} \ar[d] \ar[r] & \mathcal{V} \ar[d] \\ \mathcal{X} \ar[r] & \mathcal{Y} } $$ be a $2$-fibre product of categories. Then the diagram $$ \xymatrix{ \mathcal{U} \ar[d] \ar[r] & \mathcal{U} \times_\mathcal{V} \mathcal{U} \ar[d] \\ \mathcal{X} \ar[r] & \mathcal{X} \times_\mathcal{Y} \mathcal{X} } $$ is $2$-cartesian. \end{lemma} 
\begin{definition} \label{definition-categories-over-C} Let $\mathcal{C}$ be a category. The {\it $2$-category of categories over $\mathcal{C}$} is the $2$-category defined as follows: \begin{enumerate} \item Its objects will be functors $p : \mathcal{S} \to \mathcal{C}$. \item Its $1$-morphisms $(\mathcal{S}, p) \to (\mathcal{S}', p')$ will be functors $G : \mathcal{S} \to \mathcal{S}'$ such that $p' \circ G = p$. \item Its $2$-morphisms $t : G \to H$ for $G, H : (\mathcal{S}, p) \to (\mathcal{S}', p')$ will be morphisms of functors such that $p'(t_x) = \text{id}_{p(x)}$ for all $x \in \Ob(\mathcal{S})$. \end{enumerate} In this situation we will denote $$ \Mor_{\textit{Cat}/\mathcal{C}}(\mathcal{S}, \mathcal{S}') $$ the category of $1$-morphisms between $(\mathcal{S}, p)$ and $(\mathcal{S}', p')$ \end{definition} 
\begin{definition} \label{definition-fibre-category} Let $\mathcal{C}$ be a category. Let $p : \mathcal{S} \to \mathcal{C}$ be a category over $\mathcal{C}$. \begin{enumerate} \item The {\it fibre category} over an object $U\in \Ob(\mathcal{C})$ is the category $\mathcal{S}_U$ with objects $$ \Ob(\mathcal{S}_U) = \{x\in \Ob(\mathcal{S}) : p(x) = U\} $$ and morphisms $$ \Mor_{\mathcal{S}_U}(x, y) = \{ \phi \in \Mor_\mathcal{S}(x, y) : p(\phi) = \text{id}_U\}. $$ \item A {\it lift} of an object $U \in \Ob(\mathcal{C})$ is an object $x\in \Ob(\mathcal{S})$ such that $p(x) = U$, i.e., $x\in \Ob(\mathcal{S}_U)$. We will also sometime say that {\it $x$ lies over $U$}. \item Similarly, a {\it lift} of a morphism $f : V \to U$ in $\mathcal{C}$ is a morphism $\phi : y \to x$ in $\mathcal{S}$ such that $p(\phi) = f$. We sometimes say that {\it $\phi$ lies over $f$}. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-2-product-categories-over-C} Let $\mathcal{C}$ be a category. The $(2, 1)$-category of categories over $\mathcal{C}$ has 2-fibre products. Suppose that $F : \mathcal{X} \to \mathcal{S}$ and $G : \mathcal{Y} \to \mathcal{S}$ are morphisms of categories over $\mathcal{C}$. An explicit 2-fibre product $\mathcal{X} \times_\mathcal{S}\mathcal{Y}$ is given by the following description \begin{enumerate} \item an object of $\mathcal{X} \times_\mathcal{S} \mathcal{Y}$ is a quadruple $(U, x, y, f)$, where $U \in \Ob(\mathcal{C})$, $x\in \Ob(\mathcal{X}_U)$, $y\in \Ob(\mathcal{Y}_U)$, and $f : F(x) \to G(y)$ is an isomorphism in $\mathcal{S}_U$, \item a morphism $(U, x, y, f) \to (U', x', y', f')$ is given by a pair $(a, b)$, where $a : x \to x'$ is a morphism in $\mathcal{X}$, and $b : y \to y'$ is a morphism in $\mathcal{Y}$ such that \begin{enumerate} \item $a$ and $b$ induce the same morphism $U \to U'$, and \item the diagram $$ \xymatrix{ F(x) \ar[r]^f \ar[d]^{F(a)} & G(y) \ar[d]^{G(b)} \\ F(x') \ar[r]^{f'} & G(y') } $$ is commutative. \end{enumerate} \end{enumerate} The functors $p : \mathcal{X} \times_\mathcal{S}\mathcal{Y} \to \mathcal{X}$ and $q : \mathcal{X} \times_\mathcal{S}\mathcal{Y} \to \mathcal{Y}$ are the forgetful functors in this case. The transformation $\psi : F \circ p \to G \circ q$ is given on the object $\xi = (U, x, y, f)$ by $\psi_\xi = f : F(p(\xi)) = F(x) \to G(y) = G(q(\xi))$. \end{lemma} 
\begin{lemma} \label{lemma-fibre-2-fibre-product-categories-over-C} Let $\mathcal{C}$ be a category. Let $f : \mathcal{X} \to \mathcal{S}$ and $g : \mathcal{Y} \to \mathcal{S}$ be morphisms of categories over $\mathcal{C}$. For any object $U$ of $\mathcal{C}$ we have the following identity of fibre categories $$ \left(\mathcal{X} \times_\mathcal{S}\mathcal{Y}\right)_U = \mathcal{X}_U \times_{\mathcal{S}_U} \mathcal{Y}_U $$ \end{lemma} 
\begin{definition} \label{definition-cartesian-over-C} Let $\mathcal{C}$ be a category. Let $p : \mathcal{S} \to \mathcal{C}$ be a category over $\mathcal{C}$. A {\it strongly cartesian morphism}, or more precisely a {\it strongly $\mathcal{C}$-cartesian morphism} is a morphism $\varphi : y \to x$ of $\mathcal{S}$ such that for every $z \in \Ob(\mathcal{S})$ the map $$ \Mor_\mathcal{S}(z, y) \longrightarrow \Mor_\mathcal{S}(z, x) \times_{\Mor_\mathcal{C}(p(z), p(x))} \Mor_\mathcal{C}(p(z), p(y)), $$ given by $\psi \longmapsto (\varphi \circ \psi, p(\psi))$ is bijective. \end{definition} 
\begin{lemma} \label{lemma-composition-cartesian} Let $\mathcal{C}$ be a category. Let $p : \mathcal{S} \to \mathcal{C}$ be a category over $\mathcal{C}$. \begin{enumerate} \item The composition of two strongly cartesian morphisms is strongly cartesian. \item Any isomorphism of $\mathcal{S}$ is strongly cartesian. \item Any strongly cartesian morphism $\varphi$ such that $p(\varphi)$ is an isomorphism, is an isomorphism. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-cartesian-over-cartesian} Let $F : \mathcal{A} \to \mathcal{B}$ and $G : \mathcal{B} \to \mathcal{C}$ be composable functors between categories. Let $x \to y$ be a morphism of $\mathcal{A}$. If $x \to y$ is strongly $\mathcal{B}$-cartesian and $F(x) \to F(y)$ is strongly $\mathcal{C}$-cartesian, then $x \to y$ is strongly $\mathcal{C}$-cartesian. \end{lemma} 
\begin{lemma} \label{lemma-strongly-cartesian-fibre-product} Let $\mathcal{C}$ be a category. Let $p : \mathcal{S} \to \mathcal{C}$ be a category over $\mathcal{C}$. Let $x \to y$ and $z \to y$ be morphisms of $\mathcal{S}$. Assume \begin{enumerate} \item $x \to y$ is strongly cartesian, \item $p(x) \times_{p(y)} p(z)$ exists, and \item there exists a strongly cartesian morphism $a : w \to z$ in $\mathcal{S}$ with $p(w) = p(x) \times_{p(y)} p(z)$ and $p(a) = \text{pr}_2 : p(x) \times_{p(y)} p(z) \to p(z)$. \end{enumerate} Then the fibre product $x \times_y z$ exists and is isomorphic to $w$. \end{lemma} 
\begin{definition} \label{definition-fibred-category} Let $\mathcal{C}$ be a category. Let $p : \mathcal{S} \to \mathcal{C}$ be a category over $\mathcal{C}$. We say $\mathcal{S}$ is a {\it fibred category over $\mathcal{C}$} if given any $x \in \Ob(\mathcal{S})$ lying over $U \in \Ob(\mathcal{C})$ and any morphism $f : V \to U$ of $\mathcal{C}$, there exists a strongly cartesian morphism $f^*x \to x$ lying over $f$. \end{definition} 
\begin{definition} \label{definition-pullback-functor-fibred-category} Assume $p : \mathcal{S} \to \mathcal{C}$ is a fibred category. \begin{enumerate} \item A {\it choice of pullbacks}\footnote{This is probably nonstandard terminology. In some texts this is called a ``cleavage'' but it conjures up the wrong image. Maybe a ``cleaving'' would be a better word. A related notion is that of a ``splitting'', but in many texts a ``splitting'' means a choice of pullbacks such that $g^*f^* = (f \circ g)^*$ for any composable pair of morphisms. Compare also with Definition \ref{definition-split-fibred-category}.} for $p : \mathcal{S} \to \mathcal{C}$ is given by a choice of a strongly cartesian morphism $f^\ast x \to x$ lying over $f$ for any morphism $f: V \to U$ of $\mathcal{C}$ and any $x \in \Ob(\mathcal{S}_U)$. \item Given a choice of pullbacks, for any morphism $f : V \to U$ of $\mathcal{C}$ the functor $f^* : \mathcal{S}_U \to \mathcal{S}_V$ described above is called a {\it pullback functor} (associated to the choices $f^*x \to x$ made above). \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-fibred} Assume $p : \mathcal{S} \to \mathcal{C}$ is a fibred category. Assume given a choice of pullbacks for $p : \mathcal{S} \to \mathcal{C}$. \begin{enumerate} \item For any pair of composable morphisms $f : V \to U$, $g : W \to V$ there is a unique isomorphism $$ \alpha_{g, f} : (f \circ g)^\ast \longrightarrow g^\ast \circ f^\ast $$ as functors $\mathcal{S}_U \to \mathcal{S}_W$ such that for every $y\in \Ob(\mathcal{S}_U)$ the following diagram commutes $$ \xymatrix{ g^\ast f^\ast y \ar[r] & f^\ast y \ar[d] \\ (f \circ g)^\ast y \ar[r] \ar[u]^{(\alpha_{g, f})_y} & y } $$ \item If $f = \text{id}_U$, then there is a canonical isomorphism $\alpha_U : \text{id} \to (\text{id}_U)^*$ as functors $\mathcal{S}_U \to \mathcal{S}_U$. \item The quadruple $(U \mapsto \mathcal{S}_U, f \mapsto f^*, \alpha_{g, f}, \alpha_U)$ defines a pseudo functor from $\mathcal{C}^{opp}$ to the $(2, 1)$-category of categories, see Definition \ref{definition-functor-into-2-category}. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-fibred-equivalent} Let $\mathcal{C}$ be a category. Let $\mathcal{S}_1$, $\mathcal{S}_2$ be categories over $\mathcal{C}$. Suppose that $\mathcal{S}_1$ and $\mathcal{S}_2$ are equivalent as categories over $\mathcal{C}$. Then $\mathcal{S}_1$ is fibred over $\mathcal{C}$ if and only if $\mathcal{S}_2$ is fibred over $\mathcal{C}$. \end{lemma} 
\begin{definition} \label{definition-fibred-categories-over-C} Let $\mathcal{C}$ be a category. The {\it $2$-category of fibred categories over $\mathcal{C}$} is the sub $2$-category of the $2$-category of categories over $\mathcal{C}$ (see Definition \ref{definition-categories-over-C}) defined as follows: \begin{enumerate} \item Its objects will be fibred categories $p : \mathcal{S} \to \mathcal{C}$. \item Its $1$-morphisms $(\mathcal{S}, p) \to (\mathcal{S}', p')$ will be functors $G : \mathcal{S} \to \mathcal{S}'$ such that $p' \circ G = p$ and such that $G$ maps strongly cartesian morphisms to strongly cartesian morphisms. \item Its $2$-morphisms $t : G \to H$ for $G, H : (\mathcal{S}, p) \to (\mathcal{S}', p')$ will be morphisms of functors such that $p'(t_x) = \text{id}_{p(x)}$ for all $x \in \Ob(\mathcal{S})$. \end{enumerate} In this situation we will denote $$ \Mor_{\textit{Fib}/\mathcal{C}}(\mathcal{S}, \mathcal{S}') $$ the category of $1$-morphisms between $(\mathcal{S}, p)$ and $(\mathcal{S}', p')$ \end{definition} 
\begin{lemma} \label{lemma-2-product-fibred-categories-over-C} Let $\mathcal{C}$ be a category. The $(2, 1)$-category of fibred categories over $\mathcal{C}$ has 2-fibre products, and they are described as in Lemma \ref{lemma-2-product-categories-over-C}. \end{lemma} 
\begin{lemma} \label{lemma-cute} Let $\mathcal{C}$ be a category. Let $U \in \Ob(\mathcal{C})$. If $p : \mathcal{S} \to \mathcal{C}$ is a fibred category and $p$ factors through $p' : \mathcal{S} \to \mathcal{C}/U$ then $p' : \mathcal{S} \to \mathcal{C}/U$ is a fibred category. \end{lemma} 
\begin{lemma} \label{lemma-fibred-over-fibred} Let $\mathcal{A} \to \mathcal{B} \to \mathcal{C}$ be functors between categories. If $\mathcal{A}$ is fibred over $\mathcal{B}$ and $\mathcal{B}$ is fibred over $\mathcal{C}$, then $\mathcal{A}$ is fibred over $\mathcal{C}$. \end{lemma} 
\begin{lemma} \label{lemma-fibred-category-representable-goes-up} Let $p : \mathcal{S} \to \mathcal{C}$ be a fibred category. Let $x \to y$ and $z \to y$ be morphisms of $\mathcal{S}$ with $x \to y$ strongly cartesian. If $p(x) \times_{p(y)} p(z)$ exists, then $x \times_y z$ exists, $p(x \times_y z) = p(x) \times_{p(y)} p(z)$, and $x \times_y z \to z$ is strongly cartesian. \end{lemma} 
\begin{lemma} \label{lemma-ameliorate-morphism-fibred-categories} Let $\mathcal{C}$ be a category. Let $F : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of fibred categories over $\mathcal{C}$. There exist $1$-morphisms of fibred categories over $\mathcal{C}$ $$ \xymatrix{ \mathcal{X} \ar@<1ex>[r]^u & \mathcal{X}' \ar[r]^v \ar@<1ex>[l]^w & \mathcal{Y} } $$ such that $F = v \circ u$ and such that \begin{enumerate} \item $u : \mathcal{X} \to \mathcal{X}'$ is fully faithful, \item $w$ is left adjoint to $u$, and \item $v : \mathcal{X}' \to \mathcal{Y}$ is a fibred category. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-inertia-fibred-category} Let $\mathcal{C}$ be a category. Let $p : \mathcal{S} \to \mathcal{C}$ and $p' : \mathcal{S}' \to \mathcal{C}$ be fibred categories. Let $F : \mathcal{S} \to \mathcal{S}'$ be a $1$-morphism of fibred categories over $\mathcal{C}$. Consider the category $\mathcal{I}_{\mathcal{S}/\mathcal{S}'}$ over $\mathcal{C}$ whose \begin{enumerate} \item objects are pairs $(x, \alpha)$ where $x \in \Ob(\mathcal{S})$ and $\alpha : x \to x$ is an automorphism with $F(\alpha) = \text{id}$, \item morphisms $(x, \alpha) \to (y, \beta)$ are given by morphisms $\phi : x \to y$ such that $$ \xymatrix{ x\ar[r]_\phi\ar[d]_\alpha & y\ar[d]^{\beta} \\ x\ar[r]^\phi & y \\ } $$ commutes, and \item the functor $\mathcal{I}_{\mathcal{S}/\mathcal{S}'} \to \mathcal{C}$ is given by $(x, \alpha) \mapsto p(x)$. \end{enumerate} Then \begin{enumerate} \item there is an equivalence $$ \mathcal{I}_{\mathcal{S}/\mathcal{S}'} \longrightarrow \mathcal{S} \times_{\Delta, (\mathcal{S} \times_{\mathcal{S}'} \mathcal{S}), \Delta} \mathcal{S} $$ in the $(2, 1)$-category of categories over $\mathcal{C}$, and \item $\mathcal{I}_{\mathcal{S}/\mathcal{S}'}$ is a fibred category over $\mathcal{C}$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-inertia-fibred-category} Let $\mathcal{C}$ be a category. \begin{enumerate} \item Let $F : \mathcal{S} \to \mathcal{S}'$ be a $1$-morphism of fibred categories over $\mathcal{C}$. The {\it relative inertia of $\mathcal{S}$ over $\mathcal{S}'$} is the fibred category $\mathcal{I}_{\mathcal{S}/\mathcal{S}'} \to \mathcal{C}$ of Lemma \ref{lemma-inertia-fibred-category}. \item By the {\it inertia fibred category $\mathcal{I}_\mathcal{S}$ of $\mathcal{S}$} we mean $\mathcal{I}_\mathcal{S} = \mathcal{I}_{\mathcal{S}/\mathcal{C}}$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-relative-inertia-as-fibre-product} Let $F : \mathcal{S} \to \mathcal{S}'$ be a $1$-morphism of categories fibred over a category $\mathcal{C}$. Then the diagram $$ \xymatrix{ \mathcal{I}_{\mathcal{S}/\mathcal{S}'} \ar[d]_{F \circ (\ref{equation-inertia-structure-map})} \ar[rr]_{(\ref{equation-comparison})} & & \mathcal{I}_\mathcal{S} \ar[d]^{(\ref{equation-functorial})} \\ \mathcal{S}' \ar[rr]^e & & \mathcal{I}_{\mathcal{S}'} } $$ is a $2$-fibre product. \end{lemma} 
\begin{definition} \label{definition-fibred-groupoids} Let $p : \mathcal{S} \to \mathcal{C}$ be a functor. We say that $\mathcal{S}$ is {\it fibred in groupoids} over $\mathcal{C}$ if the following two conditions hold: \begin{enumerate} \item For every morphism $f : V \to U$ in $\mathcal{C}$ and every lift $x$ of $U$ there is a lift $\phi : y \to x$ of $f$ with target $x$. \item For every pair of morphisms $\phi : y \to x$ and $ \psi : z \to x$ and any morphism $f : p(z) \to p(y)$ such that $p(\phi) \circ f = p(\psi)$ there exists a unique lift $\chi : z \to y$ of $f$ such that $\phi \circ \chi = \psi$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-fibred-groupoids} Let $p : \mathcal{S} \to \mathcal{C}$ be a functor. The following are equivalent \begin{enumerate} \item $p : \mathcal{S} \to \mathcal{C}$ is a category fibred in groupoids, and \item all fibre categories are groupoids and $\mathcal{S}$ is a fibred category over $\mathcal{C}$. \end{enumerate} Moreover, in this case every morphism of $\mathcal{S}$ is strongly cartesian. In addition, given $f^\ast x \to x$ lying over $f$ for all $f: V \to U = p(x)$ the data $(U \mapsto \mathcal{S}_U, f \mapsto f^*, \alpha_{f, g}, \alpha_U)$ constructed in Lemma \ref{lemma-fibred} defines a pseudo functor from $\mathcal{C}^{opp}$ in to the $(2, 1)$-category of groupoids. \end{lemma} 
\begin{lemma} \label{lemma-fibred-gives-fibred-groupoids} Let $\mathcal{C}$ be a category. Let $p : \mathcal{S} \to \mathcal{C}$ be a fibred category. Let $\mathcal{S}'$ be the subcategory of $\mathcal{S}$ defined as follows \begin{enumerate} \item $\Ob(\mathcal{S}') = \Ob(\mathcal{S})$, and \item for $x, y \in \Ob(\mathcal{S}')$ the set of morphisms between $x$ and $y$ in $\mathcal{S}'$ is the set of strongly cartesian morphisms between $x$ and $y$ in $\mathcal{S}$. \end{enumerate} Let $p' : \mathcal{S}' \to \mathcal{C}$ be the restriction of $p$ to $\mathcal{S}'$. Then $p' : \mathcal{S}' \to \mathcal{C}$ is fibred in groupoids. \end{lemma} 
\begin{definition} \label{definition-categories-fibred-in-groupoids-over-C} Let $\mathcal{C}$ be a category. The {\it $2$-category of categories fibred in groupoids over $\mathcal{C}$} is the sub $2$-category of the $2$-category of fibred categories over $\mathcal{C}$ (see Definition \ref{definition-fibred-categories-over-C}) defined as follows: \begin{enumerate} \item Its objects will be categories $p : \mathcal{S} \to \mathcal{C}$ fibred in groupoids. \item Its $1$-morphisms $(\mathcal{S}, p) \to (\mathcal{S}', p')$ will be functors $G : \mathcal{S} \to \mathcal{S}'$ such that $p' \circ G = p$ (since every morphism is strongly cartesian $G$ automatically preserves them). \item Its $2$-morphisms $t : G \to H$ for $G, H : (\mathcal{S}, p) \to (\mathcal{S}', p')$ will be morphisms of functors such that $p'(t_x) = \text{id}_{p(x)}$ for all $x \in \Ob(\mathcal{S})$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-2-product-fibred-categories} Let $\mathcal{C}$ be a category. The $2$-category of categories fibred in groupoids over $\mathcal{C}$ has 2-fibre products, and they are described as in Lemma \ref{lemma-2-product-categories-over-C}. \end{lemma} 
\begin{lemma} \label{lemma-equivalence-fibred-categories} Let $p : \mathcal{S}\to \mathcal{C}$ and $p' : \mathcal{S'}\to \mathcal{C}$ be categories fibred in groupoids, and suppose that $G : \mathcal{S}\to \mathcal {S}'$ is a functor over $\mathcal{C}$. \begin{enumerate} \item Then $G$ is faithful (resp.\ fully faithful, resp.\ an equivalence) if and only if for each $U\in\Ob(\mathcal{C})$ the induced functor $G_U : \mathcal{S}_U\to \mathcal{S}'_U$ is faithful (resp.\ fully faithful, resp.\ an equivalence). \item If $G$ is an equivalence, then $G$ is an equivalence in the $2$-category of categories fibred in groupoids over $\mathcal{C}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-fully-faithful-diagonal-equivalence} Let $\mathcal{C}$ be a category. Let $p : \mathcal{S}\to \mathcal{C}$ and $p' : \mathcal{S'}\to \mathcal{C}$ be categories fibred in groupoids. Let $G : \mathcal{S}\to \mathcal {S}'$ be a functor over $\mathcal{C}$. Then $G$ is fully faithful if and only if the diagonal $$ \Delta_G : \mathcal{S} \longrightarrow \mathcal{S} \times_{G, \mathcal{S}', G} \mathcal{S} $$ is an equivalence. \end{lemma} 
\begin{lemma} \label{lemma-morphisms-equivalent-fibred-groupoids} Let $\mathcal{C}$ be a category. Let $\mathcal{S}_i$, $i = 1, 2, 3, 4$ be categories fibred in groupoids over $\mathcal{C}$. Suppose that $\varphi : \mathcal{S}_1 \to \mathcal{S}_2$ and $\psi : \mathcal{S}_3 \to \mathcal{S}_4$ are equivalences over $\mathcal{C}$. Then $$ \Mor_{\textit{Cat}/\mathcal{C}}(\mathcal{S}_2, \mathcal{S}_3) \longrightarrow \Mor_{\textit{Cat}/\mathcal{C}}(\mathcal{S}_1, \mathcal{S}_4), \quad \alpha \longmapsto \psi \circ \alpha \circ \varphi $$ is an equivalence of categories. \end{lemma} 
\begin{lemma} \label{lemma-inertia-fibred-groupoids} Let $\mathcal{C}$ be a category. If $p : \mathcal{S} \to \mathcal{C}$ is fibred in groupoids, then so is the inertia fibred category $\mathcal{I}_\mathcal{S} \to \mathcal{C}$. \end{lemma} 
\begin{lemma} \label{lemma-cute-groupoids} Let $\mathcal{C}$ be a category. Let $U \in \Ob(\mathcal{C})$. If $p : \mathcal{S} \to \mathcal{C}$ is a category fibred in groupoids and $p$ factors through $p' : \mathcal{S} \to \mathcal{C}/U$ then $p' : \mathcal{S} \to \mathcal{C}/U$ is fibred in groupoids. \end{lemma} 
\begin{lemma} \label{lemma-fibred-in-groupoids-over-fibred-in-groupoids} Let $\mathcal{A} \to \mathcal{B} \to \mathcal{C}$ be functors between categories. If $\mathcal{A}$ is fibred in groupoids over $\mathcal{B}$ and $\mathcal{B}$ is fibred in groupoids over $\mathcal{C}$, then $\mathcal{A}$ is fibred in groupoids over $\mathcal{C}$. \end{lemma} 
\begin{lemma} \label{lemma-fibred-groupoids-fibre-product-goes-up} Let $p : \mathcal{S} \to \mathcal{C}$ be a category fibred in groupoids. Let $x \to y$ and $z \to y$ be morphisms of $\mathcal{S}$. If $p(x) \times_{p(y)} p(z)$ exists, then $x \times_y z$ exists and $p(x \times_y z) = p(x) \times_{p(y)} p(z)$. \end{lemma} 
\begin{lemma} \label{lemma-ameliorate-morphism-categories-fibred-groupoids} Let $\mathcal{C}$ be a category. Let $F : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of categories fibred in groupoids over $\mathcal{C}$. There exists a factorization $\mathcal{X} \to \mathcal{X}' \to \mathcal{Y}$ by $1$-morphisms of categories fibred in groupoids over $\mathcal{C}$ such that $\mathcal{X} \to \mathcal{X}'$ is an equivalence over $\mathcal{C}$ and such that $\mathcal{X}'$ is a category fibred in groupoids over $\mathcal{Y}$. \end{lemma} 
\begin{lemma} \label{lemma-amelioration-unique} Let $\mathcal{C}$ be a category. Let $F : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of categories fibred in groupoids over $\mathcal{C}$. Assume we have a $2$-commutative diagram $$ \xymatrix{ \mathcal{X}' \ar[rd]_f & \mathcal{X} \ar[l]^a \ar[d]^F \ar[r]_b & \mathcal{X}'' \ar[ld]^g \\ & \mathcal{Y} } $$ where $a$ and $b$ are equivalences of categories over $\mathcal{C}$ and $f$ and $g$ are categories fibred in groupoids. Then there exists an equivalence $h : \mathcal{X}'' \to \mathcal{X}'$ of categories over $\mathcal{Y}$ such that $h \circ b$ is $2$-isomorphic to $a$ as $1$-morphisms of categories over $\mathcal{C}$. If the diagram above actually commutes, then we can arrange it so that $h \circ b$ is $2$-isomorphic to $a$ as $1$-morphisms of categories over $\mathcal{Y}$. \end{lemma} 
\begin{definition} \label{definition-split-fibred-category} Let $\mathcal{C}$ be a category. Suppose that $F : \mathcal{C}^{opp} \to \textit{Cat}$ is a functor to the $2$-category of categories. We will write $p_F : \mathcal{S}_F \to \mathcal{C}$ for the fibred category constructed in Example \ref{example-functor-categories}. A {\it split fibred category} is a fibred category isomorphic (!) over $\mathcal{C}$ to one of these categories {\it $\mathcal{S}_F$}. \end{definition} 
\begin{lemma} \label{lemma-when-split} Let $\mathcal{C}$ be a category. Let $\mathcal{S}$ be a fibred category over $\mathcal{C}$. Then $\mathcal{S}$ is split if and only if for some choice of pullbacks (see Definition \ref{definition-pullback-functor-fibred-category}) the pullback functors $(f \circ g)^*$ and $g^* \circ f^*$ are equal. \end{lemma} 
\begin{lemma} \label{lemma-fibred-strict} Let $ p : \mathcal{S} \to \mathcal{C}$ be a fibred category. There exists a contravariant functor $F : \mathcal{C} \to \textit{Cat}$ such that $\mathcal{S}$ is equivalent to $\mathcal{S}_F$ in the $2$-category of fibred categories over $\mathcal{C}$. In other words, every fibred category is equivalent to a split one. \end{lemma} 
\begin{definition} \label{definition-split-category-fibred-in-groupoids} Let $\mathcal{C}$ be a category. Suppose that $F : \mathcal{C}^{opp} \to \textit{Groupoids}$ is a functor to the $2$-category of groupoids. We will write $p_F : \mathcal{S}_F \to \mathcal{C}$ for the category fibred in groupoids constructed in Example \ref{example-functor-groupoids}. A {\it split category fibred in groupoids} is a category fibred in groupoids isomorphic (!) over $\mathcal{C}$ to one of these categories {\it $\mathcal{S}_F$}. \end{definition} 
\begin{lemma} \label{lemma-fibred-groupoids-strict} Let $ p : \mathcal{S} \to \mathcal{C}$ be a category fibred in groupoids. There exists a contravariant functor $F : \mathcal{C} \to \textit{Groupoids}$ such that $\mathcal{S}$ is equivalent to $\mathcal{S}_F$ over $\mathcal{C}$. In other words, every category fibred in groupoids is equivalent to a split one. \end{lemma} 
\begin{definition} \label{definition-discrete} A category is called {\it discrete} if the only morphisms are the identity morphisms. \end{definition} 
\begin{definition} \label{definition-category-fibred-sets} Let $\mathcal{C}$ be a category. A {\it category fibred in sets}, or a {\it category fibred in discrete categories} is a category fibred in groupoids all of whose fibre categories are discrete. \end{definition} 
\begin{definition} \label{definition-categories-fibred-in-sets-over-C} Let $\mathcal{C}$ be a category. The {\it $2$-category of categories fibred in sets over $\mathcal{C}$} is the sub $2$-category of the category of categories fibred in groupoids over $\mathcal{C}$ (see Definition \ref{definition-categories-fibred-in-groupoids-over-C}) defined as follows: \begin{enumerate} \item Its objects will be categories $p : \mathcal{S} \to \mathcal{C}$ fibred in sets. \item Its $1$-morphisms $(\mathcal{S}, p) \to (\mathcal{S}', p')$ will be functors $G : \mathcal{S} \to \mathcal{S}'$ such that $p' \circ G = p$ (since every morphism is strongly cartesian $G$ automatically preserves them). \item Its $2$-morphisms $t : G \to H$ for $G, H : (\mathcal{S}, p) \to (\mathcal{S}', p')$ will be morphisms of functors such that $p'(t_x) = \text{id}_{p(x)}$ for all $x \in \Ob(\mathcal{S})$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-2-product-categories-fibred-sets} Let $\mathcal{C}$ be a category. The 2-category of categories fibred in sets over $\mathcal{C}$ has 2-fibre products. More precisely, the 2-fibre product described in Lemma \ref{lemma-2-product-categories-over-C} returns a category fibred in sets if one starts out with such. \end{lemma} 
\begin{lemma} \label{lemma-2-category-fibred-sets} \begin{slogan} Categories fibred in sets are precisely presheaves. \end{slogan} Let $\mathcal{C}$ be a category. The only $2$-morphisms between categories fibred in sets are identities. In other words, the $2$-category of categories fibred in sets is a category. Moreover, there is an equivalence of categories $$ \left\{ \begin{matrix} \text{the category of presheaves}\\ \text{of sets over }\mathcal{C} \end{matrix} \right\} \leftrightarrow \left\{ \begin{matrix} \text{the category of categories}\\ \text{fibred in sets over }\mathcal{C} \end{matrix} \right\} $$ The functor from left to right is the construction $F \to \mathcal{S}_F$ discussed in Example \ref{example-presheaf}. The functor from right to left assigns to $p : \mathcal{S} \to \mathcal{C}$ the presheaf of objects $U \mapsto \Ob(\mathcal{S}_U)$. \end{lemma} 
\begin{definition} \label{definition-setoid} Let us call a category a {\it setoid}\footnote{A set on steroids!?} if it is a groupoid where every object has exactly one automorphism: the identity. \end{definition} 
\begin{definition} \label{definition-category-fibred-setoids} Let $\mathcal{C}$ be a category. A {\it category fibred in setoids} is a category fibred in groupoids all of whose fibre categories are setoids. \end{definition} 
\begin{definition} \label{definition-categories-fibred-in-setoids-over-C} Let $\mathcal{C}$ be a category. The {\it $2$-category of categories fibred in setoids over $\mathcal{C}$} is the sub $2$-category of the category of categories fibred in groupoids over $\mathcal{C}$ (see Definition \ref{definition-categories-fibred-in-groupoids-over-C}) defined as follows: \begin{enumerate} \item Its objects will be categories $p : \mathcal{S} \to \mathcal{C}$ fibred in setoids. \item Its $1$-morphisms $(\mathcal{S}, p) \to (\mathcal{S}', p')$ will be functors $G : \mathcal{S} \to \mathcal{S}'$ such that $p' \circ G = p$ (since every morphism is strongly cartesian $G$ automatically preserves them). \item Its $2$-morphisms $t : G \to H$ for $G, H : (\mathcal{S}, p) \to (\mathcal{S}', p')$ will be morphisms of functors such that $p'(t_x) = \text{id}_{p(x)}$ for all $x \in \Ob(\mathcal{S})$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-2-product-categories-fibred-setoids} Let $\mathcal{C}$ be a category. The 2-category of categories fibred in setoids over $\mathcal{C}$ has 2-fibre products. More precisely, the 2-fibre product described in Lemma \ref{lemma-2-product-categories-over-C} returns a category fibred in setoids if one starts out with such. \end{lemma} 
\begin{lemma} \label{lemma-setoid-fibres} Let $\mathcal{C}$ be a category. Let $\mathcal{S}$ be a category over $\mathcal{C}$. \begin{enumerate} \item If $\mathcal{S} \to \mathcal{S}'$ is an equivalence over $\mathcal{C}$ with $\mathcal{S}'$ fibred in sets over $\mathcal{C}$, then \begin{enumerate} \item $\mathcal{S}$ is fibred in setoids over $\mathcal{C}$, and \item for each $U \in \Ob(\mathcal{C})$ the map $\Ob(\mathcal{S}_U) \to \Ob(\mathcal{S}'_U)$ identifies the target as the set of isomorphism classes of the source. \end{enumerate} \item If $p : \mathcal{S} \to \mathcal{C}$ is a category fibred in setoids, then there exists a category fibred in sets $p' : \mathcal{S}' \to \mathcal{C}$ and an equivalence $\text{can} : \mathcal{S} \to \mathcal{S}'$ over $\mathcal{C}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-2-category-fibred-setoids} Let $\mathcal{C}$ be a category. The construction of Lemma \ref{lemma-setoid-fibres} part (2) gives a functor $$ F : \left\{ \begin{matrix} \text{the 2-category of categories}\\ \text{fibred in setoids over }\mathcal{C} \end{matrix} \right\} \longrightarrow \left\{ \begin{matrix} \text{the category of categories}\\ \text{fibred in sets over }\mathcal{C} \end{matrix} \right\} $$ (see Definition \ref{definition-functor-into-2-category}). This functor is an equivalence in the following sense: \begin{enumerate} \item for any two 1-morphisms $f, g : \mathcal{S}_1 \to \mathcal{S}_2$ with $F(f) = F(g)$ there exists a unique 2-isomorphism $f \to g$, \item for any morphism $h : F(\mathcal{S}_1) \to F(\mathcal{S}_2)$ there exists a 1-morphism $f : \mathcal{S}_1 \to \mathcal{S}_2$ with $F(f) = h$, and \item any category fibred in sets $\mathcal{S}$ is equal to $F(\mathcal{S})$. \end{enumerate} In particular, defining $F_i \in \textit{PSh}(\mathcal{C})$ by the rule $F_i(U) = \Ob(\mathcal{S}_{i, U})/\cong$, we have $$ \Mor_{\textit{Cat}/\mathcal{C}}(\mathcal{S}_1, \mathcal{S}_2) \Big/ 2\text{-isomorphism} = \Mor_{\textit{PSh}(\mathcal{C})}(F_1, F_2) $$ More precisely, given any map $\phi : F_1 \to F_2$ there exists a $1$-morphism $f : \mathcal{S}_1 \to \mathcal{S}_2$ which induces $\phi$ on isomorphism classes of objects and which is unique up to unique $2$-isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-characterize-fibred-setoids-inertia} Let $\mathcal{C}$ be a category. Let $p : \mathcal{S} \to \mathcal{C}$ be a category fibred in groupoids. The following are equivalent: \begin{enumerate} \item $p : \mathcal{S} \to \mathcal{C}$ is a category fibred in setoids, and \item the canonical $1$-morphism $\mathcal{I}_\mathcal{S} \to \mathcal{S}$, see (\ref{equation-inertia-structure-map}), is an equivalence (of categories over $\mathcal{C}$). \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-category-fibred-setoids-presheaves-products} Let $\mathcal{C}$ be a category. The construction of Lemma \ref{lemma-2-category-fibred-setoids} which associates to a category fibred in setoids a presheaf is compatible with products, in the sense that the presheaf associated to a $2$-fibre product $\mathcal{X} \times_\mathcal{Y} \mathcal{Z}$ is the fibre product of the presheaves associated to $\mathcal{X}, \mathcal{Y}, \mathcal{Z}$. \end{lemma} 
\begin{definition} \label{definition-representable-fibred-category} Let $\mathcal{C}$ be a category. A category fibred in groupoids $p : \mathcal{S} \to \mathcal{C}$ is called {\it representable} if there exist an object $X$ of $\mathcal{C}$ and an equivalence $j : \mathcal{S} \to \mathcal{C}/X$ (in the $2$-category of groupoids over $\mathcal{C}$). \end{definition} 
\begin{lemma} \label{lemma-characterize-representable-fibred-category} Let $\mathcal{C}$ be a category. Let $p : \mathcal{S} \to \mathcal{C}$ be a category fibred in groupoids. \begin{enumerate} \item $\mathcal{S}$ is representable if and only if the following conditions are satisfied: \begin{enumerate} \item $\mathcal{S}$ is fibred in setoids, and \item the presheaf $U \mapsto \Ob(\mathcal{S}_U)/\cong$ is representable. \end{enumerate} \item If $\mathcal{S}$ is representable the pair $(X, j)$, where $j$ is the equivalence $j : \mathcal{S} \to \mathcal{C}/X$, is uniquely determined up to isomorphism. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-morphisms-representable-fibred-categories} Let $\mathcal{C}$ be a category. Let $\mathcal{X}$, $\mathcal{Y}$ be categories fibred in groupoids over $\mathcal{C}$. Assume that $\mathcal{X}$, $\mathcal{Y}$ are representable by objects $X$, $Y$ of $\mathcal{C}$. Then $$ \Mor_{\textit{Cat}/\mathcal{C}}(\mathcal{X}, \mathcal{Y}) \Big/ 2\text{-isomorphism} = \Mor_\mathcal{C}(X, Y) $$ More precisely, given $\phi : X \to Y$ there exists a $1$-morphism $f : \mathcal{X} \to \mathcal{Y}$ which induces $\phi$ on isomorphism classes of objects and which is unique up to unique $2$-isomorphism. \end{lemma} 
\begin{lemma}[2-Yoneda lemma for fibred categories] \label{lemma-yoneda-2category-fibred} Let $\mathcal{C}$ be a category. Let $\mathcal{S} \to \mathcal{C}$ be a fibred category over $\mathcal{C}$. Let $U \in \Ob(\mathcal{C})$. The functor $$ \Mor_{\textit{Fib}/\mathcal{C}}(\mathcal{C}/U, \mathcal{S}) \longrightarrow \mathcal{S}_U $$ given by $G \mapsto G(\text{id}_U)$ is an equivalence. \end{lemma} 
\begin{lemma}[2-Yoneda lemma] \label{lemma-yoneda-2category} Let $\mathcal{S}\to \mathcal{C}$ be fibred in groupoids. Let $U \in \Ob(\mathcal{C})$. The functor $$ \Mor_{\textit{Cat}/\mathcal{C}}(\mathcal{C}/U, \mathcal{S}) \longrightarrow \mathcal{S}_U $$ given by $G \mapsto G(\text{id}_U)$ is an equivalence. \end{lemma} 
\begin{lemma} \label{lemma-identify-fibre-product} In the situation above the fibre category of $(\mathcal{C}/U) \times_\mathcal{Y} \mathcal{X}$ over an object $f : V \to U$ of $\mathcal{C}/U$ is the category described as follows: \begin{enumerate} \item objects are pairs $(x, \phi)$, where $x \in \Ob(\mathcal{X}_V)$, and $\phi : f^*y \to F(x)$ is a morphism in $\mathcal{Y}_V$, \item the set of morphisms between $(x, \phi)$ and $(x', \phi')$ is the set of morphisms $\psi : x \to x'$ in $\mathcal{X}_V$ such that $F(\psi) = \phi' \circ \phi^{-1}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-prepare-representable-map-stack-in-groupoids} Let $\mathcal{C}$ be a category. Let $\mathcal{X}$, $\mathcal{Y}$ be categories fibred in groupoids over $\mathcal{C}$. Let $F : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism. Let $G : \mathcal{C}/U \to \mathcal{Y}$ be a $1$-morphism. Then $$ (\mathcal{C}/U) \times_\mathcal{Y} \mathcal{X} \longrightarrow \mathcal{C}/U $$ is a category fibred in groupoids. \end{lemma} 
\begin{definition} \label{definition-representable-map-categories-fibred-in-groupoids} Let $\mathcal{C}$ be a category. Let $\mathcal{X}$, $\mathcal{Y}$ be categories fibred in groupoids over $\mathcal{C}$. Let $F : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism. We say $F$ is {\it representable}, or that {\it $\mathcal{X}$ is relatively representable over $\mathcal{Y}$}, if for every $U \in \Ob(\mathcal{C})$ and any $G : \mathcal{C}/U \to \mathcal{Y}$ the category fibred in groupoids $$ (\mathcal{C}/U) \times_\mathcal{Y} \mathcal{X} \longrightarrow \mathcal{C}/U $$ is representable. \end{definition} 
\begin{lemma} \label{lemma-spell-out-representable-map-stack-in-groupoids} Let $\mathcal{C}$ be a category. Let $\mathcal{X}$, $\mathcal{Y}$ be categories fibred in groupoids over $\mathcal{C}$. Let $F : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism. If $F$ is representable then every one of the functors $$ F_U : \mathcal{X}_U \longrightarrow \mathcal{Y}_U $$ between fibre categories is faithful. \end{lemma} 
\begin{lemma} \label{lemma-criterion-representable-map-stack-in-groupoids} Let $\mathcal{C}$ be a category. Let $\mathcal{X}$, $\mathcal{Y}$ be categories fibred in groupoids over $\mathcal{C}$. Let $F : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism. Make a choice of pullbacks for $\mathcal{Y}$. Assume \begin{enumerate} \item each functor $F_U : \mathcal{X}_U \longrightarrow \mathcal{Y}_U$ between fibre categories is faithful, and \item for each $U$ and each $y \in \mathcal{Y}_U$ the presheaf $$ (f : V \to U) \longmapsto \{(x, \phi) \mid x \in \mathcal{X}_V, \phi : f^*y \to F(x)\}/\cong $$ is a representable presheaf on $\mathcal{C}/U$. \end{enumerate} Then $F$ is representable. \end{lemma} 
\begin{lemma} \label{lemma-representable-diagonal-groupoids} Let $\mathcal{C}$ be a category. Let $\mathcal{S} \to \mathcal{C}$ be a category fibred in groupoids. Assume $\mathcal{C}$ has products of pairs of objects and fibre products. The following are equivalent: \begin{enumerate} \item The diagonal $\mathcal{S} \to \mathcal{S} \times \mathcal{S}$ is representable. \item For every $U$ in $\mathcal{C}$, any $G : \mathcal{C}/U \to \mathcal{S}$ is representable. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-monoidal-category} A triple $(\mathcal{C}, \otimes, \phi)$ where $\mathcal{C}$ is a category, $\otimes : \mathcal{C} \times \mathcal{C} \to \mathcal{C}$ is a functor, and $\phi$ is an associativity constraint is called a {\it monoidal category} if there exists a unit $\mathbf{1}$. \end{definition} 
\begin{definition} \label{definition-functor-monoidal-categories} Let $\mathcal{C}$ and $\mathcal{C}'$ be monoidal categories. A {\it functor of monoidal categories} $F : \mathcal{C} \to \mathcal{C}'$ is given by a functor $F$ as indicated and a isomorphism $$ F(X) \otimes F(Y) \to F(X \otimes Y) $$ functorial in $X$ and $Y$ such that for all objects $X$, $Y$, and $Z$ the diagram $$ \xymatrix{ F(X) \otimes (F(Y) \otimes F(Z)) \ar[r] \ar[d] & F(X) \otimes F(Y \otimes Z) \ar[r] & F(X \otimes (Y \otimes Z)) \ar[d] \\ (F(X) \otimes F(Y)) \otimes F(Z) \ar[r] & F(X \otimes Y) \otimes F(Z) \ar[r] & F((X \otimes Y) \otimes Z) } $$ commutes and such that $F(\mathbf{1})$ is a unit in $\mathcal{C}'$. \end{definition} 
\begin{lemma} \label{lemma-invertible} Let $\mathcal{C}$ be a monoidal category. Let $X$ be an object of $\mathcal{C}$. The following are equivalent \begin{enumerate} \item the functor $L : Y \mapsto X \otimes Y$ is an equivalence, \item the functor $R : Y \mapsto Y \otimes X$ is an equivalence, \item there exists an object $X'$ such that $X \otimes X' \cong X' \otimes X \cong \mathbf{1}$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-invertible} Let $\mathcal{C}$ be a monoidal category. An object $X$ of $\mathcal{C}$ is called {\it invertible} if any (or all) of the equivalent conditions of Lemma \ref{lemma-invertible} hold. \end{definition} 
\begin{definition} \label{definition-dual} Given a monoidal category $(\mathcal{C}, \otimes, \phi)$ and an object $X$ a {\it left dual} is an object $Y$ together with morphisms $\eta : \mathbf{1} \to X \otimes Y$ and $\epsilon : Y \otimes X \to \mathbf{1}$ such that the diagrams $$ \vcenter{ \xymatrix{ X \ar[rd]_1 \ar[r]_-{\eta \otimes 1} & X \otimes Y \otimes X \ar[d]^{1 \otimes \epsilon} \\ & X } } \quad\text{and}\quad \vcenter{ \xymatrix{ Y \ar[rd]_1 \ar[r]_-{1 \otimes \eta} & Y \otimes X \otimes Y \ar[d]^{\epsilon \otimes 1} \\ & Y } } $$ commute. In this situation we say that $X$ is a {\it right dual} of $Y$. \end{definition} 
\begin{lemma} \label{lemma-left-dual} Let $\mathcal{C}$ be a monoidal category. If $Y$ is a left dual to $X$, then $$ \Mor(Z' \otimes X, Z) = \Mor(Z', Z \otimes Y) \quad\text{and}\quad \Mor(Y \otimes Z', Z) = \Mor(Z', X \otimes Z) $$ functorially in $Z$ and $Z'$. \end{lemma} 
\begin{lemma} \label{lemma-tensor-dual} Let $\mathcal{C}$ be a monoidal category. If $Y_i$, $i = 1, 2$ are left duals of $X_i$, $i = 1, 2$, then $Y_2 \otimes Y_1$ is a left dual of $X_1 \otimes X_2$. \end{lemma} 
\begin{definition} \label{definition-symmetric-monoidal-category} A quadruple $(\mathcal{C}, \otimes, \phi, \psi)$ where $\mathcal{C}$ is a category, $\otimes : \mathcal{C} \otimes \mathcal{C} \to \mathcal{C}$ is a functor, $\phi$ is an associativity constraint, and $\psi$ is a commutativity constraint compatible with $\phi$ is called a {\it symmetric monoidal category} if there exists a unit. \end{definition} 
\begin{lemma} \label{lemma-dual-symmetric} Let $(\mathcal{C}, \otimes, \phi, \psi)$ be a symmetric monoidal category. Let $X$ be an object of $\mathcal{C}$ and let $Y$, $\eta : \mathbf{1} \to X \otimes Y$, and $\epsilon : Y \otimes X \to \mathbf{1}$ be a left dual of $X$ as in Definition \ref{definition-dual}. Then $\eta' = \psi \circ \eta : \mathbf{1} \to Y \otimes X$ and $\epsilon' = \epsilon \circ \psi : X \otimes Y \to \mathbf{1}$ makes $X$ into a left dual of $Y$. \end{lemma} 
\begin{definition} \label{definition-functor-symmetric-monoidal-categories} Let $\mathcal{C}$ and $\mathcal{C}'$ be symmetric monoidal categories. A {\it functor of symmetric monoidal categories} $F : \mathcal{C} \to \mathcal{C}'$ is given by a functor $F$ as indicated and an isomorphism $$ F(X) \otimes F(Y) \to F(X \otimes Y) $$ functorial in $X$ and $Y$ such that $F$ is a functor of monoidal categories and such that for all objects $X$ and $Y$ the diagram $$ \xymatrix{ F(X) \otimes F(Y) \ar[r] \ar[d] & F(X \otimes Y) \ar[d] \\ F(Y) \otimes F(X) \ar[r] & F(Y \otimes X) } $$ commutes. \end{definition} 
\begin{definition} \label{definition-dotted-arrows} Let $\mathcal{C}$ be a $(2,1)$-category. Consider a $2$-commutative  solid diagram \begin{equation} \label{equation-dotted-arrows} \vcenter{ \xymatrix{ S \ar[r]_-x \ar[d]_j & X \ar[d]^f \\ T \ar[r]^-y \ar@{..>}[ru] & Y } } \end{equation} in $\mathcal{C}$. Fix a $2$-isomorphism  $$ \gamma : y \circ j \rightarrow f \circ x $$ witnessing the $2$-commutativity of the diagram. Given (\ref{equation-dotted-arrows}) and $\gamma$, a \emph{dotted arrow}  is a triple $(a, \alpha, \beta)$ consisting of a morphism  $a \colon T \to X$ and and $2$-isomorphisms $\alpha : a \circ j \to x$, $\beta : y \to f \circ a$ such that $\gamma = (\text{id}_f \star \alpha) \circ (\beta \star \text{id}_j)$, in other words such that $$ \xymatrix{ & f \circ a \circ j \ar[rd]^{\text{id}_f \star \alpha} \\ y \circ j \ar[ru]^{\beta \star \text{id}_j} \ar[rr]^\gamma & & f \circ x } $$ is commutative. A {\it morphism of dotted arrows} $(a, \alpha, \beta) \to (a', \alpha', \beta')$ is a $2$-arrow $\theta : a \to a'$ such that $\alpha = \alpha' \circ (\theta \star \text{id}_j)$ and $\beta' = (\text{id}_f \star \theta) \circ \beta$. \end{definition} 
\begin{lemma} \label{lemma-cat-dotted-arrows-base-change} Let $\mathcal{C}$ be a $(2,1)$-category. Assume given a $2$-commutative diagram $$ \xymatrix{ S \ar[r]_-{x'} \ar[d]_j & X' \ar[d]^p \ar[r]_q & X \ar[d]^f \\ T \ar[r]^-{y'} & Y' \ar[r]^g & Y } $$ in $\mathcal{C}$, where the right square is $2$-cartesian  with respect to a $2$-isomorphism $\phi \colon g \circ p \to f \circ q$.  Choose a $2$-arrow $\gamma' : y' \circ j \to p \circ x'$. Set $x = q \circ x'$, $y = g \circ y'$ and let $\gamma : y \circ j \to f \circ x$ be the $2$-isomorphism  $\gamma = (\phi \star \text{id}_{x'}) \circ (\text{id}_g \star \gamma')$.  Then the category $\mathcal{D}'$ of dotted arrows for the left square and $\gamma'$ is equivalent to the category  $\mathcal{D}$ of dotted arrows for the outer rectangle and $\gamma$. \end{lemma} 
\begin{lemma} \label{lemma-cat-dotted-arrows-composition} Let $\mathcal{C}$ be a $(2,1)$-category. Assume given a solid $2$-commutative diagram $$ \xymatrix{ S \ar[r]_-x \ar[dd]_j & X \ar[d]^f \\ & Y \ar[d]^g \\ T \ar[r]^-z \ar@{..>}[ruu] & Z } $$ in $\mathcal{C}$.  Choose a $2$-isomorphism $\gamma \colon z \circ j \to g \circ f \circ x$.  Let $\mathcal{D}$ be the category of dotted arrows for  the outer rectangle and $\gamma$. Let $\mathcal{D}'$ be  the category of dotted arrows for the solid square $$ \xymatrix{ S \ar[r]_-{f \circ x} \ar[d]_j & Y \ar[d]^g \\ T \ar[r]^-z \ar@{..>}[ru] & Z } $$ and $\gamma$. Then $\mathcal{D}$ is equivalent to  a category $\mathcal{D}''$ which has the following property:  there is a functor $\mathcal{D}'' \to \mathcal{D}'$ which turns $\mathcal{D}''$ into a category fibred in groupoids over $\mathcal{D}'$ and whose fibre categories are isomorphic to categories of dotted arrows for certain solid squares of the form $$ \xymatrix{ S \ar[r]_-x \ar[d]_j & X \ar[d]^f \\ T \ar[r]^-y \ar@{..>}[ru] & Y } $$ and some choices of $2$-isomorphism $y \circ j \to f \circ x$. \end{lemma} 
