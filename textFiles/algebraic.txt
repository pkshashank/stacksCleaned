\begin{lemma} \label{lemma-morphism-schemes-gives-representable-transformation} Let $f : X \to Y$ be a morphism of $(\Sch/S)_{fppf}$. Then the $1$-morphism induced by $f$ $$ (\Sch/X)_{fppf} \longrightarrow (\Sch/Y)_{fppf} $$ is a representable $1$-morphism. \end{lemma} 
\begin{lemma} \label{lemma-representable-morphism-equivalent} Let $S$ be an object of $\Sch_{fppf}$. Consider a $2$-commutative diagram $$ \xymatrix{ \mathcal{X}' \ar[r] \ar[d]_{f'} & \mathcal{X} \ar[d]^f \\ \mathcal{Y}' \ar[r] & \mathcal{Y} } $$ of $1$-morphisms of categories fibred in groupoids over $(\Sch/S)_{fppf}$. Assume the horizontal arrows are equivalences. Then $f$ is representable if and only if $f'$ is representable. \end{lemma} 
\begin{lemma} \label{lemma-composition-representable-transformations} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}, \mathcal{Y}, \mathcal{Z}$ be categories fibred in groupoids over $(\Sch/S)_{fppf}$ Let $f : \mathcal{X} \to \mathcal{Y}$, $g : \mathcal{Y} \to \mathcal{Z}$ be representable $1$-morphisms. Then $$ g \circ f : \mathcal{X} \longrightarrow \mathcal{Z} $$ is a representable $1$-morphism. \end{lemma} 
\begin{lemma} \label{lemma-base-change-representable-transformations} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}, \mathcal{Y}, \mathcal{Z}$ be categories fibred in groupoids over $(\Sch/S)_{fppf}$ Let $f : \mathcal{X} \to \mathcal{Y}$ be a representable $1$-morphism. Let $g : \mathcal{Z} \to \mathcal{Y}$ be any $1$-morphism. Consider the fibre product diagram $$ \xymatrix{ \mathcal{Z} \times_{g, \mathcal{Y}, f} \mathcal{X} \ar[r]_-{g'} \ar[d]_{f'} & \mathcal{X} \ar[d]^f \\ \mathcal{Z} \ar[r]^g & \mathcal{Y} } $$ Then the base change $f'$ is a representable $1$-morphism. \end{lemma} 
\begin{lemma} \label{lemma-product-representable-transformations} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}_i, \mathcal{Y}_i$ be categories fibred in groupoids over $(\Sch/S)_{fppf}$, $i = 1, 2$. Let $f_i : \mathcal{X}_i \to \mathcal{Y}_i$, $i = 1, 2$ be representable $1$-morphisms. Then $$ f_1 \times f_2 : \mathcal{X}_1 \times \mathcal{X}_2 \longrightarrow \mathcal{Y}_1 \times \mathcal{Y}_2 $$ is a representable $1$-morphism. \end{lemma} 
\begin{definition} \label{definition-representable-by-algebraic-space} Let $S$ be a scheme contained in $\Sch_{fppf}$. A category fibred in groupoids $p : \mathcal{X} \to (\Sch/S)_{fppf}$ is called {\it representable by an algebraic space over $S$} if there exists an algebraic space $F$ over $S$ and an equivalence $j : \mathcal{X} \to \mathcal{S}_F$ of categories over $(\Sch/S)_{fppf}$. \end{definition} 
\begin{lemma} \label{lemma-characterize-representable-by-space} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $p : \mathcal{X} \to (\Sch/S)_{fppf}$ be a category fibred in groupoids. Then $\mathcal{X}$ is representable by an algebraic space over $S$ if and only if the following conditions are satisfied: \begin{enumerate} \item $\mathcal{X}$ is fibred in setoids\footnote{This means that it is fibred in groupoids and objects in the fibre categories have no nontrivial automorphisms, see Categories, Definition \ref{categories-definition-category-fibred-setoids}.}, and \item the presheaf $U \mapsto \Ob(\mathcal{X}_U)/\!\!\cong$ is an algebraic space. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-representable-by-algebraic-spaces} Let $S$ be a scheme contained in $\Sch_{fppf}$. A $1$-morphism $f : \mathcal{X} \to \mathcal{Y}$ of categories fibred in groupoids over $(\Sch/S)_{fppf}$ is called {\it representable by algebraic spaces} if for any $U \in \Ob((\Sch/S)_{fppf})$ and any $y : (\Sch/U)_{fppf} \to \mathcal{Y}$ the category fibred in groupoids $$ (\Sch/U)_{fppf} \times_{y, \mathcal{Y}} \mathcal{X} $$ over $(\Sch/U)_{fppf}$ is representable by an algebraic space over $U$. \end{definition} 
\begin{lemma} \label{lemma-criterion-map-representable-spaces-fibred-in-groupoids} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of categories fibred in groupoids over $(\Sch/S)_{fppf}$. The following are necessary and sufficient conditions for $f$ to be representable by algebraic spaces: \begin{enumerate} \item for each scheme $U/S$ the functor $f_U : \mathcal{X}_U \longrightarrow \mathcal{Y}_U$ between fibre categories is faithful, and \item for each $U$ and each $y \in \Ob(\mathcal{Y}_U)$ the presheaf $$ (h : V \to U) \longmapsto \{(x, \phi) \mid x \in \Ob(\mathcal{X}_V), \phi : h^*y \to f(x)\}/\cong $$ is an algebraic space over $U$. \end{enumerate} Here we have made a choice of pullbacks for $\mathcal{Y}$. \end{lemma} 
\begin{lemma} \label{lemma-representable-by-spaces-morphism-equivalent} Let $S$ be an object of $\Sch_{fppf}$. Consider a $2$-commutative diagram $$ \xymatrix{ \mathcal{X}' \ar[r] \ar[d]_{f'} & \mathcal{X} \ar[d]^f \\ \mathcal{Y}' \ar[r] & \mathcal{Y} } $$ of $1$-morphisms of categories fibred in groupoids over $(\Sch/S)_{fppf}$. Assume the horizontal arrows are equivalences. Then $f$ is representable by algebraic spaces if and only if $f'$ is representable by algebraic spaces. \end{lemma} 
\begin{lemma} \label{lemma-morphism-spaces-gives-representable-by-spaces} Let $S$ be an object of $\Sch_{fppf}$. Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of categories fibred in groupoids over $S$. If $\mathcal{X}$ and $\mathcal{Y}$ are representable by algebraic spaces over $S$, then the $1$-morphism $f$ is representable by algebraic spaces. \end{lemma} 
\begin{lemma} \label{lemma-map-presheaves-representable-by-algebraic-spaces} Let $S$ be an object of $\Sch_{fppf}$. Let $a : F \to G$ be a map of presheaves of sets on $(\Sch/S)_{fppf}$. Denote $a' : \mathcal{S}_F  \to \mathcal{S}_G$ the associated map of categories fibred in sets. Then $a$ is representable by algebraic spaces (see Bootstrap, Definition \ref{bootstrap-definition-morphism-representable-by-spaces}) if and only if $a'$ is representable by algebraic spaces. \end{lemma} 
\begin{lemma} \label{lemma-map-fibred-setoids-representable-algebraic-spaces} Let $S$ be an object of $\Sch_{fppf}$. Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of categories fibred in setoids over $(\Sch/S)_{fppf}$. Let $F$, resp.\ $G$ be the presheaf which to $T$ associates the set of isomorphism classes of objects of $\mathcal{X}_T$, resp.\ $\mathcal{Y}_T$. Let $a : F \to G$ be the map of presheaves corresponding to $f$. Then $a$ is representable by algebraic spaces (see Bootstrap, Definition \ref{bootstrap-definition-morphism-representable-by-spaces}) if and only if $f$ is representable by algebraic spaces. \end{lemma} 
\begin{lemma} \label{lemma-base-change-representable-by-spaces} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}, \mathcal{Y}, \mathcal{Z}$ be categories fibred in groupoids over $(\Sch/S)_{fppf}$. Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism representable by algebraic spaces. Let $g : \mathcal{Z} \to \mathcal{Y}$ be any $1$-morphism. Consider the fibre product diagram $$ \xymatrix{ \mathcal{Z} \times_{g, \mathcal{Y}, f} \mathcal{X} \ar[r]_-{g'} \ar[d]_{f'} & \mathcal{X} \ar[d]^f \\ \mathcal{Z} \ar[r]^g & \mathcal{Y} } $$ Then the base change $f'$ is a $1$-morphism representable by algebraic spaces. \end{lemma} 
\begin{lemma} \label{lemma-base-change-by-space-representable-by-space} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}, \mathcal{Y}, \mathcal{Z}$ be categories fibred in groupoids over $(\Sch/S)_{fppf}$ Let $f : \mathcal{X} \to \mathcal{Y}$, $g : \mathcal{Z} \to \mathcal{Y}$ be $1$-morphisms. Assume \begin{enumerate} \item $f$ is representable by algebraic spaces, and \item $\mathcal{Z}$ is representable by an algebraic space over $S$. \end{enumerate} Then the $2$-fibre product $\mathcal{Z} \times_{g, \mathcal{Y}, f} \mathcal{X}$ is representable by an algebraic space. \end{lemma} 
\begin{lemma} \label{lemma-composition-representable-by-spaces} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}, \mathcal{Y}, \mathcal{Z}$ be categories fibred in groupoids over $(\Sch/S)_{fppf}$. If $f : \mathcal{X} \to \mathcal{Y}$, $g : \mathcal{Y} \to \mathcal{Z}$ are $1$-morphisms representable by algebraic spaces, then $$ g \circ f : \mathcal{X} \longrightarrow \mathcal{Z} $$ is a $1$-morphism representable by algebraic spaces. \end{lemma} 
\begin{lemma} \label{lemma-product-representable-by-spaces} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}_i, \mathcal{Y}_i$ be categories fibred in groupoids over $(\Sch/S)_{fppf}$, $i = 1, 2$. Let $f_i : \mathcal{X}_i \to \mathcal{Y}_i$, $i = 1, 2$ be $1$-morphisms representable by algebraic spaces. Then $$ f_1 \times f_2 : \mathcal{X}_1 \times \mathcal{X}_2 \longrightarrow \mathcal{Y}_1 \times \mathcal{Y}_2 $$ is a $1$-morphism representable by algebraic spaces. \end{lemma} 
\begin{lemma} \label{lemma-get-a-stack} \begin{reference} Lemma in an email of Matthew Emerton dated June 15, 2016 \end{reference} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X} \to \mathcal{Z}$ and $\mathcal{Y} \to \mathcal{Z}$ be $1$-morphisms of categories fibred in groupoids over $(\Sch/S)_{fppf}$. If $\mathcal{X} \to \mathcal{Z}$ is representable by algebraic spaces and $\mathcal{Y}$ is a stack in groupoids, then $\mathcal{X} \times_\mathcal{Z} \mathcal{Y}$ is a stack in groupoids. \end{lemma} 
\begin{definition} \label{definition-relative-representable-property} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of categories fibred in groupoids over $(\Sch/S)_{fppf}$. Assume $f$ is representable by algebraic spaces. Let $\mathcal{P}$ be a property of morphisms of algebraic spaces which \begin{enumerate} \item is preserved under any base change, and \item is fppf local on the base, see Descent on Spaces, Definition \ref{spaces-descent-definition-property-morphisms-local}. \end{enumerate} In this case we say that $f$ has {\it property $\mathcal{P}$} if for every $U \in \Ob((\Sch/S)_{fppf})$ and any $y \in \mathcal{Y}_U$ the resulting morphism of algebraic spaces $f_y : F_y \to U$, see diagram (\ref{equation-representable-by-algebraic-spaces}), has property $\mathcal{P}$. \end{definition} 
\begin{lemma} \label{lemma-property-morphism-equivalent} Let $S$ be an object of $\Sch_{fppf}$. Let $\mathcal{P}$ be as in Definition \ref{definition-relative-representable-property}. Consider a $2$-commutative diagram $$ \xymatrix{ \mathcal{X}' \ar[r] \ar[d]_{f'} & \mathcal{X} \ar[d]^f \\ \mathcal{Y}' \ar[r] & \mathcal{Y} } $$ of $1$-morphisms of categories fibred in groupoids over $(\Sch/S)_{fppf}$. Assume the horizontal arrows are equivalences and $f$ (or equivalently $f'$) is representable by algebraic spaces. Then $f$ has $\mathcal{P}$ if and only if $f'$ has $\mathcal{P}$. \end{lemma} 
\begin{lemma} \label{lemma-map-presheaves-representable-by-spaces-transformation-property} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $a : F \to G$ be a map of presheaves on $(\Sch/S)_{fppf}$. Let $\mathcal{P}$ be as in Definition \ref{definition-relative-representable-property}. Assume $a$ is representable by algebraic spaces. Then $a : F \to G$ has property $\mathcal{P}$ (see Bootstrap, Definition \ref{bootstrap-definition-property-transformation}) if and only if the corresponding morphism $\mathcal{S}_F \to \mathcal{S}_G$ of categories fibred in groupoids has property $\mathcal{P}$. \end{lemma} 
\begin{lemma} \label{lemma-map-fibred-setoids-property} Let $S$ be an object of $\Sch_{fppf}$. Let $\mathcal{P}$ be as in Definition \ref{definition-relative-representable-property}. Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of categories fibred in setoids over $(\Sch/S)_{fppf}$. Let $F$, resp.\ $G$ be the presheaf which to $T$ associates the set of isomorphism classes of objects of $\mathcal{X}_T$, resp.\ $\mathcal{Y}_T$. Let $a : F \to G$ be the map of presheaves corresponding to $f$. Then $a$ has $\mathcal{P}$ if and only if $f$ has $\mathcal{P}$. \end{lemma} 
\begin{lemma} \label{lemma-composition-representable-transformations-property} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}$, $\mathcal{Y}$, $\mathcal{Z}$ be categories fibred in groupoids over $(\Sch/S)_{fppf}$. Let $\mathcal{P}$ be a property as in Definition \ref{definition-relative-representable-property} which is stable under composition. Let $f : \mathcal{X} \to \mathcal{Y}$, $g : \mathcal{Y} \to \mathcal{Z}$ be $1$-morphisms which are representable by algebraic spaces. If $f$ and $g$ have property $\mathcal{P}$ so does $g \circ f : \mathcal{X} \to \mathcal{Z}$. \end{lemma} 
\begin{lemma} \label{lemma-base-change-representable-transformations-property} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}, \mathcal{Y}, \mathcal{Z}$ be categories fibred in groupoids over $(\Sch/S)_{fppf}$. Let $\mathcal{P}$ be a property as in Definition \ref{definition-relative-representable-property}. Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism representable by algebraic spaces. Let $g : \mathcal{Z} \to \mathcal{Y}$ be any $1$-morphism. Consider the $2$-fibre product diagram $$ \xymatrix{ \mathcal{Z} \times_{g, \mathcal{Y}, f} \mathcal{X} \ar[r]_-{g'} \ar[d]_{f'} & \mathcal{X} \ar[d]^f \\ \mathcal{Z} \ar[r]^g & \mathcal{Y} } $$ If $f$ has $\mathcal{P}$, then the base change $f'$ has $\mathcal{P}$. \end{lemma} 
\begin{lemma} \label{lemma-descent-representable-transformations-property} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}, \mathcal{Y}, \mathcal{Z}$ be categories fibred in groupoids over $(\Sch/S)_{fppf}$. Let $\mathcal{P}$ be a property as in Definition \ref{definition-relative-representable-property}. Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism representable by algebraic spaces. Let $g : \mathcal{Z} \to \mathcal{Y}$ be any $1$-morphism. Consider the fibre product diagram $$ \xymatrix{ \mathcal{Z} \times_{g, \mathcal{Y}, f} \mathcal{X} \ar[r]_-{g'} \ar[d]_{f'} & \mathcal{X} \ar[d]^f \\ \mathcal{Z} \ar[r]^g & \mathcal{Y} } $$ Assume that for every scheme $U$ and object $x$ of $\mathcal{Y}_U$, there exists an fppf covering $\{U_i \to U\}$ such that $x|_{U_i}$ is in the essential image of the functor $g : \mathcal{Z}_{U_i} \to \mathcal{Y}_{U_i}$. In this case, if $f'$ has $\mathcal{P}$, then $f$ has $\mathcal{P}$. \end{lemma} 
\begin{lemma} \label{lemma-product-representable-transformations-property} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{P}$ be a property as in Definition \ref{definition-relative-representable-property} which is stable under composition. Let $\mathcal{X}_i, \mathcal{Y}_i$ be categories fibred in groupoids over $(\Sch/S)_{fppf}$, $i = 1, 2$. Let $f_i : \mathcal{X}_i \to \mathcal{Y}_i$, $i = 1, 2$ be $1$-morphisms representable by algebraic spaces. If $f_1$ and $f_2$ have property $\mathcal{P}$ so does $ f_1 \times f_2 : \mathcal{X}_1 \times \mathcal{X}_2 \to \mathcal{Y}_1 \times \mathcal{Y}_2 $. \end{lemma} 
\begin{lemma} \label{lemma-representable-transformations-property-implication} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}$, $\mathcal{Y}$ be categories fibred in groupoids over $(\Sch/S)_{fppf}$. Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism representable by algebraic spaces. Let $\mathcal{P}$, $\mathcal{P}'$ be properties as in Definition \ref{definition-relative-representable-property}. Suppose that for any morphism of algebraic spaces $a : F \to G$ we have $\mathcal{P}(a) \Rightarrow \mathcal{P}'(a)$. If $f$ has property $\mathcal{P}$ then $f$ has property $\mathcal{P}'$. \end{lemma} 
\begin{lemma} \label{lemma-open-fibred-category-is-full} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $j : \mathcal X \to \mathcal Y$ be a $1$-morphism of categories fibred in groupoids over $(\Sch/S)_{fppf}$. Assume $j$ is representable by algebraic spaces and a monomorphism (see Definition \ref{definition-relative-representable-property} and Descent on Spaces, Lemma \ref{spaces-descent-lemma-descending-property-monomorphism}). Then $j$ is fully faithful on fibre categories. \end{lemma} 
\begin{lemma} \label{lemma-representable-diagonal} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}$ be a category fibred in groupoids over $(\Sch/S)_{fppf}$. The following are equivalent: \begin{enumerate} \item the diagonal $\mathcal{X} \to \mathcal{X} \times \mathcal{X}$ is representable by algebraic spaces, \item for every scheme $U$ over $S$, and any $x, y \in \Ob(\mathcal{X}_U)$ the sheaf $\mathit{Isom}(x, y)$ is an algebraic space over $U$, \item for every scheme $U$ over $S$, and any $x \in \Ob(\mathcal{X}_U)$ the associated $1$-morphism $x : (\Sch/U)_{fppf} \to \mathcal{X}$ is representable by algebraic spaces, \item for every pair of schemes $T_1, T_2$ over $S$, and any $x_i \in \Ob(\mathcal{X}_{T_i})$, $i = 1, 2$ the $2$-fibre product $(\Sch/T_1)_{fppf} \times_{x_1, \mathcal{X}, x_2} (\Sch/T_2)_{fppf}$ is representable by an algebraic space, \item for every representable category fibred in groupoids $\mathcal{U}$ over $(\Sch/S)_{fppf}$ every $1$-morphism $\mathcal{U} \to \mathcal{X}$ is representable by algebraic spaces, \item for every pair $\mathcal{T}_1, \mathcal{T}_2$ of representable categories fibred in groupoids over $(\Sch/S)_{fppf}$ and any $1$-morphisms $x_i : \mathcal{T}_i \to \mathcal{X}$, $i = 1, 2$ the $2$-fibre product $\mathcal{T}_1 \times_{x_1, \mathcal{X}, x_2} \mathcal{T}_2$ is representable by an algebraic space, \item for every category fibred in groupoids $\mathcal{U}$ over $(\Sch/S)_{fppf}$ which is representable by an algebraic space every $1$-morphism $\mathcal{U} \to \mathcal{X}$ is representable by algebraic spaces, \item for every pair $\mathcal{T}_1, \mathcal{T}_2$ of categories fibred in groupoids over $(\Sch/S)_{fppf}$ which are representable by algebraic spaces, and any $1$-morphisms $x_i : \mathcal{T}_i \to \mathcal{X}$ the $2$-fibre product $\mathcal{T}_1 \times_{x_1, \mathcal{X}, x_2} \mathcal{T}_2$ is representable by an algebraic space. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-algebraic-stack} Let $S$ be a base scheme contained in $\Sch_{fppf}$. An {\it algebraic stack over $S$} is a category $$ p : \mathcal{X} \to (\Sch/S)_{fppf} $$ over $(\Sch/S)_{fppf}$ with the following properties: \begin{enumerate} \item The category $\mathcal{X}$ is a stack in groupoids over $(\Sch/S)_{fppf}$. \item The diagonal $\Delta : \mathcal{X} \to \mathcal{X} \times \mathcal{X}$ is representable by algebraic spaces. \item There exists a scheme $U \in \Ob((\Sch/S)_{fppf})$ and a $1$-morphism $(\Sch/U)_{fppf} \to \mathcal{X}$ which is surjective and smooth\footnote{In future chapters we will denote this simply $U \to \mathcal{X}$ as is customary in the literature. Another good alternative would be to formulate this condition as the existence of a representable category fibred in groupoids $\mathcal{U}$ and a surjective smooth $1$-morphism $\mathcal{U} \to \mathcal{X}$.}. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-deligne-mumford} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}$ be an algebraic stack over $S$. We say $\mathcal{X}$ is a {\it Deligne-Mumford stack} if there exists a scheme $U$ and a surjective \'etale morphism $(\Sch/U)_{fppf} \to \mathcal{X}$. \end{definition} 
\begin{definition} \label{definition-morphism-algebraic-stacks} Let $S$ be a scheme contained in $\Sch_{fppf}$. The {\it $2$-category of algebraic stacks over $S$} is the sub $2$-category of the $2$-category of categories fibred in groupoids over $(\Sch/S)_{fppf}$ (see Categories, Definition \ref{categories-definition-categories-fibred-in-groupoids-over-C}) defined as follows: \begin{enumerate} \item Its objects are those categories fibred in groupoids over $(\Sch/S)_{fppf}$ which are algebraic stacks over $S$. \item Its $1$-morphisms $f : \mathcal{X} \to \mathcal{Y}$ are any functors of categories over $(\Sch/S)_{fppf}$, as in Categories, Definition \ref{categories-definition-categories-over-C}. \item Its $2$-morphisms are transformations between functors over $(\Sch/S)_{fppf}$, as in Categories, Definition \ref{categories-definition-categories-over-C}. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-equivalent} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}$, $\mathcal{Y}$ be categories over $(\Sch/S)_{fppf}$. Assume $\mathcal{X}$, $\mathcal{Y}$ are equivalent as categories over $(\Sch/S)_{fppf}$. Then $\mathcal{X}$ is an algebraic stack if and only if $\mathcal{Y}$ is an algebraic stack. Similarly, $\mathcal{X}$ is a Deligne-Mumford stack if and only if $\mathcal{Y}$ is a Deligne-Mumford stack. \end{lemma} 
\begin{lemma} \label{lemma-representable-algebraic} Let $S$ be a scheme contained in $\Sch_{fppf}$. \begin{enumerate} \item A category fibred in groupoids $p : \mathcal{X} \to (\Sch/S)_{fppf}$ which is representable by an algebraic space is a Deligne-Mumford stack. \item If $F$ is an algebraic space over $S$, then the associated category fibred in groupoids $p : \mathcal{S}_F \to (\Sch/S)_{fppf}$ is a Deligne-Mumford stack. \item If $X \in \Ob((\Sch/S)_{fppf})$, then $(\Sch/X)_{fppf} \to (\Sch/S)_{fppf}$ is a Deligne-Mumford stack. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-algebraic-stack-no-automorphisms} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}$ be an algebraic stack over $S$. The following are equivalent \begin{enumerate} \item $\mathcal{X}$ is a Deligne-Mumford stack and is a stack in setoids, \item $\mathcal{X}$ is a Deligne-Mumford stack such that the canonical $1$-morphism $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is an equivalence, and \item $\mathcal{X}$ is representable by an algebraic space. \end{enumerate} \end{lemma} 
\begin{proposition} \label{proposition-algebraic-stack-no-automorphisms} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}$ be an algebraic stack over $S$. The following are equivalent \begin{enumerate} \item $\mathcal{X}$ is a stack in setoids, \item the canonical $1$-morphism $\mathcal{I}_\mathcal{X} \to \mathcal{X}$ is an equivalence, and \item $\mathcal{X}$ is representable by an algebraic space. \end{enumerate} \end{proposition} 
\begin{lemma} \label{lemma-product-spaces} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}$, $\mathcal{Y}$ be algebraic stacks over $S$. Then $\mathcal{X} \times_{(\Sch/S)_{fppf}} \mathcal{Y}$ is an algebraic stack, and is a product in the $2$-category of algebraic stacks over $S$. \end{lemma} 
\begin{lemma} \label{lemma-2-fibre-product-general} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{Z}$ be a stack in groupoids over $(\Sch/S)_{fppf}$ whose diagonal is representable by algebraic spaces. Let $\mathcal{X}$, $\mathcal{Y}$ be algebraic stacks over $S$. Let $f : \mathcal{X} \to \mathcal{Z}$, $g : \mathcal{Y} \to \mathcal{Z}$ be $1$-morphisms of stacks in groupoids. Then the $2$-fibre product $\mathcal{X} \times_{f, \mathcal{Z}, g} \mathcal{Y}$ is an algebraic stack. \end{lemma} 
\begin{lemma} \label{lemma-2-fibre-product} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}, \mathcal{Y}, \mathcal{Z}$ be algebraic stacks over $S$. Let $f : \mathcal{X} \to \mathcal{Z}$, $g : \mathcal{Y} \to \mathcal{Z}$ be $1$-morphisms of algebraic stacks. Then the $2$-fibre product $\mathcal{X} \times_{f, \mathcal{Z}, g} \mathcal{Y}$ is an algebraic stack. It is also the $2$-fibre product in the $2$-category of algebraic stacks over $(\Sch/S)_{fppf}$. \end{lemma} 
\begin{lemma} \label{lemma-lift-morphism-presentations} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of algebraic stacks over $S$. Let $V \in \Ob((\Sch/S)_{fppf})$. Let $y : (\Sch/V)_{fppf} \to \mathcal{Y}$ be surjective and smooth. Then there exists an object $U \in \Ob((\Sch/S)_{fppf})$ and a $2$-commutative diagram $$ \xymatrix{ (\Sch/U)_{fppf} \ar[r]_a \ar[d]_x & (\Sch/V)_{fppf} \ar[d]^y \\ \mathcal{X} \ar[r]^f & \mathcal{Y} } $$ with $x$ surjective and smooth. \end{lemma} 
\begin{lemma} \label{lemma-characterize-representable-by-algebraic-spaces} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of algebraic stacks over $S$. The following are equivalent: \begin{enumerate} \item for $U \in \Ob((\Sch/S)_{fppf})$ the functor $f : \mathcal{X}_U \to \mathcal{Y}_U$ is faithful, \item the functor $f$ is faithful, and \item $f$ is representable by algebraic spaces. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-smooth-surjective-morphism-implies-algebraic} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $u : \mathcal{U} \to \mathcal{X}$ be a $1$-morphism of stacks in groupoids over $(\Sch/S)_{fppf}$. If \begin{enumerate} \item $\mathcal{U}$ is representable by an algebraic space, and \item $u$ is representable by algebraic spaces, surjective and smooth, \end{enumerate} then $\mathcal X$ is an algebraic stack over $S$. \end{lemma} 
\begin{lemma} \label{lemma-representable-morphism-to-algebraic} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X} \to \mathcal{Y}$ be a morphism of stacks in groupoids over $(\Sch/S)_{fppf}$. Assume that \begin{enumerate} \item $\mathcal{X} \to \mathcal{Y}$ is representable by algebraic spaces, and \item $\mathcal{Y}$ is an algebraic stack over $S$. \end{enumerate} Then $\mathcal{X}$ is an algebraic stack over $S$. \end{lemma} 
\begin{lemma} \label{lemma-open-fibred-category-is-algebraic} \begin{reference} Removing the hypothesis that $j$ is a monomorphism was observed in an email from Matthew Emerton dates June 15, 2016 \end{reference} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $j : \mathcal X \to \mathcal Y$ be a $1$-morphism of categories fibred in groupoids over $(\Sch/S)_{fppf}$. Assume $j$ is representable by algebraic spaces. Then, if $\mathcal{Y}$ is a stack in groupoids (resp.\ an algebraic stack), so is $\mathcal{X}$. \end{lemma} 
\begin{lemma} \label{lemma-map-space-into-stack} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}$ be an algebraic stack over $S$. Let $\mathcal{U}$ be an algebraic stack over $S$ which is representable by an algebraic space. Let $f : \mathcal{U} \to \mathcal{X}$ be a 1-morphism. Then \begin{enumerate} \item the $2$-fibre product $\mathcal{R} = \mathcal{U} \times_{f, \mathcal{X}, f} \mathcal{U}$ is representable by an algebraic space, \item there is a canonical equivalence $$ \mathcal{U} \times_{f, \mathcal{X}, f} \mathcal{U} \times_{f, \mathcal{X}, f} \mathcal{U} = \mathcal{R} \times_{\text{pr}_1, \mathcal{U}, \text{pr}_0} \mathcal{R}, $$ \item the projection $\text{pr}_{02}$ induces via (2) a $1$-morphism $$ \text{pr}_{02} : \mathcal{R} \times_{\text{pr}_1, \mathcal{U}, \text{pr}_0} \mathcal{R} \longrightarrow \mathcal{R} $$ \item let $U$, $R$ be the algebraic spaces representing $\mathcal{U}, \mathcal{R}$ and $t, s : R \to U$ and $c : R \times_{s, U, t} R \to R$ are the morphisms corresponding to the $1$-morphisms $\text{pr}_0, \text{pr}_1 : \mathcal{R} \to \mathcal{U}$ and $\text{pr}_{02} : \mathcal{R} \times_{\text{pr}_1, \mathcal{U}, \text{pr}_0} \mathcal{R} \to \mathcal{R}$ above, then the quintuple $(U, R, s, t, c)$ is a groupoid in algebraic spaces over $S$, \item the morphism $f$ induces a canonical $1$-morphism $f_{can} : [U/R] \to \mathcal{X}$ of stacks in groupoids over $(\Sch/S)_{fppf}$, and \item the $1$-morphism $f_{can} : [U/R] \to \mathcal{X}$ is fully faithful. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-stack-presentation} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $\mathcal{X}$ be an algebraic stack over $S$. Let $U$ be an algebraic space over $S$. Let $f : \mathcal{S}_U \to \mathcal{X}$ be a surjective smooth morphism. Let $(U, R, s, t, c)$ be the groupoid in algebraic spaces and $f_{can} : [U/R] \to \mathcal{X}$ be the result of applying Lemma \ref{lemma-map-space-into-stack} to $U$ and $f$. Then \begin{enumerate} \item the morphisms $s$, $t$ are smooth, and \item the $1$-morphism $f_{can} : [U/R] \to \mathcal{X}$ is an equivalence. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-smooth-groupoid} Let $S$ be a scheme. Let $B$ be an algebraic space over $S$. Let $(U, R, s, t, c)$ be a groupoid in algebraic spaces over $B$. We say $(U, R, s, t, c)$ is a {\it smooth groupoid}\footnote{This terminology might be a bit confusing: it does not imply that $[U/R]$ is smooth over anything.} if $s, t : R \to U$ are smooth morphisms of algebraic spaces. \end{definition} 
\begin{definition} \label{definition-presentation} Let $\mathcal{X}$ be an algebraic stack over $S$. A {\it presentation} of $\mathcal{X}$ is given by a smooth groupoid $(U, R, s, t, c)$ in algebraic spaces over $S$, and an equivalence $f : [U/R] \to \mathcal{X}$. \end{definition} 
\begin{lemma} \label{lemma-diagonal-quotient-stack} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $(U, R, s, t, c)$ be a groupoid in algebraic spaces over $S$. Then the diagonal of $[U/R]$ is representable by algebraic spaces. \end{lemma} 
\begin{lemma} \label{lemma-smooth-quotient-smooth-presentation} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $(U, R, s, t, c)$ be a smooth groupoid in algebraic spaces over $S$. Then the morphism $\mathcal{S}_U \to [U/R]$ is smooth and surjective. \end{lemma} 
\begin{theorem} \label{theorem-smooth-groupoid-gives-algebraic-stack} Let $S$ be a scheme contained in $\Sch_{fppf}$. Let $(U, R, s, t, c)$ be a smooth groupoid in algebraic spaces over $S$. Then the quotient stack $[U/R]$ is an algebraic stack over $S$. \end{theorem} 
\begin{lemma} \label{lemma-change-big-site} Suppose given big sites $\Sch_{fppf}$ and $\Sch'_{fppf}$. Assume that $\Sch_{fppf}$ is contained in $\Sch'_{fppf}$, see Topologies, Section \ref{topologies-section-change-alpha}. Let $S$ be an object of $\Sch_{fppf}$. Let $f : (\Sch'/S)_{fppf} \to (\Sch/S)_{fppf}$ the morphism of sites corresponding to the inclusion functor $u : (\Sch/S)_{fppf} \to (\Sch'/S)_{fppf}$. Let $\mathcal{X}$ be a stack in groupoids over $(\Sch/S)_{fppf}$. \begin{enumerate} \item if $\mathcal{X}$ is representable by some $X \in \Ob((\Sch/S)_{fppf})$, then $f^{-1}\mathcal{X}$ is representable too, in fact it is representable by the same scheme $X$, now viewed as an object of $(\Sch'/S)_{fppf}$, \item if $\mathcal{X}$ is representable by $F \in \Sh((\Sch/S)_{fppf})$ which is an algebraic space, then $f^{-1}\mathcal{X}$ is representable by the algebraic space $f^{-1}F$, \item if $\mathcal{X}$ is an algebraic stack, then $f^{-1}\mathcal{X}$ is an algebraic stack, and \item if $\mathcal{X}$ is a Deligne-Mumford stack, then $f^{-1}\mathcal{X}$ is a Deligne-Mumford stack too. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-fully-faithful} Suppose $\Sch_{fppf}$ is contained in $\Sch'_{fppf}$. Let $S$ be an object of $\Sch_{fppf}$. Denote $\textit{Algebraic-Stacks}/S$ the $2$-category of algebraic stacks over $S$ defined using $\Sch_{fppf}$. Similarly, denote $\textit{Algebraic-Stacks}'/S$ the $2$-category of algebraic stacks over $S$ defined using $\Sch'_{fppf}$. The rule $\mathcal{X} \mapsto f^{-1}\mathcal{X}$ of Lemma \ref{lemma-change-big-site} defines a functor of $2$-categories $$ \textit{Algebraic-Stacks}/S \longrightarrow \textit{Algebraic-Stacks}'/S $$ which defines equivalences of morphism categories $$ \Mor_{\textit{Algebraic-Stacks}/S}(\mathcal{X}, \mathcal{Y}) \longrightarrow \Mor_{\textit{Algebraic-Stacks}'/S}(f^{-1}\mathcal{X}, f^{-1}\mathcal{Y}) $$ for every objects $\mathcal{X}, \mathcal{Y}$ of $\textit{Algebraic-Stacks}/S$. An object $\mathcal{X}'$ of $\textit{Algebraic-Stacks}'/S$ is equivalence to $f^{-1}\mathcal{X}$ for some $\mathcal{X}$ in $\textit{Algebraic-Stacks}/S$ if and only if it has a presentation $\mathcal{X} = [U'/R']$ with $U', R'$ isomorphic to $f^{-1}U$, $f^{-1}R$ for some $U, R \in \textit{Spaces}/S$. \end{lemma} 
\begin{lemma} \label{lemma-category-of-spaces-over-smaller-base-scheme} Let $\Sch_{fppf}$ be a big fppf site. Let $S \to S'$ be a morphism of this site. The constructions A and B of Stacks, Section \ref{stacks-section-localize} above give isomorphisms of $2$-categories $$ \left\{ \begin{matrix} 2\text{-category of algebraic}\\ \text{stacks }\mathcal{X}\text{ over }S \end{matrix} \right\} \leftrightarrow \left\{ \begin{matrix} 2\text{-category of pairs }(\mathcal{X}', f)\text{ consisting of an}\\ \text{algebraic stack }\mathcal{X}'\text{ over }S'\text{ and a morphism}\\ f : \mathcal{X}' \to (\Sch/S)_{fppf}\text{ of algebraic stacks over }S' \end{matrix} \right\} $$ \end{lemma} 
\begin{definition} \label{definition-viewed-as} Let $\Sch_{fppf}$ be a big fppf site. Let $S \to S'$ be a morphism of this site. If $p : \mathcal{X} \to (\Sch/S)_{fppf}$ is an algebraic stack over $S$, then $\mathcal{X}$ {\it viewed as an algebraic stack over $S'$} is the algebraic stack $$ \mathcal{X} \longrightarrow (\Sch/S')_{fppf} $$ gotten by applying construction A of Lemma \ref{lemma-category-of-spaces-over-smaller-base-scheme} to $\mathcal{X}$. \end{definition} 
\begin{definition} \label{definition-change-of-base} Let $\Sch_{fppf}$ be a big fppf site. Let $S \to S'$ be a morphism of this site. Let $\mathcal{X}'$ be an algebraic stack over $S'$. The {\it change of base of $\mathcal{X}'$} is the algebraic stack $\mathcal{X}'_S$ over $S$ described above. \end{definition} 
