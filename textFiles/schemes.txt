\begin{definition} \label{definition-locally-ringed-space} Locally ringed spaces. \begin{enumerate} \item A {\it locally ringed space $(X, \mathcal{O}_X)$} is a pair consisting of a topological space $X$ and a sheaf of rings $\mathcal{O}_X$ all of whose stalks are local rings. \item Given a locally ringed space $(X, \mathcal{O}_X)$ we say that $\mathcal{O}_{X, x}$ is the {\it local ring of $X$ at $x$}. We denote $\mathfrak{m}_{X, x}$ or simply $\mathfrak{m}_x$ the maximal ideal of $\mathcal{O}_{X, x}$. Moreover, the {\it residue field of $X$ at $x$} is the residue field $\kappa(x) = \mathcal{O}_{X, x}/\mathfrak{m}_x$. \item A {\it morphism of locally ringed spaces} $(f, f^\sharp) : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ is a morphism of ringed spaces such that for all $x \in X$ the induced ring map $\mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$ is a local ring map. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-isomorphism-locally-ringed} \begin{slogan} An isomorphism of ringed spaces between locally ringed spaces is an isomorphism of locally ringed spaces. \end{slogan} Let $X$, $Y$ be locally ringed spaces. If $f : X \to Y$ is an isomorphism of ringed spaces, then $f$ is an isomorphism of locally ringed spaces. \end{lemma} 
\begin{definition} \label{definition-immersion-locally-ringed-spaces} Let $f : X \to Y$ be a morphism of locally ringed spaces. We say that $f$ is an {\it open immersion} if $f$ is a homeomorphism of $X$ onto an open subset of $Y$, and the map $f^{-1}\mathcal{O}_Y \to \mathcal{O}_X$ is an isomorphism. \end{definition} 
\begin{definition} \label{definition-open-subspace} Let $X$ be a locally ringed space. Let $U \subset X$ be an open subset. The locally ringed space $(U, \mathcal{O}_U)$ of Example \ref{example-open-subspace} above is the {\it open subspace of $X$ associated to $U$}. \end{definition} 
\begin{lemma} \label{lemma-open-immersion} Let $f : X \to Y$ be an open immersion of locally ringed spaces. Let $j : V = f(X) \to Y$ be the open subspace of $Y$ associated to the image of $f$. There is a unique isomorphism $f' : X \cong V$ of locally ringed spaces such that $f = j \circ f'$. \end{lemma} 
\begin{lemma} \label{lemma-restrict-map-to-opens} Let $f : X \to Y$ be a morphism of locally ringed spaces. Let $U \subset X$, and $V \subset Y$ be open subsets. Suppose that $f(U) \subset V$. There exists a unique morphism of locally ringed spaces $f|_U : U \to V$ such that the following diagram is a commutative square of locally ringed spaces $$ \xymatrix{ U \ar[d]_{f|_U} \ar[r] & X \ar[d]^f \\ V \ar[r] & Y } $$ \end{lemma} 
\begin{definition} \label{definition-closed-immersion-locally-ringed-spaces} Let $i : Z \to X$ be a morphism of locally ringed spaces. We say that $i$ is a {\it closed immersion} if: \begin{enumerate} \item The map $i$ is a homeomorphism of $Z$ onto a closed subset of $X$. \item The map $\mathcal{O}_X \to i_*\mathcal{O}_Z$ is surjective; let $\mathcal{I}$ denote the kernel. \item The $\mathcal{O}_X$-module $\mathcal{I}$ is locally generated by sections. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-closed-local-target} Let $f : Z \to X$ be a morphism of locally ringed spaces. In order for $f$ to be a closed immersion it suffices that there exists an open covering $X = \bigcup U_i$ such that each $f : f^{-1}U_i \to U_i$ is a closed immersion. \end{lemma} 
\begin{definition} \label{definition-closed-subspace} Let $X$ be a locally ringed space. Let $\mathcal{I}$ be a sheaf of ideals on $X$ which is locally generated by sections. The locally ringed space $(Z, \mathcal{O}_Z)$ of Example \ref{example-closed-subspace} above is the {\it closed subspace of $X$ associated to the sheaf of ideals $\mathcal{I}$}. \end{definition} 
\begin{lemma} \label{lemma-closed-immersion} Let $f : X \to Y$ be a closed immersion of locally ringed spaces. Let $\mathcal{I}$ be the kernel of the map $\mathcal{O}_Y \to f_*\mathcal{O}_X$. Let $i : Z \to Y$ be the closed subspace of $Y$ associated to $\mathcal{I}$. There is a unique isomorphism $f' : X \cong Z$ of locally ringed spaces such that $f = i \circ f'$. \end{lemma} 
\begin{lemma} \label{lemma-characterize-closed-subspace} Let $X$, $Y$ be locally ringed spaces. Let $\mathcal{I} \subset \mathcal{O}_X$ be a sheaf of ideals locally generated by sections. Let $i : Z \to X$ be the associated closed subspace. A morphism $f : Y \to X$ factors through $Z$ if and only if the map $f^*\mathcal{I} \to f^*\mathcal{O}_X = \mathcal{O}_Y$ is zero. If this is the case the morphism $g : Y \to Z$ such that $f = i \circ g$ is unique. \end{lemma} 
\begin{lemma} \label{lemma-restrict-map-to-closed} Let $f : X \to Y$ be a morphism of locally ringed spaces. Let $\mathcal{I} \subset \mathcal{O}_Y$ be a sheaf of ideals which is locally generated by sections. Let $i : Z \to Y$ be the closed subspace associated to the sheaf of ideals $\mathcal{I}$. Let $\mathcal{J}$ be the image of the map $f^*\mathcal{I} \to f^*\mathcal{O}_Y = \mathcal{O}_X$. Then this ideal is locally generated by sections. Moreover, let $i' : Z' \to X$ be the associated closed subspace of $X$. There exists a unique morphism of locally ringed spaces $f' : Z' \to Z$ such that the following diagram is a commutative square of locally ringed spaces $$ \xymatrix{ Z' \ar[d]_{f'} \ar[r]_{i'} & X \ar[d]^f \\ Z \ar[r]^{i} & Y } $$ Moreover, this diagram is a fibre square in the category of locally ringed spaces. \end{lemma} 
\begin{lemma} \label{lemma-standard-open} Let $R$ be a ring. Let $f \in R$. \begin{enumerate} \item If $g\in R$ and $D(g) \subset D(f)$, then \begin{enumerate} \item $f$ is invertible in $R_g$, \item $g^e = af$ for some $e \geq 1$ and $a \in R$, \item there is a canonical ring map $R_f \to R_g$, and \item there is a canonical $R_f$-module map $M_f \to M_g$ for any $R$-module $M$. \end{enumerate} \item Any open covering of $D(f)$ can be refined to a finite open covering of the form $D(f) = \bigcup_{i = 1}^n D(g_i)$. \item If $g_1, \ldots, g_n \in R$, then $D(f) \subset \bigcup D(g_i)$ if and only if $g_1, \ldots, g_n$ generate the unit ideal in $R_f$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-standard-covering} Let $R$ be a ring. \begin{enumerate} \item A {\it standard open covering} of $\Spec(R)$ is a covering $\Spec(R) = \bigcup_{i = 1}^n D(f_i)$, where $f_1, \ldots, f_n \in R$. \item Suppose that $D(f) \subset \Spec(R)$ is a standard open. A {\it standard open covering} of $D(f)$ is a covering $D(f) = \bigcup_{i = 1}^n D(g_i)$, where $g_1, \ldots, g_n \in R$. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-structure-sheaf} Let $R$ be a ring. \begin{enumerate} \item The {\it structure sheaf $\mathcal{O}_{\Spec(R)}$ of the spectrum of $R$} is the unique sheaf of rings $\mathcal{O}_{\Spec(R)}$ which agrees with $\widetilde R$ on the basis of standard opens. \item The locally ringed space $(\Spec(R), \mathcal{O}_{\Spec(R)})$ is called the {\it spectrum} of $R$ and denoted $\Spec(R)$. \item The sheaf of $\mathcal{O}_{\Spec(R)}$-modules extending $\widetilde M$ to all opens of $\Spec(R)$ is called the sheaf of $\mathcal{O}_{\Spec(R)}$-modules associated to $M$. This sheaf is denoted $\widetilde M$ as well. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-spec-sheaves} Let $R$ be a ring. Let $M$ be an $R$-module. Let $\widetilde M$ be the sheaf of $\mathcal{O}_{\Spec(R)}$-modules associated to $M$. \begin{enumerate} \item We have $\Gamma(\Spec(R), \mathcal{O}_{\Spec(R)}) = R$. \item We have $\Gamma(\Spec(R), \widetilde M) = M$ as an $R$-module. \item For every $f \in R$ we have $\Gamma(D(f), \mathcal{O}_{\Spec(R)}) = R_f$. \item For every $f\in R$ we have $\Gamma(D(f), \widetilde M) = M_f$ as an $R_f$-module. \item Whenever $D(g) \subset D(f)$ the restriction mappings on $\mathcal{O}_{\Spec(R)}$ and $\widetilde M$ are the maps $R_f \to R_g$ and $M_f \to M_g$ from Lemma \ref{lemma-standard-open}. \item Let $\mathfrak p$ be a prime of $R$, and let $x \in \Spec(R)$ be the corresponding point. We have $\mathcal{O}_{\Spec(R), x} = R_{\mathfrak p}$. \item Let $\mathfrak p$ be a prime of $R$, and let $x \in \Spec(R)$ be the corresponding point. We have $\widetilde M_x = M_{\mathfrak p}$ as an $R_{\mathfrak p}$-module. \end{enumerate} Moreover, all these identifications are functorial in the $R$ module $M$. In particular, the functor $M \mapsto \widetilde M$ is an exact functor from the category of $R$-modules to the category of $\mathcal{O}_{\Spec(R)}$-modules. \end{lemma} 
\begin{definition} \label{definition-affine-scheme} An {\it affine scheme} is a locally ringed space isomorphic as a locally ringed space to $\Spec(R)$ for some ring $R$. A {\it morphism of affine schemes} is a morphism in the category of locally ringed spaces. \end{definition} 
\begin{lemma} \label{lemma-morphism-into-affine-where-point-goes} Let $X$ be a locally ringed space. Let $Y$ be an affine scheme. Let $f \in \Mor(X, Y)$ be a morphism of locally ringed spaces. Given a point $x \in X$ consider the ring maps $$ \Gamma(Y, \mathcal{O}_Y) \xrightarrow{f^\sharp} \Gamma(X, \mathcal{O}_X) \to \mathcal{O}_{X, x} $$ Let $\mathfrak p \subset \Gamma(Y, \mathcal{O}_Y)$ denote the inverse image of $\mathfrak m_x$. Let $y \in Y$ be the corresponding point. Then $f(x) = y$. \end{lemma} 
\begin{lemma} \label{lemma-f-open} Let $X$ be a locally ringed space. Let $f \in \Gamma(X, \mathcal{O}_X)$. The set $$ D(f) = \{x \in X \mid \text{image }f \not\in \mathfrak m_x\} $$ is open. Moreover $f|_{D(f)}$ has an inverse. \end{lemma} 
\begin{lemma} \label{lemma-f-open-affine} In Lemma \ref{lemma-f-open} above, if $X$ is an affine scheme, then the open $D(f)$ agrees with the standard open $D(f)$ defined previously (in Algebra, Definition \ref{algebra-definition-spectrum-ring}). \end{lemma} 
\begin{lemma} \label{lemma-morphism-into-affine} \begin{reference} A reference for this fact is \cite[II, Err 1, Prop. 1.8.1]{EGA} where it is attributed to J. Tate. \end{reference} Let $X$ be a locally ringed space. Let $Y$ be an affine scheme. The map $$ \Mor(X, Y) \longrightarrow \Hom(\Gamma(Y, \mathcal{O}_Y), \Gamma(X, \mathcal{O}_X)) $$ which maps $f$ to $f^\sharp$ (on global sections) is bijective. \end{lemma} 
\begin{lemma} \label{lemma-category-affine-schemes} The category of affine schemes is equivalent to the opposite of the category of rings. The equivalence is given by the functor that associates to an affine scheme the global sections of its structure sheaf. \end{lemma} 
\begin{lemma} \label{lemma-standard-open-affine} Let $Y$ be an affine scheme. Let $f \in \Gamma(Y, \mathcal{O}_Y)$. The open subspace $D(f)$ is an affine scheme. \end{lemma} 
\begin{lemma} \label{lemma-fibre-product-affine-schemes} The category of affine schemes has finite products, and fibre products. In other words, it has finite limits. Moreover, the products and fibre products in the category of affine schemes are the same as in the category of locally ringed spaces. In a formula, we have (in the category of locally ringed spaces) $$ \Spec(R) \times \Spec(S) = \Spec(R \otimes_{\mathbf{Z}} S) $$ and given ring maps $R \to A$, $R \to B$ we have $$ \Spec(A) \times_{\Spec(R)} \Spec(B) = \Spec(A \otimes_R B). $$ \end{lemma} 
\begin{lemma} \label{lemma-disjoint-union-affines} Let $X$ be a locally ringed space. Assume $X = U \amalg V$ with $U$ and $V$ open and such that $U$, $V$ are affine schemes. Then $X$ is an affine scheme. \end{lemma} 
\begin{lemma} \label{lemma-compare-constructions} Let $(X, \mathcal{O}_X) = (\Spec(R), \mathcal{O}_{\Spec(R)})$ be an affine scheme. Let $M$ be an $R$-module. There exists a canonical isomorphism between the sheaf $\widetilde M$ associated to the $R$-module $M$ (Definition \ref{definition-structure-sheaf}) and the sheaf $\mathcal{F}_M$ associated to the $R$-module $M$ (Modules, Definition \ref{modules-definition-sheaf-associated}). This isomorphism is functorial in $M$. In particular, the sheaves $\widetilde M$ are quasi-coherent. Moreover, they are characterized by the following mapping property $$ \Hom_{\mathcal{O}_X}(\widetilde M, \mathcal{F}) = \Hom_R(M, \Gamma(X, \mathcal{F})) $$ for any sheaf of $\mathcal{O}_X$-modules $\mathcal{F}$. Here a map $\alpha : \widetilde M \to \mathcal{F}$ corresponds to its effect on global sections. \end{lemma} 
\begin{lemma} \label{lemma-widetilde-constructions} Let $(X, \mathcal{O}_X) = (\Spec(R), \mathcal{O}_{\Spec(R)})$ be an affine scheme. There are canonical isomorphisms \begin{enumerate} \item $ \widetilde{M \otimes_R N} \cong \widetilde M \otimes_{\mathcal{O}_X} \widetilde N $, see Modules, Section \ref{modules-section-tensor-product}. \item $ \widetilde{\text{T}^n(M)} \cong \text{T}^n(\widetilde M) $, $ \widetilde{\text{Sym}^n(M)} \cong \text{Sym}^n(\widetilde M) $, and $ \widetilde{\wedge^n(M)} \cong \wedge^n(\widetilde M) $, see Modules, Section \ref{modules-section-symmetric-exterior}. \item if $M$ is a finitely presented $R$-module, then $ \SheafHom_{\mathcal{O}_X}(\widetilde M, \widetilde N) \cong \widetilde{\Hom_R(M,  N)} $, see Modules, Section \ref{modules-section-internal-hom}. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-widetilde-pullback} Let $(X, \mathcal{O}_X) = (\Spec(S), \mathcal{O}_{\Spec(S)})$, $(Y, \mathcal{O}_Y) = (\Spec(R), \mathcal{O}_{\Spec(R)})$ be affine schemes. Let $\psi : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a morphism of affine schemes, corresponding to the ring map $\psi^\sharp : R \to S$ (see Lemma \ref{lemma-category-affine-schemes}). \begin{enumerate} \item We have $\psi^* \widetilde M = \widetilde{S \otimes_R M}$ functorially in the $R$-module $M$. \item We have $\psi_* \widetilde N = \widetilde{N_R}$ functorially in the $S$-module $N$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-quasi-coherent-affine} Let $(X, \mathcal{O}_X) = (\Spec(R), \mathcal{O}_{\Spec(R)})$ be an affine scheme. Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module. Then $\mathcal{F}$ is isomorphic to the sheaf associated to the $R$-module $\Gamma(X, \mathcal{F})$. \end{lemma} 
\begin{lemma} \label{lemma-equivalence-quasi-coherent} Let $(X, \mathcal{O}_X) = (\Spec(R), \mathcal{O}_{\Spec(R)})$ be an affine scheme. The functors $M \mapsto \widetilde M$ and $\mathcal{F} \mapsto \Gamma(X, \mathcal{F})$ define quasi-inverse equivalences of categories $$ \xymatrix{ \QCoh(\mathcal{O}_X) \ar@<1ex>[r] & \text{Mod}_R \ar@<1ex>[l] } $$ between the category of quasi-coherent $\mathcal{O}_X$-modules and the category of $R$-modules. \end{lemma} 
\begin{lemma} \label{lemma-kernel-cokernel-quasi-coherent} Let $X = \Spec(R)$ be an affine scheme. Kernels and cokernels of maps of quasi-coherent $\mathcal{O}_X$-modules are quasi-coherent. \end{lemma} 
\begin{lemma} \label{lemma-colimit-quasi-coherent} Let $X = \Spec(R)$ be an affine scheme. The direct sum of an arbitrary collection of quasi-coherent sheaves on $X$ is quasi-coherent. The same holds for colimits. \end{lemma} 
\begin{lemma} \label{lemma-extension-quasi-coherent} Let $(X, \mathcal{O}_X) = (\Spec(R), \mathcal{O}_{\Spec(R)})$ be an affine scheme. Suppose that $$ 0 \to \mathcal{F}_1 \to \mathcal{F}_2 \to \mathcal{F}_3 \to 0 $$ is a short exact sequence of sheaves of $\mathcal{O}_X$-modules. If two out of three are quasi-coherent then so is the third. \end{lemma} 
\begin{lemma} \label{lemma-closed-immersion-affine-case} \begin{slogan} For affine schemes, closed immersions correspond to ideals. \end{slogan} Let $(X, \mathcal{O}_X) = (\Spec(R), \mathcal{O}_{\Spec(R)})$ be an affine scheme. Let $i : Z \to X$ be any closed immersion of locally ringed spaces. Then there exists a unique ideal $I \subset R$ such that the morphism $i : Z \to X$ can be identified with the closed immersion $\Spec(R/I) \to \Spec(R)$ constructed in Example \ref{example-closed-immersion-affines} above. \end{lemma} 
\begin{definition} \label{definition-scheme} \begin{history} In \cite{EGA1} what we call a scheme was called a ``pre-sch\'ema'' and the name ``sch\'ema'' was reserved for what is a separated scheme in the Stacks project. In the second edition \cite{EGA1-second} the terminology was changed to the terminology that is now standard. However, one may occasionally encounter the terminology ``prescheme'', for example in \cite{Murre-lectures}. \end{history} A {\it scheme} is a locally ringed space with the property that every point has an open neighbourhood which is an affine scheme. A {\it morphism of schemes} is a morphism of locally ringed spaces. The category of schemes will be denoted $\Sch$. \end{definition} 
\begin{lemma} \label{lemma-open-subspace-scheme} Let $X$ be a scheme. Let $j : U \to X$ be an open immersion of locally ringed spaces. Then $U$ is a scheme. In particular, any open subspace of $X$ is a scheme. \end{lemma} 
\begin{lemma} \label{lemma-closed-subspace-scheme} Let $X$ be a scheme. Let $i : Z \to X$ be a closed immersion of locally ringed spaces. \begin{enumerate} \item The locally ringed space $Z$ is a scheme, \item the kernel $\mathcal{I}$ of the map $\mathcal{O}_X \to i_*\mathcal{O}_Z$ is a quasi-coherent sheaf of ideals, \item for any affine open $U = \Spec(R)$ of $X$ the morphism $i^{-1}(U) \to U$ can be identified with $\Spec(R/I) \to \Spec(R)$ for some ideal $I \subset R$, and \item we have $\mathcal{I}|_U = \widetilde I$. \end{enumerate} In particular, any sheaf of ideals locally generated by sections is a quasi-coherent sheaf of ideals (and vice versa), and any closed subspace of $X$ is a scheme. \end{lemma} 
\begin{definition} \label{definition-immersion} Let $X$ be a scheme. \begin{enumerate} \item A morphism of schemes is called an {\it open immersion} if it is an open immersion of locally ringed spaces (see Definition \ref{definition-immersion-locally-ringed-spaces}). \item An {\it open subscheme} of $X$ is an open subspace of $X$ in the sense of Definition \ref{definition-open-subspace}; an open subscheme of $X$ is a scheme by Lemma \ref{lemma-open-subspace-scheme}. \item A morphism of schemes is called a {\it closed immersion} if it is a closed immersion of locally ringed spaces (see Definition \ref{definition-closed-immersion-locally-ringed-spaces}). \item A {\it closed subscheme} of $X$ is a closed subspace of $X$ in the sense of Definition \ref{definition-closed-subspace}; a closed subscheme is a scheme by Lemma \ref{lemma-closed-subspace-scheme}. \item A morphism of schemes $f : X \to Y$ is called an {\it immersion}, or a {\it locally closed immersion} if it can be factored as $j \circ i$ where $i$ is a closed immersion and $j$ is an open immersion. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-immersion-when-closed} Let $f : Y \to X$ be an immersion of schemes. Then $f$ is a closed immersion if and only if $f(Y) \subset X$ is a closed subset. \end{lemma} 
\begin{lemma} \label{lemma-scheme-sober} Let $X$ be a scheme. Any irreducible closed subset of $X$ has a unique generic point. In other words, $X$ is a sober topological space, see Topology, Definition \ref{topology-definition-generic-point}. \end{lemma} 
\begin{lemma} \label{lemma-basis-affine-opens} Let $X$ be a scheme. The collection of affine opens of $X$ forms a basis for the topology on $X$. \end{lemma} 
\begin{lemma} \label{lemma-locally-quasi-compact} The underlying topological space of any scheme is locally quasi-compact, see Topology, Definition \ref{topology-definition-locally-quasi-compact}. \end{lemma} 
\begin{lemma} \label{lemma-standard-open-two-affines} Let $X$ be a scheme. Let $U, V$ be affine opens of $X$, and let $x \in U \cap V$. There exists an affine open neighbourhood $W$ of $x$ such that $W$ is a standard open of both $U$ and $V$. \end{lemma} 
\begin{lemma} \label{lemma-good-subcover} Let $X$ be a scheme. Let $X = \bigcup_i U_i$ be an affine open covering. Let $V \subset X$ be an affine open. There exists a standard open covering $V = \bigcup_{j = 1, \ldots, m} V_j$ (see Definition \ref{definition-standard-covering}) such that each $V_j$ is a standard open in one of the $U_i$. \end{lemma} 
\begin{lemma} \label{lemma-sheaf-on-affines} Let $X$ be a scheme. Let $\mathcal{B}$ be the set of affine opens of $X$. Let $\mathcal{F}$ be a presheaf of sets on $\mathcal{B}$, see Sheaves, Definition \ref{sheaves-definition-presheaf-basis}. The following are equivalent \begin{enumerate} \item $\mathcal{F}$ is the restriction of a sheaf on $X$ to $\mathcal{B}$, \item $\mathcal{F}$ is a sheaf on $\mathcal{B}$, and \item $\mathcal{F}(\emptyset)$ is a singleton and whenever $U = V \cup W$ with $U, V, W \in \mathcal{B}$ and $V, W \subset U$ standard open (Algebra, Definition \ref{algebra-definition-Zariski-topology}) the map $$ \mathcal{F}(U) \longrightarrow \mathcal{F}(V) \times \mathcal{F}(W) $$ is injective with image the set of pairs $(s, t)$ such that $s|_{V \cap W} = t|_{V \cap W}$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-scheme-finite-discrete-affine} Let $X$ be a scheme whose underlying topological space is a finite discrete set. Then $X$ is affine. \end{lemma} 
\begin{definition} \label{definition-reduced} Let $X$ be a scheme. We say $X$ is {\it reduced} if every local ring $\mathcal{O}_{X, x}$ is reduced. \end{definition} 
\begin{lemma} \label{lemma-reduced} A scheme $X$ is reduced if and only if $\mathcal{O}_X(U)$ is a reduced ring for all $U \subset X$ open. \end{lemma} 
\begin{lemma} \label{lemma-affine-reduced} An affine scheme $\Spec(R)$ is reduced if and only if $R$ is reduced. \end{lemma} 
\begin{lemma} \label{lemma-reduced-closed-subscheme} Let $X$ be a scheme. Let $T \subset X$ be a closed subset. There exists a unique closed subscheme $Z \subset X$ with the following properties: (a) the underlying topological space of $Z$ is equal to $T$, and (b) $Z$ is reduced. \end{lemma} 
\begin{definition} \label{definition-reduced-induced-scheme} Let $X$ be a scheme. Let $Z \subset X$ be a closed subset. A {\it scheme structure on $Z$} is given by a closed subscheme $Z'$ of $X$ whose underlying set is equal to $Z$. We often say ``let $(Z, \mathcal{O}_Z)$ be a scheme structure on $Z$'' to indicate this. The {\it reduced induced scheme structure} on $Z$ is the one constructed in Lemma \ref{lemma-reduced-closed-subscheme}. The {\it reduction $X_{red}$ of $X$} is the reduced induced scheme structure on $X$ itself. \end{definition} 
\begin{lemma} \label{lemma-map-into-reduction} Let $X$ be a scheme. Let $Z \subset X$ be a closed subscheme. Let $Y$ be a reduced scheme. A morphism $f : Y \to X$ factors through $Z$ if and only if $f(Y) \subset Z$ (set theoretically). In particular, any morphism $Y \to X$ factors as $Y \to X_{red} \to X$. \end{lemma} 
\begin{lemma} \label{lemma-morphism-from-spec-local-ring} Let $X$ be a scheme. Let $R$ be a local ring. The construction above gives a bijective correspondence between morphisms $\Spec(R) \to X$ and pairs $(x, \varphi)$ consisting of a point $x \in X$ and a local homomorphism of local rings $\varphi : \mathcal{O}_{X, x} \to R$. \end{lemma} 
\begin{lemma} \label{lemma-specialize-points} Let $X$ be a scheme. Let $x, x' \in X$ be points of $X$. Then $x' \in X$ is a generalization of $x$ if and only if $x'$ is in the image of the canonical morphism $\Spec(\mathcal{O}_{X, x}) \to X$. \end{lemma} 
\begin{lemma} \label{lemma-characterize-points} Let $X$ be a scheme. Points of $X$ correspond bijectively to equivalence classes of morphisms from spectra of fields into $X$. Moreover, each equivalence class contains a (unique up to unique isomorphism) smallest element $\Spec(\kappa(x)) \to X$. \end{lemma} 
\begin{lemma} \label{lemma-glue} \begin{slogan} If you have two locally ringed spaces, and a subspace of the first one is isomorphic to a subspace of the other, then you can glue them together into one big locally ringed space. \end{slogan} Given any glueing data of locally ringed spaces there exists a locally ringed space $X$ and open subspaces $U_i \subset X$ together with isomorphisms $\varphi_i : X_i \to U_i$ of locally ringed spaces such that \begin{enumerate} \item $X=\bigcup_{i\in I} U_i$, \item $\varphi_i(U_{ij}) = U_i \cap U_j$, and \item $\varphi_{ij} = \varphi_j^{-1}|_{U_i \cap U_j} \circ \varphi_i|_{U_{ij}}$. \end{enumerate} The locally ringed space $X$ is characterized by the following mapping properties: Given a locally ringed space $Y$ we have \begin{eqnarray*} \Mor(X, Y) & = & \{ (f_i)_{i\in I} \mid f_i : X_i \to Y, \ f_j \circ \varphi_{ij} = f_i|_{U_{ij}}\} \\ f & \mapsto & (f|_{U_i} \circ \varphi_i)_{i \in I} \\ \Mor(Y, X) & = & \left\{ \begin{matrix} \text{open covering }Y = \bigcup\nolimits_{i \in I} V_i\text{ and } (g_i : V_i \to X_i)_{i \in I} \text{ such that}\\ g_i^{-1}(U_{ij}) = V_i \cap V_j \text{ and } g_j|_{V_i \cap V_j} = \varphi_{ij} \circ g_i|_{V_i \cap V_j} \end{matrix} \right\} \\ g & \mapsto & V_i = g^{-1}(U_i), \ g_i = \varphi_i^{-1} \circ g|_{V_i} \end{eqnarray*} \end{lemma} 
\begin{lemma} \label{lemma-glue-schemes} \begin{slogan} Schemes can be glued to give new schemes. \end{slogan} In Lemma \ref{lemma-glue} above, assume that all $X_i$ are schemes. Then the resulting locally ringed space $X$ is a scheme. \end{lemma} 
\begin{definition} \label{definition-representable-functor} (See Categories, Definition \ref{categories-definition-representable-functor}.) Let $F$ be a contravariant functor from the category of schemes to the category of sets (as above). We say that $F$ is {\it representable by a scheme} or {\it representable} if there exists a scheme $X$ such that $h_X \cong F$. \end{definition} 
\begin{definition} \label{definition-representable-by-open-immersions} Let $F$ be a contravariant functor on the category of schemes with values in sets. \begin{enumerate} \item We say that $F$ {\it satisfies the sheaf property for the Zariski topology} if for every scheme $T$ and every open covering $T = \bigcup_{i \in I} U_i$, and for any collection of elements $\xi_i \in F(U_i)$ such that $\xi_i|_{U_i \cap U_j} = \xi_j|_{U_i \cap U_j}$ there exists a unique element $\xi \in F(T)$ such that $\xi_i = \xi|_{U_i}$ in $F(U_i)$. \item A {\it subfunctor $H \subset F$} is a rule that associates to every scheme $T$ a subset $H(T) \subset F(T)$ such that the maps $F(f) : F(T) \to F(T')$ maps $H(T)$ into $H(T')$ for all morphisms of schemes $f : T' \to T$. \item Let $H \subset F$ be a subfunctor. We say that $H \subset F$ is {\it representable by open immersions} if for all pairs $(T, \xi)$, where $T$ is a scheme and $\xi \in F(T)$ there exists an open subscheme $U_\xi \subset T$ with the following property: \begin{itemize} \item[(*)] A morphism $f : T' \to T$ factors through $U_\xi$ if and only if $f^*\xi \in H(T')$. \end{itemize} \item Let $I$ be a set. For each $i \in I$ let $H_i \subset F$ be a subfunctor. We say that the collection $(H_i)_{i \in I}$ {\it covers $F$} if and only if for every $\xi \in F(T)$ there exists an open covering $T = \bigcup U_i$ such that $\xi|_{U_i} \in H_i(U_i)$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-glue-functors} Let $F$ be a contravariant functor on the category of schemes with values in the category of sets. Suppose that \begin{enumerate} \item $F$ satisfies the sheaf property for the Zariski topology, \item there exists a set $I$ and a collection of subfunctors $F_i \subset F$ such that \begin{enumerate} \item each $F_i$ is representable, \item each $F_i \subset F$ is representable by open immersions, and \item the collection $(F_i)_{i \in I}$ covers $F$. \end{enumerate} \end{enumerate} Then $F$ is representable. \end{lemma} 
\begin{lemma} \label{lemma-fibre-products} The category of schemes has a final object, products and fibre products. In other words, the category of schemes has finite limits, see Categories, Lemma \ref{categories-lemma-finite-limits-exist}. \end{lemma} 
\begin{definition} \label{definition-fibre-product} Given morphisms of schemes $f : X \to S$ and $g : Y \to S$ the {\it fibre product} is a scheme $X \times_S Y$ together with projection morphisms $p : X \times_S Y \to X$ and $q : X \times_S Y \to Y$ sitting into the following commutative diagram $$ \xymatrix{ X \times_S Y \ar[r]_q \ar[d]_p & Y \ar[d]^g \\ X \ar[r]^f & S } $$ which is universal among all diagrams of this sort, see Categories, Definition \ref{categories-definition-fibre-products}. \end{definition} 
\begin{lemma} \label{lemma-fibre-product-affines} Let $f : X \to S$ and $g : Y \to S$ be morphisms of schemes with the same target. If $X, Y, S$ are all affine then $X \times_S Y$ is affine. \end{lemma} 
\begin{lemma} \label{lemma-open-fibre-product} Let $f : X \to S$ and $g : Y \to S$ be morphisms of schemes with the same target. Let $X \times_S Y$, $p$, $q$ be the fibre product. Suppose that $U \subset S$, $V \subset X$, $W \subset Y$ are open subschemes such that $f(V) \subset U$ and $g(W) \subset U$. Then the canonical morphism $V \times_U W \to X \times_S Y$ is an open immersion which identifies $V \times_U W$ with $p^{-1}(V) \cap q^{-1}(W)$. \end{lemma} 
\begin{lemma} \label{lemma-affine-covering-fibre-product} \begin{slogan} Bare-hands construction of fiber products: an affine open cover of a fiber product of schemes can be assembled from compatible affine open covers of the pieces. \end{slogan} Let $f : X \to S$ and $g : Y \to S$ be morphisms of schemes with the same target. Let $S = \bigcup U_i$ be any affine open covering of $S$. For each $i \in I$, let $f^{-1}(U_i) = \bigcup_{j \in J_i} V_j$ be an affine open covering of $f^{-1}(U_i)$ and let $g^{-1}(U_i) = \bigcup_{k \in K_i} W_k$ be an affine open covering of $g^{-1}(U_i)$. Then $$ X \times_S Y = \bigcup\nolimits_{i \in I} \bigcup\nolimits_{j \in J_i, \ k \in K_i} V_j \times_{U_i} W_k $$ is an affine open covering of $X \times_S Y$. \end{lemma} 
\begin{lemma} \label{lemma-points-fibre-product} Let $f : X \to S$ and $g : Y \to S$ be morphisms of schemes with the same target. Points $z$ of $X \times_S Y$ are in bijective correspondence to quadruples $$ (x, y, s, \mathfrak p) $$ where $x \in X$, $y \in Y$, $s \in S$ are points with $f(x) = s$, $g(y) = s$ and $\mathfrak p$ is a prime ideal of the ring $\kappa(x) \otimes_{\kappa(s)} \kappa(y)$. The residue field of $z$ corresponds to the residue field of the prime $\mathfrak p$. \end{lemma} 
\begin{lemma} \label{lemma-fibre-product-immersion} Let $f : X \to S$ and $g : Y \to S$ be morphisms of schemes with the same target. \begin{enumerate} \item If $f : X \to S$ is a closed immersion, then $X \times_S Y \to Y$ is a closed immersion. Moreover, if $X \to S$ corresponds to the quasi-coherent sheaf of ideals $\mathcal{I} \subset \mathcal{O}_S$, then $X \times_S Y \to Y$ corresponds to the sheaf of ideals $\Im(g^*\mathcal{I} \to \mathcal{O}_Y)$. \item If $f : X \to S$ is an open immersion, then $X \times_S Y \to Y$ is an open immersion. \item If $f : X \to S$ is an immersion, then $X \times_S Y \to Y$ is an immersion. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-inverse-image-closed-subscheme} Let $f : X \to Y$ be a morphism of schemes. Let $Z \subset Y$ be a closed subscheme of $Y$. The {\it inverse image $f^{-1}(Z)$ of the closed subscheme $Z$} is the closed subscheme $Z \times_Y X$ of $X$. See Lemma \ref{lemma-fibre-product-immersion} above. \end{definition} 
\begin{definition} \label{definition-base-change} Let $S$ be a scheme. \begin{enumerate} \item We say $X$ is a {\it scheme over $S$} to mean that $X$ comes equipped with a morphism of schemes $X \to S$. The morphism $X \to S$ is sometimes called the {\it structure morphism}. \item If $R$ is a ring we say $X$ is a {\it scheme over $R$} instead of $X$ is a scheme over $\Spec(R)$. \item A {\it morphism $f : X \to Y$ of schemes over $S$} is a morphism of schemes such that the composition $X \to Y \to S$ of $f$ with the structure morphism of $Y$ is equal to the structure morphism of $X$. \item We denote $\Mor_S(X, Y)$ the set of all morphisms from $X$ to $Y$ over $S$. \item Let $X$ be a scheme over $S$. Let $S' \to S$ be a morphism of schemes. The {\it base change} of $X$ is the scheme $X_{S'} = S' \times_S X$ over $S'$. \item Let $f : X \to Y$ be a morphism of schemes over $S$. Let $S' \to S$ be a morphism of schemes. The {\it base change} of $f$ is the induced morphism $f' : X_{S'} \to Y_{S'}$ (namely the morphism $\text{id}_{S'} \times_{\text{id}_S} f$). \item Let $R$ be a ring. Let $X$ be a scheme over $R$. Let $R \to R'$ be a ring map. The {\it base change} $X_{R'}$ is the scheme $\Spec(R') \times_{\Spec(R)} X$ over $R'$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-base-change-immersion} Let $S$ be a scheme. Let $f : X \to Y$ be an immersion (resp.\ closed immersion, resp. open immersion) of schemes over $S$. Then any base change of $f$ is an immersion (resp.\ closed immersion, resp. open immersion). \end{lemma} 
\begin{definition} \label{definition-preserved-by-base-change} Properties and base change. \begin{enumerate} \item Let $\mathcal{P}$ be a property of schemes over a base. We say that $\mathcal{P}$ is {\it preserved under arbitrary base change}, or simply that $\mathcal{P}$ is {\it preserved under base change} if whenever $X/S$ has $\mathcal{P}$, any base change $X_{S'}/S'$ has $\mathcal{P}$. \item Let $\mathcal{P}$ be a property of morphisms of schemes over a base. We say that $\mathcal{P}$ is {\it preserved under arbitrary base change}, or simply that {\it preserved under base change} if whenever $f : X \to Y$ over $S$ has $\mathcal{P}$, any base change $f' : X_{S'} \to Y_{S'}$ over $S'$ has $\mathcal{P}$. \end{enumerate} \end{definition} 
\begin{definition} \label{definition-fibre} Let $f : X \to S$ be a morphism of schemes. Let $s \in S$ be a point. The {\it scheme theoretic fibre $X_s$ of $f$ over $s$}, or simply the {\it fibre of $f$ over $s$}, is the scheme fitting in the following fibre product diagram $$ \xymatrix{ X_s = \Spec(\kappa(s)) \times_S X \ar[r] \ar[d] & X \ar[d] \\ \Spec(\kappa(s)) \ar[r] & S } $$ We think of the fibre $X_s$ always as a scheme over $\kappa(s)$. \end{definition} 
\begin{lemma} \label{lemma-fibre-topological} Let $f : X \to S$ be a morphism of schemes. Consider the diagrams $$ \xymatrix{ X_s \ar[r] \ar[d] & X \ar[d] & \Spec(\mathcal{O}_{S, s}) \times_S X \ar[r] \ar[d] & X \ar[d] \\ \Spec(\kappa(s)) \ar[r] & S & \Spec(\mathcal{O}_{S, s}) \ar[r] & S } $$ In both cases the top horizontal arrow is a homeomorphism onto its image. \end{lemma} 
\begin{definition} \label{definition-quasi-compact} A morphism of schemes is called {\it quasi-compact} if the underlying map of topological spaces is quasi-compact, see Topology, Definition \ref{topology-definition-quasi-compact}. \end{definition} 
\begin{lemma} \label{lemma-quasi-compact-affine} Let $f : X \to S$ be a morphism of schemes. The following are equivalent \begin{enumerate} \item $f : X \to S$ is quasi-compact, \item the inverse image of every affine open is quasi-compact, and \item there exists some affine open covering $S = \bigcup_{i \in I} U_i$ such that $f^{-1}(U_i)$ is quasi-compact for all $i$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-quasi-compact-preserved-base-change} Being quasi-compact is a property of morphisms of schemes over a base which is preserved under arbitrary base change. \end{lemma} 
\begin{lemma} \label{lemma-composition-quasi-compact} The composition of quasi-compact morphisms is quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-closed-immersion-quasi-compact} A closed immersion is quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-image-quasi-compact-closed} Let $f : X \to S$ be a quasi-compact morphism of schemes. The following are equivalent \begin{enumerate} \item $f(X) \subset S$ is closed, and \item $f(X) \subset S$ is stable under specialization. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-quasi-compact-closed} Let $f : X \to S$ be a quasi-compact morphism of schemes. Then $f$ is closed if and only if specializations lift along $f$, see Topology, Definition \ref{topology-definition-lift-specializations}. \end{lemma} 
\begin{definition} \label{definition-universally-closed} A morphism of schemes $f : X \to S$ is said to be {\it universally closed} if every base change $f' : X_{S'} \to S'$ is closed. \end{definition} 
\begin{lemma} \label{lemma-specializations-lift} Let $f : X \to S$ be a morphism of schemes. \begin{enumerate} \item If $f$ is universally closed then specializations lift along any base change of $f$, see Topology, Definition \ref{topology-definition-lift-specializations}. \item If $f$ is quasi-compact and specializations lift along any base change of $f$, then $f$ is universally closed. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-valuative-criterion} Let $f : X \to S$ be a morphism of schemes. We say $f$ {\it satisfies the existence part of the valuative criterion} if given any commutative solid diagram $$ \xymatrix{ \Spec(K) \ar[r] \ar[d] & X \ar[d] \\ \Spec(A) \ar[r] \ar@{-->}[ru] & S } $$ where $A$ is a valuation ring with field of fractions $K$, the dotted arrow exists. We say $f$ {\it satisfies the uniqueness part of the valuative criterion} if there is at most one dotted arrow given any diagram as above (without requiring existence of course). \end{definition} 
\begin{lemma} \label{lemma-points-specialize} Let $S$ be a scheme. Let $s' \leadsto s$ be a specialization of points of $S$. Then \begin{enumerate} \item there exists a valuation ring $A$ and a morphism $f : \Spec(A) \to S$ such that the generic point $\eta$ of $\Spec(A)$ maps to $s'$ and the special point maps to $s$, and \item given a field extension $K/\kappa(s')$ we may arrange it so that the extension $\kappa(\eta)/\kappa(s')$ induced by $f$ is isomorphic to the given extension. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-lift-specializations-valuative} Let $f : X \to S$ be a morphism of schemes. The following are equivalent \begin{enumerate} \item Specializations lift along any base change of $f$ \item The morphism $f$ satisfies the existence part of the valuative criterion. \end{enumerate} \end{lemma} 
\begin{proposition}[Valuative criterion of universal closedness] \label{proposition-characterize-universally-closed} Let $f$ be a quasi-compact morphism of schemes. Then $f$ is universally closed if and only if $f$ satisfies the existence part of the valuative criterion. \end{proposition} 
\begin{lemma} \label{lemma-diagonal-affines-closed} The diagonal morphism of a morphism between affines is closed. \end{lemma} 
\begin{lemma} \label{lemma-diagonal-immersion} \begin{slogan} The diagonal morphism for relative schemes is an immersion. \end{slogan} Let $X$ be a scheme over $S$. The diagonal morphism $\Delta_{X/S}$ is an immersion. \end{lemma} 
\begin{definition} \label{definition-separated} Let $f : X \to S$ be a morphism of schemes. \begin{enumerate} \item We say $f$ is {\it separated} if the diagonal morphism $\Delta_{X/S}$ is a closed immersion. \item We say $f$ is {\it quasi-separated} if the diagonal morphism $\Delta_{X/S}$ is a quasi-compact morphism. \item We say a scheme $Y$ is {\it separated} if the morphism $Y \to \Spec(\mathbf{Z})$ is separated. \item We say a scheme $Y$ is {\it quasi-separated} if the morphism $Y \to \Spec(\mathbf{Z})$ is quasi-separated. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-where-are-they-equal} Let $X$, $Y$ be schemes over $S$. Let $a, b : X \to Y$ be morphisms of schemes over $S$. There exists a largest locally closed subscheme $Z \subset X$ such that $a|_Z = b|_Z$. In fact $Z$ is the equalizer of $(a, b)$. Moreover, if $Y$ is separated over $S$, then $Z$ is a closed subscheme. \end{lemma} 
\begin{lemma} \label{lemma-characterize-quasi-separated} Let $f : X \to S$ be a morphism of schemes. The following are equivalent: \begin{enumerate} \item The morphism $f$ is quasi-separated. \item For every pair of affine opens $U, V \subset X$ which map into a common affine open of $S$ the intersection $U \cap V$ is a finite union of affine opens of $X$. \item There exists an affine open covering $S = \bigcup_{i \in I} U_i$ and for each $i$ an affine open covering $f^{-1}U_i = \bigcup_{j \in I_i} V_j$ such that for each $i$ and each pair $j, j' \in I_i$ the intersection $V_j \cap V_{j'}$ is a finite union of affine opens of $X$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-characterize-separated} Let $f : X \to S$ be a morphism of schemes. \begin{enumerate} \item If $f$ is separated then for every pair of affine opens $(U, V)$ of $X$ which map into a common affine open of $S$ we have \begin{enumerate} \item the intersection $U \cap V$ is affine. \item the ring map $\mathcal{O}_X(U) \otimes_{\mathbf{Z}} \mathcal{O}_X(V) \to \mathcal{O}_X(U \cap V)$ is surjective. \end{enumerate} \item If any pair of points $x_1, x_2 \in X$ lying over a common point $s \in S$ are contained in affine opens $x_1 \in U$, $x_2 \in V$ which map into a common affine open of $S$ such that (a), (b) hold, then $f$ is separated. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-fibre-product-after-map} Let $f : X \to T$ and $g : Y \to T$ be morphisms of schemes with the same target. Let $h : T \to S$ be a morphism of schemes. Then the induced morphism $i : X \times_T Y \to X \times_S Y$ is an immersion. If $T \to S$ is separated, then $i$ is a closed immersion. If $T \to S$ is quasi-separated, then $i$ is a quasi-compact morphism. \end{lemma} 
\begin{lemma} \label{lemma-semi-diagonal} Let $g : X \to Y$ be a morphism of schemes over $S$. The morphism $i : X \to X \times_S Y$ is an immersion. If $Y$ is separated over $S$ it is a closed immersion. If $Y$ is quasi-separated over $S$ it is quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-section-immersion} Let $f : X \to S$ be a morphism of schemes. Let $s : S \to X$ be a section of $f$ (in a formula $f \circ s = \text{id}_S$). Then $s$ is an immersion. If $f$ is separated then $s$ is a closed immersion. If $f$ is quasi-separated, then $s$ is quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-separated-permanence} Permanence properties. \begin{enumerate} \item A composition of separated morphisms is separated. \item A composition of quasi-separated morphisms is quasi-separated. \item The base change of a separated morphism is separated. \item The base change of a quasi-separated morphism is quasi-separated. \item A (fibre) product of separated morphisms is separated. \item A (fibre) product of quasi-separated morphisms is quasi-separated. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-compose-after-separated} \begin{slogan} Separated and quasi-separated morphisms satisfy cancellation. \end{slogan} Let $f : X \to Y$ and $g : Y \to Z$ be morphisms of schemes. If $g \circ f$ is separated then so is $f$. If $g \circ f$ is quasi-separated then so is $f$. \end{lemma} 
\begin{lemma} \label{lemma-quasi-compact-permanence} Let $f : X \to Y$ and $g : Y \to Z$ be morphisms of schemes. If $g \circ f$ is quasi-compact and $g$ is quasi-separated then $f$ is quasi-compact. \end{lemma} 
\begin{lemma} \label{lemma-affine-separated} An affine scheme is separated. A morphism from an affine scheme to another scheme is separated. \end{lemma} 
\begin{lemma} \label{lemma-curiosity} Let $f : X \to S$ be a morphism. Assume $f$ is separated and $S$ is a separated scheme. Suppose $U \subset X$ and $V \subset X$ are affine. Then $U \cap V$ is affine (and a closed subscheme of $U \times V$). \end{lemma} 
\begin{lemma} \label{lemma-separated-implies-valuative} Let $f : X \to S$ be a morphism of schemes. If $f$ is separated, then $f$ satisfies the uniqueness part of the valuative criterion. \end{lemma} 
\begin{lemma}[Valuative criterion separatedness] \label{lemma-valuative-criterion-separatedness} \begin{reference} \cite[II Proposition 7.2.3]{EGA} \end{reference} Let $f : X \to S$ be a morphism. Assume \begin{enumerate} \item the morphism $f$ is quasi-separated, and \item the morphism $f$ satisfies the uniqueness part of the valuative criterion. \end{enumerate} Then $f$ is separated. \end{lemma} 
\begin{definition} \label{definition-monomorphism} A morphism of schemes is called a {\it monomorphism} if it is a monomorphism in the category of schemes, see Categories, Definition \ref{categories-definition-mono-epi}. \end{definition} 
\begin{lemma} \label{lemma-monomorphism} \begin{slogan} A scheme morphism is a monomorphism iff its diagonal is an isomorphism. \end{slogan} Let $j : X \to Y$ be a morphism of schemes. Then $j$ is a monomorphism if and only if the diagonal morphism $\Delta_{X/Y} : X \to X \times_Y X$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-monomorphism-separated} A monomorphism of schemes is separated. \end{lemma} 
\begin{lemma} \label{lemma-composition-monomorphism} A composition of monomorphisms is a monomorphism. \end{lemma} 
\begin{lemma} \label{lemma-base-change-monomorphism} The base change of a monomorphism is a monomorphism. \end{lemma} 
\begin{lemma} \label{lemma-injective-points} Let $j : X \to Y$ be a morphism of schemes. If $j$ is injective on points, then $j$ is separated. \end{lemma} 
\begin{lemma} \label{lemma-injective-points-surjective-stalks} Let $j : X \to Y$ be a morphism of schemes. If \begin{enumerate} \item $j$ is injective on points, and \item for any $x \in X$ the ring map $j^\sharp_x : \mathcal{O}_{Y, j(x)} \to \mathcal{O}_{X, x}$ is surjective, \end{enumerate} then $j$ is a monomorphism. \end{lemma} 
\begin{lemma} \label{lemma-immersions-monomorphisms} An immersion of schemes is a monomorphism. In particular, any immersion is separated. \end{lemma} 
\begin{lemma} \label{lemma-subscheme-of-separated-scheme} Let $f : X \to S$ be a separated morphism. Any locally closed subscheme $Z \subset X$ is separated over $S$. \end{lemma} 
\begin{lemma} \label{lemma-mono-towards-spec-field} Let $k_1, \ldots, k_n$ be fields. For any monomorphism of schemes $X \to \Spec(k_1 \times \ldots \times k_n)$ there exists a subset $I \subset \{1, \ldots, n\}$ such that $X \cong \Spec(\prod_{i \in I} k_i)$ as schemes over $\Spec(k_1 \times \ldots \times k_n)$. More generally, if $X = \coprod_{i \in I} \Spec(k_i)$ is a disjoint union of spectra of fields and $Y \to X$ is a monomorphism, then there exists a subset $J \subset I$ such that $Y = \coprod_{i \in J} \Spec(k_i)$. \end{lemma} 
\begin{lemma} \label{lemma-push-forward-quasi-coherent} Let $f : X \to S$ be a morphism of schemes. If $f$ is quasi-compact and quasi-separated then $f_*$ transforms quasi-coherent $\mathcal{O}_X$-modules into quasi-coherent $\mathcal{O}_S$-modules. \end{lemma} 
\begin{lemma} \label{lemma-characterize-closed-immersions} Let $f : X \to Y$ be a morphism of schemes. Suppose that \begin{enumerate} \item $f$ induces a homeomorphism of $X$ with a closed subset of $Y$, and \item $f^\sharp : \mathcal{O}_Y \to f_*\mathcal{O}_X$ is surjective. \end{enumerate} Then $f$ is a closed immersion of schemes. \end{lemma} 
\begin{lemma} \label{lemma-composition-immersion} A composition of immersions of schemes is an immersion, a composition of closed immersions of schemes is a closed immersion, and a composition of open immersions of schemes is an open immersion. \end{lemma} 
