\begin{lemma} \label{lemma-Serre-functor-exists} Let $k$ be a field. Let $\mathcal{T}$ be a $k$-linear triangulated category such that $\dim_k \Hom_\mathcal{T}(X, Y) < \infty$ for all $X, Y \in \Ob(\mathcal{T})$. The following are equivalent \begin{enumerate} \item there exists a $k$-linear equivalence $S : \mathcal{T} \to \mathcal{T}$ and $k$-linear isomorphisms $c_{X, Y} : \Hom_\mathcal{T}(X, Y) \to \Hom_\mathcal{T}(Y, S(X))^\vee$ functorial in $X, Y \in \Ob(\mathcal{T})$, \item for every $X \in \Ob(\mathcal{T})$ the functor $Y \mapsto \Hom_\mathcal{T}(X, Y)^\vee$ is representable and the functor $Y \mapsto \Hom_\mathcal{T}(Y, X)^\vee$ is corepresentable. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-Serre-functor} Let $k$ be a field. Let $\mathcal{T}$ be a $k$-linear triangulated category such that $\dim_k \Hom_\mathcal{T}(X, Y) < \infty$ for all $X, Y \in \Ob(\mathcal{T})$. We say {\it a Serre functor exists} if the equivalent conditions of Lemma \ref{lemma-Serre-functor-exists} are satisfied. In this case a {\it Serre functor} is a $k$-linear equivalence $S : \mathcal{T} \to \mathcal{T}$ endowed with $k$-linear isomorphisms $c_{X, Y} : \Hom_\mathcal{T}(X, Y) \to \Hom_\mathcal{T}(Y, S(X))^\vee$ functorial in $X, Y \in \Ob(\mathcal{T})$. \end{definition} 
\begin{lemma} \label{lemma-Serre-functor} In the situation of Definition \ref{definition-Serre-functor}. If a Serre functor exists, then it is unique up to unique isomorphism and it is an exact functor of triangulated categories. \end{lemma} 
\begin{lemma} \label{lemma-Serre-functor-Gorenstein-proper} Let $k$ be a field. Let $X$ be a proper scheme over $k$ which is Gorenstein. Consider the complex $\omega_X^\bullet$ of Duality for Schemes, Lemmas \ref{duality-lemma-duality-proper-over-field}. Then the functor $$ S : D_{perf}(\mathcal{O}_X) \longrightarrow D_{perf}(\mathcal{O}_X),\quad K \longmapsto S(K) = \omega_X^\bullet \otimes_{\mathcal{O}_X}^\mathbf{L} K $$ is a Serre functor. \end{lemma} 
\begin{lemma} \label{lemma-perfect-for-R} With $k$, $n$, and $R$ as above, for an object $K$ of $D(R)$ the following are equivalent \begin{enumerate} \item $\sum_{i \in \mathbf{Z}} \dim_k H^i(K) < \infty$, and \item $K$ is a compact object. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-coherent-on-projective-space} Let $k$ be a field. Let $n \geq 0$. Let $K \in D_\QCoh(\mathcal{O}_{\mathbf{P}^n_k})$. The following are equivalent \begin{enumerate} \item $K$ is in $D^b_{\textit{Coh}}(\mathcal{O}_{\mathbf{P}^n_k})$, \item $\sum_{i \in \mathbf{Z}} \dim_k H^i(\mathbf{P}^n_k, E \otimes^\mathbf{L} K) < \infty$ for each perfect object $E$ of $D(\mathcal{O}_{\mathbf{P}^n_k})$, \item $\sum_{i \in \mathbf{Z}} \dim_k \Ext^i_{\mathbf{P}^n_k}(E, K) < \infty$ for each perfect object $E$ of $D(\mathcal{O}_{\mathbf{P}^n_k})$, \item $\sum_{i \in \mathbf{Z}} \dim_k H^i(\mathbf{P}^n_k, K \otimes^\mathbf{L} \mathcal{O}_{\mathbf{P}^n_k}(d)) < \infty$ for $d = 0, 1, \ldots, n$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-finiteness} Let $X$ be a scheme proper over a field $k$. Let $K \in D^b_{\textit{Coh}}(\mathcal{O}_X)$ and let $E$ in $D(\mathcal{O}_X)$ be perfect. Then $\sum_{i \in \mathbf{Z}} \dim_k \Ext^i_X(E, K) < \infty$. \end{lemma} 
\begin{lemma} \label{lemma-characterize-dbcoh-projective} \begin{reference} In the projective case this is \cite[Lemma 7.46]{Rouquier-dimensions} and implicit in \cite[Theorem A.1]{BvdB} \end{reference} Let $X$ be a proper scheme over a field $k$. Let $K \in \Ob(D_\QCoh(\mathcal{O}_X))$. The following are equivalent \begin{enumerate} \item $K \in D^b_{\textit{Coh}}(\mathcal{O}_X)$, and \item $\sum_{i \in \mathbf{Z}} \dim_k \Ext^i_X(E, K) < \infty$ for all perfect $E$ in $D(\mathcal{O}_X)$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-maps-from-compact-filtered} Let $\mathcal{D}$ be a triangulated category. Let $\mathcal{D}' \subset \mathcal{D}$ be a full triangulated subcategory. Let $X \in \Ob(\mathcal{D})$. The category of arrows $E \to X$ with $E \in \Ob(\mathcal{D}')$ is filtered. \end{lemma} 
\begin{lemma} \label{lemma-van-den-bergh} \begin{reference} \cite[Lemma 2.14]{CKN} \end{reference} Let $k$ be a field. Let $\mathcal{D}$ be a $k$-linear triangulated category which has direct sums and is compactly generated. Denote $\mathcal{D}_c$ the full subcategory of compact objects. Let $H : \mathcal{D}_c^{opp} \to \text{Vect}_k$ be a $k$-linear cohomological functor such that $\dim_k H(X) < \infty$ for all $X \in \Ob(\mathcal{D}_c)$. Then $H$ is isomorphic to the functor $X \mapsto \Hom(X, Y)$ for some $Y \in \Ob(\mathcal{D})$. \end{lemma} 
\begin{theorem} \label{theorem-bondal-van-den-bergh} \begin{reference} In the projective case this is \cite[Theorem A.1]{BvdB} \end{reference} Let $X$ be a proper scheme over a field $k$. Let $F : D_{perf}(\mathcal{O}_X)^{opp} \to \text{Vect}_k$ be a $k$-linear cohomological functor such that $$ \sum\nolimits_{n \in \mathbf{Z}} \dim_k F(E[n]) < \infty $$ for all $E \in D_{perf}(\mathcal{O}_X)$. Then $F$ is isomorphic to a functor of the form $E \mapsto \Hom_X(E, K)$ for some $K \in D^b_{\textit{Coh}}(\mathcal{O}_X)$. \end{theorem} 
\begin{lemma} \label{lemma-homological-representable} Let $X$ be a proper scheme over a field $k$ which is regular. Let $G : D_{perf}(\mathcal{O}_X) \to \text{Vect}_k$ be a $k$-linear homological functor such that $$ \sum\nolimits_{n \in \mathbf{Z}} \dim_k G(E[n]) < \infty $$ for all $E \in D_{perf}(\mathcal{O}_X)$. Then $G$ is isomorphic to a functor of the form $E \mapsto \Hom_X(K, E)$ for some $K \in D_{perf}(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-always-right-adjoints} Let $k$ be a field. Let $X$ and $Y$ be proper schemes over $k$. If $X$ is regular, then any $k$-linear exact functor $F : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$ has an exact right adjoint and an exact left adjoint. \end{lemma} 
\begin{definition} \label{definition-fourier-mukai-functor} Let $S$ be a scheme. Let $X$ and $Y$ be schemes over $S$. Let $K \in D(\mathcal{O}_{X \times_S Y})$. The exact functor $$ \Phi_K : D(\mathcal{O}_X) \longrightarrow D(\mathcal{O}_Y),\quad M \longmapsto R\text{pr}_{2, *}( L\text{pr}_1^*M \otimes_{\mathcal{O}_{X \times_S Y}}^\mathbf{L} K) $$ of triangulated categories is called a {\it Fourier-Mukai functor} and $K$ is called a {\it Fourier-Mukai kernel} for this functor. Moreover, \begin{enumerate} \item if $\Phi_K$ sends $D_\QCoh(\mathcal{O}_X)$ into $D_\QCoh(\mathcal{O}_Y)$ then the resulting exact functor $\Phi_K : D_\QCoh(\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_Y)$ is called a Fourier-Mukai functor, \item if $\Phi_K$ sends $D_{perf}(\mathcal{O}_X)$ into $D_{perf}(\mathcal{O}_Y)$ then the resulting exact functor $\Phi_K : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$ is called a Fourier-Mukai functor, and \item if $X$ and $Y$ are Noetherian and $\Phi_K$ sends $D^b_{\textit{Coh}}(\mathcal{O}_X)$ into $D^b_{\textit{Coh}}(\mathcal{O}_Y)$ then the resulting exact functor $\Phi_K : D^b_{\textit{Coh}}(\mathcal{O}_X) \to D^b_{\textit{Coh}}(\mathcal{O}_Y)$ is called a Fourier-Mukai functor. Similarly for $D_{\textit{Coh}}$, $D^+_{\textit{Coh}}$, $D^-_{\textit{Coh}}$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-fourier-Mukai-QCoh} Let $S$ be a scheme. Let $X$ and $Y$ be schemes over $S$. Let $K \in D(\mathcal{O}_{X \times_S Y})$. The corresponding Fourier-Mukai functor $\Phi_K$ sends $D_\QCoh(\mathcal{O}_X)$ into $D_\QCoh(\mathcal{O}_Y)$ if $K$ is in $D_\QCoh(\mathcal{O}_{X \times_S Y})$ and $X \to S$ is quasi-compact and quasi-separated. \end{lemma} 
\begin{lemma} \label{lemma-compose-fourier-mukai} Let $S$ be a scheme. Let $X, Y, Z$ be schemes over $S$. Assume $X \to S$, $Y \to S$, and $Z \to S$ are quasi-compact and quasi-separated. Let $K \in D_\QCoh(\mathcal{O}_{X \times_S Y})$. Let $K' \in D_\QCoh(\mathcal{O}_{Y \times_S Z})$. Consider the Fourier-Mukai functors $\Phi_K : D_\QCoh(\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_Y)$ and $\Phi_{K'} : D_\QCoh(\mathcal{O}_Y) \to D_\QCoh(\mathcal{O}_Z)$. If $X$ and $Z$ are tor independent over $S$ and $Y \to S$ is flat, then $$ \Phi_{K'} \circ \Phi_K = \Phi_{K''} : D_\QCoh(\mathcal{O}_X) \longrightarrow D_\QCoh(\mathcal{O}_Z) $$ where $$ K'' = R\text{pr}_{13, *}( L\text{pr}_{12}^*K \otimes_{\mathcal{O}_{X \times_S Y \times_S Z}}^\mathbf{L} L\text{pr}_{23}^*K') $$ in $D_\QCoh(\mathcal{O}_{X \times_S Z})$. \end{lemma} 
\begin{lemma} \label{lemma-fourier-mukai} Let $S$ be a scheme. Let $X$ and $Y$ be schemes over $S$. Let $K \in D(\mathcal{O}_{X \times_S Y})$. The corresponding Fourier-Mukai functor $\Phi_K$ sends $D_{perf}(\mathcal{O}_X)$ into $D_{perf}(\mathcal{O}_Y)$ if at least one of the following conditions is satisfied: \begin{enumerate} \item $S$ is Noetherian, $X \to S$ and $Y \to S$ are of finite type, $K \in D^b_{\textit{Coh}}(\mathcal{O}_{X \times_S Y})$, the support of $H^i(K)$ is proper over $Y$ for all $i$, and $K$ has finite tor dimension as an object of $D(\text{pr}_2^{-1}\mathcal{O}_Y)$, \item $X \to S$ is of finite presentation and $K$ can be represented by a bounded complex $\mathcal{K}^\bullet$ of finitely presented $\mathcal{O}_{X \times_S Y}$-modules, flat over $Y$, with support proper over $Y$, \item $X \to S$ is a proper flat morphism of finite presentation and $K$ is perfect, \item $S$ is Noetherian, $X \to S$ is flat and proper, and $K$ is perfect \item $X \to S$ is a proper flat morphism of finite presentation and $K$ is $Y$-perfect, \item $S$ is Noetherian, $X \to S$ is flat and proper, and $K$ is $Y$-perfect. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-fourier-mukai-Coh} Let $S$ be a Noetherian scheme. Let $X$ and $Y$ be schemes of finite type over $S$. Let $K \in D^b_{\textit{Coh}}(\mathcal{O}_{X \times_S Y})$. The corresponding Fourier-Mukai functor $\Phi_K$ sends $D^b_{\textit{Coh}}(\mathcal{O}_X)$ into $D^b_{\textit{Coh}}(\mathcal{O}_Y)$ if at least one of the following conditions is satisfied: \begin{enumerate} \item the support of $H^i(K)$ is proper over $Y$ for all $i$, and $K$ has finite tor dimension as an object of $D(\text{pr}_1^{-1}\mathcal{O}_X)$, \item $K$ can be represented by a bounded complex $\mathcal{K}^\bullet$ of coherent $\mathcal{O}_{X \times_S Y}$-modules, flat over $X$, with support proper over $Y$, \item the support of $H^i(K)$ is proper over $Y$ for all $i$ and $X$ is a regular scheme, \item $K$ is perfect, the support of $H^i(K)$ is proper over $Y$ for all $i$, and $Y \to S$ is flat. \end{enumerate} Furthermore in each case the support condition is automatic if $X \to S$ is proper. \end{lemma} 
\begin{lemma} \label{lemma-fourier-mukai-right-adjoint} \begin{reference} Compare with discussion in \cite{Rizzardo}. \end{reference} Let $X \to S$ and $Y \to S$ be morphisms of quasi-compact and quasi-separated schemes. Let $\Phi : D_\QCoh(\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_Y)$ be a Fourier-Mukai functor with pseudo-coherent kernel $K \in D_\QCoh(\mathcal{O}_{X \times_S Y})$. Let $a : D_\QCoh(\mathcal{O}_Y) \to  D_\QCoh(\mathcal{O}_{X \times_S Y})$ be the right adjoint to $R\text{pr}_{2, *}$, see Duality for Schemes, Lemma \ref{duality-lemma-twisted-inverse-image}. Denote $$ K' = (Y \times_S X \to X \times_S Y)^* R\SheafHom_{\mathcal{O}_{X \times_S Y}}(K, a(\mathcal{O}_Y)) \in D_\QCoh(\mathcal{O}_{Y \times_S X}) $$ and denote $\Phi' : D_\QCoh(\mathcal{O}_Y) \to D_\QCoh(\mathcal{O}_X)$ the corresponding Fourier-Mukai transform. There is a canonical map $$ \Hom_X(M, \Phi'(N)) \longrightarrow \Hom_Y(\Phi(M), N) $$ functorial in $M$ in $D_\QCoh(\mathcal{O}_X)$ and $N$ in $D_\QCoh(\mathcal{O}_Y)$ which is an isomorphism if \begin{enumerate} \item $N$ is perfect, or \item $K$ is perfect and $X \to S$ is proper flat and of finite presentation. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-fourier-mukai-left-adjoint} \begin{reference} Compare with discussion in \cite{Rizzardo}. \end{reference} Let $S$ be a Noetherian scheme. Let $Y \to S$ be a flat proper Gorenstein morphism and let $X \to S$ be a finite type morphism. Denote $\omega^\bullet_{Y/S}$ the relative dualizing complex of $Y$ over $S$. Let $\Phi : D_\QCoh(\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_Y)$ be a Fourier-Mukai functor with perfect kernel $K \in D_\QCoh(\mathcal{O}_{X \times_S Y})$. Denote $$ K' = (Y \times_S X \to X \times_S Y)^*(K^\vee \otimes_{\mathcal{O}_{X \times_S Y}}^\mathbf{L} L\text{pr}_2^*\omega^\bullet_{Y/S}) \in D_\QCoh(\mathcal{O}_{Y \times_S X}) $$ and denote $\Phi' : D_\QCoh(\mathcal{O}_Y) \to D_\QCoh(\mathcal{O}_X)$ the corresponding Fourier-Mukai transform. There is a canonical isomorphism $$ \Hom_Y(N, \Phi(M)) \longrightarrow \Hom_X(\Phi'(N), M) $$ functorial in $M$ in $D_\QCoh(\mathcal{O}_X)$ and $N$ in $D_\QCoh(\mathcal{O}_Y)$. \end{lemma} 
\begin{lemma} \label{lemma-fourier-mukai-flat-proper-over-noetherian} Let $S$ be a Noetherian scheme. \begin{enumerate} \item For $X$, $Y$ proper and flat over $S$ and $K$ in $D_{perf}(\mathcal{O}_{X \times_S Y})$ we obtain a Fourier-Mukai functor $\Phi_K : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$. \item For $X$, $Y$, $Z$ proper and flat over $S$, $K \in D_{perf}(\mathcal{O}_{X \times_S Y})$, $K' \in D_{perf}(\mathcal{O}_{Y \times_S Z})$ the composition $\Phi_{K'} \circ \Phi_K : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Z)$ is equal to $\Phi_{K''}$ with $K'' \in D_{perf}(\mathcal{O}_{X \times_S Z})$ computed as in Lemma \ref{lemma-compose-fourier-mukai}, \item For $X$, $Y$, $K$, $\Phi_K$ as in (1) if $X \to S$ is Gorenstein, then $\Phi_{K'} : D_{perf}(\mathcal{O}_Y) \to D_{perf}(\mathcal{O}_X)$ is a right adjoint to $\Phi_K$ where $K' \in D_{perf}(\mathcal{O}_{Y \times_S X})$ is the pullback of $L\text{pr}_1^*\omega_{X/S}^\bullet \otimes_{\mathcal{O}_{X \times_S Y}}^\mathbf{L} K^\vee$ by $Y \times_S X \to X \times_S Y$. \item For $X$, $Y$, $K$, $\Phi_K$ as in (1) if $Y \to S$ is Gorenstein, then $\Phi_{K''} : D_{perf}(\mathcal{O}_Y) \to D_{perf}(\mathcal{O}_X)$ is a left adjoint to $\Phi_K$ where $K'' \in D_{perf}(\mathcal{O}_{Y \times_S X})$ is the pullback of $L\text{pr}_2^*\omega_{Y/S}^\bullet \otimes_{\mathcal{O}_{X \times_S Y}}^\mathbf{L} K^\vee$ by $Y \times_S X \to X \times_S Y$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-on-product} Let $R$ be a Noetherian ring. Let $X$, $Y$ be finite type schemes over $R$ having the resolution property. For any coherent $\mathcal{O}_{X \times_R Y}$-module $\mathcal{F}$ there exist a surjection $\mathcal{E} \boxtimes \mathcal{G} \to \mathcal{F}$ where $\mathcal{E}$ is a finite locally free $\mathcal{O}_X$-module and $\mathcal{G}$ is a finite locally free $\mathcal{O}_Y$-module. \end{lemma} 
\begin{lemma} \label{lemma-on-product-general} Let $R$ be a ring. Let $X$, $Y$ be quasi-compact and quasi-separated schemes over $R$ having the resolution property. For any finite type quasi-coherent $\mathcal{O}_{X \times_R Y}$-module $\mathcal{F}$ there exist a surjection $\mathcal{E} \boxtimes \mathcal{G} \to \mathcal{F}$ where $\mathcal{E}$ is a finite locally free $\mathcal{O}_X$-module and $\mathcal{G}$ is a finite locally free $\mathcal{O}_Y$-module. \end{lemma} 
\begin{lemma} \label{lemma-diagonal-resolution} Let $R$ be a Noetherian ring. Let $X$ be a separated finite type scheme over $R$ which has the resolution property. Set $\mathcal{O}_\Delta = \Delta_*(\mathcal{O}_X)$ where $\Delta : X \to X \times_R X$ is the diagonal of $X/k$. There exists a resolution $$ \ldots \to \mathcal{E}_2 \boxtimes \mathcal{G}_2 \to \mathcal{E}_1 \boxtimes \mathcal{G}_1 \to \mathcal{E}_0 \boxtimes \mathcal{G}_0 \to \mathcal{O}_\Delta \to 0 $$ where each $\mathcal{E}_i$ and $\mathcal{G}_i$ is a finite locally free $\mathcal{O}_X$-module. \end{lemma} 
\begin{lemma} \label{lemma-Ext-0-regular} Let $X$ be a regular Noetherian scheme of dimension $d < \infty$. Then \begin{enumerate} \item for $\mathcal{F}$, $\mathcal{G}$ coherent $\mathcal{O}_X$-modules we have $\Ext^n_X(\mathcal{F}, \mathcal{G}) = 0$ for $n > d$, and \item for $K, L \in D^b_{\textit{Coh}}(\mathcal{O}_X)$ and $a \in \mathbf{Z}$ if $H^i(K) = 0$ for $i < a + d$ and $H^i(L) = 0$ for $i \geq a$ then $\Hom_X(K, L) = 0$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-split-complex-regular} Let $X$ be a regular Noetherian scheme of dimension $d < \infty$. Let $K \in D^b_{\textit{Coh}}(\mathcal{O}_X)$ and $a \in \mathbf{Z}$. If $H^i(K) = 0$ for $a < i < a + d$, then $K = \tau_{\leq a}K \oplus \tau_{\geq a + d}K$. \end{lemma} 
\begin{lemma} \label{lemma-diagonal-trick} Let $k$ be a field. Let $X$ be a quasi-compact separated smooth scheme over $k$. There exist finite locally free $\mathcal{O}_X$-modules $\mathcal{E}$ and $\mathcal{G}$ such that $$ \mathcal{O}_\Delta \in \langle \mathcal{E} \boxtimes \mathcal{G} \rangle $$ in $D(\mathcal{O}_{X \times X})$ where the notation is as in Derived Categories, Section \ref{derived-section-generators}. \end{lemma} 
\begin{lemma} \label{lemma-smooth-proper-strong-generator} Let $k$ be a field. Let $X$ be a scheme proper and smooth over $k$. Then $D_{perf}(\mathcal{O}_X)$ has a strong generator. \end{lemma} 
\begin{lemma} \label{lemma-diagonal-trick-proper} Let $k$ be a field. Let $X$ be a proper smooth scheme over $k$. There exists integers $m, n \geq 1$ and a finite locally free $\mathcal{O}_X$-module $\mathcal{G}$ such that every coherent $\mathcal{O}_X$-module is contained in $smd(add(\mathcal{G}[-m, m])^{\star n})$ with notation as in Derived Categories, Section \ref{derived-section-operate-on-full}. \end{lemma} 
\begin{lemma} \label{lemma-boundedness} Let $k$ be a field. Let $X$ be a smooth proper scheme over $k$. Let $\mathcal{A}$ be an abelian category. Let $H : D_{perf}(\mathcal{O}_X) \to \mathcal{A}$ be a homological functor (Derived Categories, Definition \ref{derived-definition-homological}) such that for all $K$ in $D_{perf}(\mathcal{O}_X)$ the object $H^i(K)$ is nonzero for only a finite number of $i \in \mathbf{Z}$. Then there exists an integer $m \geq 1$ such that $H^i(\mathcal{F}) = 0$ for any coherent $\mathcal{O}_X$-module $\mathcal{F}$ and $i \not \in [-m, m]$. Similarly for cohomological functors. \end{lemma} 
\begin{lemma} \label{lemma-bounded-fibres} Let $k$ be a field. Let $X$, $Y$ be finite type schemes over $k$. Let $K_0 \to K_1 \to K_2 \to \ldots$ be a system of objects of $D_{perf}(\mathcal{O}_{X \times Y})$ and $m \geq 0$ an integer such that \begin{enumerate} \item $H^q(K_i)$ is nonzero only for $q \leq m$, \item for every coherent $\mathcal{O}_X$-module $\mathcal{F}$ with $\dim(\text{Supp}(\mathcal{F})) = 0$ the object $$ R\text{pr}_{2, *}( \text{pr}_1^*\mathcal{F} \otimes_{\mathcal{O}_{X \times Y}}^\mathbf{L} K_n) $$ has vanishing cohomology sheaves in degrees outside $[-m, m] \cup [-m - n, m - n]$ and for $n > 2m$ the transition maps induce isomorphisms on cohomology sheaves in degrees in $[-m, m]$. \end{enumerate} Then $K_n$ has vanishing cohomology sheaves in degrees outside $[-m, m] \cup [-m - n, m - n]$ and for $n > 2m$ the transition maps induce isomorphisms on cohomology sheaves in degrees in $[-m, m]$. Moreover, if $X$ and $Y$ are smooth over $k$, then for $n$ large enough we find $K_n = K \oplus C_n$ in $D_{perf}(\mathcal{O}_{X \times Y})$ where $K$ has cohomology only indegrees $[-m, m]$ and $C_n$ only in degrees $[-m - n, m - n]$ and the transition maps define isomorphisms between various copies of $K$. \end{lemma} 
\begin{definition} \label{definition-siblings} Let $\mathcal{A}$ be an abelian category. Let $\mathcal{D}$ be a triangulated category. We say two exact functors of triangulated categories $$ F, F' : D^b(\mathcal{A}) \longrightarrow \mathcal{D} $$ are {\it siblings}, or we say $F'$ is a {\it sibling} of $F$, if the following two conditions are satisfied \begin{enumerate} \item the functors $F \circ i$ and $F' \circ i$ are isomorphic where $i : \mathcal{A} \to D^b(\mathcal{A})$ is the inclusion functor, and \item $F(K) \cong F'(K)$ for any $K$ in $D^b(\mathcal{A})$. \end{enumerate} \end{definition} 
\begin{lemma} \label{lemma-sibling-fully-faithful} Let $\mathcal{A}$ be an abelian category. Let $\mathcal{D}$ be a triangulated category. Let $F, F' : D^b(\mathcal{A}) \longrightarrow \mathcal{D}$ be exact functors of triangulated categories. Assume \begin{enumerate} \item the functors $F \circ i$ and $F' \circ i$ are isomorphic where $i : \mathcal{A} \to D^b(\mathcal{A})$ is the inclusion functor, and \item for all $X, Y \in \Ob(\mathcal{A})$ we have $\Ext^q_\mathcal{D}(F(X), F(Y)) = 0$ for $q < 0$ (for example if $F$ is fully faithful). \end{enumerate} Then $F$ and $F'$ are siblings. \end{lemma} 
\begin{lemma} \label{lemma-sibling-faithful} Let $F$ and $F'$ be siblings as in Definition \ref{definition-siblings}. Then \begin{enumerate} \item if $F$ is essentially surjective, then $F'$ is essentially surjective, \item if $F$ is fully faithful, then $F'$ is fully faithful. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-good-map} Let $\mathcal{A}$ be an abelian category with enough negative objects. Let $X \in D^b(\mathcal{A})$. Let $b \in \mathbf{Z}$ with $H^i(X) = 0$ for $i > b$. Then there exists a map $N[-b] \to X$ such that the induced map $N \to H^b(X)$ is surjective and $\Hom(H^b(X), N) = 0$. \end{lemma} 
\begin{lemma} \label{lemma-good-map-zero} Let $\mathcal{A}$ be an abelian category with enough negative objects. Let $f : X \to X'$ be a morphism of $D^b(\mathcal{A})$. Let $b \in \mathbf{Z}$ such that $H^i(X) = 0$ for $i > b$ and $H^i(X') = 0$ for $i \geq b$. Then there exists a map $N[-b] \to X$ such that the induced map $N \to H^b(X)$ is surjective, such that $\Hom(H^b(X), N) = 0$, and such that the composition $N[-b] \to X \to X'$ is zero. \end{lemma} 
\begin{proposition} \label{proposition-siblings-isomorphic} \begin{reference} \cite[Proposition 2.16]{Orlov-K3}; the fact that we do not need to assume vanishing of $\Ext^q(N, X)$ for $q > 0$ in the definition of negative objects above is due to \cite{Canonaco-Stellari}. \end{reference} Let $F$ and $F'$ be siblings as in Definition \ref{definition-siblings}. Assume that $F$ is fully faithful and that $\mathcal{A}$ has enough negative objects (see above). Then $F$ and $F'$ are isomorphic functors. \end{proposition} 
\begin{lemma} \label{lemma-get-fully-faithful} \begin{reference} Variant of \cite[Lemma 2.15]{Orlov-K3} \end{reference} Let $F : \mathcal{D} \to \mathcal{D}'$ be an exact functor of triangulated categories. Let $S \subset \Ob(\mathcal{D})$ be a set of objects. Assume \begin{enumerate} \item $F$ has both right and left adjoints, \item for $K \in \mathcal{D}$ if $\Hom(E, K[i]) = 0$ for all $E \in S$ and $i \in \mathbf{Z}$ then $K = 0$, \item for $K \in \mathcal{D}$ if $\Hom(K, E[i]) = 0$ for all $E \in S$ and $i \in \mathbf{Z}$ then $K = 0$, \item the map $\Hom(E, E'[i]) \to \Hom(F(E), F(E')[i])$ induced by $F$ is bijective for all $E, E' \in S$ and $i \in \mathbf{Z}$. \end{enumerate} Then $F$ is fully faithful. \end{lemma} 
\begin{lemma} \label{lemma-duality-at-point} Let $k$ be a field. Let $X$ be a scheme of finite type over $k$ which is regular. Let $x \in X$ be a closed point. For a coherent $\mathcal{O}_X$-module $\mathcal{F}$ supported at $x$ choose a coherent $\mathcal{O}_X$-module $\mathcal{F}'$ supported at $x$ such that $\mathcal{F}_x$ and $\mathcal{F}'_x$ are Matlis dual. Then there is an isomorphism $$ \Hom_X(\mathcal{F}, M) = H^0(X, M \otimes_{\mathcal{O}_X}^\mathbf{L} \mathcal{F}'[-d_x]) $$ where $d_x = \dim(\mathcal{O}_{X, x})$ functorial in $M$ in $D_{perf}(\mathcal{O}_X)$. \end{lemma} 
\begin{lemma} \label{lemma-orthogonal-point-sheaf} Let $k$ be a field. Let $X$ be a scheme of finite type over $k$ which is regular. Let $x \in X$ be a closed point and denote $\mathcal{O}_x$ the skyscraper sheaf at $x$ with value $\kappa(x)$. Let $K$ in $D_{perf}(\mathcal{O}_X)$. \begin{enumerate} \item If $\Ext^i_X(\mathcal{O}_x, K) = 0$ then there exists an open neighbourhood $U$ of $x$ such that $H^{i - d_x}(K)|_U = 0$ where $d_x = \dim(\mathcal{O}_{X, x})$. \item If $\Hom_X(\mathcal{O}_x, K[i]) = 0$ for all $i \in \mathbf{Z}$, then $K$ is zero in an open neighbourhood of $x$. \item If $\Ext^i_X(K, \mathcal{O}_x) = 0$ then there exists an open neighbourhood $U$ of $x$ such that $H^i(K^\vee)|_U = 0$. \item If $\Hom_X(K, \mathcal{O}_x[i]) = 0$ for all $i \in \mathbf{Z}$, then $K$ is zero in an open neighbourhood of $x$. \item If $H^i(X, K \otimes_{\mathcal{O}_X}^\mathbf{L} \mathcal{O}_x) = 0$ then there exists an open neighbourhood $U$ of $x$ such that $H^i(K)|_U = 0$. \item If $H^i(X, K \otimes_{\mathcal{O}_X}^\mathbf{L} \mathcal{O}_x) = 0$ for $i \in \mathbf{Z}$ then $K$ is zero in an open neighbourhood of $x$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-hom-into-point-sheaf} Let $X$ be a Noetherian scheme. Let $x \in X$ be a closed point and denote $\mathcal{O}_x$ the skyscraper sheaf at $x$ with value $\kappa(x)$. Let $K$ in $D^b_{\textit{Coh}}(\mathcal{O}_X)$. Let $b \in \mathbf{Z}$. The following are equivalent \begin{enumerate} \item $H^i(K)_x = 0$ for all $i > b$ and \item $\Hom_X(K, \mathcal{O}_x[-i]) = 0$ for all $i > b$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-get-fully-faithful-geometric} Let $k$ be a field. Let $X$ and $Y$ be proper schemes over $k$. Assume $X$ is regular. Then a $k$-linear exact functor $F : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$ is fully faithful if and only if for any closed points $x, x' \in X$ the maps $$ F : \Ext^i_X(\mathcal{O}_x, \mathcal{O}_{x'}) \longrightarrow \Ext^i_Y(F(\mathcal{O}_x), F(\mathcal{O}_{x'})) $$ are isomorphisms for all $i \in \mathbf{Z}$. Here $\mathcal{O}_x$ is the skyscraper sheaf at $x$ with value $\kappa(x)$. \end{lemma} 
\begin{lemma} \label{lemma-noah-pre} \begin{reference} Email from Noah Olander of Jun 9, 2020 \end{reference} Let $k$ be a field. Let $X$ be a proper scheme over $k$ which is regular. Let $F : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_X)$ be a $k$-linear exact functor. Assume for every coherent $\mathcal{O}_X$-module $\mathcal{F}$ with $\dim(\text{Supp}(\mathcal{F})) = 0$ there is an isomorphism $\mathcal{F} \cong F(\mathcal{F})$. Then $F$ is fully faithful. \end{lemma} 
\begin{definition} \label{definition-siblings-geometric} Let $k$ be a field. Let $X$, $Y$ be finite type schemes over $k$. Recall that $D^b_{\textit{Coh}}(\mathcal{O}_X) = D^b(\textit{Coh}(\mathcal{O}_X))$ by Derived Categories of Schemes, Proposition \ref{perfect-proposition-DCoh}. We say two $k$-linear exact functors $$ F, F' : D^b_{\textit{Coh}}(\mathcal{O}_X) = D^b(\textit{Coh}(\mathcal{O}_X)) \longrightarrow D^b_{\textit{Coh}}(\mathcal{O}_Y) $$ are {\it siblings}, or we say $F'$ is a {\it sibling} of $F$ if $F$ and $F'$ are siblings in the sense of Definition \ref{definition-siblings} with abelian category being $\textit{Coh}(\mathcal{O}_X)$. If $X$ is regular then $D_{perf}(\mathcal{O}_X) = D^b_{\textit{Coh}}(\mathcal{O}_X)$ by Derived Categories of Schemes, Lemma \ref{perfect-lemma-perfect-on-noetherian} and we use the same terminology for $k$-linear exact functors $F, F' : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$. \end{definition} 
\begin{lemma} \label{lemma-exact-functor-preserving-Coh} Let $k$ be a field. Let $X$, $Y$ be finite type schemes over $k$ with $X$ separated. Let $F : D^b_{\textit{Coh}}(\mathcal{O}_X) \to D^b_{\textit{Coh}}(\mathcal{O}_Y)$ be a $k$-linear exact functor sending $\textit{Coh}(\mathcal{O}_X) \subset D^b_{\textit{Coh}}(\mathcal{O}_X)$ into $\textit{Coh}(\mathcal{O}_Y) \subset D^b_{\textit{Coh}}(\mathcal{O}_Y)$. Then there exists a Fourier-Mukai functor $F' : D^b_{\textit{Coh}}(\mathcal{O}_X) \to D^b_{\textit{Coh}}(\mathcal{O}_Y)$ whose kernel is a coherent $\mathcal{O}_{X \times Y}$-module $\mathcal{K}$ flat over $X$ and with support finite over $Y$ which is a sibling of $F$. \end{lemma} 
\begin{lemma} \label{lemma-two-functors-pre} Let $k$ be a field. Let $X$, $Y$ be proper schemes over $k$. Assume $X$ is regular. Let $F, G : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$ be $k$-linear exact functors such that \begin{enumerate} \item $F(\mathcal{F}) \cong G(\mathcal{F})$ for any coherent $\mathcal{O}_X$-module $\mathcal{F}$ with $\dim(\text{Supp}(\mathcal{F})) = 0$, \item $F$ is fully faithful. \end{enumerate} Then the essential image of $G$ is contained in the essential image of $F$. \end{lemma} 
\begin{lemma} \label{lemma-noah} \begin{reference} Email from Noah Olander of Jun 8, 2020 \end{reference} Let $k$ be a field. Let $X$ be a proper scheme over $k$ which is regular. Let $F : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_X)$ be a $k$-linear exact functor. Assume for every coherent $\mathcal{O}_X$-module $\mathcal{F}$ with $\dim(\text{Supp}(\mathcal{F})) = 0$ there is an isomorphism $\mathcal{F} \cong F(\mathcal{F})$. Then there exists an automorphism $f : X \to X$ over $k$ which induces the identity on the underlying topological space\footnote{This often forces $f$ to be the identity, see Varieties, Lemma \ref{varieties-lemma-automorphism}.} and an invertible $\mathcal{O}_X$-module $\mathcal{L}$ such that $F$ and $F'(M) = f^*M \otimes_{\mathcal{O}_X}^\mathbf{L} \mathcal{L}$ are siblings. \end{lemma} 
\begin{lemma} \label{lemma-two-functors} Let $k$ be a field. Let $X$, $Y$ be proper schemes over $k$. Assume $X$ regular. Let $F, G : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$ be $k$-linear exact functors such that \begin{enumerate} \item $F(\mathcal{F}) \cong G(\mathcal{F})$ for any coherent $\mathcal{O}_X$-module $\mathcal{F}$ with $\dim(\text{Supp}(\mathcal{F})) = 0$, \item $F$ is fully faithful, and \item $G$ is a Fourier-Mukai functor whose kernel is in $D_{perf}(\mathcal{O}_{X \times Y})$. \end{enumerate} Then there exists a Fourier-Mukai functor $F' : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$ whose kernel is in $D_{perf}(\mathcal{O}_{X \times Y})$ such that $F$ and $F'$ are siblings. \end{lemma} 
\begin{lemma} \label{lemma-fully-faithful} Let $k$ be a field. Let $X$ and $Y$ be smooth proper schemes over $k$. Given a $k$-linear, exact, fully faithful functor $F : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$ there exists a Fourier-Mukai functor $F' : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$ whose kernel is in $D_{perf}(\mathcal{O}_{X \times Y})$ which is a sibling to $F$. \end{lemma} 
\begin{theorem}[Orlov] \label{theorem-fully-faithful} \begin{reference} \cite[Theorem 2.2]{Orlov-K3}; this is shown in \cite{Noah} without the assumption that $X$ be projective \end{reference} Let $k$ be a field. Let $X$ and $Y$ be smooth proper schemes over $k$ with $X$ projective over $k$. Any $k$-linear fully faithful exact  functor $F : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$ is a Fourier-Mukai functor for some kernel in $D_{perf}(\mathcal{O}_{X \times Y})$. \end{theorem} 
\begin{proposition} \label{proposition-equivalence} Let $k$ be a field. Let $X$ and $Y$ be smooth proper schemes over $k$. If $F : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$ is a $k$-linear exact equivalence of triangulated categories then there exists a Fourier-Mukai functor $F' : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$ whose kernel is in $D_{perf}(\mathcal{O}_{X \times Y})$ which is an equivalence and a sibling of $F$. \end{proposition} 
\begin{lemma} \label{lemma-uniqueness} Let $k$ be a field. Let $X$ be a smooth proper scheme over $k$. Let $K \in D_{perf}(\mathcal{O}_{X \times X})$. If the Fourier-Mukai functor $\Phi_K : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_X)$ is isomorphic to the identity functor, then $K \cong \Delta_*\mathcal{O}_X$ in $_{perf}(\mathcal{O}_{X \times X})$. \end{lemma} 
\begin{lemma} \label{lemma-base-change-is-functor} Let $S' \to S$ be a morphism of schemes. The rule which sends \begin{enumerate} \item a smooth proper scheme $X$ over $S$ to $X' =  S' \times_S X$, and \item the isomorphism class of an object $K$ of $D_{perf}(\mathcal{O}_{X \times_S Y})$ to the isomorphism class of $L(X' \times_{S'} Y' \to X \times_S Y)^*K$ in $D_{perf}(\mathcal{O}_{X' \times_{S'} Y'})$ \end{enumerate} is a functor from the category defined for $S$ to the category defined for $S'$. \end{lemma} 
\begin{definition} \label{definition-relative-equivalence-kernel} Let $S$ be a scheme. Let $X \to S$ and $Y \to S$ be smooth proper morphisms. An object $K \in D_{perf}(\mathcal{O}_{X \times_S Y})$ is said to be {\it the Fourier-Mukai kernel of a relative equivalence from $X$ to $Y$ over $S$} if there exist an object $K' \in D_{perf}(\mathcal{O}_{X \times_S Y})$ such that $$ \Delta_{X/S, *}\mathcal{O}_X \cong R\text{pr}_{13, *}(L\text{pr}_{12}^*K \otimes_{\mathcal{O}_{X \times_S Y \times_S X}}^\mathbf{L} L\text{pr}_{23}^*K') $$ in $D(\mathcal{O}_{X \times_S X})$ and $$ \Delta_{Y/S, *}\mathcal{O}_Y \cong R\text{pr}_{13, *}(L\text{pr}_{12}^*K' \otimes_{\mathcal{O}_{Y \times_S X \times_S Y}}^\mathbf{L} L\text{pr}_{23}^*K) $$ in $D(\mathcal{O}_{Y \times_S Y})$. In other words, the isomorphism class of $K$ defines an invertible arrow in the category defined in Section \ref{section-category-Fourier-Mukai-kernels}. \end{definition} 
\begin{lemma} \label{lemma-equivalences-rek} With notation as in Definition \ref{definition-relative-equivalence-kernel} let $K$ be the Fourier-Mukai kernel of a relative equivalence from $X$ to $Y$ over $S$. Then the corresponding Fourier-Mukai functors $\Phi_K : D_\QCoh(\mathcal{O}_X) \to D_\QCoh(\mathcal{O}_Y)$ (Lemma \ref{lemma-fourier-Mukai-QCoh}) and $\Phi_K : D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$ (Lemma \ref{lemma-fourier-mukai}) are equivalences. \end{lemma} 
\begin{lemma} \label{lemma-base-change-rek} With notation as in Definition \ref{definition-relative-equivalence-kernel} let $K$ be the Fourier-Mukai kernel of a relative equivalence from $X$ to $Y$ over $S$. Let $S_1 \to S$ be a morphism of schemes. Let $X_1 = S_1 \times_S X$ and $Y_1 = S_1 \times_S Y$. Then the pullback $K_1 = L(X_1 \times_{S_1} Y_1 \to X \times_S Y)^*K$ is the Fourier-Mukai kernel of a relative equivalence from $X_1$ to $Y_1$ over $S_1$. \end{lemma} 
\begin{lemma} \label{lemma-descend-rek} Let $S = \lim_{i \in I} S_i$ be a limit of a directed system of schemes with affine transition morphisms $g_{i'i} : S_{i'} \to S_i$. We assume that $S_i$ is quasi-compact and quasi-separated for all $i \in I$. Let $0 \in I$. Let $X_0 \to S_0$ and $Y_0 \to S_0$ be smooth proper morphisms. We set $X_i = S_i \times_{S_0} X_0$ for $i \geq 0$ and $X = S \times_{S_0} X_0$ and similarly for $Y_0$. If $K$ is the Fourier-Mukai kernel of a relative equivalence from $X$ to $Y$ over $S$ then for some $i \geq 0$ there exists a Fourier-Mukai kernel of a relative equivalence from $X_i$ to $Y_i$ over $S_i$. \end{lemma} 
\begin{lemma} \label{lemma-deform-koszul} Let $(R, \mathfrak m, \kappa) \to (A, \mathfrak n, \lambda)$ be a flat local ring homorphism of local rings which is essentially of finite presentation. Let $\overline{f}_1, \ldots, \overline{f}_r \in \mathfrak n/\mathfrak m A \subset A/\mathfrak m A$ be a regular sequence. Let $K \in D(A)$. Assume \begin{enumerate} \item $K$ is perfect, \item $K \otimes_A^\mathbf{L} A/\mathfrak m A$ is isomorphic in $D(A/\mathfrak m A)$ to the Koszul complex on $\overline{f}_1, \ldots, \overline{f}_r$. \end{enumerate} Then $K$ is isomorphic in $D(A)$ to a Koszul complex on a regular sequence $f_1, \ldots, f_r \in A$ lifting the given elements $\overline{f}_1, \ldots, \overline{f}_r$. Moreover, $A/(f_1, \ldots, f_r)$ is flat over $R$. \end{lemma} 
\begin{lemma} \label{lemma-limit-arguments} Let $R \to S$ be a finite type flat ring map of Noetherian rings. Let $\mathfrak q \subset S$ be a prime ideal lying over $\mathfrak p \subset R$. Let $K \in D(S)$ be perfect. Let $f_1, \ldots, f_r \in \mathfrak q S_\mathfrak q$ be a regular sequence such that $S_\mathfrak q/(f_1, \ldots, f_r)$ is flat over $R$ and such that $K \otimes_S^\mathbf{L} S_\mathfrak q$ is isomorphic to the Koszul complex on $f_1, \ldots, f_r$. Then there exists a $g \in S$, $g \not \in \mathfrak q$ such that \begin{enumerate} \item $f_1, \ldots, f_r$ are the images of $f'_1, \ldots, f'_r \in S_g$, \item $f'_1, \ldots, f'_r$ form a regular sequence in $S_g$, \item $S_g/(f'_1, \ldots, f'_r)$ is flat over $R$, \item $K \otimes_S^\mathbf{L} S_g$ is isomorphic to the Koszul complex on $f_1, \ldots, f_r$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-isomorphism-in-neighbourhood} Let $S$ be a Noetherian scheme. Let $s \in S$. Let $p : X \to Y$ be a morphism of schemes over $S$. Assume \begin{enumerate} \item $Y \to S$ and $X \to S$ proper, \item $X$ is flat over $S$, \item $X_s \to Y_s$ an isomorphism. \end{enumerate} Then there exists an open neighbourhood $U \subset S$ of $s$ such that the base change $X_U \to Y_U$ is an isomorphism. \end{lemma} 
\begin{lemma} \label{lemma-no-deformations} Let $k$ be a field. Let $S$ be a finite type scheme over $k$ with $k$-rational point $s$. Let $Y \to S$ be a smooth proper morphism. Let $X = Y_s \times S \to S$ be the constant family with fibre $Y_s$. Let $K$ be the Fourier-Mukai kernel of a relative equivalence from $X$ to $Y$ over $S$. Assume the restriction $$ L(Y_s \times_S Y_s \to X \times_S Y)^*K \cong  \Delta_{Y_s/k, *} \mathcal{O}_{Y_s} $$ in $D(\mathcal{O}_{Y_s \times Y_s})$. Then there is an open neighbourhood $s \in U \subset S$ such that $Y|_U$ is isomorphic to $Y_s \times U$ over $U$. \end{lemma} 
\begin{lemma} \label{lemma-no-deformations-better} Let $k$ be an algebraically closed field. Let $X$ be a smooth proper scheme over $k$. Let $f : Y \to S$ be a smooth proper morphism with $S$ of finite type over $k$. Let $K$ be the Fourier-Mukai kernel of a relative equivalence from $X \times S$ to $Y$ over $S$. Then $S$ can be covered by open subschemes $U$ such that there is a $U$-isomorphism $f^{-1}(U) \cong Y_0 \times U$ for some $Y_0$ proper and smooth over $k$. \end{lemma} 
\begin{lemma} \label{lemma-countable-finite-type} Let $R$ be a countable Noetherian ring. Then the category of schemes of finite type over $R$ is countable. \end{lemma} 
\begin{lemma} \label{lemma-countable-abelian} Let $\mathcal{A}$ be a countable abelian category. Then $D^b(\mathcal{A})$ is countable. \end{lemma} 
\begin{lemma} \label{lemma-countable-perfect} Let $X$ be a scheme of finite type over a countable Noetherian ring. Then the categories $D_{perf}(\mathcal{O}_X)$ and $D^b_{\textit{Coh}}(\mathcal{O}_X)$ are countable. \end{lemma} 
\begin{lemma} \label{lemma-countable-isos} Let $K$ be an algebraically closed field. Let $S$ be a finite type scheme over $K$. Let $X \to S$ and $Y \to S$ be finite type morphisms. There exists a countable set $I$ and for $i \in I$ a pair $(S_i \to S, h_i)$ with the following properties \begin{enumerate} \item $S_i \to S$ is a morphism of finite type, set $X_i = X \times_S S_i$ and $Y_i = Y \times_S S_i$, \item $h_i : X_i \to Y_i$ is an isomorphism over $S_i$, and \item for any closed point $s \in S(K)$ if $X_s \cong Y_s$ over $K = \kappa(s)$ then $s$ is in the image of $S_i \to S$ for some $i$. \end{enumerate} \end{lemma} 
\begin{lemma} \label{lemma-countable-equivs} Let $K$ be an algebraically closed field. There exists a countable set $I$ and for $i \in I$ a pair $(S_i/K, X_i \to S_i, Y_i \to S_i, M_i)$ with the following properties \begin{enumerate} \item $S_i$ is a scheme of finite type over $K$, \item $X_i \to S_i$ and $Y_i \to S_i$ are proper smooth morphisms of schemes, \item $M_i \in D_{perf}(\mathcal{O}_{X_i \times_{S_i} Y_i})$ is the Fourier-Mukai kernel of a relative equivalence from $X_i$ to $Y_i$ over $S_i$, and \item for any smooth proper schemes $X$ and $Y$ over $K$ such that there is a $K$-linear exact equivalence $D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$ there exists an $i \in I$ and a $s \in S_i(K)$ such that $X \cong (X_i)_s$ and $Y \cong (Y_i)_s$. \end{enumerate} \end{lemma} 
\begin{definition} \label{definition-derived-equivalent} Let $k$ be a field. Let $X$ and $Y$ be smooth projective schemes over $k$. We say $X$ and $Y$ are {\it derived equivalent} if there exists a $k$-linear exact equivalence $D_{perf}(\mathcal{O}_X) \to D_{perf}(\mathcal{O}_Y)$. \end{definition} 
\begin{theorem} \label{theorem-countable} \begin{reference} Slight improvement of \cite{AT} \end{reference} Let $K$ be an algebraically closed field. Let $\mathbf{X}$ be a smooth proper scheme over $K$. There are at most countably many isomorphism classes of smooth proper schemes $\mathbf{Y}$ over $K$ which are derived equivalent to $\mathbf{X}$. \end{theorem} 
